<dec f='linux-4.14.y/include/drm/drm_modeset_helper_vtables.h' l='1028' type='int (*)(struct drm_plane *, struct drm_plane_state *)'/>
<offset>0</offset>
<doc f='linux-4.14.y/include/drm/drm_modeset_helper_vtables.h' l='1000'>/**
	 * @prepare_fb:
	 *
	 * This hook is to prepare a framebuffer for scanout by e.g. pinning
	 * it&apos;s backing storage or relocating it into a contiguous block of
	 * VRAM. Other possible preparatory work includes flushing caches.
	 *
	 * This function must not block for outstanding rendering, since it is
	 * called in the context of the atomic IOCTL even for async commits to
	 * be able to return any errors to userspace. Instead the recommended
	 * way is to fill out the fence member of the passed-in
	 * &amp;drm_plane_state. If the driver doesn&apos;t support native fences then
	 * equivalent functionality should be implemented through private
	 * members in the plane structure.
	 *
	 * The helpers will call @cleanup_fb with matching arguments for every
	 * successful call to this hook.
	 *
	 * This callback is used by the atomic modeset helpers and by the
	 * transitional plane helpers, but it is optional.
	 *
	 * RETURNS:
	 *
	 * 0 on success or one of the following negative error codes allowed by
	 * the &amp;drm_mode_config_funcs.atomic_commit vfunc. When using helpers
	 * this callback is the only one which can fail an atomic commit,
	 * everything else must complete successfully.
	 */</doc>
<use f='linux-4.14.y/drivers/gpu/drm/drm_atomic_helper.c' l='1946' u='r' c='drm_atomic_helper_prepare_planes'/>
<use f='linux-4.14.y/drivers/gpu/drm/drm_atomic_helper.c' l='1947' u='r' c='drm_atomic_helper_prepare_planes'/>
<use f='linux-4.14.y/drivers/gpu/drm/drm_plane_helper.c' l='457' u='r' c='drm_plane_helper_commit'/>
<use f='linux-4.14.y/drivers/gpu/drm/drm_plane_helper.c' l='458' u='r' c='drm_plane_helper_commit'/>
<use f='linux-4.14.y/drivers/gpu/drm/drm_simple_kms_helper.c' l='159' u='w'/>
<use f='linux-4.14.y/drivers/gpu/drm/qxl/qxl_display.c' l='833' u='w'/>
<use f='linux-4.14.y/drivers/gpu/drm/qxl/qxl_display.c' l='855' u='w'/>
<use f='linux-4.14.y/drivers/gpu/drm/vmwgfx/vmwgfx_ldu.c' l='368' u='w'/>
<use f='linux-4.14.y/drivers/gpu/drm/vmwgfx/vmwgfx_ldu.c' l='376' u='w'/>
<use f='linux-4.14.y/drivers/gpu/drm/vmwgfx/vmwgfx_scrn.c' l='579' u='w'/>
<use f='linux-4.14.y/drivers/gpu/drm/vmwgfx/vmwgfx_scrn.c' l='587' u='w'/>
<use f='linux-4.14.y/drivers/gpu/drm/vmwgfx/vmwgfx_stdu.c' l='1390' u='w'/>
<use f='linux-4.14.y/drivers/gpu/drm/vmwgfx/vmwgfx_stdu.c' l='1398' u='w'/>
