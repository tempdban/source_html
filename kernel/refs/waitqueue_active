<def f='linux-4.18.y/include/linux/wait.h' l='124' ll='127' type='int waitqueue_active(struct wait_queue_head * wq_head)'/>
<use f='linux-4.18.y/include/linux/wait.h' l='147' u='c' c='wq_has_sleeper'/>
<doc f='linux-4.18.y/include/linux/wait.h' l='94'>/**
 * waitqueue_active -- locklessly test for waiters on the queue
 * @wq_head: the waitqueue to test for waiters
 *
 * returns true if the wait list is not empty
 *
 * NOTE: this function is lockless and requires care, incorrect usage _will_
 * lead to sporadic and non-obvious failure.
 *
 * Use either while holding wait_queue_head::lock or when used for wakeups
 * with an extra smp_mb() like:
 *
 *      CPU0 - waker                    CPU1 - waiter
 *
 *                                      for (;;) {
 *      @cond = true;                     prepare_to_wait(&amp;wq_head, &amp;wait, state);
 *      smp_mb();                         // smp_mb() from set_current_state()
 *      if (waitqueue_active(wq_head))         if (@cond)
 *        wake_up(wq_head);                      break;
 *                                        schedule();
 *                                      }
 *                                      finish_wait(&amp;wq_head, &amp;wait);
 *
 * Because without the explicit smp_mb() it&apos;s possible for the
 * waitqueue_active() load to get hoisted over the @cond store such that we&apos;ll
 * observe an empty wait list while the waiter might not observe @cond.
 *
 * Also note that this &apos;optimization&apos; trades a spin_lock() for an smp_mb(),
 * which (when the lock is uncontended) are of roughly equal cost.
 */</doc>
<use f='linux-4.18.y/block/blk-core.c' l='1262' u='c' c='__freed_request'/>
<use f='linux-4.18.y/drivers/android/binder.c' l='4384' u='c' c='binder_thread_release'/>
<use f='linux-4.18.y/drivers/md/md.c' l='9386' u='c' c='md_exit'/>
<use f='linux-4.18.y/drivers/md/raid1.c' l='1469' u='c' c='raid1_write_request'/>
<use f='linux-4.18.y/drivers/net/tap.c' l='489' u='c' c='tap_sock_write_space'/>
<use f='linux-4.18.y/drivers/net/tun.c' l='2386' u='c' c='tun_sock_write_space'/>
<use f='linux-4.18.y/drivers/tty/tty_io.c' l='1687' u='c' c='tty_release'/>
<use f='linux-4.18.y/drivers/tty/tty_io.c' l='1691' u='c' c='tty_release'/>
<use f='linux-4.18.y/drivers/tty/tty_io.c' l='1697' u='c' c='tty_release'/>
<use f='linux-4.18.y/drivers/tty/tty_io.c' l='1701' u='c' c='tty_release'/>
<use f='linux-4.18.y/drivers/usb/gadget/function/f_fs.c' l='1635' u='c' c='ffs_data_put'/>
<use f='linux-4.18.y/drivers/usb/gadget/function/f_fs.c' l='1636' u='c' c='ffs_data_put'/>
<use f='linux-4.18.y/drivers/usb/gadget/function/f_fs.c' l='1637' u='c' c='ffs_data_put'/>
<use f='linux-4.18.y/fs/aio.c' l='1131' u='c' c='aio_complete'/>
<use f='linux-4.18.y/fs/eventfd.c' l='62' u='c' c='eventfd_signal'/>
<use f='linux-4.18.y/fs/eventfd.c' l='189' u='c' c='eventfd_ctx_remove_wait_queue'/>
<use f='linux-4.18.y/fs/eventfd.c' l='233' u='c' c='eventfd_read'/>
<use f='linux-4.18.y/fs/eventfd.c' l='283' u='c' c='eventfd_write'/>
<use f='linux-4.18.y/fs/eventpoll.c' l='738' u='c' c='ep_scan_ready_list'/>
<use f='linux-4.18.y/fs/eventpoll.c' l='740' u='c' c='ep_scan_ready_list'/>
<use f='linux-4.18.y/fs/eventpoll.c' l='813' u='c' c='ep_free'/>
<use f='linux-4.18.y/fs/eventpoll.c' l='1179' u='c' c='ep_poll_callback'/>
<use f='linux-4.18.y/fs/eventpoll.c' l='1198' u='c' c='ep_poll_callback'/>
<use f='linux-4.18.y/fs/eventpoll.c' l='1498' u='c' c='ep_insert'/>
<use f='linux-4.18.y/fs/eventpoll.c' l='1500' u='c' c='ep_insert'/>
<use f='linux-4.18.y/fs/eventpoll.c' l='1602' u='c' c='ep_modify'/>
<use f='linux-4.18.y/fs/eventpoll.c' l='1604' u='c' c='ep_modify'/>
<use f='linux-4.18.y/fs/f2fs/segment.c' l='630' u='c' c='f2fs_issue_flush'/>
<use f='linux-4.18.y/fs/fuse/dev.c' l='398' u='c' c='request_end'/>
<use f='linux-4.18.y/fs/fuse/file.c' l='2774' u='c' c='fuse_file_poll'/>
<use f='linux-4.18.y/fs/locks.c' l='342' u='c' c='locks_free_lock'/>
<use f='linux-4.18.y/include/linux/signalfd.h' l='21' u='c' c='signalfd_notify'/>
<use f='linux-4.18.y/fs/signalfd.c' l='44' u='c' c='signalfd_cleanup'/>
<use f='linux-4.18.y/fs/splice.c' l='169' u='c' c='wakeup_pipe_readers'/>
<use f='linux-4.18.y/fs/splice.c' l='459' u='c' c='wakeup_pipe_writers'/>
<use f='linux-4.18.y/kernel/events/uprobes.c' l='1353' u='c' c='xol_free_insn_slot'/>
<use f='linux-4.18.y/kernel/printk/printk.c' l='2883' u='c' c='wake_up_klogd'/>
<use f='linux-4.18.y/kernel/sched/wait_bit.c' l='124' u='c' c='__wake_up_bit'/>
<use f='linux-4.18.y/kernel/workqueue.c' l='3014' u='c' c='__cancel_work_timer'/>
<use f='linux-4.18.y/lib/sbitmap.c' l='447' u='c' c='sbq_wake_ptr'/>
<use f='linux-4.18.y/lib/sbitmap.c' l='540' u='c' c='sbitmap_queue_wake_all'/>
<use f='linux-4.18.y/lib/sbitmap.c' l='574' u='c' c='sbitmap_queue_show'/>
<use f='linux-4.18.y/mm/backing-dev.c' l='990' u='c' c='clear_wb_congested'/>
<use f='linux-4.18.y/mm/filemap.c' l='1054' u='c' c='wake_up_page_bit'/>
<use f='linux-4.18.y/mm/vmscan.c' l='2948' u='c' c='allow_direct_reclaim'/>
<use f='linux-4.18.y/mm/vmscan.c' l='3252' u='c' c='prepare_kswapd_sleep'/>
<use f='linux-4.18.y/mm/vmscan.c' l='3413' u='c' c='balance_pgdat'/>
<use f='linux-4.18.y/mm/vmscan.c' l='3659' u='c' c='wakeup_kswapd'/>
<use f='linux-4.18.y/net/core/sock.c' l='2860' u='c' c='release_sock'/>
