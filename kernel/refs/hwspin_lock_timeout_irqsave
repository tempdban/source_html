<def f='linux-4.18.y/include/linux/hwspinlock.h' l='228' ll='232' type='int hwspin_lock_timeout_irqsave(struct hwspinlock * hwlock, unsigned int to, unsigned long * flags)'/>
<use f='linux-4.18.y/drivers/base/regmap/regmap.c' l='435' u='c' c='regmap_lock_hwlock_irqsave'/>
<doc f='linux-4.18.y/include/linux/hwspinlock.h' l='210'>/**
 * hwspin_lock_timeout_irqsave() - lock hwspinlock, with timeout, disable irqs
 * @hwlock: the hwspinlock to be locked
 * @to: timeout value in msecs
 * @flags: a pointer to where the caller&apos;s interrupt state will be saved at
 *
 * This function locks the underlying @hwlock. If the @hwlock
 * is already taken, the function will busy loop waiting for it to
 * be released, but give up when @timeout msecs have elapsed.
 *
 * Upon a successful return from this function, preemption and local interrupts
 * are disabled (plus previous interrupt state is saved), so the caller must
 * not sleep, and is advised to release the hwspinlock as soon as possible.
 *
 * Returns 0 when the @hwlock was successfully taken, and an appropriate
 * error code otherwise (most notably an -ETIMEDOUT if the @hwlock is still
 * busy after @timeout msecs). The function will never sleep.
 */</doc>
