<dec f='linux-4.18.y/include/drm/drm_atomic_helper.h' l='96' type='int drm_atomic_helper_swap_state(struct drm_atomic_state * state, bool stall)'/>
<use f='linux-4.18.y/drivers/gpu/drm/drm_atomic_helper.c' l='1649' u='c' c='drm_atomic_helper_commit'/>
<def f='linux-4.18.y/drivers/gpu/drm/drm_atomic_helper.c' l='2480' ll='2588' type='int drm_atomic_helper_swap_state(struct drm_atomic_state * state, bool stall)'/>
<dec f='linux-4.18.y/drivers/gpu/drm/drm_atomic_helper.c' l='2589' type='int drm_atomic_helper_swap_state(struct drm_atomic_state * , bool )'/>
<use f='linux-4.18.y/drivers/gpu/drm/drm_atomic_helper.c' l='2589' c='drm_atomic_helper_swap_state'/>
<use f='linux-4.18.y/drivers/gpu/drm/drm_atomic_helper.c' l='2589' u='a'/>
<use f='linux-4.18.y/drivers/gpu/drm/drm_atomic_helper.c' l='2589' u='a'/>
<doc f='linux-4.18.y/drivers/gpu/drm/drm_atomic_helper.c' l='2445'>/**
 * drm_atomic_helper_swap_state - store atomic state into current sw state
 * @state: atomic state
 * @stall: stall for preceeding commits
 *
 * This function stores the atomic state into the current state pointers in all
 * driver objects. It should be called after all failing steps have been done
 * and succeeded, but before the actual hardware state is committed.
 *
 * For cleanup and error recovery the current state for all changed objects will
 * be swapped into @state.
 *
 * With that sequence it fits perfectly into the plane prepare/cleanup sequence:
 *
 * 1. Call drm_atomic_helper_prepare_planes() with the staged atomic state.
 *
 * 2. Do any other steps that might fail.
 *
 * 3. Put the staged state into the current state pointers with this function.
 *
 * 4. Actually commit the hardware state.
 *
 * 5. Call drm_atomic_helper_cleanup_planes() with @state, which since step 3
 * contains the old state. Also do any other cleanup required with that state.
 *
 * @stall must be set when nonblocking commits for this driver directly access
 * the &amp;drm_plane.state, &amp;drm_crtc.state or &amp;drm_connector.state pointer. With
 * the current atomic helpers this is almost always the case, since the helpers
 * don&apos;t pass the right state structures to the callbacks.
 *
 * Returns:
 *
 * Returns 0 on success. Can return -ERESTARTSYS when @stall is true and the
 * waiting for the previous commits has been interrupted.
 */</doc>
