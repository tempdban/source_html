<dec f='linux-4.18.y/fs/ntfs/logfile.h' l='302' type='bool ntfs_is_logfile_clean(struct inode * log_vi, const RESTART_PAGE_HEADER * rp)'/>
<def f='linux-4.18.y/fs/ntfs/logfile.c' l='680' ll='714' type='bool ntfs_is_logfile_clean(struct inode * log_vi, const RESTART_PAGE_HEADER * rp)'/>
<doc f='linux-4.18.y/fs/ntfs/logfile.c' l='660'>/**
 * ntfs_is_logfile_clean - check in the journal if the volume is clean
 * @log_vi:	struct inode of loaded journal $LogFile to check
 * @rp:		copy of the current restart page
 *
 * Analyze the $LogFile journal and return &apos;true&apos; if it indicates the volume was
 * shutdown cleanly and &apos;false&apos; if not.
 *
 * At present we only look at the two restart pages and ignore the log record
 * pages.  This is a little bit crude in that there will be a very small number
 * of cases where we think that a volume is dirty when in fact it is clean.
 * This should only affect volumes that have not been shutdown cleanly but did
 * not have any pending, non-check-pointed i/o, i.e. they were completely idle
 * at least for the five seconds preceding the unclean shutdown.
 *
 * This function assumes that the $LogFile journal has already been consistency
 * checked by a call to ntfs_check_logfile() and in particular if the $LogFile
 * is empty this function requires that NVolLogFileEmpty() is true otherwise an
 * empty volume will be reported as dirty.
 */</doc>
<use f='linux-4.18.y/fs/ntfs/super.c' l='1956' u='c' c='load_system_files'/>
