<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>utimes.c source code [linux-4.14.y/fs/utimes.c] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'linux-4.14.y/fs/utimes.c'; var root_path = '../..'; var data_path = '../../../data';</script>
<script src='../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='..'>linux-4.14.y</a>/<a href='./'>fs</a>/<a href='utimes.c.html'>utimes.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>// SPDX-License-Identifier: GPL-2.0</i></td></tr>
<tr><th id="2">2</th><td><u>#include <a href="../include/linux/file.h.html">&lt;linux/file.h&gt;</a></u></td></tr>
<tr><th id="3">3</th><td><u>#include <a href="../include/linux/mount.h.html">&lt;linux/mount.h&gt;</a></u></td></tr>
<tr><th id="4">4</th><td><u>#include <a href="../include/linux/namei.h.html">&lt;linux/namei.h&gt;</a></u></td></tr>
<tr><th id="5">5</th><td><u>#include <a href="../include/uapi/linux/utime.h.html">&lt;linux/utime.h&gt;</a></u></td></tr>
<tr><th id="6">6</th><td><u>#include <a href="../include/linux/syscalls.h.html">&lt;linux/syscalls.h&gt;</a></u></td></tr>
<tr><th id="7">7</th><td><u>#include <a href="../include/linux/uaccess.h.html">&lt;linux/uaccess.h&gt;</a></u></td></tr>
<tr><th id="8">8</th><td><u>#include <a href="../include/linux/compat.h.html">&lt;linux/compat.h&gt;</a></u></td></tr>
<tr><th id="9">9</th><td><u>#include <a href="../arch/x86/include/asm/unistd.h.html">&lt;asm/unistd.h&gt;</a></u></td></tr>
<tr><th id="10">10</th><td></td></tr>
<tr><th id="11">11</th><td><u>#<span data-ppcond="11">ifdef</span> <a class="macro" href="../arch/x86/include/asm/unistd.h.html#51" data-ref="_M/__ARCH_WANT_SYS_UTIME">__ARCH_WANT_SYS_UTIME</a></u></td></tr>
<tr><th id="12">12</th><td></td></tr>
<tr><th id="13">13</th><td><i>/*</i></td></tr>
<tr><th id="14">14</th><td><i> * sys_utime() can be implemented in user-level using sys_utimes().</i></td></tr>
<tr><th id="15">15</th><td><i> * Is this for backwards compatibility?  If so, why not move it</i></td></tr>
<tr><th id="16">16</th><td><i> * into the appropriate arch directory (for those architectures that</i></td></tr>
<tr><th id="17">17</th><td><i> * need it).</i></td></tr>
<tr><th id="18">18</th><td><i> */</i></td></tr>
<tr><th id="19">19</th><td></td></tr>
<tr><th id="20">20</th><td><i>/* If times==NULL, set access and modification to current time,</i></td></tr>
<tr><th id="21">21</th><td><i> * must be owner or have write permission.</i></td></tr>
<tr><th id="22">22</th><td><i> * Else, update from *times, must be owner or super user.</i></td></tr>
<tr><th id="23">23</th><td><i> */</i></td></tr>
<tr><th id="24">24</th><td><a class="macro" href="../include/linux/syscalls.h.html#197" title="static const char *types__utime[] = { &quot;char *&quot;, &quot;struct utimbuf *&quot; }; static const char *args__utime[] = { &quot;filename&quot;, &quot;times&quot; }; static struct syscall_metadata __syscall_meta__utime; static struct trace_event_call __attribute__((__used__)) event_enter__utime = { .class = &amp;event_class_syscall_enter, { .name = &quot;sys_enter&quot;&quot;_utime&quot;, }, .event.funcs = &amp;enter_syscall_print_funcs, .data = (void *)&amp;__syscall_meta__utime, .flags = TRACE_EVENT_FL_CAP_ANY, }; static struct trace_event_call __attribute__((__used__)) __attribute__((section(&quot;_ftrace_events&quot;))) *__event_enter__utime = &amp;event_enter__utime;; static struct syscall_metadata __syscall_meta__utime; static struct trace_event_call __attribute__((__used__)) event_exit__utime = { .class = &amp;event_class_syscall_exit, { .name = &quot;sys_exit&quot;&quot;_utime&quot;, }, .event.funcs = &amp;exit_syscall_print_funcs, .data = (void *)&amp;__syscall_meta__utime, .flags = TRACE_EVENT_FL_CAP_ANY, }; static struct trace_event_call __attribute__((__used__)) __attribute__((section(&quot;_ftrace_events&quot;))) *__event_exit__utime = &amp;event_exit__utime;; static struct syscall_metadata __attribute__((__used__)) __syscall_meta__utime = { .name = &quot;sys&quot;&quot;_utime&quot;, .syscall_nr = -1, .nb_args = 2, .types = 2 ? types__utime : ((void *)0), .args = 2 ? args__utime : ((void *)0), .enter_event = &amp;event_enter__utime, .exit_event = &amp;event_exit__utime, .enter_fields = { &amp;(__syscall_meta__utime.enter_fields), &amp;(__syscall_meta__utime.enter_fields) }, }; static struct syscall_metadata __attribute__((__used__)) __attribute__((section(&quot;__syscalls_metadata&quot;))) *__p_syscall_meta__utime = &amp;__syscall_meta__utime; long sys_utime(char * filename, struct utimbuf * times) __attribute__((alias(&quot;SyS_utime&quot;))); static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long SYSC_utime(char * filename, struct utimbuf * times); long SyS_utime(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct utimbuf *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct utimbuf *)0), typeof(0ULL))), 0LL, 0L)) times); long SyS_utime(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct utimbuf *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct utimbuf *)0), typeof(0ULL))), 0LL, 0L)) times) { long ret = SYSC_utime(( char *) filename, ( struct utimbuf *) times); (void)(sizeof(struct { int:(-!!(!(__builtin_types_compatible_p(typeof(( char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( char *)0), typeof(0ULL))) &amp;&amp; sizeof(char *) &gt; sizeof(long))); })), (void)(sizeof(struct { int:(-!!(!(__builtin_types_compatible_p(typeof(( struct utimbuf *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct utimbuf *)0), typeof(0ULL))) &amp;&amp; sizeof(struct utimbuf *) &gt; sizeof(long))); })); do { } while (0); return ret; } static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long SYSC_utime(char * filename, struct utimbuf * times)" data-ref="_M/SYSCALL_DEFINE2">SYSCALL_DEFINE2</a>(utime, <em>char</em> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col1 decl" id="1filename" title='filename' data-type='char *' data-ref="1filename"><dfn class="local col3 decl" id="3filename" title='filename' data-type='char *' data-ref="3filename"><dfn class="local col5 decl" id="5filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="5filename"><dfn class="local col7 decl" id="7filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="7filename"><a class="local col7 ref" href="#24" title='filename' data-ref="7filename"><dfn class="local col9 decl" id="9filename" title='filename' data-type='char *' data-ref="9filename">filename</dfn></a></dfn></dfn></dfn></dfn>, <b>struct</b> <a class="type" href="../include/uapi/linux/utime.h.html#utimbuf" title='utimbuf' data-ref="utimbuf">utimbuf</a> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col2 decl" id="2times" title='times' data-type='struct utimbuf *' data-ref="2times"><dfn class="local col4 decl" id="4times" title='times' data-type='struct utimbuf *' data-ref="4times"><dfn class="local col6 decl" id="6times" title='times' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct utimbuf *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct utimbuf *)0), typeof (0ULL))), 0LL, 0L))' data-ref="6times"><dfn class="local col8 decl" id="8times" title='times' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct utimbuf *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct utimbuf *)0), typeof (0ULL))), 0LL, 0L))' data-ref="8times"><a class="local col8 ref" href="#24" title='times' data-ref="8times"><dfn class="local col0 decl" id="10times" title='times' data-type='struct utimbuf *' data-ref="10times">times</dfn></a></dfn></dfn></dfn></dfn>)</td></tr>
<tr><th id="25">25</th><td>{</td></tr>
<tr><th id="26">26</th><td>	<b>struct</b> <a class="macro" href="../include/linux/time64.h.html#16" title="timespec" data-ref="_M/timespec64">timespec64</a> <dfn class="local col1 decl" id="11tv" title='tv' data-type='struct timespec [2]' data-ref="11tv">tv</dfn>[<var>2</var>];</td></tr>
<tr><th id="27">27</th><td></td></tr>
<tr><th id="28">28</th><td>	<b>if</b> (<a class="local col0 ref" href="#24" title='times' data-ref="10times">times</a>) {</td></tr>
<tr><th id="29">29</th><td>		<b>if</b> (<a class="macro" href="../arch/x86/include/asm/uaccess.h.html#171" title="({ int __ret_gu; register __typeof__(__builtin_choose_expr(sizeof(*(&amp;times-&gt;actime)) &gt; sizeof(0UL), 0ULL, 0UL)) __val_gu asm(&quot;%&quot;&quot;rdx&quot;); (void)0; might_fault(); asm volatile(&quot;call __get_user_%P4&quot; : &quot;=a&quot; (__ret_gu), &quot;=r&quot; (__val_gu), &quot;+r&quot; (current_stack_pointer) : &quot;0&quot; (&amp;times-&gt;actime), &quot;i&quot; (sizeof(*(&amp;times-&gt;actime)))); (tv[0].tv_sec) = ( __typeof__(*(&amp;times-&gt;actime))) __val_gu; __builtin_expect(__ret_gu, 0); })" data-ref="_M/get_user">get_user</a>(<a class="local col1 ref" href="#11tv" title='tv' data-ref="11tv">tv</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec">tv_sec</a>, &amp;<a class="local col0 ref" href="#24" title='times' data-ref="10times">times</a>-&gt;<a class="ref field" href="../include/uapi/linux/utime.h.html#utimbuf::actime" title='utimbuf::actime' data-ref="utimbuf::actime">actime</a>) ||</td></tr>
<tr><th id="30">30</th><td>		    <a class="macro" href="../arch/x86/include/asm/uaccess.h.html#171" title="({ int __ret_gu; register __typeof__(__builtin_choose_expr(sizeof(*(&amp;times-&gt;modtime)) &gt; sizeof(0UL), 0ULL, 0UL)) __val_gu asm(&quot;%&quot;&quot;rdx&quot;); (void)0; might_fault(); asm volatile(&quot;call __get_user_%P4&quot; : &quot;=a&quot; (__ret_gu), &quot;=r&quot; (__val_gu), &quot;+r&quot; (current_stack_pointer) : &quot;0&quot; (&amp;times-&gt;modtime), &quot;i&quot; (sizeof(*(&amp;times-&gt;modtime)))); (tv[1].tv_sec) = ( __typeof__(*(&amp;times-&gt;modtime))) __val_gu; __builtin_expect(__ret_gu, 0); })" data-ref="_M/get_user">get_user</a>(<a class="local col1 ref" href="#11tv" title='tv' data-ref="11tv">tv</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec">tv_sec</a>, &amp;<a class="local col0 ref" href="#24" title='times' data-ref="10times">times</a>-&gt;<a class="ref field" href="../include/uapi/linux/utime.h.html#utimbuf::modtime" title='utimbuf::modtime' data-ref="utimbuf::modtime">modtime</a>))</td></tr>
<tr><th id="31">31</th><td>			<b>return</b> -<a class="macro" href="../include/uapi/asm-generic/errno-base.h.html#18" title="14" data-ref="_M/EFAULT">EFAULT</a>;</td></tr>
<tr><th id="32">32</th><td>		<a class="local col1 ref" href="#11tv" title='tv' data-ref="11tv">tv</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> = <var>0</var>;</td></tr>
<tr><th id="33">33</th><td>		<a class="local col1 ref" href="#11tv" title='tv' data-ref="11tv">tv</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> = <var>0</var>;</td></tr>
<tr><th id="34">34</th><td>	}</td></tr>
<tr><th id="35">35</th><td>	<b>return</b> <a class="ref fn" href="#do_utimes" title='do_utimes' data-ref="do_utimes">do_utimes</a>(<a class="macro" href="../include/uapi/linux/fcntl.h.html#78" title="-100" data-ref="_M/AT_FDCWD">AT_FDCWD</a>, <a class="local col9 ref" href="#24" title='filename' data-ref="9filename">filename</a>, <a class="local col0 ref" href="#24" title='times' data-ref="10times">times</a> ? <a class="local col1 ref" href="#11tv" title='tv' data-ref="11tv">tv</a> : <a class="macro" href="../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <var>0</var>);</td></tr>
<tr><th id="36">36</th><td>}</td></tr>
<tr><th id="37">37</th><td></td></tr>
<tr><th id="38">38</th><td><u>#<span data-ppcond="11">endif</span></u></td></tr>
<tr><th id="39">39</th><td></td></tr>
<tr><th id="40">40</th><td><em>static</em> <a class="typedef" href="../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="tu decl def fn" id="nsec_valid" title='nsec_valid' data-type='bool nsec_valid(long nsec)' data-ref="nsec_valid">nsec_valid</dfn>(<em>long</em> <dfn class="local col2 decl" id="12nsec" title='nsec' data-type='long' data-ref="12nsec">nsec</dfn>)</td></tr>
<tr><th id="41">41</th><td>{</td></tr>
<tr><th id="42">42</th><td>	<b>if</b> (<a class="local col2 ref" href="#12nsec" title='nsec' data-ref="12nsec">nsec</a> == <a class="macro" href="../include/linux/stat.h.html#16" title="((1l &lt;&lt; 30) - 2l)" data-ref="_M/UTIME_OMIT">UTIME_OMIT</a> || <a class="local col2 ref" href="#12nsec" title='nsec' data-ref="12nsec">nsec</a> == <a class="macro" href="../include/linux/stat.h.html#15" title="((1l &lt;&lt; 30) - 1l)" data-ref="_M/UTIME_NOW">UTIME_NOW</a>)</td></tr>
<tr><th id="43">43</th><td>		<b>return</b> <a class="enum" href="../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>;</td></tr>
<tr><th id="44">44</th><td></td></tr>
<tr><th id="45">45</th><td>	<b>return</b> <a class="local col2 ref" href="#12nsec" title='nsec' data-ref="12nsec">nsec</a> &gt;= <var>0</var> &amp;&amp; <a class="local col2 ref" href="#12nsec" title='nsec' data-ref="12nsec">nsec</a> &lt;= <var>999999999</var>;</td></tr>
<tr><th id="46">46</th><td>}</td></tr>
<tr><th id="47">47</th><td></td></tr>
<tr><th id="48">48</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="utimes_common" title='utimes_common' data-type='int utimes_common(const struct path * path, struct timespec * times)' data-ref="utimes_common">utimes_common</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../include/linux/path.h.html#path" title='path' data-ref="path">path</a> *<dfn class="local col3 decl" id="13path" title='path' data-type='const struct path *' data-ref="13path">path</dfn>, <b>struct</b> <a class="macro" href="../include/linux/time64.h.html#16" title="timespec" data-ref="_M/timespec64">timespec64</a> *<dfn class="local col4 decl" id="14times" title='times' data-type='struct timespec *' data-ref="14times">times</dfn>)</td></tr>
<tr><th id="49">49</th><td>{</td></tr>
<tr><th id="50">50</th><td>	<em>int</em> <dfn class="local col5 decl" id="15error" title='error' data-type='int' data-ref="15error">error</dfn>;</td></tr>
<tr><th id="51">51</th><td>	<b>struct</b> <a class="type" href="../include/linux/fs.h.html#iattr" title='iattr' data-ref="iattr">iattr</a> <dfn class="local col6 decl" id="16newattrs" title='newattrs' data-type='struct iattr' data-ref="16newattrs">newattrs</dfn>;</td></tr>
<tr><th id="52">52</th><td>	<b>struct</b> <a class="type" href="../include/linux/fs.h.html#inode" title='inode' data-ref="inode">inode</a> *<dfn class="local col7 decl" id="17inode" title='inode' data-type='struct inode *' data-ref="17inode">inode</dfn> = <a class="local col3 ref" href="#13path" title='path' data-ref="13path">path</a>-&gt;<a class="ref field" href="../include/linux/path.h.html#path::dentry" title='path::dentry' data-ref="path::dentry">dentry</a>-&gt;<a class="ref field" href="../include/linux/dcache.h.html#dentry::d_inode" title='dentry::d_inode' data-ref="dentry::d_inode">d_inode</a>;</td></tr>
<tr><th id="53">53</th><td>	<b>struct</b> <a class="type" href="../include/linux/fs.h.html#inode" title='inode' data-ref="inode">inode</a> *<dfn class="local col8 decl" id="18delegated_inode" title='delegated_inode' data-type='struct inode *' data-ref="18delegated_inode">delegated_inode</dfn> = <a class="macro" href="../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="54">54</th><td></td></tr>
<tr><th id="55">55</th><td>	<a class="local col5 ref" href="#15error" title='error' data-ref="15error">error</a> = <a class="ref fn" href="../include/linux/mount.h.html#mnt_want_write" title='mnt_want_write' data-ref="mnt_want_write">mnt_want_write</a>(<a class="local col3 ref" href="#13path" title='path' data-ref="13path">path</a>-&gt;<a class="ref field" href="../include/linux/path.h.html#path::mnt" title='path::mnt' data-ref="path::mnt">mnt</a>);</td></tr>
<tr><th id="56">56</th><td>	<b>if</b> (<a class="local col5 ref" href="#15error" title='error' data-ref="15error">error</a>)</td></tr>
<tr><th id="57">57</th><td>		<b>goto</b> <a class="lbl" href="#19out" data-ref="19out">out</a>;</td></tr>
<tr><th id="58">58</th><td></td></tr>
<tr><th id="59">59</th><td>	<b>if</b> (<a class="local col4 ref" href="#14times" title='times' data-ref="14times">times</a> &amp;&amp; <a class="local col4 ref" href="#14times" title='times' data-ref="14times">times</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> == <a class="macro" href="../include/linux/stat.h.html#15" title="((1l &lt;&lt; 30) - 1l)" data-ref="_M/UTIME_NOW">UTIME_NOW</a> &amp;&amp;</td></tr>
<tr><th id="60">60</th><td>		     <a class="local col4 ref" href="#14times" title='times' data-ref="14times">times</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> == <a class="macro" href="../include/linux/stat.h.html#15" title="((1l &lt;&lt; 30) - 1l)" data-ref="_M/UTIME_NOW">UTIME_NOW</a>)</td></tr>
<tr><th id="61">61</th><td>		<a class="local col4 ref" href="#14times" title='times' data-ref="14times">times</a> = <a class="macro" href="../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="62">62</th><td></td></tr>
<tr><th id="63">63</th><td>	<a class="local col6 ref" href="#16newattrs" title='newattrs' data-ref="16newattrs">newattrs</a>.<a class="ref field" href="../include/linux/fs.h.html#iattr::ia_valid" title='iattr::ia_valid' data-ref="iattr::ia_valid">ia_valid</a> = <a class="macro" href="../include/linux/fs.h.html#173" title="(1 &lt;&lt; 6)" data-ref="_M/ATTR_CTIME">ATTR_CTIME</a> | <a class="macro" href="../include/linux/fs.h.html#172" title="(1 &lt;&lt; 5)" data-ref="_M/ATTR_MTIME">ATTR_MTIME</a> | <a class="macro" href="../include/linux/fs.h.html#171" title="(1 &lt;&lt; 4)" data-ref="_M/ATTR_ATIME">ATTR_ATIME</a>;</td></tr>
<tr><th id="64">64</th><td>	<b>if</b> (<a class="local col4 ref" href="#14times" title='times' data-ref="14times">times</a>) {</td></tr>
<tr><th id="65">65</th><td>		<b>if</b> (<a class="local col4 ref" href="#14times" title='times' data-ref="14times">times</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> == <a class="macro" href="../include/linux/stat.h.html#16" title="((1l &lt;&lt; 30) - 2l)" data-ref="_M/UTIME_OMIT">UTIME_OMIT</a>)</td></tr>
<tr><th id="66">66</th><td>			<a class="local col6 ref" href="#16newattrs" title='newattrs' data-ref="16newattrs">newattrs</a>.<a class="ref field" href="../include/linux/fs.h.html#iattr::ia_valid" title='iattr::ia_valid' data-ref="iattr::ia_valid">ia_valid</a> &amp;= ~<a class="macro" href="../include/linux/fs.h.html#171" title="(1 &lt;&lt; 4)" data-ref="_M/ATTR_ATIME">ATTR_ATIME</a>;</td></tr>
<tr><th id="67">67</th><td>		<b>else</b> <b>if</b> (<a class="local col4 ref" href="#14times" title='times' data-ref="14times">times</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> != <a class="macro" href="../include/linux/stat.h.html#15" title="((1l &lt;&lt; 30) - 1l)" data-ref="_M/UTIME_NOW">UTIME_NOW</a>) {</td></tr>
<tr><th id="68">68</th><td>			<a class="local col6 ref" href="#16newattrs" title='newattrs' data-ref="16newattrs">newattrs</a>.<a class="ref field" href="../include/linux/fs.h.html#iattr::ia_atime" title='iattr::ia_atime' data-ref="iattr::ia_atime">ia_atime</a>.<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec">tv_sec</a> = <a class="local col4 ref" href="#14times" title='times' data-ref="14times">times</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec">tv_sec</a>;</td></tr>
<tr><th id="69">69</th><td>			<a class="local col6 ref" href="#16newattrs" title='newattrs' data-ref="16newattrs">newattrs</a>.<a class="ref field" href="../include/linux/fs.h.html#iattr::ia_atime" title='iattr::ia_atime' data-ref="iattr::ia_atime">ia_atime</a>.<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> = <a class="local col4 ref" href="#14times" title='times' data-ref="14times">times</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a>;</td></tr>
<tr><th id="70">70</th><td>			<a class="local col6 ref" href="#16newattrs" title='newattrs' data-ref="16newattrs">newattrs</a>.<a class="ref field" href="../include/linux/fs.h.html#iattr::ia_valid" title='iattr::ia_valid' data-ref="iattr::ia_valid">ia_valid</a> |= <a class="macro" href="../include/linux/fs.h.html#174" title="(1 &lt;&lt; 7)" data-ref="_M/ATTR_ATIME_SET">ATTR_ATIME_SET</a>;</td></tr>
<tr><th id="71">71</th><td>		}</td></tr>
<tr><th id="72">72</th><td></td></tr>
<tr><th id="73">73</th><td>		<b>if</b> (<a class="local col4 ref" href="#14times" title='times' data-ref="14times">times</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> == <a class="macro" href="../include/linux/stat.h.html#16" title="((1l &lt;&lt; 30) - 2l)" data-ref="_M/UTIME_OMIT">UTIME_OMIT</a>)</td></tr>
<tr><th id="74">74</th><td>			<a class="local col6 ref" href="#16newattrs" title='newattrs' data-ref="16newattrs">newattrs</a>.<a class="ref field" href="../include/linux/fs.h.html#iattr::ia_valid" title='iattr::ia_valid' data-ref="iattr::ia_valid">ia_valid</a> &amp;= ~<a class="macro" href="../include/linux/fs.h.html#172" title="(1 &lt;&lt; 5)" data-ref="_M/ATTR_MTIME">ATTR_MTIME</a>;</td></tr>
<tr><th id="75">75</th><td>		<b>else</b> <b>if</b> (<a class="local col4 ref" href="#14times" title='times' data-ref="14times">times</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> != <a class="macro" href="../include/linux/stat.h.html#15" title="((1l &lt;&lt; 30) - 1l)" data-ref="_M/UTIME_NOW">UTIME_NOW</a>) {</td></tr>
<tr><th id="76">76</th><td>			<a class="local col6 ref" href="#16newattrs" title='newattrs' data-ref="16newattrs">newattrs</a>.<a class="ref field" href="../include/linux/fs.h.html#iattr::ia_mtime" title='iattr::ia_mtime' data-ref="iattr::ia_mtime">ia_mtime</a>.<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec">tv_sec</a> = <a class="local col4 ref" href="#14times" title='times' data-ref="14times">times</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec">tv_sec</a>;</td></tr>
<tr><th id="77">77</th><td>			<a class="local col6 ref" href="#16newattrs" title='newattrs' data-ref="16newattrs">newattrs</a>.<a class="ref field" href="../include/linux/fs.h.html#iattr::ia_mtime" title='iattr::ia_mtime' data-ref="iattr::ia_mtime">ia_mtime</a>.<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> = <a class="local col4 ref" href="#14times" title='times' data-ref="14times">times</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a>;</td></tr>
<tr><th id="78">78</th><td>			<a class="local col6 ref" href="#16newattrs" title='newattrs' data-ref="16newattrs">newattrs</a>.<a class="ref field" href="../include/linux/fs.h.html#iattr::ia_valid" title='iattr::ia_valid' data-ref="iattr::ia_valid">ia_valid</a> |= <a class="macro" href="../include/linux/fs.h.html#175" title="(1 &lt;&lt; 8)" data-ref="_M/ATTR_MTIME_SET">ATTR_MTIME_SET</a>;</td></tr>
<tr><th id="79">79</th><td>		}</td></tr>
<tr><th id="80">80</th><td>		<i>/*</i></td></tr>
<tr><th id="81">81</th><td><i>		 * Tell setattr_prepare(), that this is an explicit time</i></td></tr>
<tr><th id="82">82</th><td><i>		 * update, even if neither ATTR_ATIME_SET nor ATTR_MTIME_SET</i></td></tr>
<tr><th id="83">83</th><td><i>		 * were used.</i></td></tr>
<tr><th id="84">84</th><td><i>		 */</i></td></tr>
<tr><th id="85">85</th><td>		<a class="local col6 ref" href="#16newattrs" title='newattrs' data-ref="16newattrs">newattrs</a>.<a class="ref field" href="../include/linux/fs.h.html#iattr::ia_valid" title='iattr::ia_valid' data-ref="iattr::ia_valid">ia_valid</a> |= <a class="macro" href="../include/linux/fs.h.html#183" title="(1 &lt;&lt; 16)" data-ref="_M/ATTR_TIMES_SET">ATTR_TIMES_SET</a>;</td></tr>
<tr><th id="86">86</th><td>	} <b>else</b> {</td></tr>
<tr><th id="87">87</th><td>		<a class="local col6 ref" href="#16newattrs" title='newattrs' data-ref="16newattrs">newattrs</a>.<a class="ref field" href="../include/linux/fs.h.html#iattr::ia_valid" title='iattr::ia_valid' data-ref="iattr::ia_valid">ia_valid</a> |= <a class="macro" href="../include/linux/fs.h.html#184" title="(1 &lt;&lt; 17)" data-ref="_M/ATTR_TOUCH">ATTR_TOUCH</a>;</td></tr>
<tr><th id="88">88</th><td>	}</td></tr>
<tr><th id="89">89</th><td><dfn class="lbl" id="20retry_deleg" data-ref="20retry_deleg">retry_deleg</dfn>:</td></tr>
<tr><th id="90">90</th><td>	<a class="ref fn" href="../include/linux/fs.h.html#inode_lock" title='inode_lock' data-ref="inode_lock">inode_lock</a>(<a class="local col7 ref" href="#17inode" title='inode' data-ref="17inode">inode</a>);</td></tr>
<tr><th id="91">91</th><td>	<a class="local col5 ref" href="#15error" title='error' data-ref="15error">error</a> = <a class="ref fn" href="../include/linux/fs.h.html#notify_change" title='notify_change' data-ref="notify_change">notify_change</a>(<a class="local col3 ref" href="#13path" title='path' data-ref="13path">path</a>-&gt;<a class="ref field" href="../include/linux/path.h.html#path::dentry" title='path::dentry' data-ref="path::dentry">dentry</a>, &amp;<a class="local col6 ref" href="#16newattrs" title='newattrs' data-ref="16newattrs">newattrs</a>, &amp;<a class="local col8 ref" href="#18delegated_inode" title='delegated_inode' data-ref="18delegated_inode">delegated_inode</a>);</td></tr>
<tr><th id="92">92</th><td>	<a class="ref fn" href="../include/linux/fs.h.html#inode_unlock" title='inode_unlock' data-ref="inode_unlock">inode_unlock</a>(<a class="local col7 ref" href="#17inode" title='inode' data-ref="17inode">inode</a>);</td></tr>
<tr><th id="93">93</th><td>	<b>if</b> (<a class="local col8 ref" href="#18delegated_inode" title='delegated_inode' data-ref="18delegated_inode">delegated_inode</a>) {</td></tr>
<tr><th id="94">94</th><td>		<a class="local col5 ref" href="#15error" title='error' data-ref="15error">error</a> = <a class="ref fn" href="../include/linux/fs.h.html#break_deleg_wait" title='break_deleg_wait' data-ref="break_deleg_wait">break_deleg_wait</a>(&amp;<a class="local col8 ref" href="#18delegated_inode" title='delegated_inode' data-ref="18delegated_inode">delegated_inode</a>);</td></tr>
<tr><th id="95">95</th><td>		<b>if</b> (!<a class="local col5 ref" href="#15error" title='error' data-ref="15error">error</a>)</td></tr>
<tr><th id="96">96</th><td>			<b>goto</b> <a class="lbl" href="#20retry_deleg" data-ref="20retry_deleg">retry_deleg</a>;</td></tr>
<tr><th id="97">97</th><td>	}</td></tr>
<tr><th id="98">98</th><td></td></tr>
<tr><th id="99">99</th><td>	<a class="ref fn" href="../include/linux/mount.h.html#mnt_drop_write" title='mnt_drop_write' data-ref="mnt_drop_write">mnt_drop_write</a>(<a class="local col3 ref" href="#13path" title='path' data-ref="13path">path</a>-&gt;<a class="ref field" href="../include/linux/path.h.html#path::mnt" title='path::mnt' data-ref="path::mnt">mnt</a>);</td></tr>
<tr><th id="100">100</th><td><dfn class="lbl" id="19out" data-ref="19out">out</dfn>:</td></tr>
<tr><th id="101">101</th><td>	<b>return</b> <a class="local col5 ref" href="#15error" title='error' data-ref="15error">error</a>;</td></tr>
<tr><th id="102">102</th><td>}</td></tr>
<tr><th id="103">103</th><td></td></tr>
<tr><th id="104">104</th><td><i>/*</i></td></tr>
<tr><th id="105">105</th><td><i> * do_utimes - change times on filename or file descriptor</i></td></tr>
<tr><th id="106">106</th><td><i> * @dfd: open file descriptor, -1 or AT_FDCWD</i></td></tr>
<tr><th id="107">107</th><td><i> * @filename: path name or NULL</i></td></tr>
<tr><th id="108">108</th><td><i> * @times: new times or NULL</i></td></tr>
<tr><th id="109">109</th><td><i> * @flags: zero or more flags (only AT_SYMLINK_NOFOLLOW for the moment)</i></td></tr>
<tr><th id="110">110</th><td><i> *</i></td></tr>
<tr><th id="111">111</th><td><i> * If filename is NULL and dfd refers to an open file, then operate on</i></td></tr>
<tr><th id="112">112</th><td><i> * the file.  Otherwise look up filename, possibly using dfd as a</i></td></tr>
<tr><th id="113">113</th><td><i> * starting point.</i></td></tr>
<tr><th id="114">114</th><td><i> *</i></td></tr>
<tr><th id="115">115</th><td><i> * If times==NULL, set access and modification to current time,</i></td></tr>
<tr><th id="116">116</th><td><i> * must be owner or have write permission.</i></td></tr>
<tr><th id="117">117</th><td><i> * Else, update from *times, must be owner or super user.</i></td></tr>
<tr><th id="118">118</th><td><i> */</i></td></tr>
<tr><th id="119">119</th><td><em>long</em> <dfn class="decl def fn" id="do_utimes" title='do_utimes' data-ref="do_utimes">do_utimes</dfn>(<em>int</em> <dfn class="local col1 decl" id="21dfd" title='dfd' data-type='int' data-ref="21dfd">dfd</dfn>, <em>const</em> <em>char</em> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *<dfn class="local col2 decl" id="22filename" title='filename' data-type='const char *' data-ref="22filename">filename</dfn>, <b>struct</b> <a class="macro" href="../include/linux/time64.h.html#16" title="timespec" data-ref="_M/timespec64">timespec64</a> *<dfn class="local col3 decl" id="23times" title='times' data-type='struct timespec *' data-ref="23times">times</dfn>,</td></tr>
<tr><th id="120">120</th><td>	       <em>int</em> <dfn class="local col4 decl" id="24flags" title='flags' data-type='int' data-ref="24flags">flags</dfn>)</td></tr>
<tr><th id="121">121</th><td>{</td></tr>
<tr><th id="122">122</th><td>	<em>int</em> <dfn class="local col5 decl" id="25error" title='error' data-type='int' data-ref="25error">error</dfn> = -<a class="macro" href="../include/uapi/asm-generic/errno-base.h.html#26" title="22" data-ref="_M/EINVAL">EINVAL</a>;</td></tr>
<tr><th id="123">123</th><td></td></tr>
<tr><th id="124">124</th><td>	<b>if</b> (<a class="local col3 ref" href="#23times" title='times' data-ref="23times">times</a> &amp;&amp; (!<a class="tu ref fn" href="#nsec_valid" title='nsec_valid' data-use='c' data-ref="nsec_valid">nsec_valid</a>(<a class="local col3 ref" href="#23times" title='times' data-ref="23times">times</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a>) ||</td></tr>
<tr><th id="125">125</th><td>		      !<a class="tu ref fn" href="#nsec_valid" title='nsec_valid' data-use='c' data-ref="nsec_valid">nsec_valid</a>(<a class="local col3 ref" href="#23times" title='times' data-ref="23times">times</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a>))) {</td></tr>
<tr><th id="126">126</th><td>		<b>goto</b> <a class="lbl" href="#26out" data-ref="26out">out</a>;</td></tr>
<tr><th id="127">127</th><td>	}</td></tr>
<tr><th id="128">128</th><td></td></tr>
<tr><th id="129">129</th><td>	<b>if</b> (<a class="local col4 ref" href="#24flags" title='flags' data-ref="24flags">flags</a> &amp; ~<a class="macro" href="../include/uapi/linux/fcntl.h.html#81" title="0x100" data-ref="_M/AT_SYMLINK_NOFOLLOW">AT_SYMLINK_NOFOLLOW</a>)</td></tr>
<tr><th id="130">130</th><td>		<b>goto</b> <a class="lbl" href="#26out" data-ref="26out">out</a>;</td></tr>
<tr><th id="131">131</th><td></td></tr>
<tr><th id="132">132</th><td>	<b>if</b> (<a class="local col2 ref" href="#22filename" title='filename' data-ref="22filename">filename</a> == <a class="macro" href="../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a> &amp;&amp; <a class="local col1 ref" href="#21dfd" title='dfd' data-ref="21dfd">dfd</a> != <a class="macro" href="../include/uapi/linux/fcntl.h.html#78" title="-100" data-ref="_M/AT_FDCWD">AT_FDCWD</a>) {</td></tr>
<tr><th id="133">133</th><td>		<b>struct</b> <a class="type" href="../include/linux/file.h.html#fd" title='fd' data-ref="fd">fd</a> <dfn class="local col7 decl" id="27f" title='f' data-type='struct fd' data-ref="27f">f</dfn>;</td></tr>
<tr><th id="134">134</th><td></td></tr>
<tr><th id="135">135</th><td>		<b>if</b> (<a class="local col4 ref" href="#24flags" title='flags' data-ref="24flags">flags</a> &amp; <a class="macro" href="../include/uapi/linux/fcntl.h.html#81" title="0x100" data-ref="_M/AT_SYMLINK_NOFOLLOW">AT_SYMLINK_NOFOLLOW</a>)</td></tr>
<tr><th id="136">136</th><td>			<b>goto</b> <a class="lbl" href="#26out" data-ref="26out">out</a>;</td></tr>
<tr><th id="137">137</th><td></td></tr>
<tr><th id="138">138</th><td>		<a class="local col7 ref" href="#27f" title='f' data-ref="27f">f</a> = <a class="ref fn" href="../include/linux/file.h.html#fdget" title='fdget' data-ref="fdget">fdget</a>(<a class="local col1 ref" href="#21dfd" title='dfd' data-ref="21dfd">dfd</a>);</td></tr>
<tr><th id="139">139</th><td>		<a class="local col5 ref" href="#25error" title='error' data-ref="25error">error</a> = -<a class="macro" href="../include/uapi/asm-generic/errno-base.h.html#13" title="9" data-ref="_M/EBADF">EBADF</a>;</td></tr>
<tr><th id="140">140</th><td>		<b>if</b> (!<a class="local col7 ref" href="#27f" title='f' data-ref="27f">f</a>.<a class="ref field" href="../include/linux/file.h.html#fd::file" title='fd::file' data-ref="fd::file">file</a>)</td></tr>
<tr><th id="141">141</th><td>			<b>goto</b> <a class="lbl" href="#26out" data-ref="26out">out</a>;</td></tr>
<tr><th id="142">142</th><td></td></tr>
<tr><th id="143">143</th><td>		<a class="local col5 ref" href="#25error" title='error' data-ref="25error">error</a> = <a class="tu ref fn" href="#utimes_common" title='utimes_common' data-use='c' data-ref="utimes_common">utimes_common</a>(&amp;<a class="local col7 ref" href="#27f" title='f' data-ref="27f">f</a>.<a class="ref field" href="../include/linux/file.h.html#fd::file" title='fd::file' data-ref="fd::file">file</a>-&gt;<a class="ref field" href="../include/linux/fs.h.html#file::f_path" title='file::f_path' data-ref="file::f_path">f_path</a>, <a class="local col3 ref" href="#23times" title='times' data-ref="23times">times</a>);</td></tr>
<tr><th id="144">144</th><td>		<a class="ref fn" href="../include/linux/file.h.html#fdput" title='fdput' data-ref="fdput">fdput</a>(<a class="local col7 ref" href="#27f" title='f' data-ref="27f">f</a>);</td></tr>
<tr><th id="145">145</th><td>	} <b>else</b> {</td></tr>
<tr><th id="146">146</th><td>		<b>struct</b> <a class="type" href="../include/linux/path.h.html#path" title='path' data-ref="path">path</a> <dfn class="local col8 decl" id="28path" title='path' data-type='struct path' data-ref="28path">path</dfn>;</td></tr>
<tr><th id="147">147</th><td>		<em>int</em> <dfn class="local col9 decl" id="29lookup_flags" title='lookup_flags' data-type='int' data-ref="29lookup_flags">lookup_flags</dfn> = <var>0</var>;</td></tr>
<tr><th id="148">148</th><td></td></tr>
<tr><th id="149">149</th><td>		<b>if</b> (!(<a class="local col4 ref" href="#24flags" title='flags' data-ref="24flags">flags</a> &amp; <a class="macro" href="../include/uapi/linux/fcntl.h.html#81" title="0x100" data-ref="_M/AT_SYMLINK_NOFOLLOW">AT_SYMLINK_NOFOLLOW</a>))</td></tr>
<tr><th id="150">150</th><td>			<a class="local col9 ref" href="#29lookup_flags" title='lookup_flags' data-ref="29lookup_flags">lookup_flags</a> |= <a class="macro" href="../include/linux/namei.h.html#28" title="0x0001" data-ref="_M/LOOKUP_FOLLOW">LOOKUP_FOLLOW</a>;</td></tr>
<tr><th id="151">151</th><td><dfn class="lbl" id="30retry" data-ref="30retry">retry</dfn>:</td></tr>
<tr><th id="152">152</th><td>		<a class="local col5 ref" href="#25error" title='error' data-ref="25error">error</a> = <a class="ref fn" href="../include/linux/namei.h.html#user_path_at" title='user_path_at' data-ref="user_path_at">user_path_at</a>(<a class="local col1 ref" href="#21dfd" title='dfd' data-ref="21dfd">dfd</a>, <a class="local col2 ref" href="#22filename" title='filename' data-ref="22filename">filename</a>, <a class="local col9 ref" href="#29lookup_flags" title='lookup_flags' data-ref="29lookup_flags">lookup_flags</a>, &amp;<a class="local col8 ref" href="#28path" title='path' data-ref="28path">path</a>);</td></tr>
<tr><th id="153">153</th><td>		<b>if</b> (<a class="local col5 ref" href="#25error" title='error' data-ref="25error">error</a>)</td></tr>
<tr><th id="154">154</th><td>			<b>goto</b> <a class="lbl" href="#26out" data-ref="26out">out</a>;</td></tr>
<tr><th id="155">155</th><td></td></tr>
<tr><th id="156">156</th><td>		<a class="local col5 ref" href="#25error" title='error' data-ref="25error">error</a> = <a class="tu ref fn" href="#utimes_common" title='utimes_common' data-use='c' data-ref="utimes_common">utimes_common</a>(&amp;<a class="local col8 ref" href="#28path" title='path' data-ref="28path">path</a>, <a class="local col3 ref" href="#23times" title='times' data-ref="23times">times</a>);</td></tr>
<tr><th id="157">157</th><td>		<a class="ref fn" href="../include/linux/path.h.html#path_put" title='path_put' data-ref="path_put">path_put</a>(&amp;<a class="local col8 ref" href="#28path" title='path' data-ref="28path">path</a>);</td></tr>
<tr><th id="158">158</th><td>		<b>if</b> (<a class="ref fn" href="../include/linux/namei.h.html#retry_estale" title='retry_estale' data-ref="retry_estale">retry_estale</a>(<a class="local col5 ref" href="#25error" title='error' data-ref="25error">error</a>, <a class="local col9 ref" href="#29lookup_flags" title='lookup_flags' data-ref="29lookup_flags">lookup_flags</a>)) {</td></tr>
<tr><th id="159">159</th><td>			<a class="local col9 ref" href="#29lookup_flags" title='lookup_flags' data-ref="29lookup_flags">lookup_flags</a> |= <a class="macro" href="../include/linux/namei.h.html#33" title="0x0020" data-ref="_M/LOOKUP_REVAL">LOOKUP_REVAL</a>;</td></tr>
<tr><th id="160">160</th><td>			<b>goto</b> <a class="lbl" href="#30retry" data-ref="30retry">retry</a>;</td></tr>
<tr><th id="161">161</th><td>		}</td></tr>
<tr><th id="162">162</th><td>	}</td></tr>
<tr><th id="163">163</th><td></td></tr>
<tr><th id="164">164</th><td><dfn class="lbl" id="26out" data-ref="26out">out</dfn>:</td></tr>
<tr><th id="165">165</th><td>	<b>return</b> <a class="local col5 ref" href="#25error" title='error' data-ref="25error">error</a>;</td></tr>
<tr><th id="166">166</th><td>}</td></tr>
<tr><th id="167">167</th><td></td></tr>
<tr><th id="168">168</th><td><a class="macro" href="../include/linux/syscalls.h.html#199" title="static const char *types__utimensat[] = { &quot;int&quot;, &quot;const char *&quot;, &quot;struct timespec *&quot;, &quot;int&quot; }; static const char *args__utimensat[] = { &quot;dfd&quot;, &quot;filename&quot;, &quot;utimes&quot;, &quot;flags&quot; }; static struct syscall_metadata __syscall_meta__utimensat; static struct trace_event_call __attribute__((__used__)) event_enter__utimensat = { .class = &amp;event_class_syscall_enter, { .name = &quot;sys_enter&quot;&quot;_utimensat&quot;, }, .event.funcs = &amp;enter_syscall_print_funcs, .data = (void *)&amp;__syscall_meta__utimensat, .flags = TRACE_EVENT_FL_CAP_ANY, }; static struct trace_event_call __attribute__((__used__)) __attribute__((section(&quot;_ftrace_events&quot;))) *__event_enter__utimensat = &amp;event_enter__utimensat;; static struct syscall_metadata __syscall_meta__utimensat; static struct trace_event_call __attribute__((__used__)) event_exit__utimensat = { .class = &amp;event_class_syscall_exit, { .name = &quot;sys_exit&quot;&quot;_utimensat&quot;, }, .event.funcs = &amp;exit_syscall_print_funcs, .data = (void *)&amp;__syscall_meta__utimensat, .flags = TRACE_EVENT_FL_CAP_ANY, }; static struct trace_event_call __attribute__((__used__)) __attribute__((section(&quot;_ftrace_events&quot;))) *__event_exit__utimensat = &amp;event_exit__utimensat;; static struct syscall_metadata __attribute__((__used__)) __syscall_meta__utimensat = { .name = &quot;sys&quot;&quot;_utimensat&quot;, .syscall_nr = -1, .nb_args = 4, .types = 4 ? types__utimensat : ((void *)0), .args = 4 ? args__utimensat : ((void *)0), .enter_event = &amp;event_enter__utimensat, .exit_event = &amp;event_exit__utimensat, .enter_fields = { &amp;(__syscall_meta__utimensat.enter_fields), &amp;(__syscall_meta__utimensat.enter_fields) }, }; static struct syscall_metadata __attribute__((__used__)) __attribute__((section(&quot;__syscalls_metadata&quot;))) *__p_syscall_meta__utimensat = &amp;__syscall_meta__utimensat; long sys_utimensat(int dfd, const char * filename, struct timespec * utimes, int flags) __attribute__((alias(&quot;SyS_utimensat&quot;))); static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long SYSC_utimensat(int dfd, const char * filename, struct timespec * utimes, int flags); long SyS_utimensat(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( int)0), typeof(0ULL))), 0LL, 0L)) dfd, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct timespec *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct timespec *)0), typeof(0ULL))), 0LL, 0L)) utimes, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( int)0), typeof(0ULL))), 0LL, 0L)) flags); long SyS_utimensat(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( int)0), typeof(0ULL))), 0LL, 0L)) dfd, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct timespec *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct timespec *)0), typeof(0ULL))), 0LL, 0L)) utimes, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( int)0), typeof(0ULL))), 0LL, 0L)) flags) { long ret = SYSC_utimensat(( int) dfd, ( const char *) filename, ( struct timespec *) utimes, ( int) flags); (void)(sizeof(struct { int:(-!!(!(__builtin_types_compatible_p(typeof(( int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( int)0), typeof(0ULL))) &amp;&amp; sizeof(int) &gt; sizeof(long))); })), (void)(sizeof(struct { int:(-!!(!(__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))) &amp;&amp; sizeof(const char *) &gt; sizeof(long))); })), (void)(sizeof(struct { int:(-!!(!(__builtin_types_compatible_p(typeof(( struct timespec *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct timespec *)0), typeof(0ULL))) &amp;&amp; sizeof(struct timespec *) &gt; sizeof(long))); })), (void)(sizeof(struct { int:(-!!(!(__builtin_types_compatible_p(typeof(( int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( int)0), typeof(0ULL))) &amp;&amp; sizeof(int) &gt; sizeof(long))); })); do { } while (0); return ret; } static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long SYSC_utimensat(int dfd, const char * filename, struct timespec * utimes, int flags)" data-ref="_M/SYSCALL_DEFINE4">SYSCALL_DEFINE4</a>(utimensat, <em>int</em>, <dfn class="local col1 decl" id="31dfd" title='dfd' data-type='int' data-ref="31dfd"><dfn class="local col5 decl" id="35dfd" title='dfd' data-type='int' data-ref="35dfd"><dfn class="local col9 decl" id="39dfd" title='dfd' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((int)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((int)0), typeof (0ULL))), 0LL, 0L))' data-ref="39dfd"><dfn class="local col3 decl" id="43dfd" title='dfd' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((int)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((int)0), typeof (0ULL))), 0LL, 0L))' data-ref="43dfd"><a class="local col3 ref" href="#168" title='dfd' data-ref="43dfd"><dfn class="local col7 decl" id="47dfd" title='dfd' data-type='int' data-ref="47dfd">dfd</dfn></a></dfn></dfn></dfn></dfn>, <em>const</em> <em>char</em> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col2 decl" id="32filename" title='filename' data-type='const char *' data-ref="32filename"><dfn class="local col6 decl" id="36filename" title='filename' data-type='const char *' data-ref="36filename"><dfn class="local col0 decl" id="40filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((const char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((const char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="40filename"><dfn class="local col4 decl" id="44filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((const char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((const char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="44filename"><a class="local col4 ref" href="#168" title='filename' data-ref="44filename"><dfn class="local col8 decl" id="48filename" title='filename' data-type='const char *' data-ref="48filename">filename</dfn></a></dfn></dfn></dfn></dfn>,</td></tr>
<tr><th id="169">169</th><td>		<b>struct</b> <a class="type" href="../include/uapi/linux/time.h.html#timespec" title='timespec' data-ref="timespec">timespec</a> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col3 decl" id="33utimes" title='utimes' data-type='struct timespec *' data-ref="33utimes"><dfn class="local col7 decl" id="37utimes" title='utimes' data-type='struct timespec *' data-ref="37utimes"><dfn class="local col1 decl" id="41utimes" title='utimes' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct timespec *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct timespec *)0), typeof (0ULL))), 0LL, 0L))' data-ref="41utimes"><dfn class="local col5 decl" id="45utimes" title='utimes' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct timespec *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct timespec *)0), typeof (0ULL))), 0LL, 0L))' data-ref="45utimes"><a class="local col5 ref" href="#168" title='utimes' data-ref="45utimes"><dfn class="local col9 decl" id="49utimes" title='utimes' data-type='struct timespec *' data-ref="49utimes">utimes</dfn></a></dfn></dfn></dfn></dfn>, <em>int</em>, <dfn class="local col4 decl" id="34flags" title='flags' data-type='int' data-ref="34flags"><dfn class="local col8 decl" id="38flags" title='flags' data-type='int' data-ref="38flags"><dfn class="local col2 decl" id="42flags" title='flags' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((int)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((int)0), typeof (0ULL))), 0LL, 0L))' data-ref="42flags"><dfn class="local col6 decl" id="46flags" title='flags' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((int)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((int)0), typeof (0ULL))), 0LL, 0L))' data-ref="46flags"><a class="local col6 ref" href="#168" title='flags' data-ref="46flags"><dfn class="local col0 decl" id="50flags" title='flags' data-type='int' data-ref="50flags">flags</dfn></a></dfn></dfn></dfn></dfn>)</td></tr>
<tr><th id="170">170</th><td>{</td></tr>
<tr><th id="171">171</th><td>	<b>struct</b> <a class="macro" href="../include/linux/time64.h.html#16" title="timespec" data-ref="_M/timespec64">timespec64</a> <dfn class="local col1 decl" id="51tstimes" title='tstimes' data-type='struct timespec [2]' data-ref="51tstimes">tstimes</dfn>[<var>2</var>];</td></tr>
<tr><th id="172">172</th><td></td></tr>
<tr><th id="173">173</th><td>	<b>if</b> (<a class="local col9 ref" href="#168" title='utimes' data-ref="49utimes">utimes</a>) {</td></tr>
<tr><th id="174">174</th><td>		<b>if</b> ((<a class="ref fn" href="../include/linux/time.h.html#get_timespec64" title='get_timespec64' data-ref="get_timespec64">get_timespec64</a>(&amp;<a class="local col1 ref" href="#51tstimes" title='tstimes' data-ref="51tstimes">tstimes</a>[<var>0</var>], &amp;<a class="local col9 ref" href="#168" title='utimes' data-ref="49utimes">utimes</a>[<var>0</var>]) ||</td></tr>
<tr><th id="175">175</th><td>			<a class="ref fn" href="../include/linux/time.h.html#get_timespec64" title='get_timespec64' data-ref="get_timespec64">get_timespec64</a>(&amp;<a class="local col1 ref" href="#51tstimes" title='tstimes' data-ref="51tstimes">tstimes</a>[<var>1</var>], &amp;<a class="local col9 ref" href="#168" title='utimes' data-ref="49utimes">utimes</a>[<var>1</var>])))</td></tr>
<tr><th id="176">176</th><td>			<b>return</b> -<a class="macro" href="../include/uapi/asm-generic/errno-base.h.html#18" title="14" data-ref="_M/EFAULT">EFAULT</a>;</td></tr>
<tr><th id="177">177</th><td></td></tr>
<tr><th id="178">178</th><td>		<i>/* Nothing to do, we must not even check the path.  */</i></td></tr>
<tr><th id="179">179</th><td>		<b>if</b> (<a class="local col1 ref" href="#51tstimes" title='tstimes' data-ref="51tstimes">tstimes</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> == <a class="macro" href="../include/linux/stat.h.html#16" title="((1l &lt;&lt; 30) - 2l)" data-ref="_M/UTIME_OMIT">UTIME_OMIT</a> &amp;&amp;</td></tr>
<tr><th id="180">180</th><td>		    <a class="local col1 ref" href="#51tstimes" title='tstimes' data-ref="51tstimes">tstimes</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> == <a class="macro" href="../include/linux/stat.h.html#16" title="((1l &lt;&lt; 30) - 2l)" data-ref="_M/UTIME_OMIT">UTIME_OMIT</a>)</td></tr>
<tr><th id="181">181</th><td>			<b>return</b> <var>0</var>;</td></tr>
<tr><th id="182">182</th><td>	}</td></tr>
<tr><th id="183">183</th><td></td></tr>
<tr><th id="184">184</th><td>	<b>return</b> <a class="ref fn" href="#do_utimes" title='do_utimes' data-ref="do_utimes">do_utimes</a>(<a class="local col7 ref" href="#168" title='dfd' data-ref="47dfd">dfd</a>, <a class="local col8 ref" href="#168" title='filename' data-ref="48filename">filename</a>, <a class="local col9 ref" href="#168" title='utimes' data-ref="49utimes">utimes</a> ? <a class="local col1 ref" href="#51tstimes" title='tstimes' data-ref="51tstimes">tstimes</a> : <a class="macro" href="../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="local col0 ref" href="#168" title='flags' data-ref="50flags">flags</a>);</td></tr>
<tr><th id="185">185</th><td>}</td></tr>
<tr><th id="186">186</th><td></td></tr>
<tr><th id="187">187</th><td><a class="macro" href="../include/linux/syscalls.h.html#198" title="static const char *types__futimesat[] = { &quot;int&quot;, &quot;const char *&quot;, &quot;struct timeval *&quot; }; static const char *args__futimesat[] = { &quot;dfd&quot;, &quot;filename&quot;, &quot;utimes&quot; }; static struct syscall_metadata __syscall_meta__futimesat; static struct trace_event_call __attribute__((__used__)) event_enter__futimesat = { .class = &amp;event_class_syscall_enter, { .name = &quot;sys_enter&quot;&quot;_futimesat&quot;, }, .event.funcs = &amp;enter_syscall_print_funcs, .data = (void *)&amp;__syscall_meta__futimesat, .flags = TRACE_EVENT_FL_CAP_ANY, }; static struct trace_event_call __attribute__((__used__)) __attribute__((section(&quot;_ftrace_events&quot;))) *__event_enter__futimesat = &amp;event_enter__futimesat;; static struct syscall_metadata __syscall_meta__futimesat; static struct trace_event_call __attribute__((__used__)) event_exit__futimesat = { .class = &amp;event_class_syscall_exit, { .name = &quot;sys_exit&quot;&quot;_futimesat&quot;, }, .event.funcs = &amp;exit_syscall_print_funcs, .data = (void *)&amp;__syscall_meta__futimesat, .flags = TRACE_EVENT_FL_CAP_ANY, }; static struct trace_event_call __attribute__((__used__)) __attribute__((section(&quot;_ftrace_events&quot;))) *__event_exit__futimesat = &amp;event_exit__futimesat;; static struct syscall_metadata __attribute__((__used__)) __syscall_meta__futimesat = { .name = &quot;sys&quot;&quot;_futimesat&quot;, .syscall_nr = -1, .nb_args = 3, .types = 3 ? types__futimesat : ((void *)0), .args = 3 ? args__futimesat : ((void *)0), .enter_event = &amp;event_enter__futimesat, .exit_event = &amp;event_exit__futimesat, .enter_fields = { &amp;(__syscall_meta__futimesat.enter_fields), &amp;(__syscall_meta__futimesat.enter_fields) }, }; static struct syscall_metadata __attribute__((__used__)) __attribute__((section(&quot;__syscalls_metadata&quot;))) *__p_syscall_meta__futimesat = &amp;__syscall_meta__futimesat; long sys_futimesat(int dfd, const char * filename, struct timeval * utimes) __attribute__((alias(&quot;SyS_futimesat&quot;))); static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long SYSC_futimesat(int dfd, const char * filename, struct timeval * utimes); long SyS_futimesat(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( int)0), typeof(0ULL))), 0LL, 0L)) dfd, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct timeval *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct timeval *)0), typeof(0ULL))), 0LL, 0L)) utimes); long SyS_futimesat(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( int)0), typeof(0ULL))), 0LL, 0L)) dfd, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct timeval *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct timeval *)0), typeof(0ULL))), 0LL, 0L)) utimes) { long ret = SYSC_futimesat(( int) dfd, ( const char *) filename, ( struct timeval *) utimes); (void)(sizeof(struct { int:(-!!(!(__builtin_types_compatible_p(typeof(( int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( int)0), typeof(0ULL))) &amp;&amp; sizeof(int) &gt; sizeof(long))); })), (void)(sizeof(struct { int:(-!!(!(__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))) &amp;&amp; sizeof(const char *) &gt; sizeof(long))); })), (void)(sizeof(struct { int:(-!!(!(__builtin_types_compatible_p(typeof(( struct timeval *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct timeval *)0), typeof(0ULL))) &amp;&amp; sizeof(struct timeval *) &gt; sizeof(long))); })); do { } while (0); return ret; } static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long SYSC_futimesat(int dfd, const char * filename, struct timeval * utimes)" data-ref="_M/SYSCALL_DEFINE3">SYSCALL_DEFINE3</a>(futimesat, <em>int</em>, <dfn class="local col2 decl" id="52dfd" title='dfd' data-type='int' data-ref="52dfd"><dfn class="local col5 decl" id="55dfd" title='dfd' data-type='int' data-ref="55dfd"><dfn class="local col8 decl" id="58dfd" title='dfd' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((int)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((int)0), typeof (0ULL))), 0LL, 0L))' data-ref="58dfd"><dfn class="local col1 decl" id="61dfd" title='dfd' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((int)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((int)0), typeof (0ULL))), 0LL, 0L))' data-ref="61dfd"><a class="local col1 ref" href="#187" title='dfd' data-ref="61dfd"><dfn class="local col4 decl" id="64dfd" title='dfd' data-type='int' data-ref="64dfd">dfd</dfn></a></dfn></dfn></dfn></dfn>, <em>const</em> <em>char</em> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col3 decl" id="53filename" title='filename' data-type='const char *' data-ref="53filename"><dfn class="local col6 decl" id="56filename" title='filename' data-type='const char *' data-ref="56filename"><dfn class="local col9 decl" id="59filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((const char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((const char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="59filename"><dfn class="local col2 decl" id="62filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((const char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((const char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="62filename"><a class="local col2 ref" href="#187" title='filename' data-ref="62filename"><dfn class="local col5 decl" id="65filename" title='filename' data-type='const char *' data-ref="65filename">filename</dfn></a></dfn></dfn></dfn></dfn>,</td></tr>
<tr><th id="188">188</th><td>		<b>struct</b> <a class="type" href="../include/uapi/linux/time.h.html#timeval" title='timeval' data-ref="timeval">timeval</a> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col4 decl" id="54utimes" title='utimes' data-type='struct timeval *' data-ref="54utimes"><dfn class="local col7 decl" id="57utimes" title='utimes' data-type='struct timeval *' data-ref="57utimes"><dfn class="local col0 decl" id="60utimes" title='utimes' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct timeval *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct timeval *)0), typeof (0ULL))), 0LL, 0L))' data-ref="60utimes"><dfn class="local col3 decl" id="63utimes" title='utimes' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct timeval *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct timeval *)0), typeof (0ULL))), 0LL, 0L))' data-ref="63utimes"><a class="local col3 ref" href="#187" title='utimes' data-ref="63utimes"><dfn class="local col6 decl" id="66utimes" title='utimes' data-type='struct timeval *' data-ref="66utimes">utimes</dfn></a></dfn></dfn></dfn></dfn>)</td></tr>
<tr><th id="189">189</th><td>{</td></tr>
<tr><th id="190">190</th><td>	<b>struct</b> <a class="type" href="../include/uapi/linux/time.h.html#timeval" title='timeval' data-ref="timeval">timeval</a> <dfn class="local col7 decl" id="67times" title='times' data-type='struct timeval [2]' data-ref="67times">times</dfn>[<var>2</var>];</td></tr>
<tr><th id="191">191</th><td>	<b>struct</b> <a class="macro" href="../include/linux/time64.h.html#16" title="timespec" data-ref="_M/timespec64">timespec64</a> <dfn class="local col8 decl" id="68tstimes" title='tstimes' data-type='struct timespec [2]' data-ref="68tstimes">tstimes</dfn>[<var>2</var>];</td></tr>
<tr><th id="192">192</th><td></td></tr>
<tr><th id="193">193</th><td>	<b>if</b> (<a class="local col6 ref" href="#187" title='utimes' data-ref="66utimes">utimes</a>) {</td></tr>
<tr><th id="194">194</th><td>		<b>if</b> (<a class="ref fn" href="../include/linux/uaccess.h.html#copy_from_user" title='copy_from_user' data-ref="copy_from_user">copy_from_user</a>(&amp;<a class="local col7 ref" href="#67times" title='times' data-ref="67times">times</a>, <a class="local col6 ref" href="#187" title='utimes' data-ref="66utimes">utimes</a>, <b>sizeof</b>(<a class="local col7 ref" href="#67times" title='times' data-ref="67times">times</a>)))</td></tr>
<tr><th id="195">195</th><td>			<b>return</b> -<a class="macro" href="../include/uapi/asm-generic/errno-base.h.html#18" title="14" data-ref="_M/EFAULT">EFAULT</a>;</td></tr>
<tr><th id="196">196</th><td></td></tr>
<tr><th id="197">197</th><td>		<i>/* This test is needed to catch all invalid values.  If we</i></td></tr>
<tr><th id="198">198</th><td><i>		   would test only in do_utimes we would miss those invalid</i></td></tr>
<tr><th id="199">199</th><td><i>		   values truncated by the multiplication with 1000.  Note</i></td></tr>
<tr><th id="200">200</th><td><i>		   that we also catch UTIME_{NOW,OMIT} here which are only</i></td></tr>
<tr><th id="201">201</th><td><i>		   valid for utimensat.  */</i></td></tr>
<tr><th id="202">202</th><td>		<b>if</b> (<a class="local col7 ref" href="#67times" title='times' data-ref="67times">times</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timeval::tv_usec" title='timeval::tv_usec' data-ref="timeval::tv_usec">tv_usec</a> &gt;= <var>1000000</var> || <a class="local col7 ref" href="#67times" title='times' data-ref="67times">times</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timeval::tv_usec" title='timeval::tv_usec' data-ref="timeval::tv_usec">tv_usec</a> &lt; <var>0</var> ||</td></tr>
<tr><th id="203">203</th><td>		    <a class="local col7 ref" href="#67times" title='times' data-ref="67times">times</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timeval::tv_usec" title='timeval::tv_usec' data-ref="timeval::tv_usec">tv_usec</a> &gt;= <var>1000000</var> || <a class="local col7 ref" href="#67times" title='times' data-ref="67times">times</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timeval::tv_usec" title='timeval::tv_usec' data-ref="timeval::tv_usec">tv_usec</a> &lt; <var>0</var>)</td></tr>
<tr><th id="204">204</th><td>			<b>return</b> -<a class="macro" href="../include/uapi/asm-generic/errno-base.h.html#26" title="22" data-ref="_M/EINVAL">EINVAL</a>;</td></tr>
<tr><th id="205">205</th><td></td></tr>
<tr><th id="206">206</th><td>		<a class="local col8 ref" href="#68tstimes" title='tstimes' data-ref="68tstimes">tstimes</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec">tv_sec</a> = <a class="local col7 ref" href="#67times" title='times' data-ref="67times">times</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timeval::tv_sec" title='timeval::tv_sec' data-ref="timeval::tv_sec">tv_sec</a>;</td></tr>
<tr><th id="207">207</th><td>		<a class="local col8 ref" href="#68tstimes" title='tstimes' data-ref="68tstimes">tstimes</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> = <var>1000</var> * <a class="local col7 ref" href="#67times" title='times' data-ref="67times">times</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timeval::tv_usec" title='timeval::tv_usec' data-ref="timeval::tv_usec">tv_usec</a>;</td></tr>
<tr><th id="208">208</th><td>		<a class="local col8 ref" href="#68tstimes" title='tstimes' data-ref="68tstimes">tstimes</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec">tv_sec</a> = <a class="local col7 ref" href="#67times" title='times' data-ref="67times">times</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timeval::tv_sec" title='timeval::tv_sec' data-ref="timeval::tv_sec">tv_sec</a>;</td></tr>
<tr><th id="209">209</th><td>		<a class="local col8 ref" href="#68tstimes" title='tstimes' data-ref="68tstimes">tstimes</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> = <var>1000</var> * <a class="local col7 ref" href="#67times" title='times' data-ref="67times">times</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timeval::tv_usec" title='timeval::tv_usec' data-ref="timeval::tv_usec">tv_usec</a>;</td></tr>
<tr><th id="210">210</th><td>	}</td></tr>
<tr><th id="211">211</th><td></td></tr>
<tr><th id="212">212</th><td>	<b>return</b> <a class="ref fn" href="#do_utimes" title='do_utimes' data-ref="do_utimes">do_utimes</a>(<a class="local col4 ref" href="#187" title='dfd' data-ref="64dfd">dfd</a>, <a class="local col5 ref" href="#187" title='filename' data-ref="65filename">filename</a>, <a class="local col6 ref" href="#187" title='utimes' data-ref="66utimes">utimes</a> ? <a class="local col8 ref" href="#68tstimes" title='tstimes' data-ref="68tstimes">tstimes</a> : <a class="macro" href="../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <var>0</var>);</td></tr>
<tr><th id="213">213</th><td>}</td></tr>
<tr><th id="214">214</th><td></td></tr>
<tr><th id="215">215</th><td><a class="macro" href="../include/linux/syscalls.h.html#197" title="static const char *types__utimes[] = { &quot;char *&quot;, &quot;struct timeval *&quot; }; static const char *args__utimes[] = { &quot;filename&quot;, &quot;utimes&quot; }; static struct syscall_metadata __syscall_meta__utimes; static struct trace_event_call __attribute__((__used__)) event_enter__utimes = { .class = &amp;event_class_syscall_enter, { .name = &quot;sys_enter&quot;&quot;_utimes&quot;, }, .event.funcs = &amp;enter_syscall_print_funcs, .data = (void *)&amp;__syscall_meta__utimes, .flags = TRACE_EVENT_FL_CAP_ANY, }; static struct trace_event_call __attribute__((__used__)) __attribute__((section(&quot;_ftrace_events&quot;))) *__event_enter__utimes = &amp;event_enter__utimes;; static struct syscall_metadata __syscall_meta__utimes; static struct trace_event_call __attribute__((__used__)) event_exit__utimes = { .class = &amp;event_class_syscall_exit, { .name = &quot;sys_exit&quot;&quot;_utimes&quot;, }, .event.funcs = &amp;exit_syscall_print_funcs, .data = (void *)&amp;__syscall_meta__utimes, .flags = TRACE_EVENT_FL_CAP_ANY, }; static struct trace_event_call __attribute__((__used__)) __attribute__((section(&quot;_ftrace_events&quot;))) *__event_exit__utimes = &amp;event_exit__utimes;; static struct syscall_metadata __attribute__((__used__)) __syscall_meta__utimes = { .name = &quot;sys&quot;&quot;_utimes&quot;, .syscall_nr = -1, .nb_args = 2, .types = 2 ? types__utimes : ((void *)0), .args = 2 ? args__utimes : ((void *)0), .enter_event = &amp;event_enter__utimes, .exit_event = &amp;event_exit__utimes, .enter_fields = { &amp;(__syscall_meta__utimes.enter_fields), &amp;(__syscall_meta__utimes.enter_fields) }, }; static struct syscall_metadata __attribute__((__used__)) __attribute__((section(&quot;__syscalls_metadata&quot;))) *__p_syscall_meta__utimes = &amp;__syscall_meta__utimes; long sys_utimes(char * filename, struct timeval * utimes) __attribute__((alias(&quot;SyS_utimes&quot;))); static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long SYSC_utimes(char * filename, struct timeval * utimes); long SyS_utimes(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct timeval *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct timeval *)0), typeof(0ULL))), 0LL, 0L)) utimes); long SyS_utimes(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct timeval *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct timeval *)0), typeof(0ULL))), 0LL, 0L)) utimes) { long ret = SYSC_utimes(( char *) filename, ( struct timeval *) utimes); (void)(sizeof(struct { int:(-!!(!(__builtin_types_compatible_p(typeof(( char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( char *)0), typeof(0ULL))) &amp;&amp; sizeof(char *) &gt; sizeof(long))); })), (void)(sizeof(struct { int:(-!!(!(__builtin_types_compatible_p(typeof(( struct timeval *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct timeval *)0), typeof(0ULL))) &amp;&amp; sizeof(struct timeval *) &gt; sizeof(long))); })); do { } while (0); return ret; } static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long SYSC_utimes(char * filename, struct timeval * utimes)" data-ref="_M/SYSCALL_DEFINE2">SYSCALL_DEFINE2</a>(utimes, <em>char</em> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col9 decl" id="69filename" title='filename' data-type='char *' data-ref="69filename"><dfn class="local col1 decl" id="71filename" title='filename' data-type='char *' data-ref="71filename"><dfn class="local col3 decl" id="73filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="73filename"><dfn class="local col5 decl" id="75filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="75filename"><a class="local col5 ref" href="#215" title='filename' data-ref="75filename"><dfn class="local col7 decl" id="77filename" title='filename' data-type='char *' data-ref="77filename">filename</dfn></a></dfn></dfn></dfn></dfn>,</td></tr>
<tr><th id="216">216</th><td>		<b>struct</b> <a class="type" href="../include/uapi/linux/time.h.html#timeval" title='timeval' data-ref="timeval">timeval</a> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col0 decl" id="70utimes" title='utimes' data-type='struct timeval *' data-ref="70utimes"><dfn class="local col2 decl" id="72utimes" title='utimes' data-type='struct timeval *' data-ref="72utimes"><dfn class="local col4 decl" id="74utimes" title='utimes' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct timeval *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct timeval *)0), typeof (0ULL))), 0LL, 0L))' data-ref="74utimes"><dfn class="local col6 decl" id="76utimes" title='utimes' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct timeval *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct timeval *)0), typeof (0ULL))), 0LL, 0L))' data-ref="76utimes"><a class="local col6 ref" href="#215" title='utimes' data-ref="76utimes"><dfn class="local col8 decl" id="78utimes" title='utimes' data-type='struct timeval *' data-ref="78utimes">utimes</dfn></a></dfn></dfn></dfn></dfn>)</td></tr>
<tr><th id="217">217</th><td>{</td></tr>
<tr><th id="218">218</th><td>	<b>return</b> <a class="ref fn" href="../include/linux/syscalls.h.html#sys_futimesat" title='sys_futimesat' data-ref="sys_futimesat">sys_futimesat</a>(<a class="macro" href="../include/uapi/linux/fcntl.h.html#78" title="-100" data-ref="_M/AT_FDCWD">AT_FDCWD</a>, <a class="local col7 ref" href="#215" title='filename' data-ref="77filename">filename</a>, <a class="local col8 ref" href="#215" title='utimes' data-ref="78utimes">utimes</a>);</td></tr>
<tr><th id="219">219</th><td>}</td></tr>
<tr><th id="220">220</th><td></td></tr>
<tr><th id="221">221</th><td><u>#<span data-ppcond="221">ifdef</span> <a class="macro" href="../include/generated/autoconf.h.html#83" data-ref="_M/CONFIG_COMPAT">CONFIG_COMPAT</a></u></td></tr>
<tr><th id="222">222</th><td><i>/*</i></td></tr>
<tr><th id="223">223</th><td><i> * Not all architectures have sys_utime, so implement this in terms</i></td></tr>
<tr><th id="224">224</th><td><i> * of sys_utimes.</i></td></tr>
<tr><th id="225">225</th><td><i> */</i></td></tr>
<tr><th id="226">226</th><td><a class="macro" href="../include/linux/compat.h.html#39" title=" long compat_sys_utime(const char * filename, struct compat_utimbuf * t) __attribute__((alias(&quot;compat_SyS_utime&quot;))); static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long C_SYSC_utime(const char * filename, struct compat_utimbuf * t); long compat_SyS_utime(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct compat_utimbuf *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct compat_utimbuf *)0), typeof(0ULL))), 0LL, 0L)) t); long compat_SyS_utime(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct compat_utimbuf *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct compat_utimbuf *)0), typeof(0ULL))), 0LL, 0L)) t) { return C_SYSC_utime((( const char *)(unsigned long)(filename)), (( struct compat_utimbuf *)(unsigned long)(t))); } static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long C_SYSC_utime(const char * filename, struct compat_utimbuf * t)" data-ref="_M/COMPAT_SYSCALL_DEFINE2">COMPAT_SYSCALL_DEFINE2</a>(utime, <em>const</em> <em>char</em> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col9 decl" id="79filename" title='filename' data-type='const char *' data-ref="79filename"><dfn class="local col1 decl" id="81filename" title='filename' data-type='const char *' data-ref="81filename"><dfn class="local col3 decl" id="83filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((const char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((const char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="83filename"><dfn class="local col5 decl" id="85filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((const char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((const char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="85filename"><a class="local col5 ref" href="#226" title='filename' data-ref="85filename"><dfn class="local col7 decl" id="87filename" title='filename' data-type='const char *' data-ref="87filename">filename</dfn></a></dfn></dfn></dfn></dfn>,</td></tr>
<tr><th id="227">227</th><td>		       <b>struct</b> <a class="type" href="../include/linux/compat.h.html#compat_utimbuf" title='compat_utimbuf' data-ref="compat_utimbuf">compat_utimbuf</a> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col0 decl" id="80t" title='t' data-type='struct compat_utimbuf *' data-ref="80t"><dfn class="local col2 decl" id="82t" title='t' data-type='struct compat_utimbuf *' data-ref="82t"><dfn class="local col4 decl" id="84t" title='t' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct compat_utimbuf *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct compat_utimbuf *)0), typeof (0ULL))), 0LL, 0L))' data-ref="84t"><dfn class="local col6 decl" id="86t" title='t' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct compat_utimbuf *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct compat_utimbuf *)0), typeof (0ULL))), 0LL, 0L))' data-ref="86t"><a class="local col6 ref" href="#226" title='t' data-ref="86t"><dfn class="local col8 decl" id="88t" title='t' data-type='struct compat_utimbuf *' data-ref="88t">t</dfn></a></dfn></dfn></dfn></dfn>)</td></tr>
<tr><th id="228">228</th><td>{</td></tr>
<tr><th id="229">229</th><td>	<b>struct</b> <a class="macro" href="../include/linux/time64.h.html#16" title="timespec" data-ref="_M/timespec64">timespec64</a> <dfn class="local col9 decl" id="89tv" title='tv' data-type='struct timespec [2]' data-ref="89tv">tv</dfn>[<var>2</var>];</td></tr>
<tr><th id="230">230</th><td></td></tr>
<tr><th id="231">231</th><td>	<b>if</b> (<a class="local col8 ref" href="#226" title='t' data-ref="88t">t</a>) {</td></tr>
<tr><th id="232">232</th><td>		<b>if</b> (<a class="macro" href="../arch/x86/include/asm/uaccess.h.html#171" title="({ int __ret_gu; register __typeof__(__builtin_choose_expr(sizeof(*(&amp;t-&gt;actime)) &gt; sizeof(0UL), 0ULL, 0UL)) __val_gu asm(&quot;%&quot;&quot;rdx&quot;); (void)0; might_fault(); asm volatile(&quot;call __get_user_%P4&quot; : &quot;=a&quot; (__ret_gu), &quot;=r&quot; (__val_gu), &quot;+r&quot; (current_stack_pointer) : &quot;0&quot; (&amp;t-&gt;actime), &quot;i&quot; (sizeof(*(&amp;t-&gt;actime)))); (tv[0].tv_sec) = ( __typeof__(*(&amp;t-&gt;actime))) __val_gu; __builtin_expect(__ret_gu, 0); })" data-ref="_M/get_user">get_user</a>(<a class="local col9 ref" href="#89tv" title='tv' data-ref="89tv">tv</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec">tv_sec</a>, &amp;<a class="local col8 ref" href="#226" title='t' data-ref="88t">t</a>-&gt;<a class="ref field" href="../include/linux/compat.h.html#compat_utimbuf::actime" title='compat_utimbuf::actime' data-ref="compat_utimbuf::actime">actime</a>) ||</td></tr>
<tr><th id="233">233</th><td>		    <a class="macro" href="../arch/x86/include/asm/uaccess.h.html#171" title="({ int __ret_gu; register __typeof__(__builtin_choose_expr(sizeof(*(&amp;t-&gt;modtime)) &gt; sizeof(0UL), 0ULL, 0UL)) __val_gu asm(&quot;%&quot;&quot;rdx&quot;); (void)0; might_fault(); asm volatile(&quot;call __get_user_%P4&quot; : &quot;=a&quot; (__ret_gu), &quot;=r&quot; (__val_gu), &quot;+r&quot; (current_stack_pointer) : &quot;0&quot; (&amp;t-&gt;modtime), &quot;i&quot; (sizeof(*(&amp;t-&gt;modtime)))); (tv[1].tv_sec) = ( __typeof__(*(&amp;t-&gt;modtime))) __val_gu; __builtin_expect(__ret_gu, 0); })" data-ref="_M/get_user">get_user</a>(<a class="local col9 ref" href="#89tv" title='tv' data-ref="89tv">tv</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec">tv_sec</a>, &amp;<a class="local col8 ref" href="#226" title='t' data-ref="88t">t</a>-&gt;<a class="ref field" href="../include/linux/compat.h.html#compat_utimbuf::modtime" title='compat_utimbuf::modtime' data-ref="compat_utimbuf::modtime">modtime</a>))</td></tr>
<tr><th id="234">234</th><td>			<b>return</b> -<a class="macro" href="../include/uapi/asm-generic/errno-base.h.html#18" title="14" data-ref="_M/EFAULT">EFAULT</a>;</td></tr>
<tr><th id="235">235</th><td>		<a class="local col9 ref" href="#89tv" title='tv' data-ref="89tv">tv</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> = <var>0</var>;</td></tr>
<tr><th id="236">236</th><td>		<a class="local col9 ref" href="#89tv" title='tv' data-ref="89tv">tv</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> = <var>0</var>;</td></tr>
<tr><th id="237">237</th><td>	}</td></tr>
<tr><th id="238">238</th><td>	<b>return</b> <a class="ref fn" href="#do_utimes" title='do_utimes' data-ref="do_utimes">do_utimes</a>(<a class="macro" href="../include/uapi/linux/fcntl.h.html#78" title="-100" data-ref="_M/AT_FDCWD">AT_FDCWD</a>, <a class="local col7 ref" href="#226" title='filename' data-ref="87filename">filename</a>, <a class="local col8 ref" href="#226" title='t' data-ref="88t">t</a> ? <a class="local col9 ref" href="#89tv" title='tv' data-ref="89tv">tv</a> : <a class="macro" href="../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <var>0</var>);</td></tr>
<tr><th id="239">239</th><td>}</td></tr>
<tr><th id="240">240</th><td></td></tr>
<tr><th id="241">241</th><td><a class="macro" href="../include/linux/compat.h.html#43" title=" long compat_sys_utimensat(unsigned int dfd, const char * filename, struct compat_timespec * t, int flags) __attribute__((alias(&quot;compat_SyS_utimensat&quot;))); static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long C_SYSC_utimensat(unsigned int dfd, const char * filename, struct compat_timespec * t, int flags); long compat_SyS_utimensat(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( unsigned int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( unsigned int)0), typeof(0ULL))), 0LL, 0L)) dfd, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct compat_timespec *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct compat_timespec *)0), typeof(0ULL))), 0LL, 0L)) t, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( int)0), typeof(0ULL))), 0LL, 0L)) flags); long compat_SyS_utimensat(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( unsigned int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( unsigned int)0), typeof(0ULL))), 0LL, 0L)) dfd, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct compat_timespec *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct compat_timespec *)0), typeof(0ULL))), 0LL, 0L)) t, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( int)0), typeof(0ULL))), 0LL, 0L)) flags) { return C_SYSC_utimensat((( unsigned int)(unsigned long)(dfd)), (( const char *)(unsigned long)(filename)), (( struct compat_timespec *)(unsigned long)(t)), (( int)(unsigned long)(flags))); } static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long C_SYSC_utimensat(unsigned int dfd, const char * filename, struct compat_timespec * t, int flags)" data-ref="_M/COMPAT_SYSCALL_DEFINE4">COMPAT_SYSCALL_DEFINE4</a>(utimensat, <em>unsigned</em> <em>int</em>, <dfn class="local col0 decl" id="90dfd" title='dfd' data-type='unsigned int' data-ref="90dfd"><dfn class="local col4 decl" id="94dfd" title='dfd' data-type='unsigned int' data-ref="94dfd"><dfn class="local col8 decl" id="98dfd" title='dfd' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((unsigned int)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((unsigned int)0), typeof (0ULL))), 0LL, 0L))' data-ref="98dfd"><dfn class="local col2 decl" id="102dfd" title='dfd' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((unsigned int)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((unsigned int)0), typeof (0ULL))), 0LL, 0L))' data-ref="102dfd"><a class="local col2 ref" href="#241" title='dfd' data-ref="102dfd"><dfn class="local col6 decl" id="106dfd" title='dfd' data-type='unsigned int' data-ref="106dfd">dfd</dfn></a></dfn></dfn></dfn></dfn>, <em>const</em> <em>char</em> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col1 decl" id="91filename" title='filename' data-type='const char *' data-ref="91filename"><dfn class="local col5 decl" id="95filename" title='filename' data-type='const char *' data-ref="95filename"><dfn class="local col9 decl" id="99filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((const char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((const char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="99filename"><dfn class="local col3 decl" id="103filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((const char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((const char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="103filename"><a class="local col3 ref" href="#241" title='filename' data-ref="103filename"><dfn class="local col7 decl" id="107filename" title='filename' data-type='const char *' data-ref="107filename">filename</dfn></a></dfn></dfn></dfn></dfn>, <b>struct</b> <a class="type" href="../arch/x86/include/asm/compat.h.html#compat_timespec" title='compat_timespec' data-ref="compat_timespec">compat_timespec</a> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col2 decl" id="92t" title='t' data-type='struct compat_timespec *' data-ref="92t"><dfn class="local col6 decl" id="96t" title='t' data-type='struct compat_timespec *' data-ref="96t"><dfn class="local col0 decl" id="100t" title='t' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct compat_timespec *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct compat_timespec *)0), typeof (0ULL))), 0LL, 0L))' data-ref="100t"><dfn class="local col4 decl" id="104t" title='t' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct compat_timespec *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct compat_timespec *)0), typeof (0ULL))), 0LL, 0L))' data-ref="104t"><a class="local col4 ref" href="#241" title='t' data-ref="104t"><dfn class="local col8 decl" id="108t" title='t' data-type='struct compat_timespec *' data-ref="108t">t</dfn></a></dfn></dfn></dfn></dfn>, <em>int</em>, <dfn class="local col3 decl" id="93flags" title='flags' data-type='int' data-ref="93flags"><dfn class="local col7 decl" id="97flags" title='flags' data-type='int' data-ref="97flags"><dfn class="local col1 decl" id="101flags" title='flags' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((int)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((int)0), typeof (0ULL))), 0LL, 0L))' data-ref="101flags"><dfn class="local col5 decl" id="105flags" title='flags' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((int)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((int)0), typeof (0ULL))), 0LL, 0L))' data-ref="105flags"><a class="local col5 ref" href="#241" title='flags' data-ref="105flags"><dfn class="local col9 decl" id="109flags" title='flags' data-type='int' data-ref="109flags">flags</dfn></a></dfn></dfn></dfn></dfn>)</td></tr>
<tr><th id="242">242</th><td>{</td></tr>
<tr><th id="243">243</th><td>	<b>struct</b> <a class="macro" href="../include/linux/time64.h.html#16" title="timespec" data-ref="_M/timespec64">timespec64</a> <dfn class="local col0 decl" id="110tv" title='tv' data-type='struct timespec [2]' data-ref="110tv">tv</dfn>[<var>2</var>];</td></tr>
<tr><th id="244">244</th><td></td></tr>
<tr><th id="245">245</th><td>	<b>if</b>  (<a class="local col8 ref" href="#241" title='t' data-ref="108t">t</a>) {</td></tr>
<tr><th id="246">246</th><td>		<b>if</b> (<a class="ref fn" href="../include/linux/compat.h.html#compat_get_timespec64" title='compat_get_timespec64' data-ref="compat_get_timespec64">compat_get_timespec64</a>(&amp;<a class="local col0 ref" href="#110tv" title='tv' data-ref="110tv">tv</a>[<var>0</var>], &amp;<a class="local col8 ref" href="#241" title='t' data-ref="108t">t</a>[<var>0</var>]) ||</td></tr>
<tr><th id="247">247</th><td>		    <a class="ref fn" href="../include/linux/compat.h.html#compat_get_timespec64" title='compat_get_timespec64' data-ref="compat_get_timespec64">compat_get_timespec64</a>(&amp;<a class="local col0 ref" href="#110tv" title='tv' data-ref="110tv">tv</a>[<var>1</var>], &amp;<a class="local col8 ref" href="#241" title='t' data-ref="108t">t</a>[<var>1</var>]))</td></tr>
<tr><th id="248">248</th><td>			<b>return</b> -<a class="macro" href="../include/uapi/asm-generic/errno-base.h.html#18" title="14" data-ref="_M/EFAULT">EFAULT</a>;</td></tr>
<tr><th id="249">249</th><td></td></tr>
<tr><th id="250">250</th><td>		<b>if</b> (<a class="local col0 ref" href="#110tv" title='tv' data-ref="110tv">tv</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> == <a class="macro" href="../include/linux/stat.h.html#16" title="((1l &lt;&lt; 30) - 2l)" data-ref="_M/UTIME_OMIT">UTIME_OMIT</a> &amp;&amp; <a class="local col0 ref" href="#110tv" title='tv' data-ref="110tv">tv</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> == <a class="macro" href="../include/linux/stat.h.html#16" title="((1l &lt;&lt; 30) - 2l)" data-ref="_M/UTIME_OMIT">UTIME_OMIT</a>)</td></tr>
<tr><th id="251">251</th><td>			<b>return</b> <var>0</var>;</td></tr>
<tr><th id="252">252</th><td>	}</td></tr>
<tr><th id="253">253</th><td>	<b>return</b> <a class="ref fn" href="#do_utimes" title='do_utimes' data-ref="do_utimes">do_utimes</a>(<a class="local col6 ref" href="#241" title='dfd' data-ref="106dfd">dfd</a>, <a class="local col7 ref" href="#241" title='filename' data-ref="107filename">filename</a>, <a class="local col8 ref" href="#241" title='t' data-ref="108t">t</a> ? <a class="local col0 ref" href="#110tv" title='tv' data-ref="110tv">tv</a> : <a class="macro" href="../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="local col9 ref" href="#241" title='flags' data-ref="109flags">flags</a>);</td></tr>
<tr><th id="254">254</th><td>}</td></tr>
<tr><th id="255">255</th><td></td></tr>
<tr><th id="256">256</th><td><a class="macro" href="../include/linux/compat.h.html#41" title=" long compat_sys_futimesat(unsigned int dfd, const char * filename, struct compat_timeval * t) __attribute__((alias(&quot;compat_SyS_futimesat&quot;))); static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long C_SYSC_futimesat(unsigned int dfd, const char * filename, struct compat_timeval * t); long compat_SyS_futimesat(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( unsigned int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( unsigned int)0), typeof(0ULL))), 0LL, 0L)) dfd, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct compat_timeval *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct compat_timeval *)0), typeof(0ULL))), 0LL, 0L)) t); long compat_SyS_futimesat(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( unsigned int)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( unsigned int)0), typeof(0ULL))), 0LL, 0L)) dfd, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct compat_timeval *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct compat_timeval *)0), typeof(0ULL))), 0LL, 0L)) t) { return C_SYSC_futimesat((( unsigned int)(unsigned long)(dfd)), (( const char *)(unsigned long)(filename)), (( struct compat_timeval *)(unsigned long)(t))); } static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long C_SYSC_futimesat(unsigned int dfd, const char * filename, struct compat_timeval * t)" data-ref="_M/COMPAT_SYSCALL_DEFINE3">COMPAT_SYSCALL_DEFINE3</a>(futimesat, <em>unsigned</em> <em>int</em>, <dfn class="local col1 decl" id="111dfd" title='dfd' data-type='unsigned int' data-ref="111dfd"><dfn class="local col4 decl" id="114dfd" title='dfd' data-type='unsigned int' data-ref="114dfd"><dfn class="local col7 decl" id="117dfd" title='dfd' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((unsigned int)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((unsigned int)0), typeof (0ULL))), 0LL, 0L))' data-ref="117dfd"><dfn class="local col0 decl" id="120dfd" title='dfd' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((unsigned int)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((unsigned int)0), typeof (0ULL))), 0LL, 0L))' data-ref="120dfd"><a class="local col0 ref" href="#256" title='dfd' data-ref="120dfd"><dfn class="local col3 decl" id="123dfd" title='dfd' data-type='unsigned int' data-ref="123dfd">dfd</dfn></a></dfn></dfn></dfn></dfn>, <em>const</em> <em>char</em> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col2 decl" id="112filename" title='filename' data-type='const char *' data-ref="112filename"><dfn class="local col5 decl" id="115filename" title='filename' data-type='const char *' data-ref="115filename"><dfn class="local col8 decl" id="118filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((const char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((const char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="118filename"><dfn class="local col1 decl" id="121filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((const char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((const char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="121filename"><a class="local col1 ref" href="#256" title='filename' data-ref="121filename"><dfn class="local col4 decl" id="124filename" title='filename' data-type='const char *' data-ref="124filename">filename</dfn></a></dfn></dfn></dfn></dfn>, <b>struct</b> <a class="type" href="../arch/x86/include/asm/compat.h.html#compat_timeval" title='compat_timeval' data-ref="compat_timeval">compat_timeval</a> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col3 decl" id="113t" title='t' data-type='struct compat_timeval *' data-ref="113t"><dfn class="local col6 decl" id="116t" title='t' data-type='struct compat_timeval *' data-ref="116t"><dfn class="local col9 decl" id="119t" title='t' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct compat_timeval *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct compat_timeval *)0), typeof (0ULL))), 0LL, 0L))' data-ref="119t"><dfn class="local col2 decl" id="122t" title='t' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct compat_timeval *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct compat_timeval *)0), typeof (0ULL))), 0LL, 0L))' data-ref="122t"><a class="local col2 ref" href="#256" title='t' data-ref="122t"><dfn class="local col5 decl" id="125t" title='t' data-type='struct compat_timeval *' data-ref="125t">t</dfn></a></dfn></dfn></dfn></dfn>)</td></tr>
<tr><th id="257">257</th><td>{</td></tr>
<tr><th id="258">258</th><td>	<b>struct</b> <a class="macro" href="../include/linux/time64.h.html#16" title="timespec" data-ref="_M/timespec64">timespec64</a> <dfn class="local col6 decl" id="126tv" title='tv' data-type='struct timespec [2]' data-ref="126tv">tv</dfn>[<var>2</var>];</td></tr>
<tr><th id="259">259</th><td></td></tr>
<tr><th id="260">260</th><td>	<b>if</b> (<a class="local col5 ref" href="#256" title='t' data-ref="125t">t</a>) {</td></tr>
<tr><th id="261">261</th><td>		<b>if</b> (<a class="macro" href="../arch/x86/include/asm/uaccess.h.html#171" title="({ int __ret_gu; register __typeof__(__builtin_choose_expr(sizeof(*(&amp;t[0].tv_sec)) &gt; sizeof(0UL), 0ULL, 0UL)) __val_gu asm(&quot;%&quot;&quot;rdx&quot;); (void)0; might_fault(); asm volatile(&quot;call __get_user_%P4&quot; : &quot;=a&quot; (__ret_gu), &quot;=r&quot; (__val_gu), &quot;+r&quot; (current_stack_pointer) : &quot;0&quot; (&amp;t[0].tv_sec), &quot;i&quot; (sizeof(*(&amp;t[0].tv_sec)))); (tv[0].tv_sec) = ( __typeof__(*(&amp;t[0].tv_sec))) __val_gu; __builtin_expect(__ret_gu, 0); })" data-ref="_M/get_user">get_user</a>(<a class="local col6 ref" href="#126tv" title='tv' data-ref="126tv">tv</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec">tv_sec</a>, &amp;<a class="local col5 ref" href="#256" title='t' data-ref="125t">t</a>[<var>0</var>].<a class="ref field" href="../arch/x86/include/asm/compat.h.html#compat_timeval::tv_sec" title='compat_timeval::tv_sec' data-ref="compat_timeval::tv_sec">tv_sec</a>) ||</td></tr>
<tr><th id="262">262</th><td>		    <a class="macro" href="../arch/x86/include/asm/uaccess.h.html#171" title="({ int __ret_gu; register __typeof__(__builtin_choose_expr(sizeof(*(&amp;t[0].tv_usec)) &gt; sizeof(0UL), 0ULL, 0UL)) __val_gu asm(&quot;%&quot;&quot;rdx&quot;); (void)0; might_fault(); asm volatile(&quot;call __get_user_%P4&quot; : &quot;=a&quot; (__ret_gu), &quot;=r&quot; (__val_gu), &quot;+r&quot; (current_stack_pointer) : &quot;0&quot; (&amp;t[0].tv_usec), &quot;i&quot; (sizeof(*(&amp;t[0].tv_usec)))); (tv[0].tv_nsec) = ( __typeof__(*(&amp;t[0].tv_usec))) __val_gu; __builtin_expect(__ret_gu, 0); })" data-ref="_M/get_user">get_user</a>(<a class="local col6 ref" href="#126tv" title='tv' data-ref="126tv">tv</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a>, &amp;<a class="local col5 ref" href="#256" title='t' data-ref="125t">t</a>[<var>0</var>].<a class="ref field" href="../arch/x86/include/asm/compat.h.html#compat_timeval::tv_usec" title='compat_timeval::tv_usec' data-ref="compat_timeval::tv_usec">tv_usec</a>) ||</td></tr>
<tr><th id="263">263</th><td>		    <a class="macro" href="../arch/x86/include/asm/uaccess.h.html#171" title="({ int __ret_gu; register __typeof__(__builtin_choose_expr(sizeof(*(&amp;t[1].tv_sec)) &gt; sizeof(0UL), 0ULL, 0UL)) __val_gu asm(&quot;%&quot;&quot;rdx&quot;); (void)0; might_fault(); asm volatile(&quot;call __get_user_%P4&quot; : &quot;=a&quot; (__ret_gu), &quot;=r&quot; (__val_gu), &quot;+r&quot; (current_stack_pointer) : &quot;0&quot; (&amp;t[1].tv_sec), &quot;i&quot; (sizeof(*(&amp;t[1].tv_sec)))); (tv[1].tv_sec) = ( __typeof__(*(&amp;t[1].tv_sec))) __val_gu; __builtin_expect(__ret_gu, 0); })" data-ref="_M/get_user">get_user</a>(<a class="local col6 ref" href="#126tv" title='tv' data-ref="126tv">tv</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec">tv_sec</a>, &amp;<a class="local col5 ref" href="#256" title='t' data-ref="125t">t</a>[<var>1</var>].<a class="ref field" href="../arch/x86/include/asm/compat.h.html#compat_timeval::tv_sec" title='compat_timeval::tv_sec' data-ref="compat_timeval::tv_sec">tv_sec</a>) ||</td></tr>
<tr><th id="264">264</th><td>		    <a class="macro" href="../arch/x86/include/asm/uaccess.h.html#171" title="({ int __ret_gu; register __typeof__(__builtin_choose_expr(sizeof(*(&amp;t[1].tv_usec)) &gt; sizeof(0UL), 0ULL, 0UL)) __val_gu asm(&quot;%&quot;&quot;rdx&quot;); (void)0; might_fault(); asm volatile(&quot;call __get_user_%P4&quot; : &quot;=a&quot; (__ret_gu), &quot;=r&quot; (__val_gu), &quot;+r&quot; (current_stack_pointer) : &quot;0&quot; (&amp;t[1].tv_usec), &quot;i&quot; (sizeof(*(&amp;t[1].tv_usec)))); (tv[1].tv_nsec) = ( __typeof__(*(&amp;t[1].tv_usec))) __val_gu; __builtin_expect(__ret_gu, 0); })" data-ref="_M/get_user">get_user</a>(<a class="local col6 ref" href="#126tv" title='tv' data-ref="126tv">tv</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a>, &amp;<a class="local col5 ref" href="#256" title='t' data-ref="125t">t</a>[<var>1</var>].<a class="ref field" href="../arch/x86/include/asm/compat.h.html#compat_timeval::tv_usec" title='compat_timeval::tv_usec' data-ref="compat_timeval::tv_usec">tv_usec</a>))</td></tr>
<tr><th id="265">265</th><td>			<b>return</b> -<a class="macro" href="../include/uapi/asm-generic/errno-base.h.html#18" title="14" data-ref="_M/EFAULT">EFAULT</a>;</td></tr>
<tr><th id="266">266</th><td>		<b>if</b> (<a class="local col6 ref" href="#126tv" title='tv' data-ref="126tv">tv</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> &gt;= <var>1000000</var> || <a class="local col6 ref" href="#126tv" title='tv' data-ref="126tv">tv</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> &lt; <var>0</var> ||</td></tr>
<tr><th id="267">267</th><td>		    <a class="local col6 ref" href="#126tv" title='tv' data-ref="126tv">tv</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> &gt;= <var>1000000</var> || <a class="local col6 ref" href="#126tv" title='tv' data-ref="126tv">tv</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> &lt; <var>0</var>)</td></tr>
<tr><th id="268">268</th><td>			<b>return</b> -<a class="macro" href="../include/uapi/asm-generic/errno-base.h.html#26" title="22" data-ref="_M/EINVAL">EINVAL</a>;</td></tr>
<tr><th id="269">269</th><td>		<a class="local col6 ref" href="#126tv" title='tv' data-ref="126tv">tv</a>[<var>0</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> *= <var>1000</var>;</td></tr>
<tr><th id="270">270</th><td>		<a class="local col6 ref" href="#126tv" title='tv' data-ref="126tv">tv</a>[<var>1</var>].<a class="ref field" href="../include/uapi/linux/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> *= <var>1000</var>;</td></tr>
<tr><th id="271">271</th><td>	}</td></tr>
<tr><th id="272">272</th><td>	<b>return</b> <a class="ref fn" href="#do_utimes" title='do_utimes' data-ref="do_utimes">do_utimes</a>(<a class="local col3 ref" href="#256" title='dfd' data-ref="123dfd">dfd</a>, <a class="local col4 ref" href="#256" title='filename' data-ref="124filename">filename</a>, <a class="local col5 ref" href="#256" title='t' data-ref="125t">t</a> ? <a class="local col6 ref" href="#126tv" title='tv' data-ref="126tv">tv</a> : <a class="macro" href="../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <var>0</var>);</td></tr>
<tr><th id="273">273</th><td>}</td></tr>
<tr><th id="274">274</th><td></td></tr>
<tr><th id="275">275</th><td><a class="macro" href="../include/linux/compat.h.html#39" title=" long compat_sys_utimes(const char * filename, struct compat_timeval * t) __attribute__((alias(&quot;compat_SyS_utimes&quot;))); static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long C_SYSC_utimes(const char * filename, struct compat_timeval * t); long compat_SyS_utimes(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct compat_timeval *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct compat_timeval *)0), typeof(0ULL))), 0LL, 0L)) t); long compat_SyS_utimes(__typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( const char *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( const char *)0), typeof(0ULL))), 0LL, 0L)) filename, __typeof(__builtin_choose_expr((__builtin_types_compatible_p(typeof(( struct compat_timeval *)0), typeof(0LL)) || __builtin_types_compatible_p(typeof(( struct compat_timeval *)0), typeof(0ULL))), 0LL, 0L)) t) { return C_SYSC_utimes((( const char *)(unsigned long)(filename)), (( struct compat_timeval *)(unsigned long)(t))); } static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) long C_SYSC_utimes(const char * filename, struct compat_timeval * t)" data-ref="_M/COMPAT_SYSCALL_DEFINE2">COMPAT_SYSCALL_DEFINE2</a>(utimes, <em>const</em> <em>char</em> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col7 decl" id="127filename" title='filename' data-type='const char *' data-ref="127filename"><dfn class="local col9 decl" id="129filename" title='filename' data-type='const char *' data-ref="129filename"><dfn class="local col1 decl" id="131filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((const char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((const char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="131filename"><dfn class="local col3 decl" id="133filename" title='filename' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((const char *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((const char *)0), typeof (0ULL))), 0LL, 0L))' data-ref="133filename"><a class="local col3 ref" href="#275" title='filename' data-ref="133filename"><dfn class="local col5 decl" id="135filename" title='filename' data-type='const char *' data-ref="135filename">filename</dfn></a></dfn></dfn></dfn></dfn>, <b>struct</b> <a class="type" href="../arch/x86/include/asm/compat.h.html#compat_timeval" title='compat_timeval' data-ref="compat_timeval">compat_timeval</a> <a class="macro" href="../include/linux/compiler_types.h.html#29" title="" data-ref="_M/__user">__user</a> *, <dfn class="local col8 decl" id="128t" title='t' data-type='struct compat_timeval *' data-ref="128t"><dfn class="local col0 decl" id="130t" title='t' data-type='struct compat_timeval *' data-ref="130t"><dfn class="local col2 decl" id="132t" title='t' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct compat_timeval *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct compat_timeval *)0), typeof (0ULL))), 0LL, 0L))' data-ref="132t"><dfn class="local col4 decl" id="134t" title='t' data-type='typeof (__builtin_choose_expr((__builtin_types_compatible_p(typeof ((struct compat_timeval *)0), typeof (0LL)) || __builtin_types_compatible_p(typeof ((struct compat_timeval *)0), typeof (0ULL))), 0LL, 0L))' data-ref="134t"><a class="local col4 ref" href="#275" title='t' data-ref="134t"><dfn class="local col6 decl" id="136t" title='t' data-type='struct compat_timeval *' data-ref="136t">t</dfn></a></dfn></dfn></dfn></dfn>)</td></tr>
<tr><th id="276">276</th><td>{</td></tr>
<tr><th id="277">277</th><td>	<b>return</b> <a class="ref fn" href="../include/linux/compat.h.html#compat_sys_futimesat" title='compat_sys_futimesat' data-ref="compat_sys_futimesat">compat_sys_futimesat</a>(<a class="macro" href="../include/uapi/linux/fcntl.h.html#78" title="-100" data-ref="_M/AT_FDCWD">AT_FDCWD</a>, <a class="local col5 ref" href="#275" title='filename' data-ref="135filename">filename</a>, <a class="local col6 ref" href="#275" title='t' data-ref="136t">t</a>);</td></tr>
<tr><th id="278">278</th><td>}</td></tr>
<tr><th id="279">279</th><td><u>#<span data-ppcond="221">endif</span></u></td></tr>
<tr><th id="280">280</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2018-Aug-01</em> from project linux-4.14.y revision <em>linux-4.14.y</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
