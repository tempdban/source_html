<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>nft_set_hash.c source code [linux-4.14.y/net/netfilter/nft_set_hash.c] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="nft_hash,nft_hash_elem,nft_rhash,nft_rhash_cmp_arg,nft_rhash_elem "/>
<link rel="stylesheet" href="../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'linux-4.14.y/net/netfilter/nft_set_hash.c'; var root_path = '../../..'; var data_path = '../../../../data';</script>
<script src='../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../..'>linux-4.14.y</a>/<a href='..'>net</a>/<a href='./'>netfilter</a>/<a href='nft_set_hash.c.html'>nft_set_hash.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> * Copyright (c) 2008-2014 Patrick McHardy &lt;kaber@trash.net&gt;</i></td></tr>
<tr><th id="3">3</th><td><i> *</i></td></tr>
<tr><th id="4">4</th><td><i> * This program is free software; you can redistribute it and/or modify</i></td></tr>
<tr><th id="5">5</th><td><i> * it under the terms of the GNU General Public License version 2 as</i></td></tr>
<tr><th id="6">6</th><td><i> * published by the Free Software Foundation.</i></td></tr>
<tr><th id="7">7</th><td><i> *</i></td></tr>
<tr><th id="8">8</th><td><i> * Development of this code funded by Astaro AG (<a href="http://www.astaro.com/">http://www.astaro.com/</a>)</i></td></tr>
<tr><th id="9">9</th><td><i> */</i></td></tr>
<tr><th id="10">10</th><td></td></tr>
<tr><th id="11">11</th><td><u>#include <a href="../../include/linux/kernel.h.html">&lt;linux/kernel.h&gt;</a></u></td></tr>
<tr><th id="12">12</th><td><u>#include <a href="../../include/linux/init.h.html">&lt;linux/init.h&gt;</a></u></td></tr>
<tr><th id="13">13</th><td><u>#include <a href="../../include/linux/module.h.html">&lt;linux/module.h&gt;</a></u></td></tr>
<tr><th id="14">14</th><td><u>#include <a href="../../include/linux/list.h.html">&lt;linux/list.h&gt;</a></u></td></tr>
<tr><th id="15">15</th><td><u>#include <a href="../../include/linux/log2.h.html">&lt;linux/log2.h&gt;</a></u></td></tr>
<tr><th id="16">16</th><td><u>#include <a href="../../include/linux/jhash.h.html">&lt;linux/jhash.h&gt;</a></u></td></tr>
<tr><th id="17">17</th><td><u>#include <a href="../../include/linux/netlink.h.html">&lt;linux/netlink.h&gt;</a></u></td></tr>
<tr><th id="18">18</th><td><u>#include <a href="../../include/linux/workqueue.h.html">&lt;linux/workqueue.h&gt;</a></u></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="../../include/linux/rhashtable.h.html">&lt;linux/rhashtable.h&gt;</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="../../include/linux/netfilter.h.html">&lt;linux/netfilter.h&gt;</a></u></td></tr>
<tr><th id="21">21</th><td><u>#include <a href="../../include/uapi/linux/netfilter/nf_tables.h.html">&lt;linux/netfilter/nf_tables.h&gt;</a></u></td></tr>
<tr><th id="22">22</th><td><u>#include <a href="../../include/net/netfilter/nf_tables.h.html">&lt;net/netfilter/nf_tables.h&gt;</a></u></td></tr>
<tr><th id="23">23</th><td></td></tr>
<tr><th id="24">24</th><td><i>/* We target a hash table size of 4, element hint is 75% of final size */</i></td></tr>
<tr><th id="25">25</th><td><u>#define <dfn class="macro" id="_M/NFT_RHASH_ELEMENT_HINT" data-ref="_M/NFT_RHASH_ELEMENT_HINT">NFT_RHASH_ELEMENT_HINT</dfn> 3</u></td></tr>
<tr><th id="26">26</th><td></td></tr>
<tr><th id="27">27</th><td><b>struct</b> <dfn class="type def" id="nft_rhash" title='nft_rhash' data-ref="nft_rhash">nft_rhash</dfn> {</td></tr>
<tr><th id="28">28</th><td>	<b>struct</b> <a class="type" href="../../include/linux/rhashtable.h.html#rhashtable" title='rhashtable' data-ref="rhashtable">rhashtable</a>		<dfn class="tu decl field" id="nft_rhash::ht" title='nft_rhash::ht' data-type='struct rhashtable' data-ref="nft_rhash::ht">ht</dfn>;</td></tr>
<tr><th id="29">29</th><td>	<b>struct</b> <a class="type" href="../../include/linux/workqueue.h.html#delayed_work" title='delayed_work' data-ref="delayed_work">delayed_work</a>		<dfn class="tu decl field" id="nft_rhash::gc_work" title='nft_rhash::gc_work' data-type='struct delayed_work' data-ref="nft_rhash::gc_work">gc_work</dfn>;</td></tr>
<tr><th id="30">30</th><td>};</td></tr>
<tr><th id="31">31</th><td></td></tr>
<tr><th id="32">32</th><td><b>struct</b> <dfn class="type def" id="nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</dfn> {</td></tr>
<tr><th id="33">33</th><td>	<b>struct</b> <a class="type" href="../../include/linux/rhashtable.h.html#rhash_head" title='rhash_head' data-ref="rhash_head">rhash_head</a>		<dfn class="tu decl field" id="nft_rhash_elem::node" title='nft_rhash_elem::node' data-type='struct rhash_head' data-ref="nft_rhash_elem::node">node</dfn>;</td></tr>
<tr><th id="34">34</th><td>	<b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext" title='nft_set_ext' data-ref="nft_set_ext">nft_set_ext</a>		<dfn class="tu decl field" id="nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-type='struct nft_set_ext' data-ref="nft_rhash_elem::ext">ext</dfn>;</td></tr>
<tr><th id="35">35</th><td>};</td></tr>
<tr><th id="36">36</th><td></td></tr>
<tr><th id="37">37</th><td><b>struct</b> <dfn class="type def" id="nft_rhash_cmp_arg" title='nft_rhash_cmp_arg' data-ref="nft_rhash_cmp_arg">nft_rhash_cmp_arg</dfn> {</td></tr>
<tr><th id="38">38</th><td>	<em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a>		*<dfn class="tu decl field" id="nft_rhash_cmp_arg::set" title='nft_rhash_cmp_arg::set' data-type='const struct nft_set *' data-ref="nft_rhash_cmp_arg::set">set</dfn>;</td></tr>
<tr><th id="39">39</th><td>	<em>const</em> <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a>			*<dfn class="tu decl field" id="nft_rhash_cmp_arg::key" title='nft_rhash_cmp_arg::key' data-type='const u32 *' data-ref="nft_rhash_cmp_arg::key">key</dfn>;</td></tr>
<tr><th id="40">40</th><td>	<a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a>				<dfn class="tu decl field" id="nft_rhash_cmp_arg::genmask" title='nft_rhash_cmp_arg::genmask' data-type='u8' data-ref="nft_rhash_cmp_arg::genmask">genmask</dfn>;</td></tr>
<tr><th id="41">41</th><td>};</td></tr>
<tr><th id="42">42</th><td></td></tr>
<tr><th id="43">43</th><td><em>static</em> <a class="macro" href="../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="tu decl def fn" id="nft_rhash_key" title='nft_rhash_key' data-type='u32 nft_rhash_key(const void * data, u32 len, u32 seed)' data-ref="nft_rhash_key">nft_rhash_key</dfn>(<em>const</em> <em>void</em> *<dfn class="local col1 decl" id="1data" title='data' data-type='const void *' data-ref="1data">data</dfn>, <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col2 decl" id="2len" title='len' data-type='u32' data-ref="2len">len</dfn>, <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col3 decl" id="3seed" title='seed' data-type='u32' data-ref="3seed">seed</dfn>)</td></tr>
<tr><th id="44">44</th><td>{</td></tr>
<tr><th id="45">45</th><td>	<em>const</em> <b>struct</b> <a class="type" href="#nft_rhash_cmp_arg" title='nft_rhash_cmp_arg' data-ref="nft_rhash_cmp_arg">nft_rhash_cmp_arg</a> *<dfn class="local col4 decl" id="4arg" title='arg' data-type='const struct nft_rhash_cmp_arg *' data-ref="4arg">arg</dfn> = <a class="local col1 ref" href="#1data" title='data' data-ref="1data">data</a>;</td></tr>
<tr><th id="46">46</th><td></td></tr>
<tr><th id="47">47</th><td>	<b>return</b> <a class="ref fn" href="../../include/linux/jhash.h.html#jhash" title='jhash' data-ref="jhash">jhash</a>(<a class="local col4 ref" href="#4arg" title='arg' data-ref="4arg">arg</a>-&gt;<a class="tu ref field" href="#nft_rhash_cmp_arg::key" title='nft_rhash_cmp_arg::key' data-use='r' data-ref="nft_rhash_cmp_arg::key">key</a>, <a class="local col2 ref" href="#2len" title='len' data-ref="2len">len</a>, <a class="local col3 ref" href="#3seed" title='seed' data-ref="3seed">seed</a>);</td></tr>
<tr><th id="48">48</th><td>}</td></tr>
<tr><th id="49">49</th><td></td></tr>
<tr><th id="50">50</th><td><em>static</em> <a class="macro" href="../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="tu decl def fn" id="nft_rhash_obj" title='nft_rhash_obj' data-type='u32 nft_rhash_obj(const void * data, u32 len, u32 seed)' data-ref="nft_rhash_obj">nft_rhash_obj</dfn>(<em>const</em> <em>void</em> *<dfn class="local col5 decl" id="5data" title='data' data-type='const void *' data-ref="5data">data</dfn>, <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col6 decl" id="6len" title='len' data-type='u32' data-ref="6len">len</dfn>, <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col7 decl" id="7seed" title='seed' data-type='u32' data-ref="7seed">seed</dfn>)</td></tr>
<tr><th id="51">51</th><td>{</td></tr>
<tr><th id="52">52</th><td>	<em>const</em> <b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a> *<dfn class="local col8 decl" id="8he" title='he' data-type='const struct nft_rhash_elem *' data-ref="8he">he</dfn> = <a class="local col5 ref" href="#5data" title='data' data-ref="5data">data</a>;</td></tr>
<tr><th id="53">53</th><td></td></tr>
<tr><th id="54">54</th><td>	<b>return</b> <a class="ref fn" href="../../include/linux/jhash.h.html#jhash" title='jhash' data-ref="jhash">jhash</a>(<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext_key" title='nft_set_ext_key' data-ref="nft_set_ext_key">nft_set_ext_key</a>(&amp;<a class="local col8 ref" href="#8he" title='he' data-ref="8he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>), <a class="local col6 ref" href="#6len" title='len' data-ref="6len">len</a>, <a class="local col7 ref" href="#7seed" title='seed' data-ref="7seed">seed</a>);</td></tr>
<tr><th id="55">55</th><td>}</td></tr>
<tr><th id="56">56</th><td></td></tr>
<tr><th id="57">57</th><td><em>static</em> <a class="macro" href="../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>int</em> <dfn class="tu decl def fn" id="nft_rhash_cmp" title='nft_rhash_cmp' data-type='int nft_rhash_cmp(struct rhashtable_compare_arg * arg, const void * ptr)' data-ref="nft_rhash_cmp">nft_rhash_cmp</dfn>(<b>struct</b> <a class="type" href="../../include/linux/rhashtable.h.html#rhashtable_compare_arg" title='rhashtable_compare_arg' data-ref="rhashtable_compare_arg">rhashtable_compare_arg</a> *<dfn class="local col9 decl" id="9arg" title='arg' data-type='struct rhashtable_compare_arg *' data-ref="9arg">arg</dfn>,</td></tr>
<tr><th id="58">58</th><td>				<em>const</em> <em>void</em> *<dfn class="local col0 decl" id="10ptr" title='ptr' data-type='const void *' data-ref="10ptr">ptr</dfn>)</td></tr>
<tr><th id="59">59</th><td>{</td></tr>
<tr><th id="60">60</th><td>	<em>const</em> <b>struct</b> <a class="type" href="#nft_rhash_cmp_arg" title='nft_rhash_cmp_arg' data-ref="nft_rhash_cmp_arg">nft_rhash_cmp_arg</a> *<dfn class="local col1 decl" id="11x" title='x' data-type='const struct nft_rhash_cmp_arg *' data-ref="11x">x</dfn> = <a class="local col9 ref" href="#9arg" title='arg' data-ref="9arg">arg</a>-&gt;<a class="ref field" href="../../include/linux/rhashtable.h.html#rhashtable_compare_arg::key" title='rhashtable_compare_arg::key' data-ref="rhashtable_compare_arg::key">key</a>;</td></tr>
<tr><th id="61">61</th><td>	<em>const</em> <b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a> *<dfn class="local col2 decl" id="12he" title='he' data-type='const struct nft_rhash_elem *' data-ref="12he">he</dfn> = <a class="local col0 ref" href="#10ptr" title='ptr' data-ref="10ptr">ptr</a>;</td></tr>
<tr><th id="62">62</th><td></td></tr>
<tr><th id="63">63</th><td>	<b>if</b> (<a class="ref fn" href="../../arch/x86/include/asm/string_64.h.html#memcmp" title='memcmp' data-ref="memcmp">memcmp</a>(<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext_key" title='nft_set_ext_key' data-ref="nft_set_ext_key">nft_set_ext_key</a>(&amp;<a class="local col2 ref" href="#12he" title='he' data-ref="12he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>), <a class="local col1 ref" href="#11x" title='x' data-ref="11x">x</a>-&gt;<a class="tu ref field" href="#nft_rhash_cmp_arg::key" title='nft_rhash_cmp_arg::key' data-use='r' data-ref="nft_rhash_cmp_arg::key">key</a>, <a class="local col1 ref" href="#11x" title='x' data-ref="11x">x</a>-&gt;<a class="tu ref field" href="#nft_rhash_cmp_arg::set" title='nft_rhash_cmp_arg::set' data-use='r' data-ref="nft_rhash_cmp_arg::set">set</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set::klen" title='nft_set::klen' data-ref="nft_set::klen">klen</a>))</td></tr>
<tr><th id="64">64</th><td>		<b>return</b> <var>1</var>;</td></tr>
<tr><th id="65">65</th><td>	<b>if</b> (<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_expired" title='nft_set_elem_expired' data-ref="nft_set_elem_expired">nft_set_elem_expired</a>(&amp;<a class="local col2 ref" href="#12he" title='he' data-ref="12he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>))</td></tr>
<tr><th id="66">66</th><td>		<b>return</b> <var>1</var>;</td></tr>
<tr><th id="67">67</th><td>	<b>if</b> (!<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_active" title='nft_set_elem_active' data-ref="nft_set_elem_active">nft_set_elem_active</a>(&amp;<a class="local col2 ref" href="#12he" title='he' data-ref="12he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>, <a class="local col1 ref" href="#11x" title='x' data-ref="11x">x</a>-&gt;<a class="tu ref field" href="#nft_rhash_cmp_arg::genmask" title='nft_rhash_cmp_arg::genmask' data-use='r' data-ref="nft_rhash_cmp_arg::genmask">genmask</a>))</td></tr>
<tr><th id="68">68</th><td>		<b>return</b> <var>1</var>;</td></tr>
<tr><th id="69">69</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="70">70</th><td>}</td></tr>
<tr><th id="71">71</th><td></td></tr>
<tr><th id="72">72</th><td><em>static</em> <em>const</em> <b>struct</b> <a class="type" href="../../include/linux/rhashtable.h.html#rhashtable_params" title='rhashtable_params' data-ref="rhashtable_params">rhashtable_params</a> <dfn class="tu decl def" id="nft_rhash_params" title='nft_rhash_params' data-type='const struct rhashtable_params' data-ref="nft_rhash_params">nft_rhash_params</dfn> = {</td></tr>
<tr><th id="73">73</th><td>	.<a class="ref field" href="../../include/linux/rhashtable.h.html#rhashtable_params::head_offset" title='rhashtable_params::head_offset' data-ref="rhashtable_params::head_offset">head_offset</a>		= <a class="macro" href="../../include/linux/stddef.h.html#17" title="__builtin_offsetof(struct nft_rhash_elem, node)" data-ref="_M/offsetof">offsetof</a>(<b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a>, node),</td></tr>
<tr><th id="74">74</th><td>	.<a class="ref field" href="../../include/linux/rhashtable.h.html#rhashtable_params::hashfn" title='rhashtable_params::hashfn' data-ref="rhashtable_params::hashfn">hashfn</a>			= <a class="tu ref fn" href="#nft_rhash_key" title='nft_rhash_key' data-ref="nft_rhash_key">nft_rhash_key</a>,</td></tr>
<tr><th id="75">75</th><td>	.<a class="ref field" href="../../include/linux/rhashtable.h.html#rhashtable_params::obj_hashfn" title='rhashtable_params::obj_hashfn' data-ref="rhashtable_params::obj_hashfn">obj_hashfn</a>		= <a class="tu ref fn" href="#nft_rhash_obj" title='nft_rhash_obj' data-ref="nft_rhash_obj">nft_rhash_obj</a>,</td></tr>
<tr><th id="76">76</th><td>	.<a class="ref field" href="../../include/linux/rhashtable.h.html#rhashtable_params::obj_cmpfn" title='rhashtable_params::obj_cmpfn' data-ref="rhashtable_params::obj_cmpfn">obj_cmpfn</a>		= <a class="tu ref fn" href="#nft_rhash_cmp" title='nft_rhash_cmp' data-ref="nft_rhash_cmp">nft_rhash_cmp</a>,</td></tr>
<tr><th id="77">77</th><td>	.<a class="ref field" href="../../include/linux/rhashtable.h.html#rhashtable_params::automatic_shrinking" title='rhashtable_params::automatic_shrinking' data-ref="rhashtable_params::automatic_shrinking">automatic_shrinking</a>	= <a class="enum" href="../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>,</td></tr>
<tr><th id="78">78</th><td>};</td></tr>
<tr><th id="79">79</th><td></td></tr>
<tr><th id="80">80</th><td><em>static</em> <a class="typedef" href="../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="tu decl def fn" id="nft_rhash_lookup" title='nft_rhash_lookup' data-type='bool nft_rhash_lookup(const struct net * net, const struct nft_set * set, const u32 * key, const struct nft_set_ext ** ext)' data-ref="nft_rhash_lookup">nft_rhash_lookup</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/net_namespace.h.html#net" title='net' data-ref="net">net</a> *<dfn class="local col3 decl" id="13net" title='net' data-type='const struct net *' data-ref="13net">net</dfn>, <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col4 decl" id="14set" title='set' data-type='const struct nft_set *' data-ref="14set">set</dfn>,</td></tr>
<tr><th id="81">81</th><td>			     <em>const</em> <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> *<dfn class="local col5 decl" id="15key" title='key' data-type='const u32 *' data-ref="15key">key</dfn>, <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext" title='nft_set_ext' data-ref="nft_set_ext">nft_set_ext</a> **<dfn class="local col6 decl" id="16ext" title='ext' data-type='const struct nft_set_ext **' data-ref="16ext">ext</dfn>)</td></tr>
<tr><th id="82">82</th><td>{</td></tr>
<tr><th id="83">83</th><td>	<b>struct</b> <a class="type" href="#nft_rhash" title='nft_rhash' data-ref="nft_rhash">nft_rhash</a> *<dfn class="local col7 decl" id="17priv" title='priv' data-type='struct nft_rhash *' data-ref="17priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col4 ref" href="#14set" title='set' data-ref="14set">set</a>);</td></tr>
<tr><th id="84">84</th><td>	<em>const</em> <b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a> *<dfn class="local col8 decl" id="18he" title='he' data-type='const struct nft_rhash_elem *' data-ref="18he">he</dfn>;</td></tr>
<tr><th id="85">85</th><td>	<b>struct</b> <a class="type" href="#nft_rhash_cmp_arg" title='nft_rhash_cmp_arg' data-ref="nft_rhash_cmp_arg">nft_rhash_cmp_arg</a> <dfn class="local col9 decl" id="19arg" title='arg' data-type='struct nft_rhash_cmp_arg' data-ref="19arg">arg</dfn> = {</td></tr>
<tr><th id="86">86</th><td>		.<a class="tu ref field" href="#nft_rhash_cmp_arg::genmask" title='nft_rhash_cmp_arg::genmask' data-use='w' data-ref="nft_rhash_cmp_arg::genmask">genmask</a> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_genmask_cur" title='nft_genmask_cur' data-ref="nft_genmask_cur">nft_genmask_cur</a>(<a class="local col3 ref" href="#13net" title='net' data-ref="13net">net</a>),</td></tr>
<tr><th id="87">87</th><td>		.<a class="tu ref field" href="#nft_rhash_cmp_arg::set" title='nft_rhash_cmp_arg::set' data-use='w' data-ref="nft_rhash_cmp_arg::set">set</a>	 = <a class="local col4 ref" href="#14set" title='set' data-ref="14set">set</a>,</td></tr>
<tr><th id="88">88</th><td>		.<a class="tu ref field" href="#nft_rhash_cmp_arg::key" title='nft_rhash_cmp_arg::key' data-use='w' data-ref="nft_rhash_cmp_arg::key">key</a>	 = <a class="local col5 ref" href="#15key" title='key' data-ref="15key">key</a>,</td></tr>
<tr><th id="89">89</th><td>	};</td></tr>
<tr><th id="90">90</th><td></td></tr>
<tr><th id="91">91</th><td>	<a class="local col8 ref" href="#18he" title='he' data-ref="18he">he</a> = <a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_lookup_fast" title='rhashtable_lookup_fast' data-ref="rhashtable_lookup_fast">rhashtable_lookup_fast</a>(&amp;<a class="local col7 ref" href="#17priv" title='priv' data-ref="17priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::ht" title='nft_rhash::ht' data-use='a' data-ref="nft_rhash::ht">ht</a>, &amp;<a class="local col9 ref" href="#19arg" title='arg' data-ref="19arg">arg</a>, <a class="tu ref" href="#nft_rhash_params" title='nft_rhash_params' data-use='r' data-ref="nft_rhash_params">nft_rhash_params</a>);</td></tr>
<tr><th id="92">92</th><td>	<b>if</b> (<a class="local col8 ref" href="#18he" title='he' data-ref="18he">he</a> != <a class="macro" href="../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>)</td></tr>
<tr><th id="93">93</th><td>		*<a class="local col6 ref" href="#16ext" title='ext' data-ref="16ext">ext</a> = &amp;<a class="local col8 ref" href="#18he" title='he' data-ref="18he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>;</td></tr>
<tr><th id="94">94</th><td></td></tr>
<tr><th id="95">95</th><td>	<b>return</b> !!<a class="local col8 ref" href="#18he" title='he' data-ref="18he">he</a>;</td></tr>
<tr><th id="96">96</th><td>}</td></tr>
<tr><th id="97">97</th><td></td></tr>
<tr><th id="98">98</th><td><em>static</em> <a class="typedef" href="../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="tu decl def fn" id="nft_rhash_update" title='nft_rhash_update' data-type='bool nft_rhash_update(struct nft_set * set, const u32 * key, void *(*)(struct nft_set *, const struct nft_expr *, struct nft_regs *) new, const struct nft_expr * expr, struct nft_regs * regs, const struct nft_set_ext ** ext)' data-ref="nft_rhash_update">nft_rhash_update</dfn>(<b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col0 decl" id="20set" title='set' data-type='struct nft_set *' data-ref="20set">set</dfn>, <em>const</em> <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> *<dfn class="local col1 decl" id="21key" title='key' data-type='const u32 *' data-ref="21key">key</dfn>,</td></tr>
<tr><th id="99">99</th><td>			     <em>void</em> *(*<dfn class="local col2 decl" id="22new" title='new' data-type='void *(*)(struct nft_set *, const struct nft_expr *, struct nft_regs *)' data-ref="22new">new</dfn>)(<b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *,</td></tr>
<tr><th id="100">100</th><td>					  <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_expr" title='nft_expr' data-ref="nft_expr">nft_expr</a> *,</td></tr>
<tr><th id="101">101</th><td>					  <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_regs" title='nft_regs' data-ref="nft_regs">nft_regs</a> *<dfn class="local col3 decl" id="23regs" title='regs' data-type='struct nft_regs *' data-ref="23regs">regs</dfn>),</td></tr>
<tr><th id="102">102</th><td>			     <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_expr" title='nft_expr' data-ref="nft_expr">nft_expr</a> *<dfn class="local col4 decl" id="24expr" title='expr' data-type='const struct nft_expr *' data-ref="24expr">expr</dfn>,</td></tr>
<tr><th id="103">103</th><td>			     <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_regs" title='nft_regs' data-ref="nft_regs">nft_regs</a> *<dfn class="local col5 decl" id="25regs" title='regs' data-type='struct nft_regs *' data-ref="25regs">regs</dfn>,</td></tr>
<tr><th id="104">104</th><td>			     <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext" title='nft_set_ext' data-ref="nft_set_ext">nft_set_ext</a> **<dfn class="local col6 decl" id="26ext" title='ext' data-type='const struct nft_set_ext **' data-ref="26ext">ext</dfn>)</td></tr>
<tr><th id="105">105</th><td>{</td></tr>
<tr><th id="106">106</th><td>	<b>struct</b> <a class="type" href="#nft_rhash" title='nft_rhash' data-ref="nft_rhash">nft_rhash</a> *<dfn class="local col7 decl" id="27priv" title='priv' data-type='struct nft_rhash *' data-ref="27priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col0 ref" href="#20set" title='set' data-ref="20set">set</a>);</td></tr>
<tr><th id="107">107</th><td>	<b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a> *<dfn class="local col8 decl" id="28he" title='he' data-type='struct nft_rhash_elem *' data-ref="28he">he</dfn>, *<dfn class="local col9 decl" id="29prev" title='prev' data-type='struct nft_rhash_elem *' data-ref="29prev">prev</dfn>;</td></tr>
<tr><th id="108">108</th><td>	<b>struct</b> <a class="type" href="#nft_rhash_cmp_arg" title='nft_rhash_cmp_arg' data-ref="nft_rhash_cmp_arg">nft_rhash_cmp_arg</a> <dfn class="local col0 decl" id="30arg" title='arg' data-type='struct nft_rhash_cmp_arg' data-ref="30arg">arg</dfn> = {</td></tr>
<tr><th id="109">109</th><td>		.<a class="tu ref field" href="#nft_rhash_cmp_arg::genmask" title='nft_rhash_cmp_arg::genmask' data-use='w' data-ref="nft_rhash_cmp_arg::genmask">genmask</a> = <a class="macro" href="../../include/net/netfilter/nf_tables.h.html#1177" title="((1 &lt;&lt; 0) | (1 &lt;&lt; 1))" data-ref="_M/NFT_GENMASK_ANY">NFT_GENMASK_ANY</a>,</td></tr>
<tr><th id="110">110</th><td>		.<a class="tu ref field" href="#nft_rhash_cmp_arg::set" title='nft_rhash_cmp_arg::set' data-use='w' data-ref="nft_rhash_cmp_arg::set">set</a>	 = <a class="local col0 ref" href="#20set" title='set' data-ref="20set">set</a>,</td></tr>
<tr><th id="111">111</th><td>		.<a class="tu ref field" href="#nft_rhash_cmp_arg::key" title='nft_rhash_cmp_arg::key' data-use='w' data-ref="nft_rhash_cmp_arg::key">key</a>	 = <a class="local col1 ref" href="#21key" title='key' data-ref="21key">key</a>,</td></tr>
<tr><th id="112">112</th><td>	};</td></tr>
<tr><th id="113">113</th><td></td></tr>
<tr><th id="114">114</th><td>	<a class="local col8 ref" href="#28he" title='he' data-ref="28he">he</a> = <a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_lookup_fast" title='rhashtable_lookup_fast' data-ref="rhashtable_lookup_fast">rhashtable_lookup_fast</a>(&amp;<a class="local col7 ref" href="#27priv" title='priv' data-ref="27priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::ht" title='nft_rhash::ht' data-use='a' data-ref="nft_rhash::ht">ht</a>, &amp;<a class="local col0 ref" href="#30arg" title='arg' data-ref="30arg">arg</a>, <a class="tu ref" href="#nft_rhash_params" title='nft_rhash_params' data-use='r' data-ref="nft_rhash_params">nft_rhash_params</a>);</td></tr>
<tr><th id="115">115</th><td>	<b>if</b> (<a class="local col8 ref" href="#28he" title='he' data-ref="28he">he</a> != <a class="macro" href="../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>)</td></tr>
<tr><th id="116">116</th><td>		<b>goto</b> <a class="lbl" href="#31out" data-ref="31out">out</a>;</td></tr>
<tr><th id="117">117</th><td></td></tr>
<tr><th id="118">118</th><td>	<a class="local col8 ref" href="#28he" title='he' data-ref="28he">he</a> = <a class="local col2 ref" href="#22new" title='new' data-ref="22new">new</a>(<a class="local col0 ref" href="#20set" title='set' data-ref="20set">set</a>, <a class="local col4 ref" href="#24expr" title='expr' data-ref="24expr">expr</a>, <a class="local col5 ref" href="#25regs" title='regs' data-ref="25regs">regs</a>);</td></tr>
<tr><th id="119">119</th><td>	<b>if</b> (<a class="local col8 ref" href="#28he" title='he' data-ref="28he">he</a> == <a class="macro" href="../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>)</td></tr>
<tr><th id="120">120</th><td>		<b>goto</b> <a class="lbl" href="#32err1" data-ref="32err1">err1</a>;</td></tr>
<tr><th id="121">121</th><td></td></tr>
<tr><th id="122">122</th><td>	<a class="local col9 ref" href="#29prev" title='prev' data-ref="29prev">prev</a> = <a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_lookup_get_insert_key" title='rhashtable_lookup_get_insert_key' data-ref="rhashtable_lookup_get_insert_key">rhashtable_lookup_get_insert_key</a>(&amp;<a class="local col7 ref" href="#27priv" title='priv' data-ref="27priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::ht" title='nft_rhash::ht' data-use='a' data-ref="nft_rhash::ht">ht</a>, &amp;<a class="local col0 ref" href="#30arg" title='arg' data-ref="30arg">arg</a>, &amp;<a class="local col8 ref" href="#28he" title='he' data-ref="28he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::node" title='nft_rhash_elem::node' data-use='a' data-ref="nft_rhash_elem::node">node</a>,</td></tr>
<tr><th id="123">123</th><td>						<a class="tu ref" href="#nft_rhash_params" title='nft_rhash_params' data-use='r' data-ref="nft_rhash_params">nft_rhash_params</a>);</td></tr>
<tr><th id="124">124</th><td>	<b>if</b> (<a class="ref fn" href="../../include/linux/err.h.html#IS_ERR" title='IS_ERR' data-ref="IS_ERR">IS_ERR</a>(<a class="local col9 ref" href="#29prev" title='prev' data-ref="29prev">prev</a>))</td></tr>
<tr><th id="125">125</th><td>		<b>goto</b> <a class="lbl" href="#33err2" data-ref="33err2">err2</a>;</td></tr>
<tr><th id="126">126</th><td></td></tr>
<tr><th id="127">127</th><td>	<i>/* Another cpu may race to insert the element with the same key */</i></td></tr>
<tr><th id="128">128</th><td>	<b>if</b> (<a class="local col9 ref" href="#29prev" title='prev' data-ref="29prev">prev</a>) {</td></tr>
<tr><th id="129">129</th><td>		<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_destroy" title='nft_set_elem_destroy' data-ref="nft_set_elem_destroy">nft_set_elem_destroy</a>(<a class="local col0 ref" href="#20set" title='set' data-ref="20set">set</a>, <a class="local col8 ref" href="#28he" title='he' data-ref="28he">he</a>, <a class="enum" href="../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>);</td></tr>
<tr><th id="130">130</th><td>		<a class="local col8 ref" href="#28he" title='he' data-ref="28he">he</a> = <a class="local col9 ref" href="#29prev" title='prev' data-ref="29prev">prev</a>;</td></tr>
<tr><th id="131">131</th><td>	}</td></tr>
<tr><th id="132">132</th><td></td></tr>
<tr><th id="133">133</th><td><dfn class="lbl" id="31out" data-ref="31out">out</dfn>:</td></tr>
<tr><th id="134">134</th><td>	*<a class="local col6 ref" href="#26ext" title='ext' data-ref="26ext">ext</a> = &amp;<a class="local col8 ref" href="#28he" title='he' data-ref="28he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>;</td></tr>
<tr><th id="135">135</th><td>	<b>return</b> <a class="enum" href="../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>;</td></tr>
<tr><th id="136">136</th><td></td></tr>
<tr><th id="137">137</th><td><dfn class="lbl" id="33err2" data-ref="33err2">err2</dfn>:</td></tr>
<tr><th id="138">138</th><td>	<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_destroy" title='nft_set_elem_destroy' data-ref="nft_set_elem_destroy">nft_set_elem_destroy</a>(<a class="local col0 ref" href="#20set" title='set' data-ref="20set">set</a>, <a class="local col8 ref" href="#28he" title='he' data-ref="28he">he</a>, <a class="enum" href="../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>);</td></tr>
<tr><th id="139">139</th><td><dfn class="lbl" id="32err1" data-ref="32err1">err1</dfn>:</td></tr>
<tr><th id="140">140</th><td>	<b>return</b> <a class="enum" href="../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>;</td></tr>
<tr><th id="141">141</th><td>}</td></tr>
<tr><th id="142">142</th><td></td></tr>
<tr><th id="143">143</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="nft_rhash_insert" title='nft_rhash_insert' data-type='int nft_rhash_insert(const struct net * net, const struct nft_set * set, const struct nft_set_elem * elem, struct nft_set_ext ** ext)' data-ref="nft_rhash_insert">nft_rhash_insert</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/net_namespace.h.html#net" title='net' data-ref="net">net</a> *<dfn class="local col4 decl" id="34net" title='net' data-type='const struct net *' data-ref="34net">net</dfn>, <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col5 decl" id="35set" title='set' data-type='const struct nft_set *' data-ref="35set">set</dfn>,</td></tr>
<tr><th id="144">144</th><td>			    <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem" title='nft_set_elem' data-ref="nft_set_elem">nft_set_elem</a> *<dfn class="local col6 decl" id="36elem" title='elem' data-type='const struct nft_set_elem *' data-ref="36elem">elem</dfn>,</td></tr>
<tr><th id="145">145</th><td>			    <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext" title='nft_set_ext' data-ref="nft_set_ext">nft_set_ext</a> **<dfn class="local col7 decl" id="37ext" title='ext' data-type='struct nft_set_ext **' data-ref="37ext">ext</dfn>)</td></tr>
<tr><th id="146">146</th><td>{</td></tr>
<tr><th id="147">147</th><td>	<b>struct</b> <a class="type" href="#nft_rhash" title='nft_rhash' data-ref="nft_rhash">nft_rhash</a> *<dfn class="local col8 decl" id="38priv" title='priv' data-type='struct nft_rhash *' data-ref="38priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col5 ref" href="#35set" title='set' data-ref="35set">set</a>);</td></tr>
<tr><th id="148">148</th><td>	<b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a> *<dfn class="local col9 decl" id="39he" title='he' data-type='struct nft_rhash_elem *' data-ref="39he">he</dfn> = <a class="local col6 ref" href="#36elem" title='elem' data-ref="36elem">elem</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::priv" title='nft_set_elem::priv' data-ref="nft_set_elem::priv">priv</a>;</td></tr>
<tr><th id="149">149</th><td>	<b>struct</b> <a class="type" href="#nft_rhash_cmp_arg" title='nft_rhash_cmp_arg' data-ref="nft_rhash_cmp_arg">nft_rhash_cmp_arg</a> <dfn class="local col0 decl" id="40arg" title='arg' data-type='struct nft_rhash_cmp_arg' data-ref="40arg">arg</dfn> = {</td></tr>
<tr><th id="150">150</th><td>		.<a class="tu ref field" href="#nft_rhash_cmp_arg::genmask" title='nft_rhash_cmp_arg::genmask' data-use='w' data-ref="nft_rhash_cmp_arg::genmask">genmask</a> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_genmask_next" title='nft_genmask_next' data-ref="nft_genmask_next">nft_genmask_next</a>(<a class="local col4 ref" href="#34net" title='net' data-ref="34net">net</a>),</td></tr>
<tr><th id="151">151</th><td>		.<a class="tu ref field" href="#nft_rhash_cmp_arg::set" title='nft_rhash_cmp_arg::set' data-use='w' data-ref="nft_rhash_cmp_arg::set">set</a>	 = <a class="local col5 ref" href="#35set" title='set' data-ref="35set">set</a>,</td></tr>
<tr><th id="152">152</th><td>		.<a class="tu ref field" href="#nft_rhash_cmp_arg::key" title='nft_rhash_cmp_arg::key' data-use='w' data-ref="nft_rhash_cmp_arg::key">key</a>	 = <a class="local col6 ref" href="#36elem" title='elem' data-ref="36elem">elem</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::key" title='nft_set_elem::key' data-ref="nft_set_elem::key">key</a>.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::(anonymous)::val" title='nft_set_elem::(anonymous union)::val' data-ref="nft_set_elem::(anonymous)::val">val</a>.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_data::(anonymous)::data" title='nft_data::(anonymous union)::data' data-ref="nft_data::(anonymous)::data">data</a>,</td></tr>
<tr><th id="153">153</th><td>	};</td></tr>
<tr><th id="154">154</th><td>	<b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a> *<dfn class="local col1 decl" id="41prev" title='prev' data-type='struct nft_rhash_elem *' data-ref="41prev">prev</dfn>;</td></tr>
<tr><th id="155">155</th><td></td></tr>
<tr><th id="156">156</th><td>	<a class="local col1 ref" href="#41prev" title='prev' data-ref="41prev">prev</a> = <a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_lookup_get_insert_key" title='rhashtable_lookup_get_insert_key' data-ref="rhashtable_lookup_get_insert_key">rhashtable_lookup_get_insert_key</a>(&amp;<a class="local col8 ref" href="#38priv" title='priv' data-ref="38priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::ht" title='nft_rhash::ht' data-use='a' data-ref="nft_rhash::ht">ht</a>, &amp;<a class="local col0 ref" href="#40arg" title='arg' data-ref="40arg">arg</a>, &amp;<a class="local col9 ref" href="#39he" title='he' data-ref="39he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::node" title='nft_rhash_elem::node' data-use='a' data-ref="nft_rhash_elem::node">node</a>,</td></tr>
<tr><th id="157">157</th><td>						<a class="tu ref" href="#nft_rhash_params" title='nft_rhash_params' data-use='r' data-ref="nft_rhash_params">nft_rhash_params</a>);</td></tr>
<tr><th id="158">158</th><td>	<b>if</b> (<a class="ref fn" href="../../include/linux/err.h.html#IS_ERR" title='IS_ERR' data-ref="IS_ERR">IS_ERR</a>(<a class="local col1 ref" href="#41prev" title='prev' data-ref="41prev">prev</a>))</td></tr>
<tr><th id="159">159</th><td>		<b>return</b> <a class="ref fn" href="../../include/linux/err.h.html#PTR_ERR" title='PTR_ERR' data-ref="PTR_ERR">PTR_ERR</a>(<a class="local col1 ref" href="#41prev" title='prev' data-ref="41prev">prev</a>);</td></tr>
<tr><th id="160">160</th><td>	<b>if</b> (<a class="local col1 ref" href="#41prev" title='prev' data-ref="41prev">prev</a>) {</td></tr>
<tr><th id="161">161</th><td>		*<a class="local col7 ref" href="#37ext" title='ext' data-ref="37ext">ext</a> = &amp;<a class="local col1 ref" href="#41prev" title='prev' data-ref="41prev">prev</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>;</td></tr>
<tr><th id="162">162</th><td>		<b>return</b> -<a class="macro" href="../../include/uapi/asm-generic/errno-base.h.html#21" title="17" data-ref="_M/EEXIST">EEXIST</a>;</td></tr>
<tr><th id="163">163</th><td>	}</td></tr>
<tr><th id="164">164</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="165">165</th><td>}</td></tr>
<tr><th id="166">166</th><td></td></tr>
<tr><th id="167">167</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="nft_rhash_activate" title='nft_rhash_activate' data-type='void nft_rhash_activate(const struct net * net, const struct nft_set * set, const struct nft_set_elem * elem)' data-ref="nft_rhash_activate">nft_rhash_activate</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/net_namespace.h.html#net" title='net' data-ref="net">net</a> *<dfn class="local col2 decl" id="42net" title='net' data-type='const struct net *' data-ref="42net">net</dfn>, <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col3 decl" id="43set" title='set' data-type='const struct nft_set *' data-ref="43set">set</dfn>,</td></tr>
<tr><th id="168">168</th><td>			       <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem" title='nft_set_elem' data-ref="nft_set_elem">nft_set_elem</a> *<dfn class="local col4 decl" id="44elem" title='elem' data-type='const struct nft_set_elem *' data-ref="44elem">elem</dfn>)</td></tr>
<tr><th id="169">169</th><td>{</td></tr>
<tr><th id="170">170</th><td>	<b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a> *<dfn class="local col5 decl" id="45he" title='he' data-type='struct nft_rhash_elem *' data-ref="45he">he</dfn> = <a class="local col4 ref" href="#44elem" title='elem' data-ref="44elem">elem</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::priv" title='nft_set_elem::priv' data-ref="nft_set_elem::priv">priv</a>;</td></tr>
<tr><th id="171">171</th><td></td></tr>
<tr><th id="172">172</th><td>	<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_change_active" title='nft_set_elem_change_active' data-ref="nft_set_elem_change_active">nft_set_elem_change_active</a>(<a class="local col2 ref" href="#42net" title='net' data-ref="42net">net</a>, <a class="local col3 ref" href="#43set" title='set' data-ref="43set">set</a>, &amp;<a class="local col5 ref" href="#45he" title='he' data-ref="45he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>);</td></tr>
<tr><th id="173">173</th><td>	<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_clear_busy" title='nft_set_elem_clear_busy' data-ref="nft_set_elem_clear_busy">nft_set_elem_clear_busy</a>(&amp;<a class="local col5 ref" href="#45he" title='he' data-ref="45he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>);</td></tr>
<tr><th id="174">174</th><td>}</td></tr>
<tr><th id="175">175</th><td></td></tr>
<tr><th id="176">176</th><td><em>static</em> <a class="typedef" href="../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="tu decl def fn" id="nft_rhash_flush" title='nft_rhash_flush' data-type='bool nft_rhash_flush(const struct net * net, const struct nft_set * set, void * priv)' data-ref="nft_rhash_flush">nft_rhash_flush</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/net_namespace.h.html#net" title='net' data-ref="net">net</a> *<dfn class="local col6 decl" id="46net" title='net' data-type='const struct net *' data-ref="46net">net</dfn>,</td></tr>
<tr><th id="177">177</th><td>			    <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col7 decl" id="47set" title='set' data-type='const struct nft_set *' data-ref="47set">set</dfn>, <em>void</em> *<dfn class="local col8 decl" id="48priv" title='priv' data-type='void *' data-ref="48priv">priv</dfn>)</td></tr>
<tr><th id="178">178</th><td>{</td></tr>
<tr><th id="179">179</th><td>	<b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a> *<dfn class="local col9 decl" id="49he" title='he' data-type='struct nft_rhash_elem *' data-ref="49he">he</dfn> = <a class="local col8 ref" href="#48priv" title='priv' data-ref="48priv">priv</a>;</td></tr>
<tr><th id="180">180</th><td></td></tr>
<tr><th id="181">181</th><td>	<b>if</b> (!<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_mark_busy" title='nft_set_elem_mark_busy' data-ref="nft_set_elem_mark_busy">nft_set_elem_mark_busy</a>(&amp;<a class="local col9 ref" href="#49he" title='he' data-ref="49he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>) ||</td></tr>
<tr><th id="182">182</th><td>	    !<a class="macro" href="../../include/net/netfilter/nf_tables.h.html#1184" title="(((&amp;he-&gt;ext)-&gt;genmask &amp; nft_genmask_cur(net)) == 0)" data-ref="_M/nft_is_active">nft_is_active</a>(<a class="local col6 ref" href="#46net" title='net' data-ref="46net">net</a>, &amp;<a class="local col9 ref" href="#49he" title='he' data-ref="49he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>)) {</td></tr>
<tr><th id="183">183</th><td>		<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_change_active" title='nft_set_elem_change_active' data-ref="nft_set_elem_change_active">nft_set_elem_change_active</a>(<a class="local col6 ref" href="#46net" title='net' data-ref="46net">net</a>, <a class="local col7 ref" href="#47set" title='set' data-ref="47set">set</a>, &amp;<a class="local col9 ref" href="#49he" title='he' data-ref="49he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>);</td></tr>
<tr><th id="184">184</th><td>		<b>return</b> <a class="enum" href="../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>;</td></tr>
<tr><th id="185">185</th><td>	}</td></tr>
<tr><th id="186">186</th><td>	<b>return</b> <a class="enum" href="../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>;</td></tr>
<tr><th id="187">187</th><td>}</td></tr>
<tr><th id="188">188</th><td></td></tr>
<tr><th id="189">189</th><td><em>static</em> <em>void</em> *<dfn class="tu decl def fn" id="nft_rhash_deactivate" title='nft_rhash_deactivate' data-type='void * nft_rhash_deactivate(const struct net * net, const struct nft_set * set, const struct nft_set_elem * elem)' data-ref="nft_rhash_deactivate">nft_rhash_deactivate</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/net_namespace.h.html#net" title='net' data-ref="net">net</a> *<dfn class="local col0 decl" id="50net" title='net' data-type='const struct net *' data-ref="50net">net</dfn>,</td></tr>
<tr><th id="190">190</th><td>				  <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col1 decl" id="51set" title='set' data-type='const struct nft_set *' data-ref="51set">set</dfn>,</td></tr>
<tr><th id="191">191</th><td>				  <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem" title='nft_set_elem' data-ref="nft_set_elem">nft_set_elem</a> *<dfn class="local col2 decl" id="52elem" title='elem' data-type='const struct nft_set_elem *' data-ref="52elem">elem</dfn>)</td></tr>
<tr><th id="192">192</th><td>{</td></tr>
<tr><th id="193">193</th><td>	<b>struct</b> <a class="type" href="#nft_rhash" title='nft_rhash' data-ref="nft_rhash">nft_rhash</a> *<dfn class="local col3 decl" id="53priv" title='priv' data-type='struct nft_rhash *' data-ref="53priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col1 ref" href="#51set" title='set' data-ref="51set">set</a>);</td></tr>
<tr><th id="194">194</th><td>	<b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a> *<dfn class="local col4 decl" id="54he" title='he' data-type='struct nft_rhash_elem *' data-ref="54he">he</dfn>;</td></tr>
<tr><th id="195">195</th><td>	<b>struct</b> <a class="type" href="#nft_rhash_cmp_arg" title='nft_rhash_cmp_arg' data-ref="nft_rhash_cmp_arg">nft_rhash_cmp_arg</a> <dfn class="local col5 decl" id="55arg" title='arg' data-type='struct nft_rhash_cmp_arg' data-ref="55arg">arg</dfn> = {</td></tr>
<tr><th id="196">196</th><td>		.<a class="tu ref field" href="#nft_rhash_cmp_arg::genmask" title='nft_rhash_cmp_arg::genmask' data-use='w' data-ref="nft_rhash_cmp_arg::genmask">genmask</a> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_genmask_next" title='nft_genmask_next' data-ref="nft_genmask_next">nft_genmask_next</a>(<a class="local col0 ref" href="#50net" title='net' data-ref="50net">net</a>),</td></tr>
<tr><th id="197">197</th><td>		.<a class="tu ref field" href="#nft_rhash_cmp_arg::set" title='nft_rhash_cmp_arg::set' data-use='w' data-ref="nft_rhash_cmp_arg::set">set</a>	 = <a class="local col1 ref" href="#51set" title='set' data-ref="51set">set</a>,</td></tr>
<tr><th id="198">198</th><td>		.<a class="tu ref field" href="#nft_rhash_cmp_arg::key" title='nft_rhash_cmp_arg::key' data-use='w' data-ref="nft_rhash_cmp_arg::key">key</a>	 = <a class="local col2 ref" href="#52elem" title='elem' data-ref="52elem">elem</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::key" title='nft_set_elem::key' data-ref="nft_set_elem::key">key</a>.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::(anonymous)::val" title='nft_set_elem::(anonymous union)::val' data-ref="nft_set_elem::(anonymous)::val">val</a>.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_data::(anonymous)::data" title='nft_data::(anonymous union)::data' data-ref="nft_data::(anonymous)::data">data</a>,</td></tr>
<tr><th id="199">199</th><td>	};</td></tr>
<tr><th id="200">200</th><td></td></tr>
<tr><th id="201">201</th><td>	<a class="ref fn" href="../../include/linux/rcupdate.h.html#rcu_read_lock" title='rcu_read_lock' data-ref="rcu_read_lock">rcu_read_lock</a>();</td></tr>
<tr><th id="202">202</th><td>	<a class="local col4 ref" href="#54he" title='he' data-ref="54he">he</a> = <a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_lookup_fast" title='rhashtable_lookup_fast' data-ref="rhashtable_lookup_fast">rhashtable_lookup_fast</a>(&amp;<a class="local col3 ref" href="#53priv" title='priv' data-ref="53priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::ht" title='nft_rhash::ht' data-use='a' data-ref="nft_rhash::ht">ht</a>, &amp;<a class="local col5 ref" href="#55arg" title='arg' data-ref="55arg">arg</a>, <a class="tu ref" href="#nft_rhash_params" title='nft_rhash_params' data-use='r' data-ref="nft_rhash_params">nft_rhash_params</a>);</td></tr>
<tr><th id="203">203</th><td>	<b>if</b> (<a class="local col4 ref" href="#54he" title='he' data-ref="54he">he</a> != <a class="macro" href="../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a> &amp;&amp;</td></tr>
<tr><th id="204">204</th><td>	    !<a class="tu ref fn" href="#nft_rhash_flush" title='nft_rhash_flush' data-use='c' data-ref="nft_rhash_flush">nft_rhash_flush</a>(<a class="local col0 ref" href="#50net" title='net' data-ref="50net">net</a>, <a class="local col1 ref" href="#51set" title='set' data-ref="51set">set</a>, <a class="local col4 ref" href="#54he" title='he' data-ref="54he">he</a>))</td></tr>
<tr><th id="205">205</th><td>		<a class="local col4 ref" href="#54he" title='he' data-ref="54he">he</a> = <a class="macro" href="../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="206">206</th><td></td></tr>
<tr><th id="207">207</th><td>	<a class="ref fn" href="../../include/linux/rcupdate.h.html#rcu_read_unlock" title='rcu_read_unlock' data-ref="rcu_read_unlock">rcu_read_unlock</a>();</td></tr>
<tr><th id="208">208</th><td></td></tr>
<tr><th id="209">209</th><td>	<b>return</b> <a class="local col4 ref" href="#54he" title='he' data-ref="54he">he</a>;</td></tr>
<tr><th id="210">210</th><td>}</td></tr>
<tr><th id="211">211</th><td></td></tr>
<tr><th id="212">212</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="nft_rhash_remove" title='nft_rhash_remove' data-type='void nft_rhash_remove(const struct net * net, const struct nft_set * set, const struct nft_set_elem * elem)' data-ref="nft_rhash_remove">nft_rhash_remove</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/net_namespace.h.html#net" title='net' data-ref="net">net</a> *<dfn class="local col6 decl" id="56net" title='net' data-type='const struct net *' data-ref="56net">net</dfn>,</td></tr>
<tr><th id="213">213</th><td>			     <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col7 decl" id="57set" title='set' data-type='const struct nft_set *' data-ref="57set">set</dfn>,</td></tr>
<tr><th id="214">214</th><td>			     <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem" title='nft_set_elem' data-ref="nft_set_elem">nft_set_elem</a> *<dfn class="local col8 decl" id="58elem" title='elem' data-type='const struct nft_set_elem *' data-ref="58elem">elem</dfn>)</td></tr>
<tr><th id="215">215</th><td>{</td></tr>
<tr><th id="216">216</th><td>	<b>struct</b> <a class="type" href="#nft_rhash" title='nft_rhash' data-ref="nft_rhash">nft_rhash</a> *<dfn class="local col9 decl" id="59priv" title='priv' data-type='struct nft_rhash *' data-ref="59priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col7 ref" href="#57set" title='set' data-ref="57set">set</a>);</td></tr>
<tr><th id="217">217</th><td>	<b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a> *<dfn class="local col0 decl" id="60he" title='he' data-type='struct nft_rhash_elem *' data-ref="60he">he</dfn> = <a class="local col8 ref" href="#58elem" title='elem' data-ref="58elem">elem</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::priv" title='nft_set_elem::priv' data-ref="nft_set_elem::priv">priv</a>;</td></tr>
<tr><th id="218">218</th><td></td></tr>
<tr><th id="219">219</th><td>	<a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_remove_fast" title='rhashtable_remove_fast' data-ref="rhashtable_remove_fast">rhashtable_remove_fast</a>(&amp;<a class="local col9 ref" href="#59priv" title='priv' data-ref="59priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::ht" title='nft_rhash::ht' data-use='a' data-ref="nft_rhash::ht">ht</a>, &amp;<a class="local col0 ref" href="#60he" title='he' data-ref="60he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::node" title='nft_rhash_elem::node' data-use='a' data-ref="nft_rhash_elem::node">node</a>, <a class="tu ref" href="#nft_rhash_params" title='nft_rhash_params' data-use='r' data-ref="nft_rhash_params">nft_rhash_params</a>);</td></tr>
<tr><th id="220">220</th><td>}</td></tr>
<tr><th id="221">221</th><td></td></tr>
<tr><th id="222">222</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="nft_rhash_walk" title='nft_rhash_walk' data-type='void nft_rhash_walk(const struct nft_ctx * ctx, struct nft_set * set, struct nft_set_iter * iter)' data-ref="nft_rhash_walk">nft_rhash_walk</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_ctx" title='nft_ctx' data-ref="nft_ctx">nft_ctx</a> *<dfn class="local col1 decl" id="61ctx" title='ctx' data-type='const struct nft_ctx *' data-ref="61ctx">ctx</dfn>, <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col2 decl" id="62set" title='set' data-type='struct nft_set *' data-ref="62set">set</dfn>,</td></tr>
<tr><th id="223">223</th><td>			   <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter" title='nft_set_iter' data-ref="nft_set_iter">nft_set_iter</a> *<dfn class="local col3 decl" id="63iter" title='iter' data-type='struct nft_set_iter *' data-ref="63iter">iter</dfn>)</td></tr>
<tr><th id="224">224</th><td>{</td></tr>
<tr><th id="225">225</th><td>	<b>struct</b> <a class="type" href="#nft_rhash" title='nft_rhash' data-ref="nft_rhash">nft_rhash</a> *<dfn class="local col4 decl" id="64priv" title='priv' data-type='struct nft_rhash *' data-ref="64priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col2 ref" href="#62set" title='set' data-ref="62set">set</a>);</td></tr>
<tr><th id="226">226</th><td>	<b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a> *<dfn class="local col5 decl" id="65he" title='he' data-type='struct nft_rhash_elem *' data-ref="65he">he</dfn>;</td></tr>
<tr><th id="227">227</th><td>	<b>struct</b> <a class="type" href="../../include/linux/rhashtable.h.html#rhashtable_iter" title='rhashtable_iter' data-ref="rhashtable_iter">rhashtable_iter</a> <dfn class="local col6 decl" id="66hti" title='hti' data-type='struct rhashtable_iter' data-ref="66hti">hti</dfn>;</td></tr>
<tr><th id="228">228</th><td>	<b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem" title='nft_set_elem' data-ref="nft_set_elem">nft_set_elem</a> <dfn class="local col7 decl" id="67elem" title='elem' data-type='struct nft_set_elem' data-ref="67elem">elem</dfn>;</td></tr>
<tr><th id="229">229</th><td>	<em>int</em> <dfn class="local col8 decl" id="68err" title='err' data-type='int' data-ref="68err">err</dfn>;</td></tr>
<tr><th id="230">230</th><td></td></tr>
<tr><th id="231">231</th><td>	<a class="local col8 ref" href="#68err" title='err' data-ref="68err">err</a> = <a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_walk_init" title='rhashtable_walk_init' data-ref="rhashtable_walk_init">rhashtable_walk_init</a>(&amp;<a class="local col4 ref" href="#64priv" title='priv' data-ref="64priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::ht" title='nft_rhash::ht' data-use='a' data-ref="nft_rhash::ht">ht</a>, &amp;<a class="local col6 ref" href="#66hti" title='hti' data-ref="66hti">hti</a>, <a class="macro" href="../../include/linux/gfp.h.html#277" title="((( gfp_t)0x20u)|(( gfp_t)0x80000u)|(( gfp_t)0x1000000u))" data-ref="_M/GFP_ATOMIC">GFP_ATOMIC</a>);</td></tr>
<tr><th id="232">232</th><td>	<a class="local col3 ref" href="#63iter" title='iter' data-ref="63iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::err" title='nft_set_iter::err' data-ref="nft_set_iter::err">err</a> = <a class="local col8 ref" href="#68err" title='err' data-ref="68err">err</a>;</td></tr>
<tr><th id="233">233</th><td>	<b>if</b> (<a class="local col8 ref" href="#68err" title='err' data-ref="68err">err</a>)</td></tr>
<tr><th id="234">234</th><td>		<b>return</b>;</td></tr>
<tr><th id="235">235</th><td></td></tr>
<tr><th id="236">236</th><td>	<a class="local col8 ref" href="#68err" title='err' data-ref="68err">err</a> = <a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_walk_start" title='rhashtable_walk_start' data-ref="rhashtable_walk_start">rhashtable_walk_start</a>(&amp;<a class="local col6 ref" href="#66hti" title='hti' data-ref="66hti">hti</a>);</td></tr>
<tr><th id="237">237</th><td>	<b>if</b> (<a class="local col8 ref" href="#68err" title='err' data-ref="68err">err</a> &amp;&amp; <a class="local col8 ref" href="#68err" title='err' data-ref="68err">err</a> != -<a class="macro" href="../../include/uapi/asm-generic/errno-base.h.html#15" title="11" data-ref="_M/EAGAIN">EAGAIN</a>) {</td></tr>
<tr><th id="238">238</th><td>		<a class="local col3 ref" href="#63iter" title='iter' data-ref="63iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::err" title='nft_set_iter::err' data-ref="nft_set_iter::err">err</a> = <a class="local col8 ref" href="#68err" title='err' data-ref="68err">err</a>;</td></tr>
<tr><th id="239">239</th><td>		<b>goto</b> <a class="lbl" href="#69out" data-ref="69out">out</a>;</td></tr>
<tr><th id="240">240</th><td>	}</td></tr>
<tr><th id="241">241</th><td></td></tr>
<tr><th id="242">242</th><td>	<b>while</b> ((<a class="local col5 ref" href="#65he" title='he' data-ref="65he">he</a> = <a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_walk_next" title='rhashtable_walk_next' data-ref="rhashtable_walk_next">rhashtable_walk_next</a>(&amp;<a class="local col6 ref" href="#66hti" title='hti' data-ref="66hti">hti</a>))) {</td></tr>
<tr><th id="243">243</th><td>		<b>if</b> (<a class="ref fn" href="../../include/linux/err.h.html#IS_ERR" title='IS_ERR' data-ref="IS_ERR">IS_ERR</a>(<a class="local col5 ref" href="#65he" title='he' data-ref="65he">he</a>)) {</td></tr>
<tr><th id="244">244</th><td>			<a class="local col8 ref" href="#68err" title='err' data-ref="68err">err</a> = <a class="ref fn" href="../../include/linux/err.h.html#PTR_ERR" title='PTR_ERR' data-ref="PTR_ERR">PTR_ERR</a>(<a class="local col5 ref" href="#65he" title='he' data-ref="65he">he</a>);</td></tr>
<tr><th id="245">245</th><td>			<b>if</b> (<a class="local col8 ref" href="#68err" title='err' data-ref="68err">err</a> != -<a class="macro" href="../../include/uapi/asm-generic/errno-base.h.html#15" title="11" data-ref="_M/EAGAIN">EAGAIN</a>) {</td></tr>
<tr><th id="246">246</th><td>				<a class="local col3 ref" href="#63iter" title='iter' data-ref="63iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::err" title='nft_set_iter::err' data-ref="nft_set_iter::err">err</a> = <a class="local col8 ref" href="#68err" title='err' data-ref="68err">err</a>;</td></tr>
<tr><th id="247">247</th><td>				<b>goto</b> <a class="lbl" href="#69out" data-ref="69out">out</a>;</td></tr>
<tr><th id="248">248</th><td>			}</td></tr>
<tr><th id="249">249</th><td></td></tr>
<tr><th id="250">250</th><td>			<b>continue</b>;</td></tr>
<tr><th id="251">251</th><td>		}</td></tr>
<tr><th id="252">252</th><td></td></tr>
<tr><th id="253">253</th><td>		<b>if</b> (<a class="local col3 ref" href="#63iter" title='iter' data-ref="63iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::count" title='nft_set_iter::count' data-ref="nft_set_iter::count">count</a> &lt; <a class="local col3 ref" href="#63iter" title='iter' data-ref="63iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::skip" title='nft_set_iter::skip' data-ref="nft_set_iter::skip">skip</a>)</td></tr>
<tr><th id="254">254</th><td>			<b>goto</b> <a class="lbl" href="#70cont" data-ref="70cont">cont</a>;</td></tr>
<tr><th id="255">255</th><td>		<b>if</b> (<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_expired" title='nft_set_elem_expired' data-ref="nft_set_elem_expired">nft_set_elem_expired</a>(&amp;<a class="local col5 ref" href="#65he" title='he' data-ref="65he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>))</td></tr>
<tr><th id="256">256</th><td>			<b>goto</b> <a class="lbl" href="#70cont" data-ref="70cont">cont</a>;</td></tr>
<tr><th id="257">257</th><td>		<b>if</b> (!<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_active" title='nft_set_elem_active' data-ref="nft_set_elem_active">nft_set_elem_active</a>(&amp;<a class="local col5 ref" href="#65he" title='he' data-ref="65he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>, <a class="local col3 ref" href="#63iter" title='iter' data-ref="63iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::genmask" title='nft_set_iter::genmask' data-ref="nft_set_iter::genmask">genmask</a>))</td></tr>
<tr><th id="258">258</th><td>			<b>goto</b> <a class="lbl" href="#70cont" data-ref="70cont">cont</a>;</td></tr>
<tr><th id="259">259</th><td></td></tr>
<tr><th id="260">260</th><td>		<a class="local col7 ref" href="#67elem" title='elem' data-ref="67elem">elem</a>.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::priv" title='nft_set_elem::priv' data-ref="nft_set_elem::priv">priv</a> = <a class="local col5 ref" href="#65he" title='he' data-ref="65he">he</a>;</td></tr>
<tr><th id="261">261</th><td></td></tr>
<tr><th id="262">262</th><td>		<a class="local col3 ref" href="#63iter" title='iter' data-ref="63iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::err" title='nft_set_iter::err' data-ref="nft_set_iter::err">err</a> = <a class="local col3 ref" href="#63iter" title='iter' data-ref="63iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::fn" title='nft_set_iter::fn' data-ref="nft_set_iter::fn">fn</a>(<a class="local col1 ref" href="#61ctx" title='ctx' data-ref="61ctx">ctx</a>, <a class="local col2 ref" href="#62set" title='set' data-ref="62set">set</a>, <a class="local col3 ref" href="#63iter" title='iter' data-ref="63iter">iter</a>, &amp;<a class="local col7 ref" href="#67elem" title='elem' data-ref="67elem">elem</a>);</td></tr>
<tr><th id="263">263</th><td>		<b>if</b> (<a class="local col3 ref" href="#63iter" title='iter' data-ref="63iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::err" title='nft_set_iter::err' data-ref="nft_set_iter::err">err</a> &lt; <var>0</var>)</td></tr>
<tr><th id="264">264</th><td>			<b>goto</b> <a class="lbl" href="#69out" data-ref="69out">out</a>;</td></tr>
<tr><th id="265">265</th><td></td></tr>
<tr><th id="266">266</th><td><dfn class="lbl" id="70cont" data-ref="70cont">cont</dfn>:</td></tr>
<tr><th id="267">267</th><td>		<a class="local col3 ref" href="#63iter" title='iter' data-ref="63iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::count" title='nft_set_iter::count' data-ref="nft_set_iter::count">count</a>++;</td></tr>
<tr><th id="268">268</th><td>	}</td></tr>
<tr><th id="269">269</th><td></td></tr>
<tr><th id="270">270</th><td><dfn class="lbl" id="69out" data-ref="69out">out</dfn>:</td></tr>
<tr><th id="271">271</th><td>	<a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_walk_stop" title='rhashtable_walk_stop' data-ref="rhashtable_walk_stop">rhashtable_walk_stop</a>(&amp;<a class="local col6 ref" href="#66hti" title='hti' data-ref="66hti">hti</a>);</td></tr>
<tr><th id="272">272</th><td>	<a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_walk_exit" title='rhashtable_walk_exit' data-ref="rhashtable_walk_exit">rhashtable_walk_exit</a>(&amp;<a class="local col6 ref" href="#66hti" title='hti' data-ref="66hti">hti</a>);</td></tr>
<tr><th id="273">273</th><td>}</td></tr>
<tr><th id="274">274</th><td></td></tr>
<tr><th id="275">275</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="nft_rhash_gc" title='nft_rhash_gc' data-type='void nft_rhash_gc(struct work_struct * work)' data-ref="nft_rhash_gc">nft_rhash_gc</dfn>(<b>struct</b> <a class="type" href="../../include/linux/workqueue.h.html#work_struct" title='work_struct' data-ref="work_struct">work_struct</a> *<dfn class="local col1 decl" id="71work" title='work' data-type='struct work_struct *' data-ref="71work">work</dfn>)</td></tr>
<tr><th id="276">276</th><td>{</td></tr>
<tr><th id="277">277</th><td>	<b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col2 decl" id="72set" title='set' data-type='struct nft_set *' data-ref="72set">set</dfn>;</td></tr>
<tr><th id="278">278</th><td>	<b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a> *<dfn class="local col3 decl" id="73he" title='he' data-type='struct nft_rhash_elem *' data-ref="73he">he</dfn>;</td></tr>
<tr><th id="279">279</th><td>	<b>struct</b> <a class="type" href="#nft_rhash" title='nft_rhash' data-ref="nft_rhash">nft_rhash</a> *<dfn class="local col4 decl" id="74priv" title='priv' data-type='struct nft_rhash *' data-ref="74priv">priv</dfn>;</td></tr>
<tr><th id="280">280</th><td>	<b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_gc_batch" title='nft_set_gc_batch' data-ref="nft_set_gc_batch">nft_set_gc_batch</a> *<dfn class="local col5 decl" id="75gcb" title='gcb' data-type='struct nft_set_gc_batch *' data-ref="75gcb">gcb</dfn> = <a class="macro" href="../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="281">281</th><td>	<b>struct</b> <a class="type" href="../../include/linux/rhashtable.h.html#rhashtable_iter" title='rhashtable_iter' data-ref="rhashtable_iter">rhashtable_iter</a> <dfn class="local col6 decl" id="76hti" title='hti' data-type='struct rhashtable_iter' data-ref="76hti">hti</dfn>;</td></tr>
<tr><th id="282">282</th><td>	<em>int</em> <dfn class="local col7 decl" id="77err" title='err' data-type='int' data-ref="77err">err</dfn>;</td></tr>
<tr><th id="283">283</th><td></td></tr>
<tr><th id="284">284</th><td>	<a class="local col4 ref" href="#74priv" title='priv' data-ref="74priv">priv</a> = <a class="macro" href="../../include/linux/kernel.h.html#927" title="({ void *__mptr = (void *)(work); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(work)), typeof(((struct nft_rhash *)0)-&gt;gc_work.work)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(work)), typeof(void)))); extern void __compiletime_assert_284(void) ; if (__cond) __compiletime_assert_284(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((struct nft_rhash *)(__mptr - __builtin_offsetof(struct nft_rhash, gc_work.work))); })" data-ref="_M/container_of">container_of</a>(<a class="local col1 ref" href="#71work" title='work' data-ref="71work">work</a>, <b>struct</b> <a class="type" href="#nft_rhash" title='nft_rhash' data-ref="nft_rhash">nft_rhash</a>, <a class="tu ref field" href="#nft_rhash::gc_work" title='nft_rhash::gc_work' data-use='m' data-ref="nft_rhash::gc_work">gc_work</a>.<a class="ref field" href="../../include/linux/workqueue.h.html#delayed_work::work" title='delayed_work::work' data-ref="delayed_work::work">work</a>);</td></tr>
<tr><th id="285">285</th><td>	<a class="local col2 ref" href="#72set" title='set' data-ref="72set">set</a>  = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_container_of" title='nft_set_container_of' data-ref="nft_set_container_of">nft_set_container_of</a>(<a class="local col4 ref" href="#74priv" title='priv' data-ref="74priv">priv</a>);</td></tr>
<tr><th id="286">286</th><td></td></tr>
<tr><th id="287">287</th><td>	<a class="local col7 ref" href="#77err" title='err' data-ref="77err">err</a> = <a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_walk_init" title='rhashtable_walk_init' data-ref="rhashtable_walk_init">rhashtable_walk_init</a>(&amp;<a class="local col4 ref" href="#74priv" title='priv' data-ref="74priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::ht" title='nft_rhash::ht' data-use='a' data-ref="nft_rhash::ht">ht</a>, &amp;<a class="local col6 ref" href="#76hti" title='hti' data-ref="76hti">hti</a>, <a class="macro" href="../../include/linux/gfp.h.html#278" title="((( gfp_t)(0x400000u|0x1000000u)) | (( gfp_t)0x40u) | (( gfp_t)0x80u))" data-ref="_M/GFP_KERNEL">GFP_KERNEL</a>);</td></tr>
<tr><th id="288">288</th><td>	<b>if</b> (<a class="local col7 ref" href="#77err" title='err' data-ref="77err">err</a>)</td></tr>
<tr><th id="289">289</th><td>		<b>goto</b> <a class="lbl" href="#78schedule" data-ref="78schedule">schedule</a>;</td></tr>
<tr><th id="290">290</th><td></td></tr>
<tr><th id="291">291</th><td>	<a class="local col7 ref" href="#77err" title='err' data-ref="77err">err</a> = <a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_walk_start" title='rhashtable_walk_start' data-ref="rhashtable_walk_start">rhashtable_walk_start</a>(&amp;<a class="local col6 ref" href="#76hti" title='hti' data-ref="76hti">hti</a>);</td></tr>
<tr><th id="292">292</th><td>	<b>if</b> (<a class="local col7 ref" href="#77err" title='err' data-ref="77err">err</a> &amp;&amp; <a class="local col7 ref" href="#77err" title='err' data-ref="77err">err</a> != -<a class="macro" href="../../include/uapi/asm-generic/errno-base.h.html#15" title="11" data-ref="_M/EAGAIN">EAGAIN</a>)</td></tr>
<tr><th id="293">293</th><td>		<b>goto</b> <a class="lbl" href="#79out" data-ref="79out">out</a>;</td></tr>
<tr><th id="294">294</th><td></td></tr>
<tr><th id="295">295</th><td>	<b>while</b> ((<a class="local col3 ref" href="#73he" title='he' data-ref="73he">he</a> = <a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_walk_next" title='rhashtable_walk_next' data-ref="rhashtable_walk_next">rhashtable_walk_next</a>(&amp;<a class="local col6 ref" href="#76hti" title='hti' data-ref="76hti">hti</a>))) {</td></tr>
<tr><th id="296">296</th><td>		<b>if</b> (<a class="ref fn" href="../../include/linux/err.h.html#IS_ERR" title='IS_ERR' data-ref="IS_ERR">IS_ERR</a>(<a class="local col3 ref" href="#73he" title='he' data-ref="73he">he</a>)) {</td></tr>
<tr><th id="297">297</th><td>			<b>if</b> (<a class="ref fn" href="../../include/linux/err.h.html#PTR_ERR" title='PTR_ERR' data-ref="PTR_ERR">PTR_ERR</a>(<a class="local col3 ref" href="#73he" title='he' data-ref="73he">he</a>) != -<a class="macro" href="../../include/uapi/asm-generic/errno-base.h.html#15" title="11" data-ref="_M/EAGAIN">EAGAIN</a>)</td></tr>
<tr><th id="298">298</th><td>				<b>goto</b> <a class="lbl" href="#79out" data-ref="79out">out</a>;</td></tr>
<tr><th id="299">299</th><td>			<b>continue</b>;</td></tr>
<tr><th id="300">300</th><td>		}</td></tr>
<tr><th id="301">301</th><td></td></tr>
<tr><th id="302">302</th><td>		<b>if</b> (!<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_expired" title='nft_set_elem_expired' data-ref="nft_set_elem_expired">nft_set_elem_expired</a>(&amp;<a class="local col3 ref" href="#73he" title='he' data-ref="73he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>))</td></tr>
<tr><th id="303">303</th><td>			<b>continue</b>;</td></tr>
<tr><th id="304">304</th><td>		<b>if</b> (<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_mark_busy" title='nft_set_elem_mark_busy' data-ref="nft_set_elem_mark_busy">nft_set_elem_mark_busy</a>(&amp;<a class="local col3 ref" href="#73he" title='he' data-ref="73he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::ext" title='nft_rhash_elem::ext' data-use='a' data-ref="nft_rhash_elem::ext">ext</a>))</td></tr>
<tr><th id="305">305</th><td>			<b>continue</b>;</td></tr>
<tr><th id="306">306</th><td></td></tr>
<tr><th id="307">307</th><td>		<a class="local col5 ref" href="#75gcb" title='gcb' data-ref="75gcb">gcb</a> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_gc_batch_check" title='nft_set_gc_batch_check' data-ref="nft_set_gc_batch_check">nft_set_gc_batch_check</a>(<a class="local col2 ref" href="#72set" title='set' data-ref="72set">set</a>, <a class="local col5 ref" href="#75gcb" title='gcb' data-ref="75gcb">gcb</a>, <a class="macro" href="../../include/linux/gfp.h.html#277" title="((( gfp_t)0x20u)|(( gfp_t)0x80000u)|(( gfp_t)0x1000000u))" data-ref="_M/GFP_ATOMIC">GFP_ATOMIC</a>);</td></tr>
<tr><th id="308">308</th><td>		<b>if</b> (<a class="local col5 ref" href="#75gcb" title='gcb' data-ref="75gcb">gcb</a> == <a class="macro" href="../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>)</td></tr>
<tr><th id="309">309</th><td>			<b>goto</b> <a class="lbl" href="#79out" data-ref="79out">out</a>;</td></tr>
<tr><th id="310">310</th><td>		<a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_remove_fast" title='rhashtable_remove_fast' data-ref="rhashtable_remove_fast">rhashtable_remove_fast</a>(&amp;<a class="local col4 ref" href="#74priv" title='priv' data-ref="74priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::ht" title='nft_rhash::ht' data-use='a' data-ref="nft_rhash::ht">ht</a>, &amp;<a class="local col3 ref" href="#73he" title='he' data-ref="73he">he</a>-&gt;<a class="tu ref field" href="#nft_rhash_elem::node" title='nft_rhash_elem::node' data-use='a' data-ref="nft_rhash_elem::node">node</a>, <a class="tu ref" href="#nft_rhash_params" title='nft_rhash_params' data-use='r' data-ref="nft_rhash_params">nft_rhash_params</a>);</td></tr>
<tr><th id="311">311</th><td>		<a class="ref fn" href="../../arch/x86/include/asm/atomic.h.html#atomic_dec" title='atomic_dec' data-ref="atomic_dec">atomic_dec</a>(&amp;<a class="local col2 ref" href="#72set" title='set' data-ref="72set">set</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set::nelems" title='nft_set::nelems' data-ref="nft_set::nelems">nelems</a>);</td></tr>
<tr><th id="312">312</th><td>		<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_gc_batch_add" title='nft_set_gc_batch_add' data-ref="nft_set_gc_batch_add">nft_set_gc_batch_add</a>(<a class="local col5 ref" href="#75gcb" title='gcb' data-ref="75gcb">gcb</a>, <a class="local col3 ref" href="#73he" title='he' data-ref="73he">he</a>);</td></tr>
<tr><th id="313">313</th><td>	}</td></tr>
<tr><th id="314">314</th><td><dfn class="lbl" id="79out" data-ref="79out">out</dfn>:</td></tr>
<tr><th id="315">315</th><td>	<a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_walk_stop" title='rhashtable_walk_stop' data-ref="rhashtable_walk_stop">rhashtable_walk_stop</a>(&amp;<a class="local col6 ref" href="#76hti" title='hti' data-ref="76hti">hti</a>);</td></tr>
<tr><th id="316">316</th><td>	<a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_walk_exit" title='rhashtable_walk_exit' data-ref="rhashtable_walk_exit">rhashtable_walk_exit</a>(&amp;<a class="local col6 ref" href="#76hti" title='hti' data-ref="76hti">hti</a>);</td></tr>
<tr><th id="317">317</th><td></td></tr>
<tr><th id="318">318</th><td>	<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_gc_batch_complete" title='nft_set_gc_batch_complete' data-ref="nft_set_gc_batch_complete">nft_set_gc_batch_complete</a>(<a class="local col5 ref" href="#75gcb" title='gcb' data-ref="75gcb">gcb</a>);</td></tr>
<tr><th id="319">319</th><td><dfn class="lbl" id="78schedule" data-ref="78schedule">schedule</dfn>:</td></tr>
<tr><th id="320">320</th><td>	<a class="ref fn" href="../../include/linux/workqueue.h.html#queue_delayed_work" title='queue_delayed_work' data-ref="queue_delayed_work">queue_delayed_work</a>(<a class="ref" href="../../include/linux/workqueue.h.html#system_power_efficient_wq" title='system_power_efficient_wq' data-ref="system_power_efficient_wq">system_power_efficient_wq</a>, &amp;<a class="local col4 ref" href="#74priv" title='priv' data-ref="74priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::gc_work" title='nft_rhash::gc_work' data-use='a' data-ref="nft_rhash::gc_work">gc_work</a>,</td></tr>
<tr><th id="321">321</th><td>			   <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_gc_interval" title='nft_set_gc_interval' data-ref="nft_set_gc_interval">nft_set_gc_interval</a>(<a class="local col2 ref" href="#72set" title='set' data-ref="72set">set</a>));</td></tr>
<tr><th id="322">322</th><td>}</td></tr>
<tr><th id="323">323</th><td></td></tr>
<tr><th id="324">324</th><td><em>static</em> <em>unsigned</em> <em>int</em> <dfn class="tu decl def fn" id="nft_rhash_privsize" title='nft_rhash_privsize' data-type='unsigned int nft_rhash_privsize(const struct nlattr *const * nla, const struct nft_set_desc * desc)' data-ref="nft_rhash_privsize">nft_rhash_privsize</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/uapi/linux/netlink.h.html#nlattr" title='nlattr' data-ref="nlattr">nlattr</a> * <em>const</em> <dfn class="local col0 decl" id="80nla" title='nla' data-type='const struct nlattr *const *' data-ref="80nla">nla</dfn>[],</td></tr>
<tr><th id="325">325</th><td>				       <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc" title='nft_set_desc' data-ref="nft_set_desc">nft_set_desc</a> *<dfn class="local col1 decl" id="81desc" title='desc' data-type='const struct nft_set_desc *' data-ref="81desc">desc</dfn>)</td></tr>
<tr><th id="326">326</th><td>{</td></tr>
<tr><th id="327">327</th><td>	<b>return</b> <b>sizeof</b>(<b>struct</b> <a class="type" href="#nft_rhash" title='nft_rhash' data-ref="nft_rhash">nft_rhash</a>);</td></tr>
<tr><th id="328">328</th><td>}</td></tr>
<tr><th id="329">329</th><td></td></tr>
<tr><th id="330">330</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="nft_rhash_init" title='nft_rhash_init' data-type='int nft_rhash_init(const struct nft_set * set, const struct nft_set_desc * desc, const struct nlattr *const * tb)' data-ref="nft_rhash_init">nft_rhash_init</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col2 decl" id="82set" title='set' data-type='const struct nft_set *' data-ref="82set">set</dfn>,</td></tr>
<tr><th id="331">331</th><td>			  <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc" title='nft_set_desc' data-ref="nft_set_desc">nft_set_desc</a> *<dfn class="local col3 decl" id="83desc" title='desc' data-type='const struct nft_set_desc *' data-ref="83desc">desc</dfn>,</td></tr>
<tr><th id="332">332</th><td>			  <em>const</em> <b>struct</b> <a class="type" href="../../include/uapi/linux/netlink.h.html#nlattr" title='nlattr' data-ref="nlattr">nlattr</a> * <em>const</em> <dfn class="local col4 decl" id="84tb" title='tb' data-type='const struct nlattr *const *' data-ref="84tb">tb</dfn>[])</td></tr>
<tr><th id="333">333</th><td>{</td></tr>
<tr><th id="334">334</th><td>	<b>struct</b> <a class="type" href="#nft_rhash" title='nft_rhash' data-ref="nft_rhash">nft_rhash</a> *<dfn class="local col5 decl" id="85priv" title='priv' data-type='struct nft_rhash *' data-ref="85priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col2 ref" href="#82set" title='set' data-ref="82set">set</a>);</td></tr>
<tr><th id="335">335</th><td>	<b>struct</b> <a class="type" href="../../include/linux/rhashtable.h.html#rhashtable_params" title='rhashtable_params' data-ref="rhashtable_params">rhashtable_params</a> <dfn class="local col6 decl" id="86params" title='params' data-type='struct rhashtable_params' data-ref="86params">params</dfn> = <a class="tu ref" href="#nft_rhash_params" title='nft_rhash_params' data-use='r' data-ref="nft_rhash_params">nft_rhash_params</a>;</td></tr>
<tr><th id="336">336</th><td>	<em>int</em> <dfn class="local col7 decl" id="87err" title='err' data-type='int' data-ref="87err">err</dfn>;</td></tr>
<tr><th id="337">337</th><td></td></tr>
<tr><th id="338">338</th><td>	<a class="local col6 ref" href="#86params" title='params' data-ref="86params">params</a>.<a class="ref field" href="../../include/linux/rhashtable.h.html#rhashtable_params::nelem_hint" title='rhashtable_params::nelem_hint' data-ref="rhashtable_params::nelem_hint">nelem_hint</a> = <a class="local col3 ref" href="#83desc" title='desc' data-ref="83desc">desc</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc::size" title='nft_set_desc::size' data-ref="nft_set_desc::size">size</a> ?: <a class="macro" href="#25" title="3" data-ref="_M/NFT_RHASH_ELEMENT_HINT">NFT_RHASH_ELEMENT_HINT</a>;</td></tr>
<tr><th id="339">339</th><td>	<a class="local col6 ref" href="#86params" title='params' data-ref="86params">params</a>.<a class="ref field" href="../../include/linux/rhashtable.h.html#rhashtable_params::key_len" title='rhashtable_params::key_len' data-ref="rhashtable_params::key_len">key_len</a>	  = <a class="local col2 ref" href="#82set" title='set' data-ref="82set">set</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set::klen" title='nft_set::klen' data-ref="nft_set::klen">klen</a>;</td></tr>
<tr><th id="340">340</th><td></td></tr>
<tr><th id="341">341</th><td>	<a class="local col7 ref" href="#87err" title='err' data-ref="87err">err</a> = <a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_init" title='rhashtable_init' data-ref="rhashtable_init">rhashtable_init</a>(&amp;<a class="local col5 ref" href="#85priv" title='priv' data-ref="85priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::ht" title='nft_rhash::ht' data-use='a' data-ref="nft_rhash::ht">ht</a>, &amp;<a class="local col6 ref" href="#86params" title='params' data-ref="86params">params</a>);</td></tr>
<tr><th id="342">342</th><td>	<b>if</b> (<a class="local col7 ref" href="#87err" title='err' data-ref="87err">err</a> &lt; <var>0</var>)</td></tr>
<tr><th id="343">343</th><td>		<b>return</b> <a class="local col7 ref" href="#87err" title='err' data-ref="87err">err</a>;</td></tr>
<tr><th id="344">344</th><td></td></tr>
<tr><th id="345">345</th><td>	<a class="macro" href="../../include/linux/workqueue.h.html#265" title="do { do { __init_work(((&amp;(&amp;priv-&gt;gc_work)-&gt;work)), 0); ((&amp;(&amp;priv-&gt;gc_work)-&gt;work))-&gt;data = (atomic_long_t) { ((unsigned long)WORK_STRUCT_NO_POOL) }; INIT_LIST_HEAD(&amp;((&amp;(&amp;priv-&gt;gc_work)-&gt;work))-&gt;entry); ((&amp;(&amp;priv-&gt;gc_work)-&gt;work))-&gt;func = (((nft_rhash_gc))); } while (0); do { init_timer_key(((&amp;(&amp;priv-&gt;gc_work)-&gt;timer)), (((0x00080000) | 0x00200000)), ((void *)0), ((void *)0)); (&amp;(&amp;priv-&gt;gc_work)-&gt;timer)-&gt;function = (delayed_work_timer_fn); (&amp;(&amp;priv-&gt;gc_work)-&gt;timer)-&gt;data = ((unsigned long)(&amp;priv-&gt;gc_work)); } while (0); } while (0)" data-ref="_M/INIT_DEFERRABLE_WORK">INIT_DEFERRABLE_WORK</a>(&amp;<a class="local col5 ref" href="#85priv" title='priv' data-ref="85priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::gc_work" title='nft_rhash::gc_work' data-use='a' data-ref="nft_rhash::gc_work">gc_work</a>, <a class="tu ref fn" href="#nft_rhash_gc" title='nft_rhash_gc' data-use='r' data-ref="nft_rhash_gc">nft_rhash_gc</a>);</td></tr>
<tr><th id="346">346</th><td>	<b>if</b> (<a class="local col2 ref" href="#82set" title='set' data-ref="82set">set</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set::flags" title='nft_set::flags' data-ref="nft_set::flags">flags</a> &amp; <a class="enum" href="../../include/uapi/linux/netfilter/nf_tables.h.html#NFT_SET_TIMEOUT" title='NFT_SET_TIMEOUT' data-ref="NFT_SET_TIMEOUT">NFT_SET_TIMEOUT</a>)</td></tr>
<tr><th id="347">347</th><td>		<a class="ref fn" href="../../include/linux/workqueue.h.html#queue_delayed_work" title='queue_delayed_work' data-ref="queue_delayed_work">queue_delayed_work</a>(<a class="ref" href="../../include/linux/workqueue.h.html#system_power_efficient_wq" title='system_power_efficient_wq' data-ref="system_power_efficient_wq">system_power_efficient_wq</a>, &amp;<a class="local col5 ref" href="#85priv" title='priv' data-ref="85priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::gc_work" title='nft_rhash::gc_work' data-use='a' data-ref="nft_rhash::gc_work">gc_work</a>,</td></tr>
<tr><th id="348">348</th><td>				   <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_gc_interval" title='nft_set_gc_interval' data-ref="nft_set_gc_interval">nft_set_gc_interval</a>(<a class="local col2 ref" href="#82set" title='set' data-ref="82set">set</a>));</td></tr>
<tr><th id="349">349</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="350">350</th><td>}</td></tr>
<tr><th id="351">351</th><td></td></tr>
<tr><th id="352">352</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="nft_rhash_elem_destroy" title='nft_rhash_elem_destroy' data-type='void nft_rhash_elem_destroy(void * ptr, void * arg)' data-ref="nft_rhash_elem_destroy">nft_rhash_elem_destroy</dfn>(<em>void</em> *<dfn class="local col8 decl" id="88ptr" title='ptr' data-type='void *' data-ref="88ptr">ptr</dfn>, <em>void</em> *<dfn class="local col9 decl" id="89arg" title='arg' data-type='void *' data-ref="89arg">arg</dfn>)</td></tr>
<tr><th id="353">353</th><td>{</td></tr>
<tr><th id="354">354</th><td>	<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_destroy" title='nft_set_elem_destroy' data-ref="nft_set_elem_destroy">nft_set_elem_destroy</a>(<a class="local col9 ref" href="#89arg" title='arg' data-ref="89arg">arg</a>, <a class="local col8 ref" href="#88ptr" title='ptr' data-ref="88ptr">ptr</a>, <a class="enum" href="../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>);</td></tr>
<tr><th id="355">355</th><td>}</td></tr>
<tr><th id="356">356</th><td></td></tr>
<tr><th id="357">357</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="nft_rhash_destroy" title='nft_rhash_destroy' data-type='void nft_rhash_destroy(const struct nft_set * set)' data-ref="nft_rhash_destroy">nft_rhash_destroy</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col0 decl" id="90set" title='set' data-type='const struct nft_set *' data-ref="90set">set</dfn>)</td></tr>
<tr><th id="358">358</th><td>{</td></tr>
<tr><th id="359">359</th><td>	<b>struct</b> <a class="type" href="#nft_rhash" title='nft_rhash' data-ref="nft_rhash">nft_rhash</a> *<dfn class="local col1 decl" id="91priv" title='priv' data-type='struct nft_rhash *' data-ref="91priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col0 ref" href="#90set" title='set' data-ref="90set">set</a>);</td></tr>
<tr><th id="360">360</th><td></td></tr>
<tr><th id="361">361</th><td>	<a class="ref fn" href="../../include/linux/workqueue.h.html#cancel_delayed_work_sync" title='cancel_delayed_work_sync' data-ref="cancel_delayed_work_sync">cancel_delayed_work_sync</a>(&amp;<a class="local col1 ref" href="#91priv" title='priv' data-ref="91priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::gc_work" title='nft_rhash::gc_work' data-use='a' data-ref="nft_rhash::gc_work">gc_work</a>);</td></tr>
<tr><th id="362">362</th><td>	<a class="ref fn" href="../../include/linux/rhashtable.h.html#rhashtable_free_and_destroy" title='rhashtable_free_and_destroy' data-ref="rhashtable_free_and_destroy">rhashtable_free_and_destroy</a>(&amp;<a class="local col1 ref" href="#91priv" title='priv' data-ref="91priv">priv</a>-&gt;<a class="tu ref field" href="#nft_rhash::ht" title='nft_rhash::ht' data-use='a' data-ref="nft_rhash::ht">ht</a>, <a class="tu ref fn" href="#nft_rhash_elem_destroy" title='nft_rhash_elem_destroy' data-use='r' data-ref="nft_rhash_elem_destroy">nft_rhash_elem_destroy</a>,</td></tr>
<tr><th id="363">363</th><td>				    (<em>void</em> *)<a class="local col0 ref" href="#90set" title='set' data-ref="90set">set</a>);</td></tr>
<tr><th id="364">364</th><td>}</td></tr>
<tr><th id="365">365</th><td></td></tr>
<tr><th id="366">366</th><td><em>static</em> <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="tu decl def fn" id="nft_hash_buckets" title='nft_hash_buckets' data-type='u32 nft_hash_buckets(u32 size)' data-ref="nft_hash_buckets">nft_hash_buckets</dfn>(<a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col2 decl" id="92size" title='size' data-type='u32' data-ref="92size">size</dfn>)</td></tr>
<tr><th id="367">367</th><td>{</td></tr>
<tr><th id="368">368</th><td>	<b>return</b> <a class="macro" href="../../include/linux/log2.h.html#159" title="( __builtin_constant_p(size * 4 / 3) ? ( (size * 4 / 3 == 1) ? 1 : (1UL &lt;&lt; (( __builtin_constant_p((size * 4 / 3) - 1) ? ( ((size * 4 / 3) - 1) &lt; 2 ? 0 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 63) ? 63 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 62) ? 62 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 61) ? 61 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 60) ? 60 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 59) ? 59 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 58) ? 58 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 57) ? 57 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 56) ? 56 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 55) ? 55 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 54) ? 54 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 53) ? 53 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 52) ? 52 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 51) ? 51 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 50) ? 50 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 49) ? 49 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 48) ? 48 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 47) ? 47 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 46) ? 46 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 45) ? 45 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 44) ? 44 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 43) ? 43 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 42) ? 42 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 41) ? 41 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 40) ? 40 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 39) ? 39 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 38) ? 38 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 37) ? 37 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 36) ? 36 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 35) ? 35 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 34) ? 34 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 33) ? 33 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 32) ? 32 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 31) ? 31 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 30) ? 30 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 29) ? 29 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 28) ? 28 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 27) ? 27 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 26) ? 26 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 25) ? 25 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 24) ? 24 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 23) ? 23 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 22) ? 22 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 21) ? 21 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 20) ? 20 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 19) ? 19 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 18) ? 18 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 17) ? 17 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 16) ? 16 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 15) ? 15 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 14) ? 14 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 13) ? 13 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 12) ? 12 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 11) ? 11 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 10) ? 10 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 9) ? 9 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 8) ? 8 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 7) ? 7 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 6) ? 6 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 5) ? 5 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 4) ? 4 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 3) ? 3 : ((size * 4 / 3) - 1) &amp; (1ULL &lt;&lt; 2) ? 2 : 1 ) : (sizeof((size * 4 / 3) - 1) &lt;= 4) ? __ilog2_u32((size * 4 / 3) - 1) : __ilog2_u64((size * 4 / 3) - 1) ) + 1)) ) : __roundup_pow_of_two(size * 4 / 3) )" data-ref="_M/roundup_pow_of_two">roundup_pow_of_two</a>(<a class="local col2 ref" href="#92size" title='size' data-ref="92size">size</a> * <var>4</var> / <var>3</var>);</td></tr>
<tr><th id="369">369</th><td>}</td></tr>
<tr><th id="370">370</th><td></td></tr>
<tr><th id="371">371</th><td><em>static</em> <a class="typedef" href="../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="tu decl def fn" id="nft_rhash_estimate" title='nft_rhash_estimate' data-type='bool nft_rhash_estimate(const struct nft_set_desc * desc, u32 features, struct nft_set_estimate * est)' data-ref="nft_rhash_estimate">nft_rhash_estimate</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc" title='nft_set_desc' data-ref="nft_set_desc">nft_set_desc</a> *<dfn class="local col3 decl" id="93desc" title='desc' data-type='const struct nft_set_desc *' data-ref="93desc">desc</dfn>, <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col4 decl" id="94features" title='features' data-type='u32' data-ref="94features">features</dfn>,</td></tr>
<tr><th id="372">372</th><td>			       <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_estimate" title='nft_set_estimate' data-ref="nft_set_estimate">nft_set_estimate</a> *<dfn class="local col5 decl" id="95est" title='est' data-type='struct nft_set_estimate *' data-ref="95est">est</dfn>)</td></tr>
<tr><th id="373">373</th><td>{</td></tr>
<tr><th id="374">374</th><td>	<a class="local col5 ref" href="#95est" title='est' data-ref="95est">est</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_estimate::size" title='nft_set_estimate::size' data-ref="nft_set_estimate::size">size</a>   = ~<var>0</var>;</td></tr>
<tr><th id="375">375</th><td>	<a class="local col5 ref" href="#95est" title='est' data-ref="95est">est</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_estimate::lookup" title='nft_set_estimate::lookup' data-ref="nft_set_estimate::lookup">lookup</a> = <a class="enum" href="../../include/net/netfilter/nf_tables.h.html#NFT_SET_CLASS_O_1" title='NFT_SET_CLASS_O_1' data-ref="NFT_SET_CLASS_O_1">NFT_SET_CLASS_O_1</a>;</td></tr>
<tr><th id="376">376</th><td>	<a class="local col5 ref" href="#95est" title='est' data-ref="95est">est</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_estimate::space" title='nft_set_estimate::space' data-ref="nft_set_estimate::space">space</a>  = <a class="enum" href="../../include/net/netfilter/nf_tables.h.html#NFT_SET_CLASS_O_N" title='NFT_SET_CLASS_O_N' data-ref="NFT_SET_CLASS_O_N">NFT_SET_CLASS_O_N</a>;</td></tr>
<tr><th id="377">377</th><td></td></tr>
<tr><th id="378">378</th><td>	<b>return</b> <a class="enum" href="../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>;</td></tr>
<tr><th id="379">379</th><td>}</td></tr>
<tr><th id="380">380</th><td></td></tr>
<tr><th id="381">381</th><td><b>struct</b> <dfn class="type def" id="nft_hash" title='nft_hash' data-ref="nft_hash">nft_hash</dfn> {</td></tr>
<tr><th id="382">382</th><td>	<a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a>				<dfn class="tu decl field" id="nft_hash::seed" title='nft_hash::seed' data-type='u32' data-ref="nft_hash::seed">seed</dfn>;</td></tr>
<tr><th id="383">383</th><td>	<a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a>				<dfn class="tu decl field" id="nft_hash::buckets" title='nft_hash::buckets' data-type='u32' data-ref="nft_hash::buckets">buckets</dfn>;</td></tr>
<tr><th id="384">384</th><td>	<b>struct</b> <a class="type" href="../../include/linux/types.h.html#hlist_head" title='hlist_head' data-ref="hlist_head">hlist_head</a>		<dfn class="tu decl field" id="nft_hash::table" title='nft_hash::table' data-type='struct hlist_head []' data-ref="nft_hash::table">table</dfn>[];</td></tr>
<tr><th id="385">385</th><td>};</td></tr>
<tr><th id="386">386</th><td></td></tr>
<tr><th id="387">387</th><td><b>struct</b> <dfn class="type def" id="nft_hash_elem" title='nft_hash_elem' data-ref="nft_hash_elem">nft_hash_elem</dfn> {</td></tr>
<tr><th id="388">388</th><td>	<b>struct</b> <a class="type" href="../../include/linux/types.h.html#hlist_node" title='hlist_node' data-ref="hlist_node">hlist_node</a>		<dfn class="tu decl field" id="nft_hash_elem::node" title='nft_hash_elem::node' data-type='struct hlist_node' data-ref="nft_hash_elem::node">node</dfn>;</td></tr>
<tr><th id="389">389</th><td>	<b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext" title='nft_set_ext' data-ref="nft_set_ext">nft_set_ext</a>		<dfn class="tu decl field" id="nft_hash_elem::ext" title='nft_hash_elem::ext' data-type='struct nft_set_ext' data-ref="nft_hash_elem::ext">ext</dfn>;</td></tr>
<tr><th id="390">390</th><td>};</td></tr>
<tr><th id="391">391</th><td></td></tr>
<tr><th id="392">392</th><td><em>static</em> <a class="typedef" href="../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="tu decl def fn" id="nft_hash_lookup" title='nft_hash_lookup' data-type='bool nft_hash_lookup(const struct net * net, const struct nft_set * set, const u32 * key, const struct nft_set_ext ** ext)' data-ref="nft_hash_lookup">nft_hash_lookup</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/net_namespace.h.html#net" title='net' data-ref="net">net</a> *<dfn class="local col6 decl" id="96net" title='net' data-type='const struct net *' data-ref="96net">net</dfn>, <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col7 decl" id="97set" title='set' data-type='const struct nft_set *' data-ref="97set">set</dfn>,</td></tr>
<tr><th id="393">393</th><td>			    <em>const</em> <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> *<dfn class="local col8 decl" id="98key" title='key' data-type='const u32 *' data-ref="98key">key</dfn>, <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext" title='nft_set_ext' data-ref="nft_set_ext">nft_set_ext</a> **<dfn class="local col9 decl" id="99ext" title='ext' data-type='const struct nft_set_ext **' data-ref="99ext">ext</dfn>)</td></tr>
<tr><th id="394">394</th><td>{</td></tr>
<tr><th id="395">395</th><td>	<b>struct</b> <a class="type" href="#nft_hash" title='nft_hash' data-ref="nft_hash">nft_hash</a> *<dfn class="local col0 decl" id="100priv" title='priv' data-type='struct nft_hash *' data-ref="100priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col7 ref" href="#97set" title='set' data-ref="97set">set</a>);</td></tr>
<tr><th id="396">396</th><td>	<a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col1 decl" id="101genmask" title='genmask' data-type='u8' data-ref="101genmask">genmask</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_genmask_cur" title='nft_genmask_cur' data-ref="nft_genmask_cur">nft_genmask_cur</a>(<a class="local col6 ref" href="#96net" title='net' data-ref="96net">net</a>);</td></tr>
<tr><th id="397">397</th><td>	<em>const</em> <b>struct</b> <a class="type" href="#nft_hash_elem" title='nft_hash_elem' data-ref="nft_hash_elem">nft_hash_elem</a> *<dfn class="local col2 decl" id="102he" title='he' data-type='const struct nft_hash_elem *' data-ref="102he">he</dfn>;</td></tr>
<tr><th id="398">398</th><td>	<a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col3 decl" id="103hash" title='hash' data-type='u32' data-ref="103hash">hash</dfn>;</td></tr>
<tr><th id="399">399</th><td></td></tr>
<tr><th id="400">400</th><td>	<a class="local col3 ref" href="#103hash" title='hash' data-ref="103hash">hash</a> = <a class="ref fn" href="../../include/linux/jhash.h.html#jhash" title='jhash' data-ref="jhash">jhash</a>(<a class="local col8 ref" href="#98key" title='key' data-ref="98key">key</a>, <a class="local col7 ref" href="#97set" title='set' data-ref="97set">set</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set::klen" title='nft_set::klen' data-ref="nft_set::klen">klen</a>, <a class="local col0 ref" href="#100priv" title='priv' data-ref="100priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::seed" title='nft_hash::seed' data-use='r' data-ref="nft_hash::seed">seed</a>);</td></tr>
<tr><th id="401">401</th><td>	<a class="local col3 ref" href="#103hash" title='hash' data-ref="103hash">hash</a> = <a class="ref fn" href="../../include/linux/kernel.h.html#reciprocal_scale" title='reciprocal_scale' data-ref="reciprocal_scale">reciprocal_scale</a>(<a class="local col3 ref" href="#103hash" title='hash' data-ref="103hash">hash</a>, <a class="local col0 ref" href="#100priv" title='priv' data-ref="100priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::buckets" title='nft_hash::buckets' data-use='r' data-ref="nft_hash::buckets">buckets</a>);</td></tr>
<tr><th id="402">402</th><td>	<a class="macro" href="../../include/linux/rculist.h.html#596" title="for (he = ({ typeof(({ typeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))) ________p1 = ({ union { typeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))) __val; char __c[1]; } __u; if (1) __read_once_size(&amp;((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first))))); else __read_once_size_nocheck(&amp;((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first))))); do { } while (0); __u.__val; }); ((typeof(*(*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))) *)(________p1)); })) ____ptr = (({ typeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))) ________p1 = ({ union { typeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))) __val; char __c[1]; } __u; if (1) __read_once_size(&amp;((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first))))); else __read_once_size_nocheck(&amp;((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first))))); do { } while (0); __u.__val; }); ((typeof(*(*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))) *)(________p1)); })); ____ptr ? ({ void *__mptr = (void *)(____ptr); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(____ptr)), typeof(((typeof(*(he)) *)0)-&gt;node)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(____ptr)), typeof(void)))); extern void __compiletime_assert_402(void) ; if (__cond) __compiletime_assert_402(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((typeof(*(he)) *)(__mptr - __builtin_offsetof(typeof(*(he)), node))); }) : ((void *)0); }); he; he = ({ typeof(({ typeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) ________p1 = ({ union { typeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) __val; char __c[1]; } __u; if (1) __read_once_size(&amp;((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next))))); else __read_once_size_nocheck(&amp;((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next))))); do { } while (0); __u.__val; }); ((typeof(*(*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) *)(________p1)); })) ____ptr = (({ typeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) ________p1 = ({ union { typeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) __val; char __c[1]; } __u; if (1) __read_once_size(&amp;((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next))))); else __read_once_size_nocheck(&amp;((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next))))); do { } while (0); __u.__val; }); ((typeof(*(*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) *)(________p1)); })); ____ptr ? ({ void *__mptr = (void *)(____ptr); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(____ptr)), typeof(((typeof(*(he)) *)0)-&gt;node)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(____ptr)), typeof(void)))); extern void __compiletime_assert_402(void) ; if (__cond) __compiletime_assert_402(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((typeof(*(he)) *)(__mptr - __builtin_offsetof(typeof(*(he)), node))); }) : ((void *)0); }))" data-ref="_M/hlist_for_each_entry_rcu">hlist_for_each_entry_rcu</a>(<a class="local col2 ref" href="#102he" title='he' data-ref="102he">he</a>, &amp;<a class="local col0 ref" href="#100priv" title='priv' data-ref="100priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::table" title='nft_hash::table' data-use='a' data-ref="nft_hash::table">table</a>[<a class="local col3 ref" href="#103hash" title='hash' data-ref="103hash">hash</a>], <a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='r' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node">node</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a>) {</td></tr>
<tr><th id="403">403</th><td>		<b>if</b> (!<a class="ref fn" href="../../arch/x86/include/asm/string_64.h.html#memcmp" title='memcmp' data-ref="memcmp">memcmp</a>(<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext_key" title='nft_set_ext_key' data-ref="nft_set_ext_key">nft_set_ext_key</a>(&amp;<a class="local col2 ref" href="#102he" title='he' data-ref="102he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>), <a class="local col8 ref" href="#98key" title='key' data-ref="98key">key</a>, <a class="local col7 ref" href="#97set" title='set' data-ref="97set">set</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set::klen" title='nft_set::klen' data-ref="nft_set::klen">klen</a>) &amp;&amp;</td></tr>
<tr><th id="404">404</th><td>		    <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_active" title='nft_set_elem_active' data-ref="nft_set_elem_active">nft_set_elem_active</a>(&amp;<a class="local col2 ref" href="#102he" title='he' data-ref="102he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>, <a class="local col1 ref" href="#101genmask" title='genmask' data-ref="101genmask">genmask</a>)) {</td></tr>
<tr><th id="405">405</th><td>			*<a class="local col9 ref" href="#99ext" title='ext' data-ref="99ext">ext</a> = &amp;<a class="local col2 ref" href="#102he" title='he' data-ref="102he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>;</td></tr>
<tr><th id="406">406</th><td>			<b>return</b> <a class="enum" href="../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>;</td></tr>
<tr><th id="407">407</th><td>		}</td></tr>
<tr><th id="408">408</th><td>	}</td></tr>
<tr><th id="409">409</th><td>	<b>return</b> <a class="enum" href="../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>;</td></tr>
<tr><th id="410">410</th><td>}</td></tr>
<tr><th id="411">411</th><td></td></tr>
<tr><th id="412">412</th><td><i  data-doc="nft_hash_key">/* nft_hash_select_ops() makes sure key size can be either 2 or 4 bytes . */</i></td></tr>
<tr><th id="413">413</th><td><em>static</em> <a class="macro" href="../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="tu decl def fn" id="nft_hash_key" title='nft_hash_key' data-type='u32 nft_hash_key(const u32 * key, u32 klen)' data-ref="nft_hash_key">nft_hash_key</dfn>(<em>const</em> <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> *<dfn class="local col4 decl" id="104key" title='key' data-type='const u32 *' data-ref="104key">key</dfn>, <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col5 decl" id="105klen" title='klen' data-type='u32' data-ref="105klen">klen</dfn>)</td></tr>
<tr><th id="414">414</th><td>{</td></tr>
<tr><th id="415">415</th><td>	<b>if</b> (<a class="local col5 ref" href="#105klen" title='klen' data-ref="105klen">klen</a> == <var>4</var>)</td></tr>
<tr><th id="416">416</th><td>		<b>return</b> *<a class="local col4 ref" href="#104key" title='key' data-ref="104key">key</a>;</td></tr>
<tr><th id="417">417</th><td></td></tr>
<tr><th id="418">418</th><td>	<b>return</b> *(<a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='unsigned short' data-ref="u16">u16</a> *)<a class="local col4 ref" href="#104key" title='key' data-ref="104key">key</a>;</td></tr>
<tr><th id="419">419</th><td>}</td></tr>
<tr><th id="420">420</th><td></td></tr>
<tr><th id="421">421</th><td><em>static</em> <a class="typedef" href="../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="tu decl def fn" id="nft_hash_lookup_fast" title='nft_hash_lookup_fast' data-type='bool nft_hash_lookup_fast(const struct net * net, const struct nft_set * set, const u32 * key, const struct nft_set_ext ** ext)' data-ref="nft_hash_lookup_fast">nft_hash_lookup_fast</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/net_namespace.h.html#net" title='net' data-ref="net">net</a> *<dfn class="local col6 decl" id="106net" title='net' data-type='const struct net *' data-ref="106net">net</dfn>,</td></tr>
<tr><th id="422">422</th><td>				 <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col7 decl" id="107set" title='set' data-type='const struct nft_set *' data-ref="107set">set</dfn>,</td></tr>
<tr><th id="423">423</th><td>				 <em>const</em> <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> *<dfn class="local col8 decl" id="108key" title='key' data-type='const u32 *' data-ref="108key">key</dfn>, <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext" title='nft_set_ext' data-ref="nft_set_ext">nft_set_ext</a> **<dfn class="local col9 decl" id="109ext" title='ext' data-type='const struct nft_set_ext **' data-ref="109ext">ext</dfn>)</td></tr>
<tr><th id="424">424</th><td>{</td></tr>
<tr><th id="425">425</th><td>	<b>struct</b> <a class="type" href="#nft_hash" title='nft_hash' data-ref="nft_hash">nft_hash</a> *<dfn class="local col0 decl" id="110priv" title='priv' data-type='struct nft_hash *' data-ref="110priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col7 ref" href="#107set" title='set' data-ref="107set">set</a>);</td></tr>
<tr><th id="426">426</th><td>	<a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col1 decl" id="111genmask" title='genmask' data-type='u8' data-ref="111genmask">genmask</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_genmask_cur" title='nft_genmask_cur' data-ref="nft_genmask_cur">nft_genmask_cur</a>(<a class="local col6 ref" href="#106net" title='net' data-ref="106net">net</a>);</td></tr>
<tr><th id="427">427</th><td>	<em>const</em> <b>struct</b> <a class="type" href="#nft_hash_elem" title='nft_hash_elem' data-ref="nft_hash_elem">nft_hash_elem</a> *<dfn class="local col2 decl" id="112he" title='he' data-type='const struct nft_hash_elem *' data-ref="112he">he</dfn>;</td></tr>
<tr><th id="428">428</th><td>	<a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col3 decl" id="113hash" title='hash' data-type='u32' data-ref="113hash">hash</dfn>, <dfn class="local col4 decl" id="114k1" title='k1' data-type='u32' data-ref="114k1">k1</dfn>, <dfn class="local col5 decl" id="115k2" title='k2' data-type='u32' data-ref="115k2">k2</dfn>;</td></tr>
<tr><th id="429">429</th><td></td></tr>
<tr><th id="430">430</th><td>	<a class="local col4 ref" href="#114k1" title='k1' data-ref="114k1">k1</a> = <a class="tu ref fn" href="#nft_hash_key" title='nft_hash_key' data-use='c' data-ref="nft_hash_key">nft_hash_key</a>(<a class="local col8 ref" href="#108key" title='key' data-ref="108key">key</a>, <a class="local col7 ref" href="#107set" title='set' data-ref="107set">set</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set::klen" title='nft_set::klen' data-ref="nft_set::klen">klen</a>);</td></tr>
<tr><th id="431">431</th><td>	<a class="local col3 ref" href="#113hash" title='hash' data-ref="113hash">hash</a> = <a class="ref fn" href="../../include/linux/jhash.h.html#jhash_1word" title='jhash_1word' data-ref="jhash_1word">jhash_1word</a>(<a class="local col4 ref" href="#114k1" title='k1' data-ref="114k1">k1</a>, <a class="local col0 ref" href="#110priv" title='priv' data-ref="110priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::seed" title='nft_hash::seed' data-use='r' data-ref="nft_hash::seed">seed</a>);</td></tr>
<tr><th id="432">432</th><td>	<a class="local col3 ref" href="#113hash" title='hash' data-ref="113hash">hash</a> = <a class="ref fn" href="../../include/linux/kernel.h.html#reciprocal_scale" title='reciprocal_scale' data-ref="reciprocal_scale">reciprocal_scale</a>(<a class="local col3 ref" href="#113hash" title='hash' data-ref="113hash">hash</a>, <a class="local col0 ref" href="#110priv" title='priv' data-ref="110priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::buckets" title='nft_hash::buckets' data-use='r' data-ref="nft_hash::buckets">buckets</a>);</td></tr>
<tr><th id="433">433</th><td>	<a class="macro" href="../../include/linux/rculist.h.html#596" title="for (he = ({ typeof(({ typeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))) ________p1 = ({ union { typeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))) __val; char __c[1]; } __u; if (1) __read_once_size(&amp;((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first))))); else __read_once_size_nocheck(&amp;((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first))))); do { } while (0); __u.__val; }); ((typeof(*(*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))) *)(________p1)); })) ____ptr = (({ typeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))) ________p1 = ({ union { typeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))) __val; char __c[1]; } __u; if (1) __read_once_size(&amp;((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first))))); else __read_once_size_nocheck(&amp;((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first))))); do { } while (0); __u.__val; }); ((typeof(*(*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[hash])-&gt;first)))) *)(________p1)); })); ____ptr ? ({ void *__mptr = (void *)(____ptr); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(____ptr)), typeof(((typeof(*(he)) *)0)-&gt;node)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(____ptr)), typeof(void)))); extern void __compiletime_assert_433(void) ; if (__cond) __compiletime_assert_433(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((typeof(*(he)) *)(__mptr - __builtin_offsetof(typeof(*(he)), node))); }) : ((void *)0); }); he; he = ({ typeof(({ typeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) ________p1 = ({ union { typeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) __val; char __c[1]; } __u; if (1) __read_once_size(&amp;((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next))))); else __read_once_size_nocheck(&amp;((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next))))); do { } while (0); __u.__val; }); ((typeof(*(*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) *)(________p1)); })) ____ptr = (({ typeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) ________p1 = ({ union { typeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) __val; char __c[1]; } __u; if (1) __read_once_size(&amp;((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next))))); else __read_once_size_nocheck(&amp;((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next))))); do { } while (0); __u.__val; }); ((typeof(*(*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) *)(________p1)); })); ____ptr ? ({ void *__mptr = (void *)(____ptr); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(____ptr)), typeof(((typeof(*(he)) *)0)-&gt;node)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(____ptr)), typeof(void)))); extern void __compiletime_assert_433(void) ; if (__cond) __compiletime_assert_433(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((typeof(*(he)) *)(__mptr - __builtin_offsetof(typeof(*(he)), node))); }) : ((void *)0); }))" data-ref="_M/hlist_for_each_entry_rcu">hlist_for_each_entry_rcu</a>(<a class="local col2 ref" href="#112he" title='he' data-ref="112he">he</a>, &amp;<a class="local col0 ref" href="#110priv" title='priv' data-ref="110priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::table" title='nft_hash::table' data-use='a' data-ref="nft_hash::table">table</a>[<a class="local col3 ref" href="#113hash" title='hash' data-ref="113hash">hash</a>], <a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='r' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node">node</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a>) {</td></tr>
<tr><th id="434">434</th><td>		<a class="local col5 ref" href="#115k2" title='k2' data-ref="115k2">k2</a> = <a class="tu ref fn" href="#nft_hash_key" title='nft_hash_key' data-use='c' data-ref="nft_hash_key">nft_hash_key</a>(<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext_key" title='nft_set_ext_key' data-ref="nft_set_ext_key">nft_set_ext_key</a>(&amp;<a class="local col2 ref" href="#112he" title='he' data-ref="112he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>)-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_data::(anonymous)::data" title='nft_data::(anonymous union)::data' data-ref="nft_data::(anonymous)::data">data</a>, <a class="local col7 ref" href="#107set" title='set' data-ref="107set">set</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set::klen" title='nft_set::klen' data-ref="nft_set::klen">klen</a>);</td></tr>
<tr><th id="435">435</th><td>		<b>if</b> (<a class="local col4 ref" href="#114k1" title='k1' data-ref="114k1">k1</a> == <a class="local col5 ref" href="#115k2" title='k2' data-ref="115k2">k2</a> &amp;&amp;</td></tr>
<tr><th id="436">436</th><td>		    <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_active" title='nft_set_elem_active' data-ref="nft_set_elem_active">nft_set_elem_active</a>(&amp;<a class="local col2 ref" href="#112he" title='he' data-ref="112he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>, <a class="local col1 ref" href="#111genmask" title='genmask' data-ref="111genmask">genmask</a>)) {</td></tr>
<tr><th id="437">437</th><td>			*<a class="local col9 ref" href="#109ext" title='ext' data-ref="109ext">ext</a> = &amp;<a class="local col2 ref" href="#112he" title='he' data-ref="112he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>;</td></tr>
<tr><th id="438">438</th><td>			<b>return</b> <a class="enum" href="../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>;</td></tr>
<tr><th id="439">439</th><td>		}</td></tr>
<tr><th id="440">440</th><td>	}</td></tr>
<tr><th id="441">441</th><td>	<b>return</b> <a class="enum" href="../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>;</td></tr>
<tr><th id="442">442</th><td>}</td></tr>
<tr><th id="443">443</th><td></td></tr>
<tr><th id="444">444</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="nft_hash_insert" title='nft_hash_insert' data-type='int nft_hash_insert(const struct net * net, const struct nft_set * set, const struct nft_set_elem * elem, struct nft_set_ext ** ext)' data-ref="nft_hash_insert">nft_hash_insert</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/net_namespace.h.html#net" title='net' data-ref="net">net</a> *<dfn class="local col6 decl" id="116net" title='net' data-type='const struct net *' data-ref="116net">net</dfn>, <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col7 decl" id="117set" title='set' data-type='const struct nft_set *' data-ref="117set">set</dfn>,</td></tr>
<tr><th id="445">445</th><td>			   <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem" title='nft_set_elem' data-ref="nft_set_elem">nft_set_elem</a> *<dfn class="local col8 decl" id="118elem" title='elem' data-type='const struct nft_set_elem *' data-ref="118elem">elem</dfn>,</td></tr>
<tr><th id="446">446</th><td>			   <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext" title='nft_set_ext' data-ref="nft_set_ext">nft_set_ext</a> **<dfn class="local col9 decl" id="119ext" title='ext' data-type='struct nft_set_ext **' data-ref="119ext">ext</dfn>)</td></tr>
<tr><th id="447">447</th><td>{</td></tr>
<tr><th id="448">448</th><td>	<b>struct</b> <a class="type" href="#nft_hash_elem" title='nft_hash_elem' data-ref="nft_hash_elem">nft_hash_elem</a> *<dfn class="local col0 decl" id="120this" title='this' data-type='struct nft_hash_elem *' data-ref="120this">this</dfn> = <a class="local col8 ref" href="#118elem" title='elem' data-ref="118elem">elem</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::priv" title='nft_set_elem::priv' data-ref="nft_set_elem::priv">priv</a>, *<dfn class="local col1 decl" id="121he" title='he' data-type='struct nft_hash_elem *' data-ref="121he">he</dfn>;</td></tr>
<tr><th id="449">449</th><td>	<b>struct</b> <a class="type" href="#nft_hash" title='nft_hash' data-ref="nft_hash">nft_hash</a> *<dfn class="local col2 decl" id="122priv" title='priv' data-type='struct nft_hash *' data-ref="122priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col7 ref" href="#117set" title='set' data-ref="117set">set</a>);</td></tr>
<tr><th id="450">450</th><td>	<a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col3 decl" id="123genmask" title='genmask' data-type='u8' data-ref="123genmask">genmask</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_genmask_next" title='nft_genmask_next' data-ref="nft_genmask_next">nft_genmask_next</a>(<a class="local col6 ref" href="#116net" title='net' data-ref="116net">net</a>);</td></tr>
<tr><th id="451">451</th><td>	<a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col4 decl" id="124hash" title='hash' data-type='u32' data-ref="124hash">hash</dfn>;</td></tr>
<tr><th id="452">452</th><td></td></tr>
<tr><th id="453">453</th><td>	<a class="local col4 ref" href="#124hash" title='hash' data-ref="124hash">hash</a> = <a class="ref fn" href="../../include/linux/jhash.h.html#jhash" title='jhash' data-ref="jhash">jhash</a>(<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext_key" title='nft_set_ext_key' data-ref="nft_set_ext_key">nft_set_ext_key</a>(&amp;<a class="local col0 ref" href="#120this" title='this' data-ref="120this">this</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>), <a class="local col7 ref" href="#117set" title='set' data-ref="117set">set</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set::klen" title='nft_set::klen' data-ref="nft_set::klen">klen</a>, <a class="local col2 ref" href="#122priv" title='priv' data-ref="122priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::seed" title='nft_hash::seed' data-use='r' data-ref="nft_hash::seed">seed</a>);</td></tr>
<tr><th id="454">454</th><td>	<a class="local col4 ref" href="#124hash" title='hash' data-ref="124hash">hash</a> = <a class="ref fn" href="../../include/linux/kernel.h.html#reciprocal_scale" title='reciprocal_scale' data-ref="reciprocal_scale">reciprocal_scale</a>(<a class="local col4 ref" href="#124hash" title='hash' data-ref="124hash">hash</a>, <a class="local col2 ref" href="#122priv" title='priv' data-ref="122priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::buckets" title='nft_hash::buckets' data-use='r' data-ref="nft_hash::buckets">buckets</a>);</td></tr>
<tr><th id="455">455</th><td>	<a class="macro" href="../../include/linux/list.h.html#754" title="for (he = ({ typeof((&amp;priv-&gt;table[hash])-&gt;first) ____ptr = ((&amp;priv-&gt;table[hash])-&gt;first); ____ptr ? ({ void *__mptr = (void *)(____ptr); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(____ptr)), typeof(((typeof(*(he)) *)0)-&gt;node)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(____ptr)), typeof(void)))); extern void __compiletime_assert_455(void) ; if (__cond) __compiletime_assert_455(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((typeof(*(he)) *)(__mptr - __builtin_offsetof(typeof(*(he)), node))); }) : ((void *)0); }); he; he = ({ typeof((he)-&gt;node.next) ____ptr = ((he)-&gt;node.next); ____ptr ? ({ void *__mptr = (void *)(____ptr); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(____ptr)), typeof(((typeof(*(he)) *)0)-&gt;node)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(____ptr)), typeof(void)))); extern void __compiletime_assert_455(void) ; if (__cond) __compiletime_assert_455(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((typeof(*(he)) *)(__mptr - __builtin_offsetof(typeof(*(he)), node))); }) : ((void *)0); }))" data-ref="_M/hlist_for_each_entry">hlist_for_each_entry</a>(<a class="local col1 ref" href="#121he" title='he' data-ref="121he">he</a>, &amp;<a class="local col2 ref" href="#122priv" title='priv' data-ref="122priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::table" title='nft_hash::table' data-use='a' data-ref="nft_hash::table">table</a>[<a class="local col4 ref" href="#124hash" title='hash' data-ref="124hash">hash</a>], <a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='r' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='m' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='m' data-ref="nft_hash_elem::node">node</a></a></a>) {</td></tr>
<tr><th id="456">456</th><td>		<b>if</b> (!<a class="ref fn" href="../../arch/x86/include/asm/string_64.h.html#memcmp" title='memcmp' data-ref="memcmp">memcmp</a>(<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext_key" title='nft_set_ext_key' data-ref="nft_set_ext_key">nft_set_ext_key</a>(&amp;<a class="local col0 ref" href="#120this" title='this' data-ref="120this">this</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>),</td></tr>
<tr><th id="457">457</th><td>			    <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext_key" title='nft_set_ext_key' data-ref="nft_set_ext_key">nft_set_ext_key</a>(&amp;<a class="local col1 ref" href="#121he" title='he' data-ref="121he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>), <a class="local col7 ref" href="#117set" title='set' data-ref="117set">set</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set::klen" title='nft_set::klen' data-ref="nft_set::klen">klen</a>) &amp;&amp;</td></tr>
<tr><th id="458">458</th><td>		    <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_active" title='nft_set_elem_active' data-ref="nft_set_elem_active">nft_set_elem_active</a>(&amp;<a class="local col1 ref" href="#121he" title='he' data-ref="121he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>, <a class="local col3 ref" href="#123genmask" title='genmask' data-ref="123genmask">genmask</a>)) {</td></tr>
<tr><th id="459">459</th><td>			*<a class="local col9 ref" href="#119ext" title='ext' data-ref="119ext">ext</a> = &amp;<a class="local col1 ref" href="#121he" title='he' data-ref="121he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>;</td></tr>
<tr><th id="460">460</th><td>			<b>return</b> -<a class="macro" href="../../include/uapi/asm-generic/errno-base.h.html#21" title="17" data-ref="_M/EEXIST">EEXIST</a>;</td></tr>
<tr><th id="461">461</th><td>		}</td></tr>
<tr><th id="462">462</th><td>	}</td></tr>
<tr><th id="463">463</th><td>	<a class="ref fn" href="../../include/linux/rculist.h.html#hlist_add_head_rcu" title='hlist_add_head_rcu' data-ref="hlist_add_head_rcu">hlist_add_head_rcu</a>(&amp;<a class="local col0 ref" href="#120this" title='this' data-ref="120this">this</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node">node</a>, &amp;<a class="local col2 ref" href="#122priv" title='priv' data-ref="122priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::table" title='nft_hash::table' data-use='a' data-ref="nft_hash::table">table</a>[<a class="local col4 ref" href="#124hash" title='hash' data-ref="124hash">hash</a>]);</td></tr>
<tr><th id="464">464</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="465">465</th><td>}</td></tr>
<tr><th id="466">466</th><td></td></tr>
<tr><th id="467">467</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="nft_hash_activate" title='nft_hash_activate' data-type='void nft_hash_activate(const struct net * net, const struct nft_set * set, const struct nft_set_elem * elem)' data-ref="nft_hash_activate">nft_hash_activate</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/net_namespace.h.html#net" title='net' data-ref="net">net</a> *<dfn class="local col5 decl" id="125net" title='net' data-type='const struct net *' data-ref="125net">net</dfn>, <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col6 decl" id="126set" title='set' data-type='const struct nft_set *' data-ref="126set">set</dfn>,</td></tr>
<tr><th id="468">468</th><td>			      <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem" title='nft_set_elem' data-ref="nft_set_elem">nft_set_elem</a> *<dfn class="local col7 decl" id="127elem" title='elem' data-type='const struct nft_set_elem *' data-ref="127elem">elem</dfn>)</td></tr>
<tr><th id="469">469</th><td>{</td></tr>
<tr><th id="470">470</th><td>	<b>struct</b> <a class="type" href="#nft_hash_elem" title='nft_hash_elem' data-ref="nft_hash_elem">nft_hash_elem</a> *<dfn class="local col8 decl" id="128he" title='he' data-type='struct nft_hash_elem *' data-ref="128he">he</dfn> = <a class="local col7 ref" href="#127elem" title='elem' data-ref="127elem">elem</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::priv" title='nft_set_elem::priv' data-ref="nft_set_elem::priv">priv</a>;</td></tr>
<tr><th id="471">471</th><td></td></tr>
<tr><th id="472">472</th><td>	<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_change_active" title='nft_set_elem_change_active' data-ref="nft_set_elem_change_active">nft_set_elem_change_active</a>(<a class="local col5 ref" href="#125net" title='net' data-ref="125net">net</a>, <a class="local col6 ref" href="#126set" title='set' data-ref="126set">set</a>, &amp;<a class="local col8 ref" href="#128he" title='he' data-ref="128he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>);</td></tr>
<tr><th id="473">473</th><td>}</td></tr>
<tr><th id="474">474</th><td></td></tr>
<tr><th id="475">475</th><td><em>static</em> <a class="typedef" href="../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="tu decl def fn" id="nft_hash_flush" title='nft_hash_flush' data-type='bool nft_hash_flush(const struct net * net, const struct nft_set * set, void * priv)' data-ref="nft_hash_flush">nft_hash_flush</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/net_namespace.h.html#net" title='net' data-ref="net">net</a> *<dfn class="local col9 decl" id="129net" title='net' data-type='const struct net *' data-ref="129net">net</dfn>,</td></tr>
<tr><th id="476">476</th><td>			   <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col0 decl" id="130set" title='set' data-type='const struct nft_set *' data-ref="130set">set</dfn>, <em>void</em> *<dfn class="local col1 decl" id="131priv" title='priv' data-type='void *' data-ref="131priv">priv</dfn>)</td></tr>
<tr><th id="477">477</th><td>{</td></tr>
<tr><th id="478">478</th><td>	<b>struct</b> <a class="type" href="#nft_hash_elem" title='nft_hash_elem' data-ref="nft_hash_elem">nft_hash_elem</a> *<dfn class="local col2 decl" id="132he" title='he' data-type='struct nft_hash_elem *' data-ref="132he">he</dfn> = <a class="local col1 ref" href="#131priv" title='priv' data-ref="131priv">priv</a>;</td></tr>
<tr><th id="479">479</th><td></td></tr>
<tr><th id="480">480</th><td>	<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_change_active" title='nft_set_elem_change_active' data-ref="nft_set_elem_change_active">nft_set_elem_change_active</a>(<a class="local col9 ref" href="#129net" title='net' data-ref="129net">net</a>, <a class="local col0 ref" href="#130set" title='set' data-ref="130set">set</a>, &amp;<a class="local col2 ref" href="#132he" title='he' data-ref="132he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>);</td></tr>
<tr><th id="481">481</th><td>	<b>return</b> <a class="enum" href="../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>;</td></tr>
<tr><th id="482">482</th><td>}</td></tr>
<tr><th id="483">483</th><td></td></tr>
<tr><th id="484">484</th><td><em>static</em> <em>void</em> *<dfn class="tu decl def fn" id="nft_hash_deactivate" title='nft_hash_deactivate' data-type='void * nft_hash_deactivate(const struct net * net, const struct nft_set * set, const struct nft_set_elem * elem)' data-ref="nft_hash_deactivate">nft_hash_deactivate</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/net_namespace.h.html#net" title='net' data-ref="net">net</a> *<dfn class="local col3 decl" id="133net" title='net' data-type='const struct net *' data-ref="133net">net</dfn>,</td></tr>
<tr><th id="485">485</th><td>				 <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col4 decl" id="134set" title='set' data-type='const struct nft_set *' data-ref="134set">set</dfn>,</td></tr>
<tr><th id="486">486</th><td>				 <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem" title='nft_set_elem' data-ref="nft_set_elem">nft_set_elem</a> *<dfn class="local col5 decl" id="135elem" title='elem' data-type='const struct nft_set_elem *' data-ref="135elem">elem</dfn>)</td></tr>
<tr><th id="487">487</th><td>{</td></tr>
<tr><th id="488">488</th><td>	<b>struct</b> <a class="type" href="#nft_hash" title='nft_hash' data-ref="nft_hash">nft_hash</a> *<dfn class="local col6 decl" id="136priv" title='priv' data-type='struct nft_hash *' data-ref="136priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col4 ref" href="#134set" title='set' data-ref="134set">set</a>);</td></tr>
<tr><th id="489">489</th><td>	<b>struct</b> <a class="type" href="#nft_hash_elem" title='nft_hash_elem' data-ref="nft_hash_elem">nft_hash_elem</a> *<dfn class="local col7 decl" id="137this" title='this' data-type='struct nft_hash_elem *' data-ref="137this">this</dfn> = <a class="local col5 ref" href="#135elem" title='elem' data-ref="135elem">elem</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::priv" title='nft_set_elem::priv' data-ref="nft_set_elem::priv">priv</a>, *<dfn class="local col8 decl" id="138he" title='he' data-type='struct nft_hash_elem *' data-ref="138he">he</dfn>;</td></tr>
<tr><th id="490">490</th><td>	<a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col9 decl" id="139genmask" title='genmask' data-type='u8' data-ref="139genmask">genmask</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_genmask_next" title='nft_genmask_next' data-ref="nft_genmask_next">nft_genmask_next</a>(<a class="local col3 ref" href="#133net" title='net' data-ref="133net">net</a>);</td></tr>
<tr><th id="491">491</th><td>	<a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col0 decl" id="140hash" title='hash' data-type='u32' data-ref="140hash">hash</dfn>;</td></tr>
<tr><th id="492">492</th><td></td></tr>
<tr><th id="493">493</th><td>	<a class="local col0 ref" href="#140hash" title='hash' data-ref="140hash">hash</a> = <a class="ref fn" href="../../include/linux/jhash.h.html#jhash" title='jhash' data-ref="jhash">jhash</a>(<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext_key" title='nft_set_ext_key' data-ref="nft_set_ext_key">nft_set_ext_key</a>(&amp;<a class="local col7 ref" href="#137this" title='this' data-ref="137this">this</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>), <a class="local col4 ref" href="#134set" title='set' data-ref="134set">set</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set::klen" title='nft_set::klen' data-ref="nft_set::klen">klen</a>, <a class="local col6 ref" href="#136priv" title='priv' data-ref="136priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::seed" title='nft_hash::seed' data-use='r' data-ref="nft_hash::seed">seed</a>);</td></tr>
<tr><th id="494">494</th><td>	<a class="local col0 ref" href="#140hash" title='hash' data-ref="140hash">hash</a> = <a class="ref fn" href="../../include/linux/kernel.h.html#reciprocal_scale" title='reciprocal_scale' data-ref="reciprocal_scale">reciprocal_scale</a>(<a class="local col0 ref" href="#140hash" title='hash' data-ref="140hash">hash</a>, <a class="local col6 ref" href="#136priv" title='priv' data-ref="136priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::buckets" title='nft_hash::buckets' data-use='r' data-ref="nft_hash::buckets">buckets</a>);</td></tr>
<tr><th id="495">495</th><td>	<a class="macro" href="../../include/linux/list.h.html#754" title="for (he = ({ typeof((&amp;priv-&gt;table[hash])-&gt;first) ____ptr = ((&amp;priv-&gt;table[hash])-&gt;first); ____ptr ? ({ void *__mptr = (void *)(____ptr); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(____ptr)), typeof(((typeof(*(he)) *)0)-&gt;node)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(____ptr)), typeof(void)))); extern void __compiletime_assert_495(void) ; if (__cond) __compiletime_assert_495(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((typeof(*(he)) *)(__mptr - __builtin_offsetof(typeof(*(he)), node))); }) : ((void *)0); }); he; he = ({ typeof((he)-&gt;node.next) ____ptr = ((he)-&gt;node.next); ____ptr ? ({ void *__mptr = (void *)(____ptr); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(____ptr)), typeof(((typeof(*(he)) *)0)-&gt;node)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(____ptr)), typeof(void)))); extern void __compiletime_assert_495(void) ; if (__cond) __compiletime_assert_495(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((typeof(*(he)) *)(__mptr - __builtin_offsetof(typeof(*(he)), node))); }) : ((void *)0); }))" data-ref="_M/hlist_for_each_entry">hlist_for_each_entry</a>(<a class="local col8 ref" href="#138he" title='he' data-ref="138he">he</a>, &amp;<a class="local col6 ref" href="#136priv" title='priv' data-ref="136priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::table" title='nft_hash::table' data-use='a' data-ref="nft_hash::table">table</a>[<a class="local col0 ref" href="#140hash" title='hash' data-ref="140hash">hash</a>], <a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='r' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='m' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='m' data-ref="nft_hash_elem::node">node</a></a></a>) {</td></tr>
<tr><th id="496">496</th><td>		<b>if</b> (!<a class="ref fn" href="../../arch/x86/include/asm/string_64.h.html#memcmp" title='memcmp' data-ref="memcmp">memcmp</a>(<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ext_key" title='nft_set_ext_key' data-ref="nft_set_ext_key">nft_set_ext_key</a>(&amp;<a class="local col7 ref" href="#137this" title='this' data-ref="137this">this</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>), &amp;<a class="local col5 ref" href="#135elem" title='elem' data-ref="135elem">elem</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::key" title='nft_set_elem::key' data-ref="nft_set_elem::key">key</a>.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::(anonymous)::val" title='nft_set_elem::(anonymous union)::val' data-ref="nft_set_elem::(anonymous)::val">val</a>,</td></tr>
<tr><th id="497">497</th><td>			    <a class="local col4 ref" href="#134set" title='set' data-ref="134set">set</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set::klen" title='nft_set::klen' data-ref="nft_set::klen">klen</a>) ||</td></tr>
<tr><th id="498">498</th><td>		    <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_active" title='nft_set_elem_active' data-ref="nft_set_elem_active">nft_set_elem_active</a>(&amp;<a class="local col8 ref" href="#138he" title='he' data-ref="138he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>, <a class="local col9 ref" href="#139genmask" title='genmask' data-ref="139genmask">genmask</a>)) {</td></tr>
<tr><th id="499">499</th><td>			<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_change_active" title='nft_set_elem_change_active' data-ref="nft_set_elem_change_active">nft_set_elem_change_active</a>(<a class="local col3 ref" href="#133net" title='net' data-ref="133net">net</a>, <a class="local col4 ref" href="#134set" title='set' data-ref="134set">set</a>, &amp;<a class="local col8 ref" href="#138he" title='he' data-ref="138he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>);</td></tr>
<tr><th id="500">500</th><td>			<b>return</b> <a class="local col8 ref" href="#138he" title='he' data-ref="138he">he</a>;</td></tr>
<tr><th id="501">501</th><td>		}</td></tr>
<tr><th id="502">502</th><td>	}</td></tr>
<tr><th id="503">503</th><td>	<b>return</b> <a class="macro" href="../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="504">504</th><td>}</td></tr>
<tr><th id="505">505</th><td></td></tr>
<tr><th id="506">506</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="nft_hash_remove" title='nft_hash_remove' data-type='void nft_hash_remove(const struct net * net, const struct nft_set * set, const struct nft_set_elem * elem)' data-ref="nft_hash_remove">nft_hash_remove</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/net_namespace.h.html#net" title='net' data-ref="net">net</a> *<dfn class="local col1 decl" id="141net" title='net' data-type='const struct net *' data-ref="141net">net</dfn>,</td></tr>
<tr><th id="507">507</th><td>			    <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col2 decl" id="142set" title='set' data-type='const struct nft_set *' data-ref="142set">set</dfn>,</td></tr>
<tr><th id="508">508</th><td>			    <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem" title='nft_set_elem' data-ref="nft_set_elem">nft_set_elem</a> *<dfn class="local col3 decl" id="143elem" title='elem' data-type='const struct nft_set_elem *' data-ref="143elem">elem</dfn>)</td></tr>
<tr><th id="509">509</th><td>{</td></tr>
<tr><th id="510">510</th><td>	<b>struct</b> <a class="type" href="#nft_hash_elem" title='nft_hash_elem' data-ref="nft_hash_elem">nft_hash_elem</a> *<dfn class="local col4 decl" id="144he" title='he' data-type='struct nft_hash_elem *' data-ref="144he">he</dfn> = <a class="local col3 ref" href="#143elem" title='elem' data-ref="143elem">elem</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::priv" title='nft_set_elem::priv' data-ref="nft_set_elem::priv">priv</a>;</td></tr>
<tr><th id="511">511</th><td></td></tr>
<tr><th id="512">512</th><td>	<a class="ref fn" href="../../include/linux/rculist.h.html#hlist_del_rcu" title='hlist_del_rcu' data-ref="hlist_del_rcu">hlist_del_rcu</a>(&amp;<a class="local col4 ref" href="#144he" title='he' data-ref="144he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node">node</a>);</td></tr>
<tr><th id="513">513</th><td>}</td></tr>
<tr><th id="514">514</th><td></td></tr>
<tr><th id="515">515</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="nft_hash_walk" title='nft_hash_walk' data-type='void nft_hash_walk(const struct nft_ctx * ctx, struct nft_set * set, struct nft_set_iter * iter)' data-ref="nft_hash_walk">nft_hash_walk</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_ctx" title='nft_ctx' data-ref="nft_ctx">nft_ctx</a> *<dfn class="local col5 decl" id="145ctx" title='ctx' data-type='const struct nft_ctx *' data-ref="145ctx">ctx</dfn>, <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col6 decl" id="146set" title='set' data-type='struct nft_set *' data-ref="146set">set</dfn>,</td></tr>
<tr><th id="516">516</th><td>			  <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter" title='nft_set_iter' data-ref="nft_set_iter">nft_set_iter</a> *<dfn class="local col7 decl" id="147iter" title='iter' data-type='struct nft_set_iter *' data-ref="147iter">iter</dfn>)</td></tr>
<tr><th id="517">517</th><td>{</td></tr>
<tr><th id="518">518</th><td>	<b>struct</b> <a class="type" href="#nft_hash" title='nft_hash' data-ref="nft_hash">nft_hash</a> *<dfn class="local col8 decl" id="148priv" title='priv' data-type='struct nft_hash *' data-ref="148priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col6 ref" href="#146set" title='set' data-ref="146set">set</a>);</td></tr>
<tr><th id="519">519</th><td>	<b>struct</b> <a class="type" href="#nft_hash_elem" title='nft_hash_elem' data-ref="nft_hash_elem">nft_hash_elem</a> *<dfn class="local col9 decl" id="149he" title='he' data-type='struct nft_hash_elem *' data-ref="149he">he</dfn>;</td></tr>
<tr><th id="520">520</th><td>	<b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem" title='nft_set_elem' data-ref="nft_set_elem">nft_set_elem</a> <dfn class="local col0 decl" id="150elem" title='elem' data-type='struct nft_set_elem' data-ref="150elem">elem</dfn>;</td></tr>
<tr><th id="521">521</th><td>	<em>int</em> <dfn class="local col1 decl" id="151i" title='i' data-type='int' data-ref="151i">i</dfn>;</td></tr>
<tr><th id="522">522</th><td></td></tr>
<tr><th id="523">523</th><td>	<b>for</b> (<a class="local col1 ref" href="#151i" title='i' data-ref="151i">i</a> = <var>0</var>; <a class="local col1 ref" href="#151i" title='i' data-ref="151i">i</a> &lt; <a class="local col8 ref" href="#148priv" title='priv' data-ref="148priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::buckets" title='nft_hash::buckets' data-use='r' data-ref="nft_hash::buckets">buckets</a>; <a class="local col1 ref" href="#151i" title='i' data-ref="151i">i</a>++) {</td></tr>
<tr><th id="524">524</th><td>		<a class="macro" href="../../include/linux/rculist.h.html#596" title="for (he = ({ typeof(({ typeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first)))) ________p1 = ({ union { typeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first)))) __val; char __c[1]; } __u; if (1) __read_once_size(&amp;((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first))))); else __read_once_size_nocheck(&amp;((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first))))); do { } while (0); __u.__val; }); ((typeof(*(*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first)))) *)(________p1)); })) ____ptr = (({ typeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first)))) ________p1 = ({ union { typeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first)))) __val; char __c[1]; } __u; if (1) __read_once_size(&amp;((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first))))); else __read_once_size_nocheck(&amp;((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first))))); do { } while (0); __u.__val; }); ((typeof(*(*((struct hlist_node **)(&amp;(&amp;priv-&gt;table[i])-&gt;first)))) *)(________p1)); })); ____ptr ? ({ void *__mptr = (void *)(____ptr); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(____ptr)), typeof(((typeof(*(he)) *)0)-&gt;node)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(____ptr)), typeof(void)))); extern void __compiletime_assert_524(void) ; if (__cond) __compiletime_assert_524(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((typeof(*(he)) *)(__mptr - __builtin_offsetof(typeof(*(he)), node))); }) : ((void *)0); }); he; he = ({ typeof(({ typeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) ________p1 = ({ union { typeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) __val; char __c[1]; } __u; if (1) __read_once_size(&amp;((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next))))); else __read_once_size_nocheck(&amp;((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next))))); do { } while (0); __u.__val; }); ((typeof(*(*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) *)(________p1)); })) ____ptr = (({ typeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) ________p1 = ({ union { typeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) __val; char __c[1]; } __u; if (1) __read_once_size(&amp;((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next))))); else __read_once_size_nocheck(&amp;((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))), __u.__c, sizeof((*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next))))); do { } while (0); __u.__val; }); ((typeof(*(*((struct hlist_node **)(&amp;(&amp;(he)-&gt;node)-&gt;next)))) *)(________p1)); })); ____ptr ? ({ void *__mptr = (void *)(____ptr); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(____ptr)), typeof(((typeof(*(he)) *)0)-&gt;node)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(____ptr)), typeof(void)))); extern void __compiletime_assert_524(void) ; if (__cond) __compiletime_assert_524(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((typeof(*(he)) *)(__mptr - __builtin_offsetof(typeof(*(he)), node))); }) : ((void *)0); }))" data-ref="_M/hlist_for_each_entry_rcu">hlist_for_each_entry_rcu</a>(<a class="local col9 ref" href="#149he" title='he' data-ref="149he">he</a>, &amp;<a class="local col8 ref" href="#148priv" title='priv' data-ref="148priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::table" title='nft_hash::table' data-use='a' data-ref="nft_hash::table">table</a>[<a class="local col1 ref" href="#151i" title='i' data-ref="151i">i</a>], <a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='r' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node">node</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a>) {</td></tr>
<tr><th id="525">525</th><td>			<b>if</b> (<a class="local col7 ref" href="#147iter" title='iter' data-ref="147iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::count" title='nft_set_iter::count' data-ref="nft_set_iter::count">count</a> &lt; <a class="local col7 ref" href="#147iter" title='iter' data-ref="147iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::skip" title='nft_set_iter::skip' data-ref="nft_set_iter::skip">skip</a>)</td></tr>
<tr><th id="526">526</th><td>				<b>goto</b> <a class="lbl" href="#152cont" data-ref="152cont">cont</a>;</td></tr>
<tr><th id="527">527</th><td>			<b>if</b> (!<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_active" title='nft_set_elem_active' data-ref="nft_set_elem_active">nft_set_elem_active</a>(&amp;<a class="local col9 ref" href="#149he" title='he' data-ref="149he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::ext" title='nft_hash_elem::ext' data-use='a' data-ref="nft_hash_elem::ext">ext</a>, <a class="local col7 ref" href="#147iter" title='iter' data-ref="147iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::genmask" title='nft_set_iter::genmask' data-ref="nft_set_iter::genmask">genmask</a>))</td></tr>
<tr><th id="528">528</th><td>				<b>goto</b> <a class="lbl" href="#152cont" data-ref="152cont">cont</a>;</td></tr>
<tr><th id="529">529</th><td></td></tr>
<tr><th id="530">530</th><td>			<a class="local col0 ref" href="#150elem" title='elem' data-ref="150elem">elem</a>.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem::priv" title='nft_set_elem::priv' data-ref="nft_set_elem::priv">priv</a> = <a class="local col9 ref" href="#149he" title='he' data-ref="149he">he</a>;</td></tr>
<tr><th id="531">531</th><td></td></tr>
<tr><th id="532">532</th><td>			<a class="local col7 ref" href="#147iter" title='iter' data-ref="147iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::err" title='nft_set_iter::err' data-ref="nft_set_iter::err">err</a> = <a class="local col7 ref" href="#147iter" title='iter' data-ref="147iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::fn" title='nft_set_iter::fn' data-ref="nft_set_iter::fn">fn</a>(<a class="local col5 ref" href="#145ctx" title='ctx' data-ref="145ctx">ctx</a>, <a class="local col6 ref" href="#146set" title='set' data-ref="146set">set</a>, <a class="local col7 ref" href="#147iter" title='iter' data-ref="147iter">iter</a>, &amp;<a class="local col0 ref" href="#150elem" title='elem' data-ref="150elem">elem</a>);</td></tr>
<tr><th id="533">533</th><td>			<b>if</b> (<a class="local col7 ref" href="#147iter" title='iter' data-ref="147iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::err" title='nft_set_iter::err' data-ref="nft_set_iter::err">err</a> &lt; <var>0</var>)</td></tr>
<tr><th id="534">534</th><td>				<b>return</b>;</td></tr>
<tr><th id="535">535</th><td><dfn class="lbl" id="152cont" data-ref="152cont">cont</dfn>:</td></tr>
<tr><th id="536">536</th><td>			<a class="local col7 ref" href="#147iter" title='iter' data-ref="147iter">iter</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_iter::count" title='nft_set_iter::count' data-ref="nft_set_iter::count">count</a>++;</td></tr>
<tr><th id="537">537</th><td>		}</td></tr>
<tr><th id="538">538</th><td>	}</td></tr>
<tr><th id="539">539</th><td>}</td></tr>
<tr><th id="540">540</th><td></td></tr>
<tr><th id="541">541</th><td><em>static</em> <em>unsigned</em> <em>int</em> <dfn class="tu decl def fn" id="nft_hash_privsize" title='nft_hash_privsize' data-type='unsigned int nft_hash_privsize(const struct nlattr *const * nla, const struct nft_set_desc * desc)' data-ref="nft_hash_privsize">nft_hash_privsize</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/uapi/linux/netlink.h.html#nlattr" title='nlattr' data-ref="nlattr">nlattr</a> * <em>const</em> <dfn class="local col3 decl" id="153nla" title='nla' data-type='const struct nlattr *const *' data-ref="153nla">nla</dfn>[],</td></tr>
<tr><th id="542">542</th><td>				      <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc" title='nft_set_desc' data-ref="nft_set_desc">nft_set_desc</a> *<dfn class="local col4 decl" id="154desc" title='desc' data-type='const struct nft_set_desc *' data-ref="154desc">desc</dfn>)</td></tr>
<tr><th id="543">543</th><td>{</td></tr>
<tr><th id="544">544</th><td>	<b>return</b> <b>sizeof</b>(<b>struct</b> <a class="type" href="#nft_hash" title='nft_hash' data-ref="nft_hash">nft_hash</a>) +</td></tr>
<tr><th id="545">545</th><td>	       <a class="tu ref fn" href="#nft_hash_buckets" title='nft_hash_buckets' data-use='c' data-ref="nft_hash_buckets">nft_hash_buckets</a>(<a class="local col4 ref" href="#154desc" title='desc' data-ref="154desc">desc</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc::size" title='nft_set_desc::size' data-ref="nft_set_desc::size">size</a>) * <b>sizeof</b>(<b>struct</b> <a class="type" href="../../include/linux/types.h.html#hlist_head" title='hlist_head' data-ref="hlist_head">hlist_head</a>);</td></tr>
<tr><th id="546">546</th><td>}</td></tr>
<tr><th id="547">547</th><td></td></tr>
<tr><th id="548">548</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="nft_hash_init" title='nft_hash_init' data-type='int nft_hash_init(const struct nft_set * set, const struct nft_set_desc * desc, const struct nlattr *const * tb)' data-ref="nft_hash_init">nft_hash_init</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col5 decl" id="155set" title='set' data-type='const struct nft_set *' data-ref="155set">set</dfn>,</td></tr>
<tr><th id="549">549</th><td>			 <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc" title='nft_set_desc' data-ref="nft_set_desc">nft_set_desc</a> *<dfn class="local col6 decl" id="156desc" title='desc' data-type='const struct nft_set_desc *' data-ref="156desc">desc</dfn>,</td></tr>
<tr><th id="550">550</th><td>			 <em>const</em> <b>struct</b> <a class="type" href="../../include/uapi/linux/netlink.h.html#nlattr" title='nlattr' data-ref="nlattr">nlattr</a> * <em>const</em> <dfn class="local col7 decl" id="157tb" title='tb' data-type='const struct nlattr *const *' data-ref="157tb">tb</dfn>[])</td></tr>
<tr><th id="551">551</th><td>{</td></tr>
<tr><th id="552">552</th><td>	<b>struct</b> <a class="type" href="#nft_hash" title='nft_hash' data-ref="nft_hash">nft_hash</a> *<dfn class="local col8 decl" id="158priv" title='priv' data-type='struct nft_hash *' data-ref="158priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col5 ref" href="#155set" title='set' data-ref="155set">set</a>);</td></tr>
<tr><th id="553">553</th><td></td></tr>
<tr><th id="554">554</th><td>	<a class="local col8 ref" href="#158priv" title='priv' data-ref="158priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::buckets" title='nft_hash::buckets' data-use='w' data-ref="nft_hash::buckets">buckets</a> = <a class="tu ref fn" href="#nft_hash_buckets" title='nft_hash_buckets' data-use='c' data-ref="nft_hash_buckets">nft_hash_buckets</a>(<a class="local col6 ref" href="#156desc" title='desc' data-ref="156desc">desc</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc::size" title='nft_set_desc::size' data-ref="nft_set_desc::size">size</a>);</td></tr>
<tr><th id="555">555</th><td>	<a class="ref fn" href="../../include/linux/random.h.html#get_random_bytes" title='get_random_bytes' data-ref="get_random_bytes">get_random_bytes</a>(&amp;<a class="local col8 ref" href="#158priv" title='priv' data-ref="158priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::seed" title='nft_hash::seed' data-use='a' data-ref="nft_hash::seed">seed</a>, <b>sizeof</b>(<a class="local col8 ref" href="#158priv" title='priv' data-ref="158priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::seed" title='nft_hash::seed' data-use='r' data-ref="nft_hash::seed">seed</a>));</td></tr>
<tr><th id="556">556</th><td></td></tr>
<tr><th id="557">557</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="558">558</th><td>}</td></tr>
<tr><th id="559">559</th><td></td></tr>
<tr><th id="560">560</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="nft_hash_destroy" title='nft_hash_destroy' data-type='void nft_hash_destroy(const struct nft_set * set)' data-ref="nft_hash_destroy">nft_hash_destroy</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set" title='nft_set' data-ref="nft_set">nft_set</a> *<dfn class="local col9 decl" id="159set" title='set' data-type='const struct nft_set *' data-ref="159set">set</dfn>)</td></tr>
<tr><th id="561">561</th><td>{</td></tr>
<tr><th id="562">562</th><td>	<b>struct</b> <a class="type" href="#nft_hash" title='nft_hash' data-ref="nft_hash">nft_hash</a> *<dfn class="local col0 decl" id="160priv" title='priv' data-type='struct nft_hash *' data-ref="160priv">priv</dfn> = <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_priv" title='nft_set_priv' data-ref="nft_set_priv">nft_set_priv</a>(<a class="local col9 ref" href="#159set" title='set' data-ref="159set">set</a>);</td></tr>
<tr><th id="563">563</th><td>	<b>struct</b> <a class="type" href="#nft_hash_elem" title='nft_hash_elem' data-ref="nft_hash_elem">nft_hash_elem</a> *<dfn class="local col1 decl" id="161he" title='he' data-type='struct nft_hash_elem *' data-ref="161he">he</dfn>;</td></tr>
<tr><th id="564">564</th><td>	<b>struct</b> <a class="type" href="../../include/linux/types.h.html#hlist_node" title='hlist_node' data-ref="hlist_node">hlist_node</a> *<dfn class="local col2 decl" id="162next" title='next' data-type='struct hlist_node *' data-ref="162next">next</dfn>;</td></tr>
<tr><th id="565">565</th><td>	<em>int</em> <dfn class="local col3 decl" id="163i" title='i' data-type='int' data-ref="163i">i</dfn>;</td></tr>
<tr><th id="566">566</th><td></td></tr>
<tr><th id="567">567</th><td>	<b>for</b> (<a class="local col3 ref" href="#163i" title='i' data-ref="163i">i</a> = <var>0</var>; <a class="local col3 ref" href="#163i" title='i' data-ref="163i">i</a> &lt; <a class="local col0 ref" href="#160priv" title='priv' data-ref="160priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::buckets" title='nft_hash::buckets' data-use='r' data-ref="nft_hash::buckets">buckets</a>; <a class="local col3 ref" href="#163i" title='i' data-ref="163i">i</a>++) {</td></tr>
<tr><th id="568">568</th><td>		<a class="macro" href="../../include/linux/list.h.html#785" title="for (he = ({ typeof((&amp;priv-&gt;table[i])-&gt;first) ____ptr = ((&amp;priv-&gt;table[i])-&gt;first); ____ptr ? ({ void *__mptr = (void *)(____ptr); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(____ptr)), typeof(((typeof(*he) *)0)-&gt;node)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(____ptr)), typeof(void)))); extern void __compiletime_assert_568(void) ; if (__cond) __compiletime_assert_568(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((typeof(*he) *)(__mptr - __builtin_offsetof(typeof(*he), node))); }) : ((void *)0); }); he &amp;&amp; ({ next = he-&gt;node.next; 1; }); he = ({ typeof(next) ____ptr = (next); ____ptr ? ({ void *__mptr = (void *)(____ptr); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(____ptr)), typeof(((typeof(*he) *)0)-&gt;node)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(____ptr)), typeof(void)))); extern void __compiletime_assert_568(void) ; if (__cond) __compiletime_assert_568(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((typeof(*he) *)(__mptr - __builtin_offsetof(typeof(*he), node))); }) : ((void *)0); }))" data-ref="_M/hlist_for_each_entry_safe">hlist_for_each_entry_safe</a>(<a class="local col1 ref" href="#161he" title='he' data-ref="161he">he</a>, <a class="local col2 ref" href="#162next" title='next' data-ref="162next">next</a>, &amp;<a class="local col0 ref" href="#160priv" title='priv' data-ref="160priv">priv</a>-&gt;<a class="tu ref field" href="#nft_hash::table" title='nft_hash::table' data-use='a' data-ref="nft_hash::table">table</a>[<a class="local col3 ref" href="#163i" title='i' data-ref="163i">i</a>], <a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='r' data-ref="nft_hash_elem::node"><a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='m' data-ref="nft_hash_elem::node">node</a></a>) {</td></tr>
<tr><th id="569">569</th><td>			<a class="ref fn" href="../../include/linux/rculist.h.html#hlist_del_rcu" title='hlist_del_rcu' data-ref="hlist_del_rcu">hlist_del_rcu</a>(&amp;<a class="local col1 ref" href="#161he" title='he' data-ref="161he">he</a>-&gt;<a class="tu ref field" href="#nft_hash_elem::node" title='nft_hash_elem::node' data-use='a' data-ref="nft_hash_elem::node">node</a>);</td></tr>
<tr><th id="570">570</th><td>			<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_set_elem_destroy" title='nft_set_elem_destroy' data-ref="nft_set_elem_destroy">nft_set_elem_destroy</a>(<a class="local col9 ref" href="#159set" title='set' data-ref="159set">set</a>, <a class="local col1 ref" href="#161he" title='he' data-ref="161he">he</a>, <a class="enum" href="../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>);</td></tr>
<tr><th id="571">571</th><td>		}</td></tr>
<tr><th id="572">572</th><td>	}</td></tr>
<tr><th id="573">573</th><td>}</td></tr>
<tr><th id="574">574</th><td></td></tr>
<tr><th id="575">575</th><td><em>static</em> <a class="typedef" href="../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="tu decl def fn" id="nft_hash_estimate" title='nft_hash_estimate' data-type='bool nft_hash_estimate(const struct nft_set_desc * desc, u32 features, struct nft_set_estimate * est)' data-ref="nft_hash_estimate">nft_hash_estimate</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc" title='nft_set_desc' data-ref="nft_set_desc">nft_set_desc</a> *<dfn class="local col4 decl" id="164desc" title='desc' data-type='const struct nft_set_desc *' data-ref="164desc">desc</dfn>, <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col5 decl" id="165features" title='features' data-type='u32' data-ref="165features">features</dfn>,</td></tr>
<tr><th id="576">576</th><td>			      <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_estimate" title='nft_set_estimate' data-ref="nft_set_estimate">nft_set_estimate</a> *<dfn class="local col6 decl" id="166est" title='est' data-type='struct nft_set_estimate *' data-ref="166est">est</dfn>)</td></tr>
<tr><th id="577">577</th><td>{</td></tr>
<tr><th id="578">578</th><td>	<a class="local col6 ref" href="#166est" title='est' data-ref="166est">est</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_estimate::size" title='nft_set_estimate::size' data-ref="nft_set_estimate::size">size</a>   = <b>sizeof</b>(<b>struct</b> <a class="type" href="#nft_hash" title='nft_hash' data-ref="nft_hash">nft_hash</a>) +</td></tr>
<tr><th id="579">579</th><td>		      <a class="tu ref fn" href="#nft_hash_buckets" title='nft_hash_buckets' data-use='c' data-ref="nft_hash_buckets">nft_hash_buckets</a>(<a class="local col4 ref" href="#164desc" title='desc' data-ref="164desc">desc</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc::size" title='nft_set_desc::size' data-ref="nft_set_desc::size">size</a>) * <b>sizeof</b>(<b>struct</b> <a class="type" href="../../include/linux/types.h.html#hlist_head" title='hlist_head' data-ref="hlist_head">hlist_head</a>) +</td></tr>
<tr><th id="580">580</th><td>		      <a class="local col4 ref" href="#164desc" title='desc' data-ref="164desc">desc</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc::size" title='nft_set_desc::size' data-ref="nft_set_desc::size">size</a> * <b>sizeof</b>(<b>struct</b> <a class="type" href="#nft_hash_elem" title='nft_hash_elem' data-ref="nft_hash_elem">nft_hash_elem</a>);</td></tr>
<tr><th id="581">581</th><td>	<a class="local col6 ref" href="#166est" title='est' data-ref="166est">est</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_estimate::lookup" title='nft_set_estimate::lookup' data-ref="nft_set_estimate::lookup">lookup</a> = <a class="enum" href="../../include/net/netfilter/nf_tables.h.html#NFT_SET_CLASS_O_1" title='NFT_SET_CLASS_O_1' data-ref="NFT_SET_CLASS_O_1">NFT_SET_CLASS_O_1</a>;</td></tr>
<tr><th id="582">582</th><td>	<a class="local col6 ref" href="#166est" title='est' data-ref="166est">est</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_estimate::space" title='nft_set_estimate::space' data-ref="nft_set_estimate::space">space</a>  = <a class="enum" href="../../include/net/netfilter/nf_tables.h.html#NFT_SET_CLASS_O_N" title='NFT_SET_CLASS_O_N' data-ref="NFT_SET_CLASS_O_N">NFT_SET_CLASS_O_N</a>;</td></tr>
<tr><th id="583">583</th><td></td></tr>
<tr><th id="584">584</th><td>	<b>return</b> <a class="enum" href="../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>;</td></tr>
<tr><th id="585">585</th><td>}</td></tr>
<tr><th id="586">586</th><td></td></tr>
<tr><th id="587">587</th><td><em>static</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_type" title='nft_set_type' data-ref="nft_set_type">nft_set_type</a> <dfn class="tu decl def" id="nft_hash_type" title='nft_hash_type' data-type='struct nft_set_type' data-ref="nft_hash_type">nft_hash_type</dfn>;</td></tr>
<tr><th id="588">588</th><td><em>static</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops" title='nft_set_ops' data-ref="nft_set_ops">nft_set_ops</a> <dfn class="tu decl def" id="nft_rhash_ops" title='nft_rhash_ops' data-type='struct nft_set_ops' data-ref="nft_rhash_ops">nft_rhash_ops</dfn> <a class="macro" href="../../arch/x86/include/asm/cache.h.html#11" title="__attribute__((__section__(&quot;.data..read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a> = {</td></tr>
<tr><th id="589">589</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::type" title='nft_set_ops::type' data-ref="nft_set_ops::type">type</a>		= &amp;<a class="tu ref" href="#nft_hash_type" title='nft_hash_type' data-use='a' data-ref="nft_hash_type">nft_hash_type</a>,</td></tr>
<tr><th id="590">590</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::privsize" title='nft_set_ops::privsize' data-ref="nft_set_ops::privsize">privsize</a>       = <a class="tu ref fn" href="#nft_rhash_privsize" title='nft_rhash_privsize' data-ref="nft_rhash_privsize">nft_rhash_privsize</a>,</td></tr>
<tr><th id="591">591</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::elemsize" title='nft_set_ops::elemsize' data-ref="nft_set_ops::elemsize">elemsize</a>	= <a class="macro" href="../../include/linux/stddef.h.html#17" title="__builtin_offsetof(struct nft_rhash_elem, ext)" data-ref="_M/offsetof">offsetof</a>(<b>struct</b> <a class="type" href="#nft_rhash_elem" title='nft_rhash_elem' data-ref="nft_rhash_elem">nft_rhash_elem</a>, ext),</td></tr>
<tr><th id="592">592</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::estimate" title='nft_set_ops::estimate' data-ref="nft_set_ops::estimate">estimate</a>	= <a class="tu ref fn" href="#nft_rhash_estimate" title='nft_rhash_estimate' data-ref="nft_rhash_estimate">nft_rhash_estimate</a>,</td></tr>
<tr><th id="593">593</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::init" title='nft_set_ops::init' data-ref="nft_set_ops::init">init</a>		= <a class="tu ref fn" href="#nft_rhash_init" title='nft_rhash_init' data-ref="nft_rhash_init">nft_rhash_init</a>,</td></tr>
<tr><th id="594">594</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::destroy" title='nft_set_ops::destroy' data-ref="nft_set_ops::destroy">destroy</a>	= <a class="tu ref fn" href="#nft_rhash_destroy" title='nft_rhash_destroy' data-ref="nft_rhash_destroy">nft_rhash_destroy</a>,</td></tr>
<tr><th id="595">595</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::insert" title='nft_set_ops::insert' data-ref="nft_set_ops::insert">insert</a>		= <a class="tu ref fn" href="#nft_rhash_insert" title='nft_rhash_insert' data-ref="nft_rhash_insert">nft_rhash_insert</a>,</td></tr>
<tr><th id="596">596</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::activate" title='nft_set_ops::activate' data-ref="nft_set_ops::activate">activate</a>	= <a class="tu ref fn" href="#nft_rhash_activate" title='nft_rhash_activate' data-ref="nft_rhash_activate">nft_rhash_activate</a>,</td></tr>
<tr><th id="597">597</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::deactivate" title='nft_set_ops::deactivate' data-ref="nft_set_ops::deactivate">deactivate</a>	= <a class="tu ref fn" href="#nft_rhash_deactivate" title='nft_rhash_deactivate' data-ref="nft_rhash_deactivate">nft_rhash_deactivate</a>,</td></tr>
<tr><th id="598">598</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::flush" title='nft_set_ops::flush' data-ref="nft_set_ops::flush">flush</a>		= <a class="tu ref fn" href="#nft_rhash_flush" title='nft_rhash_flush' data-ref="nft_rhash_flush">nft_rhash_flush</a>,</td></tr>
<tr><th id="599">599</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::remove" title='nft_set_ops::remove' data-ref="nft_set_ops::remove">remove</a>		= <a class="tu ref fn" href="#nft_rhash_remove" title='nft_rhash_remove' data-ref="nft_rhash_remove">nft_rhash_remove</a>,</td></tr>
<tr><th id="600">600</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::lookup" title='nft_set_ops::lookup' data-ref="nft_set_ops::lookup">lookup</a>		= <a class="tu ref fn" href="#nft_rhash_lookup" title='nft_rhash_lookup' data-ref="nft_rhash_lookup">nft_rhash_lookup</a>,</td></tr>
<tr><th id="601">601</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::update" title='nft_set_ops::update' data-ref="nft_set_ops::update">update</a>		= <a class="tu ref fn" href="#nft_rhash_update" title='nft_rhash_update' data-ref="nft_rhash_update">nft_rhash_update</a>,</td></tr>
<tr><th id="602">602</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::walk" title='nft_set_ops::walk' data-ref="nft_set_ops::walk">walk</a>		= <a class="tu ref fn" href="#nft_rhash_walk" title='nft_rhash_walk' data-ref="nft_rhash_walk">nft_rhash_walk</a>,</td></tr>
<tr><th id="603">603</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::features" title='nft_set_ops::features' data-ref="nft_set_ops::features">features</a>	= <a class="enum" href="../../include/uapi/linux/netfilter/nf_tables.h.html#NFT_SET_MAP" title='NFT_SET_MAP' data-ref="NFT_SET_MAP">NFT_SET_MAP</a> | <a class="enum" href="../../include/uapi/linux/netfilter/nf_tables.h.html#NFT_SET_OBJECT" title='NFT_SET_OBJECT' data-ref="NFT_SET_OBJECT">NFT_SET_OBJECT</a> | <a class="enum" href="../../include/uapi/linux/netfilter/nf_tables.h.html#NFT_SET_TIMEOUT" title='NFT_SET_TIMEOUT' data-ref="NFT_SET_TIMEOUT">NFT_SET_TIMEOUT</a>,</td></tr>
<tr><th id="604">604</th><td>};</td></tr>
<tr><th id="605">605</th><td></td></tr>
<tr><th id="606">606</th><td><em>static</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops" title='nft_set_ops' data-ref="nft_set_ops">nft_set_ops</a> <dfn class="tu decl def" id="nft_hash_ops" title='nft_hash_ops' data-type='struct nft_set_ops' data-ref="nft_hash_ops">nft_hash_ops</dfn> <a class="macro" href="../../arch/x86/include/asm/cache.h.html#11" title="__attribute__((__section__(&quot;.data..read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a> = {</td></tr>
<tr><th id="607">607</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::type" title='nft_set_ops::type' data-ref="nft_set_ops::type">type</a>		= &amp;<a class="tu ref" href="#nft_hash_type" title='nft_hash_type' data-use='a' data-ref="nft_hash_type">nft_hash_type</a>,</td></tr>
<tr><th id="608">608</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::privsize" title='nft_set_ops::privsize' data-ref="nft_set_ops::privsize">privsize</a>       = <a class="tu ref fn" href="#nft_hash_privsize" title='nft_hash_privsize' data-ref="nft_hash_privsize">nft_hash_privsize</a>,</td></tr>
<tr><th id="609">609</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::elemsize" title='nft_set_ops::elemsize' data-ref="nft_set_ops::elemsize">elemsize</a>	= <a class="macro" href="../../include/linux/stddef.h.html#17" title="__builtin_offsetof(struct nft_hash_elem, ext)" data-ref="_M/offsetof">offsetof</a>(<b>struct</b> <a class="type" href="#nft_hash_elem" title='nft_hash_elem' data-ref="nft_hash_elem">nft_hash_elem</a>, ext),</td></tr>
<tr><th id="610">610</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::estimate" title='nft_set_ops::estimate' data-ref="nft_set_ops::estimate">estimate</a>	= <a class="tu ref fn" href="#nft_hash_estimate" title='nft_hash_estimate' data-ref="nft_hash_estimate">nft_hash_estimate</a>,</td></tr>
<tr><th id="611">611</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::init" title='nft_set_ops::init' data-ref="nft_set_ops::init">init</a>		= <a class="tu ref fn" href="#nft_hash_init" title='nft_hash_init' data-ref="nft_hash_init">nft_hash_init</a>,</td></tr>
<tr><th id="612">612</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::destroy" title='nft_set_ops::destroy' data-ref="nft_set_ops::destroy">destroy</a>	= <a class="tu ref fn" href="#nft_hash_destroy" title='nft_hash_destroy' data-ref="nft_hash_destroy">nft_hash_destroy</a>,</td></tr>
<tr><th id="613">613</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::insert" title='nft_set_ops::insert' data-ref="nft_set_ops::insert">insert</a>		= <a class="tu ref fn" href="#nft_hash_insert" title='nft_hash_insert' data-ref="nft_hash_insert">nft_hash_insert</a>,</td></tr>
<tr><th id="614">614</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::activate" title='nft_set_ops::activate' data-ref="nft_set_ops::activate">activate</a>	= <a class="tu ref fn" href="#nft_hash_activate" title='nft_hash_activate' data-ref="nft_hash_activate">nft_hash_activate</a>,</td></tr>
<tr><th id="615">615</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::deactivate" title='nft_set_ops::deactivate' data-ref="nft_set_ops::deactivate">deactivate</a>	= <a class="tu ref fn" href="#nft_hash_deactivate" title='nft_hash_deactivate' data-ref="nft_hash_deactivate">nft_hash_deactivate</a>,</td></tr>
<tr><th id="616">616</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::flush" title='nft_set_ops::flush' data-ref="nft_set_ops::flush">flush</a>		= <a class="tu ref fn" href="#nft_hash_flush" title='nft_hash_flush' data-ref="nft_hash_flush">nft_hash_flush</a>,</td></tr>
<tr><th id="617">617</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::remove" title='nft_set_ops::remove' data-ref="nft_set_ops::remove">remove</a>		= <a class="tu ref fn" href="#nft_hash_remove" title='nft_hash_remove' data-ref="nft_hash_remove">nft_hash_remove</a>,</td></tr>
<tr><th id="618">618</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::lookup" title='nft_set_ops::lookup' data-ref="nft_set_ops::lookup">lookup</a>		= <a class="tu ref fn" href="#nft_hash_lookup" title='nft_hash_lookup' data-ref="nft_hash_lookup">nft_hash_lookup</a>,</td></tr>
<tr><th id="619">619</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::walk" title='nft_set_ops::walk' data-ref="nft_set_ops::walk">walk</a>		= <a class="tu ref fn" href="#nft_hash_walk" title='nft_hash_walk' data-ref="nft_hash_walk">nft_hash_walk</a>,</td></tr>
<tr><th id="620">620</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::features" title='nft_set_ops::features' data-ref="nft_set_ops::features">features</a>	= <a class="enum" href="../../include/uapi/linux/netfilter/nf_tables.h.html#NFT_SET_MAP" title='NFT_SET_MAP' data-ref="NFT_SET_MAP">NFT_SET_MAP</a> | <a class="enum" href="../../include/uapi/linux/netfilter/nf_tables.h.html#NFT_SET_OBJECT" title='NFT_SET_OBJECT' data-ref="NFT_SET_OBJECT">NFT_SET_OBJECT</a>,</td></tr>
<tr><th id="621">621</th><td>};</td></tr>
<tr><th id="622">622</th><td></td></tr>
<tr><th id="623">623</th><td><em>static</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops" title='nft_set_ops' data-ref="nft_set_ops">nft_set_ops</a> <dfn class="tu decl def" id="nft_hash_fast_ops" title='nft_hash_fast_ops' data-type='struct nft_set_ops' data-ref="nft_hash_fast_ops">nft_hash_fast_ops</dfn> <a class="macro" href="../../arch/x86/include/asm/cache.h.html#11" title="__attribute__((__section__(&quot;.data..read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a> = {</td></tr>
<tr><th id="624">624</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::type" title='nft_set_ops::type' data-ref="nft_set_ops::type">type</a>		= &amp;<a class="tu ref" href="#nft_hash_type" title='nft_hash_type' data-use='a' data-ref="nft_hash_type">nft_hash_type</a>,</td></tr>
<tr><th id="625">625</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::privsize" title='nft_set_ops::privsize' data-ref="nft_set_ops::privsize">privsize</a>       = <a class="tu ref fn" href="#nft_hash_privsize" title='nft_hash_privsize' data-ref="nft_hash_privsize">nft_hash_privsize</a>,</td></tr>
<tr><th id="626">626</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::elemsize" title='nft_set_ops::elemsize' data-ref="nft_set_ops::elemsize">elemsize</a>	= <a class="macro" href="../../include/linux/stddef.h.html#17" title="__builtin_offsetof(struct nft_hash_elem, ext)" data-ref="_M/offsetof">offsetof</a>(<b>struct</b> <a class="type" href="#nft_hash_elem" title='nft_hash_elem' data-ref="nft_hash_elem">nft_hash_elem</a>, ext),</td></tr>
<tr><th id="627">627</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::estimate" title='nft_set_ops::estimate' data-ref="nft_set_ops::estimate">estimate</a>	= <a class="tu ref fn" href="#nft_hash_estimate" title='nft_hash_estimate' data-ref="nft_hash_estimate">nft_hash_estimate</a>,</td></tr>
<tr><th id="628">628</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::init" title='nft_set_ops::init' data-ref="nft_set_ops::init">init</a>		= <a class="tu ref fn" href="#nft_hash_init" title='nft_hash_init' data-ref="nft_hash_init">nft_hash_init</a>,</td></tr>
<tr><th id="629">629</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::destroy" title='nft_set_ops::destroy' data-ref="nft_set_ops::destroy">destroy</a>	= <a class="tu ref fn" href="#nft_hash_destroy" title='nft_hash_destroy' data-ref="nft_hash_destroy">nft_hash_destroy</a>,</td></tr>
<tr><th id="630">630</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::insert" title='nft_set_ops::insert' data-ref="nft_set_ops::insert">insert</a>		= <a class="tu ref fn" href="#nft_hash_insert" title='nft_hash_insert' data-ref="nft_hash_insert">nft_hash_insert</a>,</td></tr>
<tr><th id="631">631</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::activate" title='nft_set_ops::activate' data-ref="nft_set_ops::activate">activate</a>	= <a class="tu ref fn" href="#nft_hash_activate" title='nft_hash_activate' data-ref="nft_hash_activate">nft_hash_activate</a>,</td></tr>
<tr><th id="632">632</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::deactivate" title='nft_set_ops::deactivate' data-ref="nft_set_ops::deactivate">deactivate</a>	= <a class="tu ref fn" href="#nft_hash_deactivate" title='nft_hash_deactivate' data-ref="nft_hash_deactivate">nft_hash_deactivate</a>,</td></tr>
<tr><th id="633">633</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::flush" title='nft_set_ops::flush' data-ref="nft_set_ops::flush">flush</a>		= <a class="tu ref fn" href="#nft_hash_flush" title='nft_hash_flush' data-ref="nft_hash_flush">nft_hash_flush</a>,</td></tr>
<tr><th id="634">634</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::remove" title='nft_set_ops::remove' data-ref="nft_set_ops::remove">remove</a>		= <a class="tu ref fn" href="#nft_hash_remove" title='nft_hash_remove' data-ref="nft_hash_remove">nft_hash_remove</a>,</td></tr>
<tr><th id="635">635</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::lookup" title='nft_set_ops::lookup' data-ref="nft_set_ops::lookup">lookup</a>		= <a class="tu ref fn" href="#nft_hash_lookup_fast" title='nft_hash_lookup_fast' data-ref="nft_hash_lookup_fast">nft_hash_lookup_fast</a>,</td></tr>
<tr><th id="636">636</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::walk" title='nft_set_ops::walk' data-ref="nft_set_ops::walk">walk</a>		= <a class="tu ref fn" href="#nft_hash_walk" title='nft_hash_walk' data-ref="nft_hash_walk">nft_hash_walk</a>,</td></tr>
<tr><th id="637">637</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops::features" title='nft_set_ops::features' data-ref="nft_set_ops::features">features</a>	= <a class="enum" href="../../include/uapi/linux/netfilter/nf_tables.h.html#NFT_SET_MAP" title='NFT_SET_MAP' data-ref="NFT_SET_MAP">NFT_SET_MAP</a> | <a class="enum" href="../../include/uapi/linux/netfilter/nf_tables.h.html#NFT_SET_OBJECT" title='NFT_SET_OBJECT' data-ref="NFT_SET_OBJECT">NFT_SET_OBJECT</a>,</td></tr>
<tr><th id="638">638</th><td>};</td></tr>
<tr><th id="639">639</th><td></td></tr>
<tr><th id="640">640</th><td><em>static</em> <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_ops" title='nft_set_ops' data-ref="nft_set_ops">nft_set_ops</a> *</td></tr>
<tr><th id="641">641</th><td><dfn class="tu decl def fn" id="nft_hash_select_ops" title='nft_hash_select_ops' data-type='const struct nft_set_ops * nft_hash_select_ops(const struct nft_ctx * ctx, const struct nft_set_desc * desc, u32 flags)' data-ref="nft_hash_select_ops">nft_hash_select_ops</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_ctx" title='nft_ctx' data-ref="nft_ctx">nft_ctx</a> *<dfn class="local col7 decl" id="167ctx" title='ctx' data-type='const struct nft_ctx *' data-ref="167ctx">ctx</dfn>, <em>const</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc" title='nft_set_desc' data-ref="nft_set_desc">nft_set_desc</a> *<dfn class="local col8 decl" id="168desc" title='desc' data-type='const struct nft_set_desc *' data-ref="168desc">desc</dfn>,</td></tr>
<tr><th id="642">642</th><td>		    <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col9 decl" id="169flags" title='flags' data-type='u32' data-ref="169flags">flags</dfn>)</td></tr>
<tr><th id="643">643</th><td>{</td></tr>
<tr><th id="644">644</th><td>	<b>if</b> (<a class="local col8 ref" href="#168desc" title='desc' data-ref="168desc">desc</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc::size" title='nft_set_desc::size' data-ref="nft_set_desc::size">size</a>) {</td></tr>
<tr><th id="645">645</th><td>		<b>switch</b> (<a class="local col8 ref" href="#168desc" title='desc' data-ref="168desc">desc</a>-&gt;<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_desc::klen" title='nft_set_desc::klen' data-ref="nft_set_desc::klen">klen</a>) {</td></tr>
<tr><th id="646">646</th><td>		<b>case</b> <var>4</var>:</td></tr>
<tr><th id="647">647</th><td>			<b>return</b> &amp;<a class="tu ref" href="#nft_hash_fast_ops" title='nft_hash_fast_ops' data-use='a' data-ref="nft_hash_fast_ops">nft_hash_fast_ops</a>;</td></tr>
<tr><th id="648">648</th><td>		<b>default</b>:</td></tr>
<tr><th id="649">649</th><td>			<b>return</b> &amp;<a class="tu ref" href="#nft_hash_ops" title='nft_hash_ops' data-use='a' data-ref="nft_hash_ops">nft_hash_ops</a>;</td></tr>
<tr><th id="650">650</th><td>		}</td></tr>
<tr><th id="651">651</th><td>	}</td></tr>
<tr><th id="652">652</th><td></td></tr>
<tr><th id="653">653</th><td>	<b>return</b> &amp;<a class="tu ref" href="#nft_rhash_ops" title='nft_rhash_ops' data-use='a' data-ref="nft_rhash_ops">nft_rhash_ops</a>;</td></tr>
<tr><th id="654">654</th><td>}</td></tr>
<tr><th id="655">655</th><td></td></tr>
<tr><th id="656">656</th><td><em>static</em> <b>struct</b> <a class="type" href="../../include/net/netfilter/nf_tables.h.html#nft_set_type" title='nft_set_type' data-ref="nft_set_type">nft_set_type</a> <dfn class="tu decl def" id="nft_hash_type" title='nft_hash_type' data-type='struct nft_set_type' data-ref="nft_hash_type">nft_hash_type</dfn> <a class="macro" href="../../arch/x86/include/asm/cache.h.html#11" title="__attribute__((__section__(&quot;.data..read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a> = {</td></tr>
<tr><th id="657">657</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_type::select_ops" title='nft_set_type::select_ops' data-ref="nft_set_type::select_ops">select_ops</a>	= <a class="tu ref fn" href="#nft_hash_select_ops" title='nft_hash_select_ops' data-ref="nft_hash_select_ops">nft_hash_select_ops</a>,</td></tr>
<tr><th id="658">658</th><td>	.<a class="ref field" href="../../include/net/netfilter/nf_tables.h.html#nft_set_type::owner" title='nft_set_type::owner' data-ref="nft_set_type::owner">owner</a>		= <a class="macro" href="../../include/linux/export.h.html#37" title="((struct module *)0)" data-ref="_M/THIS_MODULE">THIS_MODULE</a>,</td></tr>
<tr><th id="659">659</th><td>};</td></tr>
<tr><th id="660">660</th><td></td></tr>
<tr><th id="661">661</th><td><em>static</em> <em>int</em> <a class="macro" href="../../include/linux/init.h.html#50" title="__attribute__ ((__section__(&quot;.init.text&quot;)))" data-ref="_M/__init">__init</a> <dfn class="tu decl def fn" id="nft_hash_module_init" title='nft_hash_module_init' data-type='int nft_hash_module_init()' data-ref="nft_hash_module_init">nft_hash_module_init</dfn>(<em>void</em>)</td></tr>
<tr><th id="662">662</th><td>{</td></tr>
<tr><th id="663">663</th><td>	<b>return</b> <a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_register_set" title='nft_register_set' data-ref="nft_register_set">nft_register_set</a>(&amp;<a class="tu ref" href="#nft_hash_type" title='nft_hash_type' data-use='a' data-ref="nft_hash_type">nft_hash_type</a>);</td></tr>
<tr><th id="664">664</th><td>}</td></tr>
<tr><th id="665">665</th><td></td></tr>
<tr><th id="666">666</th><td><em>static</em> <em>void</em> <a class="macro" href="../../include/linux/init.h.html#85" title="__attribute__ ((__section__(&quot;.exit.text&quot;))) __attribute__((__used__)) __attribute__((no_instrument_function))" data-ref="_M/__exit">__exit</a> <dfn class="tu decl def fn" id="nft_hash_module_exit" title='nft_hash_module_exit' data-type='void nft_hash_module_exit()' data-ref="nft_hash_module_exit">nft_hash_module_exit</dfn>(<em>void</em>)</td></tr>
<tr><th id="667">667</th><td>{</td></tr>
<tr><th id="668">668</th><td>	<a class="ref fn" href="../../include/net/netfilter/nf_tables.h.html#nft_unregister_set" title='nft_unregister_set' data-ref="nft_unregister_set">nft_unregister_set</a>(&amp;<a class="tu ref" href="#nft_hash_type" title='nft_hash_type' data-use='a' data-ref="nft_hash_type">nft_hash_type</a>);</td></tr>
<tr><th id="669">669</th><td>}</td></tr>
<tr><th id="670">670</th><td></td></tr>
<tr><th id="671">671</th><td><a class="macro" href="../../include/linux/module.h.html#85" title="static initcall_t __initcall_nft_hash_module_init6 __attribute__((__used__)) __attribute__((__section__(&quot;.initcall&quot; &quot;6&quot; &quot;.init&quot;))) = nft_hash_module_init;;" data-ref="_M/module_init">module_init</a>(<a class="tu ref fn" href="#nft_hash_module_init" title='nft_hash_module_init' data-ref="nft_hash_module_init">nft_hash_module_init</a>);</td></tr>
<tr><th id="672">672</th><td><a class="macro" href="../../include/linux/module.h.html#97" title="static exitcall_t __exitcall_nft_hash_module_exit __attribute__((__used__)) __attribute__ ((__section__(&quot;.exitcall.exit&quot;))) = nft_hash_module_exit;" data-ref="_M/module_exit">module_exit</a>(<a class="tu ref fn" href="#nft_hash_module_exit" title='nft_hash_module_exit' data-ref="nft_hash_module_exit">nft_hash_module_exit</a>);</td></tr>
<tr><th id="673">673</th><td></td></tr>
<tr><th id="674">674</th><td><a class="macro" href="../../include/linux/module.h.html#198" title="struct __UNIQUE_ID_license82 {}" data-ref="_M/MODULE_LICENSE">MODULE_LICENSE</a>(<q>"GPL"</q>);</td></tr>
<tr><th id="675">675</th><td><a class="macro" href="../../include/linux/module.h.html#204" title="struct __UNIQUE_ID_author84 {}" data-ref="_M/MODULE_AUTHOR">MODULE_AUTHOR</a>(<q>"Patrick McHardy &lt;kaber@trash.net&gt;"</q>);</td></tr>
<tr><th id="676">676</th><td><a class="macro" href="../../include/net/netfilter/nf_tables.h.html#1143" title="struct __UNIQUE_ID_alias86 {}" data-ref="_M/MODULE_ALIAS_NFT_SET">MODULE_ALIAS_NFT_SET</a>();</td></tr>
<tr><th id="677">677</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2018-Aug-02</em> from project linux-4.14.y revision <em>linux-4.14.y</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
