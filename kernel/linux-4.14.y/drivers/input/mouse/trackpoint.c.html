<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>trackpoint.c source code [linux-4.14.y/drivers/input/mouse/trackpoint.c] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="trackpoint_attr_data "/>
<link rel="stylesheet" href="../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'linux-4.14.y/drivers/input/mouse/trackpoint.c'; var root_path = '../../../..'; var data_path = '../../../../../data';</script>
<script src='../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>linux-4.14.y</a>/<a href='../..'>drivers</a>/<a href='..'>input</a>/<a href='./'>mouse</a>/<a href='trackpoint.c.html'>trackpoint.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> * Stephen Evanchik &lt;evanchsa@gmail.com&gt;</i></td></tr>
<tr><th id="3">3</th><td><i> *</i></td></tr>
<tr><th id="4">4</th><td><i> * This program is free software; you can redistribute it and/or modify it</i></td></tr>
<tr><th id="5">5</th><td><i> * under the terms of the GNU General Public License version 2 as published by</i></td></tr>
<tr><th id="6">6</th><td><i> * the Free Software Foundation.</i></td></tr>
<tr><th id="7">7</th><td><i> *</i></td></tr>
<tr><th id="8">8</th><td><i> * Trademarks are the property of their respective owners.</i></td></tr>
<tr><th id="9">9</th><td><i> */</i></td></tr>
<tr><th id="10">10</th><td></td></tr>
<tr><th id="11">11</th><td><u>#include <a href="../../../include/linux/slab.h.html">&lt;linux/slab.h&gt;</a></u></td></tr>
<tr><th id="12">12</th><td><u>#include <a href="../../../include/linux/delay.h.html">&lt;linux/delay.h&gt;</a></u></td></tr>
<tr><th id="13">13</th><td><u>#include <a href="../../../include/linux/serio.h.html">&lt;linux/serio.h&gt;</a></u></td></tr>
<tr><th id="14">14</th><td><u>#include <a href="../../../include/linux/module.h.html">&lt;linux/module.h&gt;</a></u></td></tr>
<tr><th id="15">15</th><td><u>#include <a href="../../../include/linux/input.h.html">&lt;linux/input.h&gt;</a></u></td></tr>
<tr><th id="16">16</th><td><u>#include <a href="../../../include/linux/libps2.h.html">&lt;linux/libps2.h&gt;</a></u></td></tr>
<tr><th id="17">17</th><td><u>#include <a href="../../../include/linux/proc_fs.h.html">&lt;linux/proc_fs.h&gt;</a></u></td></tr>
<tr><th id="18">18</th><td><u>#include <a href="../../../include/linux/uaccess.h.html">&lt;linux/uaccess.h&gt;</a></u></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="psmouse.h.html">"psmouse.h"</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="trackpoint.h.html">"trackpoint.h"</a></u></td></tr>
<tr><th id="21">21</th><td></td></tr>
<tr><th id="22">22</th><td><em>static</em> <em>const</em> <em>char</em> * <em>const</em> <dfn class="tu decl def" id="trackpoint_variants" title='trackpoint_variants' data-type='const char *const [5]' data-ref="trackpoint_variants">trackpoint_variants</dfn>[] = {</td></tr>
<tr><th id="23">23</th><td>	[<a class="macro" href="trackpoint.h.html#30" title="0x01" data-ref="_M/TP_VARIANT_IBM">TP_VARIANT_IBM</a>]	= <q>"IBM"</q>,</td></tr>
<tr><th id="24">24</th><td>	[<a class="macro" href="trackpoint.h.html#31" title="0x02" data-ref="_M/TP_VARIANT_ALPS">TP_VARIANT_ALPS</a>]	= <q>"ALPS"</q>,</td></tr>
<tr><th id="25">25</th><td>	[<a class="macro" href="trackpoint.h.html#32" title="0x03" data-ref="_M/TP_VARIANT_ELAN">TP_VARIANT_ELAN</a>]	= <q>"Elan"</q>,</td></tr>
<tr><th id="26">26</th><td>	[<a class="macro" href="trackpoint.h.html#33" title="0x04" data-ref="_M/TP_VARIANT_NXP">TP_VARIANT_NXP</a>]	= <q>"NXP"</q>,</td></tr>
<tr><th id="27">27</th><td>};</td></tr>
<tr><th id="28">28</th><td></td></tr>
<tr><th id="29">29</th><td><i  data-doc="trackpoint_power_on_reset">/*</i></td></tr>
<tr><th id="30">30</th><td><i  data-doc="trackpoint_power_on_reset"> * Power-on Reset: Resets all trackpoint parameters, including RAM values,</i></td></tr>
<tr><th id="31">31</th><td><i  data-doc="trackpoint_power_on_reset"> * to defaults.</i></td></tr>
<tr><th id="32">32</th><td><i  data-doc="trackpoint_power_on_reset"> * Returns zero on success, non-zero on failure.</i></td></tr>
<tr><th id="33">33</th><td><i  data-doc="trackpoint_power_on_reset"> */</i></td></tr>
<tr><th id="34">34</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="trackpoint_power_on_reset" title='trackpoint_power_on_reset' data-type='int trackpoint_power_on_reset(struct ps2dev * ps2dev)' data-ref="trackpoint_power_on_reset">trackpoint_power_on_reset</dfn>(<b>struct</b> <a class="type" href="../../../include/linux/libps2.h.html#ps2dev" title='ps2dev' data-ref="ps2dev">ps2dev</a> *<dfn class="local col1 decl" id="1ps2dev" title='ps2dev' data-type='struct ps2dev *' data-ref="1ps2dev">ps2dev</dfn>)</td></tr>
<tr><th id="35">35</th><td>{</td></tr>
<tr><th id="36">36</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col2 decl" id="2results" title='results' data-type='u8 [2]' data-ref="2results">results</dfn>[<var>2</var>];</td></tr>
<tr><th id="37">37</th><td>	<em>int</em> <dfn class="local col3 decl" id="3tries" title='tries' data-type='int' data-ref="3tries">tries</dfn> = <var>0</var>;</td></tr>
<tr><th id="38">38</th><td></td></tr>
<tr><th id="39">39</th><td>	<i>/* Issue POR command, and repeat up to once if 0xFC00 received */</i></td></tr>
<tr><th id="40">40</th><td>	<b>do</b> {</td></tr>
<tr><th id="41">41</th><td>		<b>if</b> (<a class="ref fn" href="../../../include/linux/libps2.h.html#ps2_command" title='ps2_command' data-ref="ps2_command">ps2_command</a>(<a class="local col1 ref" href="#1ps2dev" title='ps2dev' data-ref="1ps2dev">ps2dev</a>, <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="macro" href="trackpoint.h.html#143" title="((0&lt;&lt;12) | (0&lt;&lt;8) | (0xE2))" data-ref="_M/MAKE_PS2_CMD">MAKE_PS2_CMD</a>(<var>0</var>, <var>0</var>, <a class="macro" href="trackpoint.h.html#21" title="0xE2" data-ref="_M/TP_COMMAND">TP_COMMAND</a>)) ||</td></tr>
<tr><th id="42">42</th><td>		    <a class="ref fn" href="../../../include/linux/libps2.h.html#ps2_command" title='ps2_command' data-ref="ps2_command">ps2_command</a>(<a class="local col1 ref" href="#1ps2dev" title='ps2dev' data-ref="1ps2dev">ps2dev</a>, <a class="local col2 ref" href="#2results" title='results' data-ref="2results">results</a>, <a class="macro" href="trackpoint.h.html#143" title="((0&lt;&lt;12) | (2&lt;&lt;8) | (0x7F))" data-ref="_M/MAKE_PS2_CMD">MAKE_PS2_CMD</a>(<var>0</var>, <var>2</var>, <a class="macro" href="trackpoint.h.html#42" title="0x7F" data-ref="_M/TP_POR">TP_POR</a>)))</td></tr>
<tr><th id="43">43</th><td>			<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="44">44</th><td>	} <b>while</b> (<a class="local col2 ref" href="#2results" title='results' data-ref="2results">results</a>[<var>0</var>] == <var>0xFC</var> &amp;&amp; <a class="local col2 ref" href="#2results" title='results' data-ref="2results">results</a>[<var>1</var>] == <var>0x00</var> &amp;&amp; ++<a class="local col3 ref" href="#3tries" title='tries' data-ref="3tries">tries</a> &lt; <var>2</var>);</td></tr>
<tr><th id="45">45</th><td></td></tr>
<tr><th id="46">46</th><td>	<i>/* Check for success response -- 0xAA00 */</i></td></tr>
<tr><th id="47">47</th><td>	<b>if</b> (<a class="local col2 ref" href="#2results" title='results' data-ref="2results">results</a>[<var>0</var>] != <var>0xAA</var> || <a class="local col2 ref" href="#2results" title='results' data-ref="2results">results</a>[<var>1</var>] != <var>0x00</var>)</td></tr>
<tr><th id="48">48</th><td>		<b>return</b> -<a class="macro" href="../../../include/uapi/asm-generic/errno-base.h.html#23" title="19" data-ref="_M/ENODEV">ENODEV</a>;</td></tr>
<tr><th id="49">49</th><td></td></tr>
<tr><th id="50">50</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="51">51</th><td>}</td></tr>
<tr><th id="52">52</th><td></td></tr>
<tr><th id="53">53</th><td><i  data-doc="trackpoint_read">/*</i></td></tr>
<tr><th id="54">54</th><td><i  data-doc="trackpoint_read"> * Device IO: read, write and toggle bit</i></td></tr>
<tr><th id="55">55</th><td><i  data-doc="trackpoint_read"> */</i></td></tr>
<tr><th id="56">56</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="trackpoint_read" title='trackpoint_read' data-type='int trackpoint_read(struct ps2dev * ps2dev, u8 loc, u8 * results)' data-ref="trackpoint_read">trackpoint_read</dfn>(<b>struct</b> <a class="type" href="../../../include/linux/libps2.h.html#ps2dev" title='ps2dev' data-ref="ps2dev">ps2dev</a> *<dfn class="local col4 decl" id="4ps2dev" title='ps2dev' data-type='struct ps2dev *' data-ref="4ps2dev">ps2dev</dfn>, <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col5 decl" id="5loc" title='loc' data-type='u8' data-ref="5loc">loc</dfn>, <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> *<dfn class="local col6 decl" id="6results" title='results' data-type='u8 *' data-ref="6results">results</dfn>)</td></tr>
<tr><th id="57">57</th><td>{</td></tr>
<tr><th id="58">58</th><td>	<b>if</b> (<a class="ref fn" href="../../../include/linux/libps2.h.html#ps2_command" title='ps2_command' data-ref="ps2_command">ps2_command</a>(<a class="local col4 ref" href="#4ps2dev" title='ps2dev' data-ref="4ps2dev">ps2dev</a>, <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="macro" href="trackpoint.h.html#143" title="((0&lt;&lt;12) | (0&lt;&lt;8) | (0xE2))" data-ref="_M/MAKE_PS2_CMD">MAKE_PS2_CMD</a>(<var>0</var>, <var>0</var>, <a class="macro" href="trackpoint.h.html#21" title="0xE2" data-ref="_M/TP_COMMAND">TP_COMMAND</a>)) ||</td></tr>
<tr><th id="59">59</th><td>	    <a class="ref fn" href="../../../include/linux/libps2.h.html#ps2_command" title='ps2_command' data-ref="ps2_command">ps2_command</a>(<a class="local col4 ref" href="#4ps2dev" title='ps2dev' data-ref="4ps2dev">ps2dev</a>, <a class="local col6 ref" href="#6results" title='results' data-ref="6results">results</a>, <a class="macro" href="trackpoint.h.html#143" title="((0&lt;&lt;12) | (1&lt;&lt;8) | (loc))" data-ref="_M/MAKE_PS2_CMD">MAKE_PS2_CMD</a>(<var>0</var>, <var>1</var>, <a class="local col5 ref" href="#5loc" title='loc' data-ref="5loc">loc</a>))) {</td></tr>
<tr><th id="60">60</th><td>		<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="61">61</th><td>	}</td></tr>
<tr><th id="62">62</th><td></td></tr>
<tr><th id="63">63</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="64">64</th><td>}</td></tr>
<tr><th id="65">65</th><td></td></tr>
<tr><th id="66">66</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="trackpoint_write" title='trackpoint_write' data-type='int trackpoint_write(struct ps2dev * ps2dev, u8 loc, u8 val)' data-ref="trackpoint_write">trackpoint_write</dfn>(<b>struct</b> <a class="type" href="../../../include/linux/libps2.h.html#ps2dev" title='ps2dev' data-ref="ps2dev">ps2dev</a> *<dfn class="local col7 decl" id="7ps2dev" title='ps2dev' data-type='struct ps2dev *' data-ref="7ps2dev">ps2dev</dfn>, <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col8 decl" id="8loc" title='loc' data-type='u8' data-ref="8loc">loc</dfn>, <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col9 decl" id="9val" title='val' data-type='u8' data-ref="9val">val</dfn>)</td></tr>
<tr><th id="67">67</th><td>{</td></tr>
<tr><th id="68">68</th><td>	<b>if</b> (<a class="ref fn" href="../../../include/linux/libps2.h.html#ps2_command" title='ps2_command' data-ref="ps2_command">ps2_command</a>(<a class="local col7 ref" href="#7ps2dev" title='ps2dev' data-ref="7ps2dev">ps2dev</a>, <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="macro" href="trackpoint.h.html#143" title="((0&lt;&lt;12) | (0&lt;&lt;8) | (0xE2))" data-ref="_M/MAKE_PS2_CMD">MAKE_PS2_CMD</a>(<var>0</var>, <var>0</var>, <a class="macro" href="trackpoint.h.html#21" title="0xE2" data-ref="_M/TP_COMMAND">TP_COMMAND</a>)) ||</td></tr>
<tr><th id="69">69</th><td>	    <a class="ref fn" href="../../../include/linux/libps2.h.html#ps2_command" title='ps2_command' data-ref="ps2_command">ps2_command</a>(<a class="local col7 ref" href="#7ps2dev" title='ps2dev' data-ref="7ps2dev">ps2dev</a>, <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="macro" href="trackpoint.h.html#143" title="((0&lt;&lt;12) | (0&lt;&lt;8) | (0x81))" data-ref="_M/MAKE_PS2_CMD">MAKE_PS2_CMD</a>(<var>0</var>, <var>0</var>, <a class="macro" href="trackpoint.h.html#58" title="0x81" data-ref="_M/TP_WRITE_MEM">TP_WRITE_MEM</a>)) ||</td></tr>
<tr><th id="70">70</th><td>	    <a class="ref fn" href="../../../include/linux/libps2.h.html#ps2_command" title='ps2_command' data-ref="ps2_command">ps2_command</a>(<a class="local col7 ref" href="#7ps2dev" title='ps2dev' data-ref="7ps2dev">ps2dev</a>, <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="macro" href="trackpoint.h.html#143" title="((0&lt;&lt;12) | (0&lt;&lt;8) | (loc))" data-ref="_M/MAKE_PS2_CMD">MAKE_PS2_CMD</a>(<var>0</var>, <var>0</var>, <a class="local col8 ref" href="#8loc" title='loc' data-ref="8loc">loc</a>)) ||</td></tr>
<tr><th id="71">71</th><td>	    <a class="ref fn" href="../../../include/linux/libps2.h.html#ps2_command" title='ps2_command' data-ref="ps2_command">ps2_command</a>(<a class="local col7 ref" href="#7ps2dev" title='ps2dev' data-ref="7ps2dev">ps2dev</a>, <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="macro" href="trackpoint.h.html#143" title="((0&lt;&lt;12) | (0&lt;&lt;8) | (val))" data-ref="_M/MAKE_PS2_CMD">MAKE_PS2_CMD</a>(<var>0</var>, <var>0</var>, <a class="local col9 ref" href="#9val" title='val' data-ref="9val">val</a>))) {</td></tr>
<tr><th id="72">72</th><td>		<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="73">73</th><td>	}</td></tr>
<tr><th id="74">74</th><td></td></tr>
<tr><th id="75">75</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="76">76</th><td>}</td></tr>
<tr><th id="77">77</th><td></td></tr>
<tr><th id="78">78</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="trackpoint_toggle_bit" title='trackpoint_toggle_bit' data-type='int trackpoint_toggle_bit(struct ps2dev * ps2dev, u8 loc, u8 mask)' data-ref="trackpoint_toggle_bit">trackpoint_toggle_bit</dfn>(<b>struct</b> <a class="type" href="../../../include/linux/libps2.h.html#ps2dev" title='ps2dev' data-ref="ps2dev">ps2dev</a> *<dfn class="local col0 decl" id="10ps2dev" title='ps2dev' data-type='struct ps2dev *' data-ref="10ps2dev">ps2dev</dfn>, <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col1 decl" id="11loc" title='loc' data-type='u8' data-ref="11loc">loc</dfn>, <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col2 decl" id="12mask" title='mask' data-type='u8' data-ref="12mask">mask</dfn>)</td></tr>
<tr><th id="79">79</th><td>{</td></tr>
<tr><th id="80">80</th><td>	<i>/* Bad things will happen if the loc param isn't in this range */</i></td></tr>
<tr><th id="81">81</th><td>	<b>if</b> (<a class="local col1 ref" href="#11loc" title='loc' data-ref="11loc">loc</a> &lt; <var>0x20</var> || <a class="local col1 ref" href="#11loc" title='loc' data-ref="11loc">loc</a> &gt;= <var>0x2F</var>)</td></tr>
<tr><th id="82">82</th><td>		<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="83">83</th><td></td></tr>
<tr><th id="84">84</th><td>	<b>if</b> (<a class="ref fn" href="../../../include/linux/libps2.h.html#ps2_command" title='ps2_command' data-ref="ps2_command">ps2_command</a>(<a class="local col0 ref" href="#10ps2dev" title='ps2dev' data-ref="10ps2dev">ps2dev</a>, <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="macro" href="trackpoint.h.html#143" title="((0&lt;&lt;12) | (0&lt;&lt;8) | (0xE2))" data-ref="_M/MAKE_PS2_CMD">MAKE_PS2_CMD</a>(<var>0</var>, <var>0</var>, <a class="macro" href="trackpoint.h.html#21" title="0xE2" data-ref="_M/TP_COMMAND">TP_COMMAND</a>)) ||</td></tr>
<tr><th id="85">85</th><td>	    <a class="ref fn" href="../../../include/linux/libps2.h.html#ps2_command" title='ps2_command' data-ref="ps2_command">ps2_command</a>(<a class="local col0 ref" href="#10ps2dev" title='ps2dev' data-ref="10ps2dev">ps2dev</a>, <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="macro" href="trackpoint.h.html#143" title="((0&lt;&lt;12) | (0&lt;&lt;8) | (0x47))" data-ref="_M/MAKE_PS2_CMD">MAKE_PS2_CMD</a>(<var>0</var>, <var>0</var>, <a class="macro" href="trackpoint.h.html#87" title="0x47" data-ref="_M/TP_TOGGLE">TP_TOGGLE</a>)) ||</td></tr>
<tr><th id="86">86</th><td>	    <a class="ref fn" href="../../../include/linux/libps2.h.html#ps2_command" title='ps2_command' data-ref="ps2_command">ps2_command</a>(<a class="local col0 ref" href="#10ps2dev" title='ps2dev' data-ref="10ps2dev">ps2dev</a>, <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="macro" href="trackpoint.h.html#143" title="((0&lt;&lt;12) | (0&lt;&lt;8) | (loc))" data-ref="_M/MAKE_PS2_CMD">MAKE_PS2_CMD</a>(<var>0</var>, <var>0</var>, <a class="local col1 ref" href="#11loc" title='loc' data-ref="11loc">loc</a>)) ||</td></tr>
<tr><th id="87">87</th><td>	    <a class="ref fn" href="../../../include/linux/libps2.h.html#ps2_command" title='ps2_command' data-ref="ps2_command">ps2_command</a>(<a class="local col0 ref" href="#10ps2dev" title='ps2dev' data-ref="10ps2dev">ps2dev</a>, <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="macro" href="trackpoint.h.html#143" title="((0&lt;&lt;12) | (0&lt;&lt;8) | (mask))" data-ref="_M/MAKE_PS2_CMD">MAKE_PS2_CMD</a>(<var>0</var>, <var>0</var>, <a class="local col2 ref" href="#12mask" title='mask' data-ref="12mask">mask</a>))) {</td></tr>
<tr><th id="88">88</th><td>		<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="89">89</th><td>	}</td></tr>
<tr><th id="90">90</th><td></td></tr>
<tr><th id="91">91</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="92">92</th><td>}</td></tr>
<tr><th id="93">93</th><td></td></tr>
<tr><th id="94">94</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="trackpoint_update_bit" title='trackpoint_update_bit' data-type='int trackpoint_update_bit(struct ps2dev * ps2dev, u8 loc, u8 mask, u8 value)' data-ref="trackpoint_update_bit">trackpoint_update_bit</dfn>(<b>struct</b> <a class="type" href="../../../include/linux/libps2.h.html#ps2dev" title='ps2dev' data-ref="ps2dev">ps2dev</a> *<dfn class="local col3 decl" id="13ps2dev" title='ps2dev' data-type='struct ps2dev *' data-ref="13ps2dev">ps2dev</dfn>,</td></tr>
<tr><th id="95">95</th><td>				 <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col4 decl" id="14loc" title='loc' data-type='u8' data-ref="14loc">loc</dfn>, <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col5 decl" id="15mask" title='mask' data-type='u8' data-ref="15mask">mask</dfn>, <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col6 decl" id="16value" title='value' data-type='u8' data-ref="16value">value</dfn>)</td></tr>
<tr><th id="96">96</th><td>{</td></tr>
<tr><th id="97">97</th><td>	<em>int</em> <dfn class="local col7 decl" id="17retval" title='retval' data-type='int' data-ref="17retval">retval</dfn> = <var>0</var>;</td></tr>
<tr><th id="98">98</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col8 decl" id="18data" title='data' data-type='u8' data-ref="18data">data</dfn>;</td></tr>
<tr><th id="99">99</th><td></td></tr>
<tr><th id="100">100</th><td>	<a class="tu ref fn" href="#trackpoint_read" title='trackpoint_read' data-use='c' data-ref="trackpoint_read">trackpoint_read</a>(<a class="local col3 ref" href="#13ps2dev" title='ps2dev' data-ref="13ps2dev">ps2dev</a>, <a class="local col4 ref" href="#14loc" title='loc' data-ref="14loc">loc</a>, &amp;<a class="local col8 ref" href="#18data" title='data' data-ref="18data">data</a>);</td></tr>
<tr><th id="101">101</th><td>	<b>if</b> (((<a class="local col8 ref" href="#18data" title='data' data-ref="18data">data</a> &amp; <a class="local col5 ref" href="#15mask" title='mask' data-ref="15mask">mask</a>) == <a class="local col5 ref" href="#15mask" title='mask' data-ref="15mask">mask</a>) != !!<a class="local col6 ref" href="#16value" title='value' data-ref="16value">value</a>)</td></tr>
<tr><th id="102">102</th><td>		<a class="local col7 ref" href="#17retval" title='retval' data-ref="17retval">retval</a> = <a class="tu ref fn" href="#trackpoint_toggle_bit" title='trackpoint_toggle_bit' data-use='c' data-ref="trackpoint_toggle_bit">trackpoint_toggle_bit</a>(<a class="local col3 ref" href="#13ps2dev" title='ps2dev' data-ref="13ps2dev">ps2dev</a>, <a class="local col4 ref" href="#14loc" title='loc' data-ref="14loc">loc</a>, <a class="local col5 ref" href="#15mask" title='mask' data-ref="15mask">mask</a>);</td></tr>
<tr><th id="103">103</th><td></td></tr>
<tr><th id="104">104</th><td>	<b>return</b> <a class="local col7 ref" href="#17retval" title='retval' data-ref="17retval">retval</a>;</td></tr>
<tr><th id="105">105</th><td>}</td></tr>
<tr><th id="106">106</th><td></td></tr>
<tr><th id="107">107</th><td><i>/*</i></td></tr>
<tr><th id="108">108</th><td><i> * Trackpoint-specific attributes</i></td></tr>
<tr><th id="109">109</th><td><i> */</i></td></tr>
<tr><th id="110">110</th><td><b>struct</b> <dfn class="type def" id="trackpoint_attr_data" title='trackpoint_attr_data' data-ref="trackpoint_attr_data">trackpoint_attr_data</dfn> {</td></tr>
<tr><th id="111">111</th><td>	<a class="typedef" href="../../../include/linux/types.h.html#size_t" title='size_t' data-type='__kernel_size_t' data-ref="size_t">size_t</a> <dfn class="tu decl field" id="trackpoint_attr_data::field_offset" title='trackpoint_attr_data::field_offset' data-type='size_t' data-ref="trackpoint_attr_data::field_offset">field_offset</dfn>;</td></tr>
<tr><th id="112">112</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="tu decl field" id="trackpoint_attr_data::command" title='trackpoint_attr_data::command' data-type='u8' data-ref="trackpoint_attr_data::command">command</dfn>;</td></tr>
<tr><th id="113">113</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="tu decl field" id="trackpoint_attr_data::mask" title='trackpoint_attr_data::mask' data-type='u8' data-ref="trackpoint_attr_data::mask">mask</dfn>;</td></tr>
<tr><th id="114">114</th><td>	<a class="typedef" href="../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="tu decl field" id="trackpoint_attr_data::inverted" title='trackpoint_attr_data::inverted' data-type='bool' data-ref="trackpoint_attr_data::inverted">inverted</dfn>;</td></tr>
<tr><th id="115">115</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="tu decl field" id="trackpoint_attr_data::power_on_default" title='trackpoint_attr_data::power_on_default' data-type='u8' data-ref="trackpoint_attr_data::power_on_default">power_on_default</dfn>;</td></tr>
<tr><th id="116">116</th><td>};</td></tr>
<tr><th id="117">117</th><td></td></tr>
<tr><th id="118">118</th><td><em>static</em> <a class="typedef" href="../../../include/linux/types.h.html#ssize_t" title='ssize_t' data-type='__kernel_ssize_t' data-ref="ssize_t">ssize_t</a> <dfn class="tu decl def fn" id="trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-type='ssize_t trackpoint_show_int_attr(struct psmouse * psmouse, void * data, char * buf)' data-ref="trackpoint_show_int_attr">trackpoint_show_int_attr</dfn>(<b>struct</b> <a class="type" href="psmouse.h.html#psmouse" title='psmouse' data-ref="psmouse">psmouse</a> *<dfn class="local col9 decl" id="19psmouse" title='psmouse' data-type='struct psmouse *' data-ref="19psmouse">psmouse</dfn>,</td></tr>
<tr><th id="119">119</th><td>					<em>void</em> *<dfn class="local col0 decl" id="20data" title='data' data-type='void *' data-ref="20data">data</dfn>, <em>char</em> *<dfn class="local col1 decl" id="21buf" title='buf' data-type='char *' data-ref="21buf">buf</dfn>)</td></tr>
<tr><th id="120">120</th><td>{</td></tr>
<tr><th id="121">121</th><td>	<b>struct</b> <a class="type" href="trackpoint.h.html#trackpoint_data" title='trackpoint_data' data-ref="trackpoint_data">trackpoint_data</a> *<dfn class="local col2 decl" id="22tp" title='tp' data-type='struct trackpoint_data *' data-ref="22tp">tp</dfn> = <a class="local col9 ref" href="#19psmouse" title='psmouse' data-ref="19psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::private" title='psmouse::private' data-ref="psmouse::private">private</a>;</td></tr>
<tr><th id="122">122</th><td>	<b>struct</b> <a class="type" href="#trackpoint_attr_data" title='trackpoint_attr_data' data-ref="trackpoint_attr_data">trackpoint_attr_data</a> *<dfn class="local col3 decl" id="23attr" title='attr' data-type='struct trackpoint_attr_data *' data-ref="23attr">attr</dfn> = <a class="local col0 ref" href="#20data" title='data' data-ref="20data">data</a>;</td></tr>
<tr><th id="123">123</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col4 decl" id="24value" title='value' data-type='u8' data-ref="24value">value</dfn> = *(<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> *)((<em>void</em> *)<a class="local col2 ref" href="#22tp" title='tp' data-ref="22tp">tp</a> + <a class="local col3 ref" href="#23attr" title='attr' data-ref="23attr">attr</a>-&gt;<a class="tu ref field" href="#trackpoint_attr_data::field_offset" title='trackpoint_attr_data::field_offset' data-use='r' data-ref="trackpoint_attr_data::field_offset">field_offset</a>);</td></tr>
<tr><th id="124">124</th><td></td></tr>
<tr><th id="125">125</th><td>	<b>if</b> (<a class="local col3 ref" href="#23attr" title='attr' data-ref="23attr">attr</a>-&gt;<a class="tu ref field" href="#trackpoint_attr_data::inverted" title='trackpoint_attr_data::inverted' data-use='r' data-ref="trackpoint_attr_data::inverted">inverted</a>)</td></tr>
<tr><th id="126">126</th><td>		<a class="local col4 ref" href="#24value" title='value' data-ref="24value">value</a> = !<a class="local col4 ref" href="#24value" title='value' data-ref="24value">value</a>;</td></tr>
<tr><th id="127">127</th><td></td></tr>
<tr><th id="128">128</th><td>	<b>return</b> <a class="ref fn" href="../../../include/linux/kernel.h.html#sprintf" title='sprintf' data-ref="sprintf">sprintf</a>(<a class="local col1 ref" href="#21buf" title='buf' data-ref="21buf">buf</a>, <q>"%u\n"</q>, <a class="local col4 ref" href="#24value" title='value' data-ref="24value">value</a>);</td></tr>
<tr><th id="129">129</th><td>}</td></tr>
<tr><th id="130">130</th><td></td></tr>
<tr><th id="131">131</th><td><em>static</em> <a class="typedef" href="../../../include/linux/types.h.html#ssize_t" title='ssize_t' data-type='__kernel_ssize_t' data-ref="ssize_t">ssize_t</a> <dfn class="tu decl def fn" id="trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-type='ssize_t trackpoint_set_int_attr(struct psmouse * psmouse, void * data, const char * buf, size_t count)' data-ref="trackpoint_set_int_attr">trackpoint_set_int_attr</dfn>(<b>struct</b> <a class="type" href="psmouse.h.html#psmouse" title='psmouse' data-ref="psmouse">psmouse</a> *<dfn class="local col5 decl" id="25psmouse" title='psmouse' data-type='struct psmouse *' data-ref="25psmouse">psmouse</dfn>, <em>void</em> *<dfn class="local col6 decl" id="26data" title='data' data-type='void *' data-ref="26data">data</dfn>,</td></tr>
<tr><th id="132">132</th><td>					<em>const</em> <em>char</em> *<dfn class="local col7 decl" id="27buf" title='buf' data-type='const char *' data-ref="27buf">buf</dfn>, <a class="typedef" href="../../../include/linux/types.h.html#size_t" title='size_t' data-type='__kernel_size_t' data-ref="size_t">size_t</a> <dfn class="local col8 decl" id="28count" title='count' data-type='size_t' data-ref="28count">count</dfn>)</td></tr>
<tr><th id="133">133</th><td>{</td></tr>
<tr><th id="134">134</th><td>	<b>struct</b> <a class="type" href="trackpoint.h.html#trackpoint_data" title='trackpoint_data' data-ref="trackpoint_data">trackpoint_data</a> *<dfn class="local col9 decl" id="29tp" title='tp' data-type='struct trackpoint_data *' data-ref="29tp">tp</dfn> = <a class="local col5 ref" href="#25psmouse" title='psmouse' data-ref="25psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::private" title='psmouse::private' data-ref="psmouse::private">private</a>;</td></tr>
<tr><th id="135">135</th><td>	<b>struct</b> <a class="type" href="#trackpoint_attr_data" title='trackpoint_attr_data' data-ref="trackpoint_attr_data">trackpoint_attr_data</a> *<dfn class="local col0 decl" id="30attr" title='attr' data-type='struct trackpoint_attr_data *' data-ref="30attr">attr</dfn> = <a class="local col6 ref" href="#26data" title='data' data-ref="26data">data</a>;</td></tr>
<tr><th id="136">136</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> *<dfn class="local col1 decl" id="31field" title='field' data-type='u8 *' data-ref="31field">field</dfn> = (<em>void</em> *)<a class="local col9 ref" href="#29tp" title='tp' data-ref="29tp">tp</a> + <a class="local col0 ref" href="#30attr" title='attr' data-ref="30attr">attr</a>-&gt;<a class="tu ref field" href="#trackpoint_attr_data::field_offset" title='trackpoint_attr_data::field_offset' data-use='r' data-ref="trackpoint_attr_data::field_offset">field_offset</a>;</td></tr>
<tr><th id="137">137</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col2 decl" id="32value" title='value' data-type='u8' data-ref="32value">value</dfn>;</td></tr>
<tr><th id="138">138</th><td>	<em>int</em> <dfn class="local col3 decl" id="33err" title='err' data-type='int' data-ref="33err">err</dfn>;</td></tr>
<tr><th id="139">139</th><td></td></tr>
<tr><th id="140">140</th><td>	<a class="local col3 ref" href="#33err" title='err' data-ref="33err">err</a> = <a class="ref fn" href="../../../include/linux/kernel.h.html#kstrtou8" title='kstrtou8' data-ref="kstrtou8">kstrtou8</a>(<a class="local col7 ref" href="#27buf" title='buf' data-ref="27buf">buf</a>, <var>10</var>, &amp;<a class="local col2 ref" href="#32value" title='value' data-ref="32value">value</a>);</td></tr>
<tr><th id="141">141</th><td>	<b>if</b> (<a class="local col3 ref" href="#33err" title='err' data-ref="33err">err</a>)</td></tr>
<tr><th id="142">142</th><td>		<b>return</b> <a class="local col3 ref" href="#33err" title='err' data-ref="33err">err</a>;</td></tr>
<tr><th id="143">143</th><td></td></tr>
<tr><th id="144">144</th><td>	*<a class="local col1 ref" href="#31field" title='field' data-ref="31field">field</a> = <a class="local col2 ref" href="#32value" title='value' data-ref="32value">value</a>;</td></tr>
<tr><th id="145">145</th><td>	<a class="tu ref fn" href="#trackpoint_write" title='trackpoint_write' data-use='c' data-ref="trackpoint_write">trackpoint_write</a>(&amp;<a class="local col5 ref" href="#25psmouse" title='psmouse' data-ref="25psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::ps2dev" title='psmouse::ps2dev' data-ref="psmouse::ps2dev">ps2dev</a>, <a class="local col0 ref" href="#30attr" title='attr' data-ref="30attr">attr</a>-&gt;<a class="tu ref field" href="#trackpoint_attr_data::command" title='trackpoint_attr_data::command' data-use='r' data-ref="trackpoint_attr_data::command">command</a>, <a class="local col2 ref" href="#32value" title='value' data-ref="32value">value</a>);</td></tr>
<tr><th id="146">146</th><td></td></tr>
<tr><th id="147">147</th><td>	<b>return</b> <a class="local col8 ref" href="#28count" title='count' data-ref="28count">count</a>;</td></tr>
<tr><th id="148">148</th><td>}</td></tr>
<tr><th id="149">149</th><td></td></tr>
<tr><th id="150">150</th><td><u>#define <dfn class="macro" id="_M/TRACKPOINT_INT_ATTR" data-ref="_M/TRACKPOINT_INT_ATTR">TRACKPOINT_INT_ATTR</dfn>(_name, _command, _default)				\</u></td></tr>
<tr><th id="151">151</th><td><u>	static struct <a class="type" href="#trackpoint_attr_data" title='trackpoint_attr_data' data-ref="trackpoint_attr_data">trackpoint_attr_data</a> trackpoint_attr_##_name = {		\</u></td></tr>
<tr><th id="152">152</th><td><u>		.<a class="tu ref field" href="#trackpoint_attr_data::field_offset" title='trackpoint_attr_data::field_offset' data-use='w' data-ref="trackpoint_attr_data::field_offset">field_offset</a> = offsetof(struct <a class="type" href="trackpoint.h.html#trackpoint_data" title='trackpoint_data' data-ref="trackpoint_data">trackpoint_data</a>, _name),	\</u></td></tr>
<tr><th id="153">153</th><td><u>		.<a class="tu ref field" href="#trackpoint_attr_data::command" title='trackpoint_attr_data::command' data-use='w' data-ref="trackpoint_attr_data::command">command</a> = _command,						\</u></td></tr>
<tr><th id="154">154</th><td><u>		.<a class="tu ref field" href="#trackpoint_attr_data::power_on_default" title='trackpoint_attr_data::power_on_default' data-use='w' data-ref="trackpoint_attr_data::power_on_default">power_on_default</a> = _default,					\</u></td></tr>
<tr><th id="155">155</th><td><u>	};									\</u></td></tr>
<tr><th id="156">156</th><td><u>	PSMOUSE_DEFINE_ATTR(_name, S_IWUSR | S_IRUGO,				\</u></td></tr>
<tr><th id="157">157</th><td><u>			    &amp;trackpoint_attr_##_name,				\</u></td></tr>
<tr><th id="158">158</th><td><u>			    <a class="decl fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr">trackpoint_show_int_attr</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a>, <a class="decl fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr"><a class="ref fn" href="#trackpoint_set_int_attr" title='trackpoint_set_int_attr' data-ref="trackpoint_set_int_attr">trackpoint_set_int_attr</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a>)</u></td></tr>
<tr><th id="159">159</th><td></td></tr>
<tr><th id="160">160</th><td><em>static</em> <a class="typedef" href="../../../include/linux/types.h.html#ssize_t" title='ssize_t' data-type='__kernel_ssize_t' data-ref="ssize_t">ssize_t</a> <dfn class="tu decl def fn" id="trackpoint_set_bit_attr" title='trackpoint_set_bit_attr' data-type='ssize_t trackpoint_set_bit_attr(struct psmouse * psmouse, void * data, const char * buf, size_t count)' data-ref="trackpoint_set_bit_attr">trackpoint_set_bit_attr</dfn>(<b>struct</b> <a class="type" href="psmouse.h.html#psmouse" title='psmouse' data-ref="psmouse">psmouse</a> *<dfn class="local col4 decl" id="34psmouse" title='psmouse' data-type='struct psmouse *' data-ref="34psmouse">psmouse</dfn>, <em>void</em> *<dfn class="local col5 decl" id="35data" title='data' data-type='void *' data-ref="35data">data</dfn>,</td></tr>
<tr><th id="161">161</th><td>					<em>const</em> <em>char</em> *<dfn class="local col6 decl" id="36buf" title='buf' data-type='const char *' data-ref="36buf">buf</dfn>, <a class="typedef" href="../../../include/linux/types.h.html#size_t" title='size_t' data-type='__kernel_size_t' data-ref="size_t">size_t</a> <dfn class="local col7 decl" id="37count" title='count' data-type='size_t' data-ref="37count">count</dfn>)</td></tr>
<tr><th id="162">162</th><td>{</td></tr>
<tr><th id="163">163</th><td>	<b>struct</b> <a class="type" href="trackpoint.h.html#trackpoint_data" title='trackpoint_data' data-ref="trackpoint_data">trackpoint_data</a> *<dfn class="local col8 decl" id="38tp" title='tp' data-type='struct trackpoint_data *' data-ref="38tp">tp</dfn> = <a class="local col4 ref" href="#34psmouse" title='psmouse' data-ref="34psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::private" title='psmouse::private' data-ref="psmouse::private">private</a>;</td></tr>
<tr><th id="164">164</th><td>	<b>struct</b> <a class="type" href="#trackpoint_attr_data" title='trackpoint_attr_data' data-ref="trackpoint_attr_data">trackpoint_attr_data</a> *<dfn class="local col9 decl" id="39attr" title='attr' data-type='struct trackpoint_attr_data *' data-ref="39attr">attr</dfn> = <a class="local col5 ref" href="#35data" title='data' data-ref="35data">data</a>;</td></tr>
<tr><th id="165">165</th><td>	<a class="typedef" href="../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> *<dfn class="local col0 decl" id="40field" title='field' data-type='bool *' data-ref="40field">field</dfn> = (<em>void</em> *)<a class="local col8 ref" href="#38tp" title='tp' data-ref="38tp">tp</a> + <a class="local col9 ref" href="#39attr" title='attr' data-ref="39attr">attr</a>-&gt;<a class="tu ref field" href="#trackpoint_attr_data::field_offset" title='trackpoint_attr_data::field_offset' data-use='r' data-ref="trackpoint_attr_data::field_offset">field_offset</a>;</td></tr>
<tr><th id="166">166</th><td>	<a class="typedef" href="../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="local col1 decl" id="41value" title='value' data-type='bool' data-ref="41value">value</dfn>;</td></tr>
<tr><th id="167">167</th><td>	<em>int</em> <dfn class="local col2 decl" id="42err" title='err' data-type='int' data-ref="42err">err</dfn>;</td></tr>
<tr><th id="168">168</th><td></td></tr>
<tr><th id="169">169</th><td>	<a class="local col2 ref" href="#42err" title='err' data-ref="42err">err</a> = <a class="ref fn" href="../../../include/linux/kernel.h.html#kstrtobool" title='kstrtobool' data-ref="kstrtobool">kstrtobool</a>(<a class="local col6 ref" href="#36buf" title='buf' data-ref="36buf">buf</a>, &amp;<a class="local col1 ref" href="#41value" title='value' data-ref="41value">value</a>);</td></tr>
<tr><th id="170">170</th><td>	<b>if</b> (<a class="local col2 ref" href="#42err" title='err' data-ref="42err">err</a>)</td></tr>
<tr><th id="171">171</th><td>		<b>return</b> <a class="local col2 ref" href="#42err" title='err' data-ref="42err">err</a>;</td></tr>
<tr><th id="172">172</th><td></td></tr>
<tr><th id="173">173</th><td>	<b>if</b> (<a class="local col9 ref" href="#39attr" title='attr' data-ref="39attr">attr</a>-&gt;<a class="tu ref field" href="#trackpoint_attr_data::inverted" title='trackpoint_attr_data::inverted' data-use='r' data-ref="trackpoint_attr_data::inverted">inverted</a>)</td></tr>
<tr><th id="174">174</th><td>		<a class="local col1 ref" href="#41value" title='value' data-ref="41value">value</a> = !<a class="local col1 ref" href="#41value" title='value' data-ref="41value">value</a>;</td></tr>
<tr><th id="175">175</th><td></td></tr>
<tr><th id="176">176</th><td>	<b>if</b> (*<a class="local col0 ref" href="#40field" title='field' data-ref="40field">field</a> != <a class="local col1 ref" href="#41value" title='value' data-ref="41value">value</a>) {</td></tr>
<tr><th id="177">177</th><td>		*<a class="local col0 ref" href="#40field" title='field' data-ref="40field">field</a> = <a class="local col1 ref" href="#41value" title='value' data-ref="41value">value</a>;</td></tr>
<tr><th id="178">178</th><td>		<a class="tu ref fn" href="#trackpoint_toggle_bit" title='trackpoint_toggle_bit' data-use='c' data-ref="trackpoint_toggle_bit">trackpoint_toggle_bit</a>(&amp;<a class="local col4 ref" href="#34psmouse" title='psmouse' data-ref="34psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::ps2dev" title='psmouse::ps2dev' data-ref="psmouse::ps2dev">ps2dev</a>, <a class="local col9 ref" href="#39attr" title='attr' data-ref="39attr">attr</a>-&gt;<a class="tu ref field" href="#trackpoint_attr_data::command" title='trackpoint_attr_data::command' data-use='r' data-ref="trackpoint_attr_data::command">command</a>, <a class="local col9 ref" href="#39attr" title='attr' data-ref="39attr">attr</a>-&gt;<a class="tu ref field" href="#trackpoint_attr_data::mask" title='trackpoint_attr_data::mask' data-use='r' data-ref="trackpoint_attr_data::mask">mask</a>);</td></tr>
<tr><th id="179">179</th><td>	}</td></tr>
<tr><th id="180">180</th><td></td></tr>
<tr><th id="181">181</th><td>	<b>return</b> <a class="local col7 ref" href="#37count" title='count' data-ref="37count">count</a>;</td></tr>
<tr><th id="182">182</th><td>}</td></tr>
<tr><th id="183">183</th><td></td></tr>
<tr><th id="184">184</th><td></td></tr>
<tr><th id="185">185</th><td><u>#define <dfn class="macro" id="_M/TRACKPOINT_BIT_ATTR" data-ref="_M/TRACKPOINT_BIT_ATTR">TRACKPOINT_BIT_ATTR</dfn>(_name, _command, _mask, _inv, _default)	\</u></td></tr>
<tr><th id="186">186</th><td><u>static struct <a class="type" href="#trackpoint_attr_data" title='trackpoint_attr_data' data-ref="trackpoint_attr_data">trackpoint_attr_data</a> trackpoint_attr_##_name = {		\</u></td></tr>
<tr><th id="187">187</th><td><u>	.<a class="tu ref field" href="#trackpoint_attr_data::field_offset" title='trackpoint_attr_data::field_offset' data-use='w' data-ref="trackpoint_attr_data::field_offset">field_offset</a>		= offsetof(struct <a class="type" href="trackpoint.h.html#trackpoint_data" title='trackpoint_data' data-ref="trackpoint_data">trackpoint_data</a>,	\</u></td></tr>
<tr><th id="188">188</th><td><u>					   _name),			\</u></td></tr>
<tr><th id="189">189</th><td><u>	.<a class="tu ref field" href="#trackpoint_attr_data::command" title='trackpoint_attr_data::command' data-use='w' data-ref="trackpoint_attr_data::command">command</a>		= _command,				\</u></td></tr>
<tr><th id="190">190</th><td><u>	.<a class="tu ref field" href="#trackpoint_attr_data::mask" title='trackpoint_attr_data::mask' data-use='w' data-ref="trackpoint_attr_data::mask">mask</a>			= _mask,				\</u></td></tr>
<tr><th id="191">191</th><td><u>	.<a class="tu ref field" href="#trackpoint_attr_data::inverted" title='trackpoint_attr_data::inverted' data-use='w' data-ref="trackpoint_attr_data::inverted">inverted</a>		= _inv,					\</u></td></tr>
<tr><th id="192">192</th><td><u>	.<a class="tu ref field" href="#trackpoint_attr_data::power_on_default" title='trackpoint_attr_data::power_on_default' data-use='w' data-ref="trackpoint_attr_data::power_on_default">power_on_default</a>	= _default,				\</u></td></tr>
<tr><th id="193">193</th><td><u>	};								\</u></td></tr>
<tr><th id="194">194</th><td><u>PSMOUSE_DEFINE_ATTR(_name, S_IWUSR | S_IRUGO,				\</u></td></tr>
<tr><th id="195">195</th><td><u>		    &amp;trackpoint_attr_##_name,				\</u></td></tr>
<tr><th id="196">196</th><td><u>		    <a class="decl fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr"><a class="ref fn" href="#trackpoint_show_int_attr" title='trackpoint_show_int_attr' data-ref="trackpoint_show_int_attr">trackpoint_show_int_attr</a></a></a></a></a></a></a>, <a class="decl fn" href="#trackpoint_set_bit_attr" title='trackpoint_set_bit_attr' data-ref="trackpoint_set_bit_attr"><a class="ref fn" href="#trackpoint_set_bit_attr" title='trackpoint_set_bit_attr' data-ref="trackpoint_set_bit_attr"><a class="ref fn" href="#trackpoint_set_bit_attr" title='trackpoint_set_bit_attr' data-ref="trackpoint_set_bit_attr"><a class="ref fn" href="#trackpoint_set_bit_attr" title='trackpoint_set_bit_attr' data-ref="trackpoint_set_bit_attr"><a class="ref fn" href="#trackpoint_set_bit_attr" title='trackpoint_set_bit_attr' data-ref="trackpoint_set_bit_attr"><a class="ref fn" href="#trackpoint_set_bit_attr" title='trackpoint_set_bit_attr' data-ref="trackpoint_set_bit_attr"><a class="ref fn" href="#trackpoint_set_bit_attr" title='trackpoint_set_bit_attr' data-ref="trackpoint_set_bit_attr">trackpoint_set_bit_attr</a></a></a></a></a></a></a>)</u></td></tr>
<tr><th id="197">197</th><td></td></tr>
<tr><th id="198">198</th><td><a class="macro" href="#150" title="static struct trackpoint_attr_data trackpoint_attr_sensitivity = { .field_offset = __builtin_offsetof(struct trackpoint_data, sensitivity), .command = 0x4A, .power_on_default = 0x80, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_int_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_sensitivity = { .dattr = { .attr = { .name = &quot;sensitivity&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_sensitivity, .show = trackpoint_show_int_attr, .set = trackpoint_set_int_attr, .protect = true, }" data-ref="_M/TRACKPOINT_INT_ATTR">TRACKPOINT_INT_ATTR</a>(sensitivity, <a class="macro" href="trackpoint.h.html#64" title="0x4A" data-ref="_M/TP_SENS">TP_SENS</a>, <a class="macro" href="trackpoint.h.html#121" title="0x80" data-ref="_M/TP_DEF_SENS">TP_DEF_SENS</a>);</td></tr>
<tr><th id="199">199</th><td><a class="macro" href="#150" title="static struct trackpoint_attr_data trackpoint_attr_speed = { .field_offset = __builtin_offsetof(struct trackpoint_data, speed), .command = 0x60, .power_on_default = 0x61, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_int_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_speed = { .dattr = { .attr = { .name = &quot;speed&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_speed, .show = trackpoint_show_int_attr, .set = trackpoint_set_int_attr, .protect = true, }" data-ref="_M/TRACKPOINT_INT_ATTR">TRACKPOINT_INT_ATTR</a>(speed, <a class="macro" href="trackpoint.h.html#67" title="0x60" data-ref="_M/TP_SPEED">TP_SPEED</a>, <a class="macro" href="trackpoint.h.html#123" title="0x61" data-ref="_M/TP_DEF_SPEED">TP_DEF_SPEED</a>);</td></tr>
<tr><th id="200">200</th><td><a class="macro" href="#150" title="static struct trackpoint_attr_data trackpoint_attr_inertia = { .field_offset = __builtin_offsetof(struct trackpoint_data, inertia), .command = 0x4D, .power_on_default = 0x06, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_int_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_inertia = { .dattr = { .attr = { .name = &quot;inertia&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_inertia, .show = trackpoint_show_int_attr, .set = trackpoint_set_int_attr, .protect = true, }" data-ref="_M/TRACKPOINT_INT_ATTR">TRACKPOINT_INT_ATTR</a>(inertia, <a class="macro" href="trackpoint.h.html#66" title="0x4D" data-ref="_M/TP_INERTIA">TP_INERTIA</a>, <a class="macro" href="trackpoint.h.html#122" title="0x06" data-ref="_M/TP_DEF_INERTIA">TP_DEF_INERTIA</a>);</td></tr>
<tr><th id="201">201</th><td><a class="macro" href="#150" title="static struct trackpoint_attr_data trackpoint_attr_reach = { .field_offset = __builtin_offsetof(struct trackpoint_data, reach), .command = 0x57, .power_on_default = 0x0A, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_int_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_reach = { .dattr = { .attr = { .name = &quot;reach&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_reach, .show = trackpoint_show_int_attr, .set = trackpoint_set_int_attr, .protect = true, }" data-ref="_M/TRACKPOINT_INT_ATTR">TRACKPOINT_INT_ATTR</a>(reach, <a class="macro" href="trackpoint.h.html#68" title="0x57" data-ref="_M/TP_REACH">TP_REACH</a>, <a class="macro" href="trackpoint.h.html#124" title="0x0A" data-ref="_M/TP_DEF_REACH">TP_DEF_REACH</a>);</td></tr>
<tr><th id="202">202</th><td><a class="macro" href="#150" title="static struct trackpoint_attr_data trackpoint_attr_draghys = { .field_offset = __builtin_offsetof(struct trackpoint_data, draghys), .command = 0x58, .power_on_default = 0xFF, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_int_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_draghys = { .dattr = { .attr = { .name = &quot;draghys&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_draghys, .show = trackpoint_show_int_attr, .set = trackpoint_set_int_attr, .protect = true, }" data-ref="_M/TRACKPOINT_INT_ATTR">TRACKPOINT_INT_ATTR</a>(draghys, <a class="macro" href="trackpoint.h.html#69" title="0x58" data-ref="_M/TP_DRAGHYS">TP_DRAGHYS</a>, <a class="macro" href="trackpoint.h.html#126" title="0xFF" data-ref="_M/TP_DEF_DRAGHYS">TP_DEF_DRAGHYS</a>);</td></tr>
<tr><th id="203">203</th><td><a class="macro" href="#150" title="static struct trackpoint_attr_data trackpoint_attr_mindrag = { .field_offset = __builtin_offsetof(struct trackpoint_data, mindrag), .command = 0x59, .power_on_default = 0x14, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_int_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_mindrag = { .dattr = { .attr = { .name = &quot;mindrag&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_mindrag, .show = trackpoint_show_int_attr, .set = trackpoint_set_int_attr, .protect = true, }" data-ref="_M/TRACKPOINT_INT_ATTR">TRACKPOINT_INT_ATTR</a>(mindrag, <a class="macro" href="trackpoint.h.html#73" title="0x59" data-ref="_M/TP_MINDRAG">TP_MINDRAG</a>, <a class="macro" href="trackpoint.h.html#127" title="0x14" data-ref="_M/TP_DEF_MINDRAG">TP_DEF_MINDRAG</a>);</td></tr>
<tr><th id="204">204</th><td><a class="macro" href="#150" title="static struct trackpoint_attr_data trackpoint_attr_thresh = { .field_offset = __builtin_offsetof(struct trackpoint_data, thresh), .command = 0x5C, .power_on_default = 0x08, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_int_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_thresh = { .dattr = { .attr = { .name = &quot;thresh&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_thresh, .show = trackpoint_show_int_attr, .set = trackpoint_set_int_attr, .protect = true, }" data-ref="_M/TRACKPOINT_INT_ATTR">TRACKPOINT_INT_ATTR</a>(thresh, <a class="macro" href="trackpoint.h.html#76" title="0x5C" data-ref="_M/TP_THRESH">TP_THRESH</a>, <a class="macro" href="trackpoint.h.html#129" title="0x08" data-ref="_M/TP_DEF_THRESH">TP_DEF_THRESH</a>);</td></tr>
<tr><th id="205">205</th><td><a class="macro" href="#150" title="static struct trackpoint_attr_data trackpoint_attr_upthresh = { .field_offset = __builtin_offsetof(struct trackpoint_data, upthresh), .command = 0x5A, .power_on_default = 0xFF, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_int_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_upthresh = { .dattr = { .attr = { .name = &quot;upthresh&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_upthresh, .show = trackpoint_show_int_attr, .set = trackpoint_set_int_attr, .protect = true, }" data-ref="_M/TRACKPOINT_INT_ATTR">TRACKPOINT_INT_ATTR</a>(upthresh, <a class="macro" href="trackpoint.h.html#77" title="0x5A" data-ref="_M/TP_UP_THRESH">TP_UP_THRESH</a>, <a class="macro" href="trackpoint.h.html#130" title="0xFF" data-ref="_M/TP_DEF_UP_THRESH">TP_DEF_UP_THRESH</a>);</td></tr>
<tr><th id="206">206</th><td><a class="macro" href="#150" title="static struct trackpoint_attr_data trackpoint_attr_ztime = { .field_offset = __builtin_offsetof(struct trackpoint_data, ztime), .command = 0x5E, .power_on_default = 0x26, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_int_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_ztime = { .dattr = { .attr = { .name = &quot;ztime&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_ztime, .show = trackpoint_show_int_attr, .set = trackpoint_set_int_attr, .protect = true, }" data-ref="_M/TRACKPOINT_INT_ATTR">TRACKPOINT_INT_ATTR</a>(ztime, <a class="macro" href="trackpoint.h.html#78" title="0x5E" data-ref="_M/TP_Z_TIME">TP_Z_TIME</a>, <a class="macro" href="trackpoint.h.html#131" title="0x26" data-ref="_M/TP_DEF_Z_TIME">TP_DEF_Z_TIME</a>);</td></tr>
<tr><th id="207">207</th><td><a class="macro" href="#150" title="static struct trackpoint_attr_data trackpoint_attr_jenks = { .field_offset = __builtin_offsetof(struct trackpoint_data, jenks), .command = 0x5D, .power_on_default = 0x87, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_int_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_jenks = { .dattr = { .attr = { .name = &quot;jenks&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_jenks, .show = trackpoint_show_int_attr, .set = trackpoint_set_int_attr, .protect = true, }" data-ref="_M/TRACKPOINT_INT_ATTR">TRACKPOINT_INT_ATTR</a>(jenks, <a class="macro" href="trackpoint.h.html#79" title="0x5D" data-ref="_M/TP_JENKS_CURV">TP_JENKS_CURV</a>, <a class="macro" href="trackpoint.h.html#132" title="0x87" data-ref="_M/TP_DEF_JENKS_CURV">TP_DEF_JENKS_CURV</a>);</td></tr>
<tr><th id="208">208</th><td><a class="macro" href="#150" title="static struct trackpoint_attr_data trackpoint_attr_drift_time = { .field_offset = __builtin_offsetof(struct trackpoint_data, drift_time), .command = 0x5F, .power_on_default = 0x05, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_int_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_drift_time = { .dattr = { .attr = { .name = &quot;drift_time&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_drift_time, .show = trackpoint_show_int_attr, .set = trackpoint_set_int_attr, .protect = true, }" data-ref="_M/TRACKPOINT_INT_ATTR">TRACKPOINT_INT_ATTR</a>(drift_time, <a class="macro" href="trackpoint.h.html#80" title="0x5F" data-ref="_M/TP_DRIFT_TIME">TP_DRIFT_TIME</a>, <a class="macro" href="trackpoint.h.html#133" title="0x05" data-ref="_M/TP_DEF_DRIFT_TIME">TP_DEF_DRIFT_TIME</a>);</td></tr>
<tr><th id="209">209</th><td></td></tr>
<tr><th id="210">210</th><td><a class="macro" href="#185" title="static struct trackpoint_attr_data trackpoint_attr_press_to_select = { .field_offset = __builtin_offsetof(struct trackpoint_data, press_to_select), .command = 0x2C, .mask = 0x01, .inverted = false, .power_on_default = 0x00, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_bit_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_press_to_select = { .dattr = { .attr = { .name = &quot;press_to_select&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_press_to_select, .show = trackpoint_show_int_attr, .set = trackpoint_set_bit_attr, .protect = true, }" data-ref="_M/TRACKPOINT_BIT_ATTR">TRACKPOINT_BIT_ATTR</a>(press_to_select, <a class="macro" href="trackpoint.h.html#97" title="0x2C" data-ref="_M/TP_TOGGLE_PTSON">TP_TOGGLE_PTSON</a>, <a class="macro" href="trackpoint.h.html#98" title="0x01" data-ref="_M/TP_MASK_PTSON">TP_MASK_PTSON</a>, <a class="enum" href="../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>,</td></tr>
<tr><th id="211">211</th><td>		    <a class="macro" href="trackpoint.h.html#137" title="0x00" data-ref="_M/TP_DEF_PTSON">TP_DEF_PTSON</a>);</td></tr>
<tr><th id="212">212</th><td><a class="macro" href="#185" title="static struct trackpoint_attr_data trackpoint_attr_skipback = { .field_offset = __builtin_offsetof(struct trackpoint_data, skipback), .command = 0x2D, .mask = 0x08, .inverted = false, .power_on_default = 0x00, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_bit_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_skipback = { .dattr = { .attr = { .name = &quot;skipback&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_skipback, .show = trackpoint_show_int_attr, .set = trackpoint_set_bit_attr, .protect = true, }" data-ref="_M/TRACKPOINT_BIT_ATTR">TRACKPOINT_BIT_ATTR</a>(skipback, <a class="macro" href="trackpoint.h.html#105" title="0x2D" data-ref="_M/TP_TOGGLE_SKIPBACK">TP_TOGGLE_SKIPBACK</a>, <a class="macro" href="trackpoint.h.html#106" title="0x08" data-ref="_M/TP_MASK_SKIPBACK">TP_MASK_SKIPBACK</a>, <a class="enum" href="../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>,</td></tr>
<tr><th id="213">213</th><td>		    <a class="macro" href="trackpoint.h.html#138" title="0x00" data-ref="_M/TP_DEF_SKIPBACK">TP_DEF_SKIPBACK</a>);</td></tr>
<tr><th id="214">214</th><td><a class="macro" href="#185" title="static struct trackpoint_attr_data trackpoint_attr_ext_dev = { .field_offset = __builtin_offsetof(struct trackpoint_data, ext_dev), .command = 0x23, .mask = 0x02, .inverted = true, .power_on_default = 0x00, }; static ssize_t trackpoint_show_int_attr(struct psmouse *, void *, char *); static ssize_t trackpoint_set_bit_attr(struct psmouse *, void *, const char *, size_t); static struct psmouse_attribute psmouse_attr_ext_dev = { .dattr = { .attr = { .name = &quot;ext_dev&quot;, .mode = 00200 | (00400|00040|00004), }, .show = psmouse_attr_show_helper, .store = psmouse_attr_set_helper, }, .data = &amp;trackpoint_attr_ext_dev, .show = trackpoint_show_int_attr, .set = trackpoint_set_bit_attr, .protect = true, }" data-ref="_M/TRACKPOINT_BIT_ATTR">TRACKPOINT_BIT_ATTR</a>(ext_dev, <a class="macro" href="trackpoint.h.html#91" title="0x23" data-ref="_M/TP_TOGGLE_EXT_DEV">TP_TOGGLE_EXT_DEV</a>, <a class="macro" href="trackpoint.h.html#92" title="0x02" data-ref="_M/TP_MASK_EXT_DEV">TP_MASK_EXT_DEV</a>, <a class="enum" href="../../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>,</td></tr>
<tr><th id="215">215</th><td>		    <a class="macro" href="trackpoint.h.html#139" title="0x00" data-ref="_M/TP_DEF_EXT_DEV">TP_DEF_EXT_DEV</a>);</td></tr>
<tr><th id="216">216</th><td></td></tr>
<tr><th id="217">217</th><td><em>static</em> <a class="typedef" href="../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="tu decl def fn" id="trackpoint_is_attr_available" title='trackpoint_is_attr_available' data-type='bool trackpoint_is_attr_available(struct psmouse * psmouse, struct attribute * attr)' data-ref="trackpoint_is_attr_available">trackpoint_is_attr_available</dfn>(<b>struct</b> <a class="type" href="psmouse.h.html#psmouse" title='psmouse' data-ref="psmouse">psmouse</a> *<dfn class="local col3 decl" id="43psmouse" title='psmouse' data-type='struct psmouse *' data-ref="43psmouse">psmouse</dfn>,</td></tr>
<tr><th id="218">218</th><td>					 <b>struct</b> <a class="type" href="../../../include/linux/sysfs.h.html#attribute" title='attribute' data-ref="attribute">attribute</a> *<dfn class="local col4 decl" id="44attr" title='attr' data-type='struct attribute *' data-ref="44attr">attr</dfn>)</td></tr>
<tr><th id="219">219</th><td>{</td></tr>
<tr><th id="220">220</th><td>	<b>struct</b> <a class="type" href="trackpoint.h.html#trackpoint_data" title='trackpoint_data' data-ref="trackpoint_data">trackpoint_data</a> *<dfn class="local col5 decl" id="45tp" title='tp' data-type='struct trackpoint_data *' data-ref="45tp">tp</dfn> = <a class="local col3 ref" href="#43psmouse" title='psmouse' data-ref="43psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::private" title='psmouse::private' data-ref="psmouse::private">private</a>;</td></tr>
<tr><th id="221">221</th><td></td></tr>
<tr><th id="222">222</th><td>	<b>return</b> <a class="local col5 ref" href="#45tp" title='tp' data-ref="45tp">tp</a>-&gt;<a class="ref field" href="trackpoint.h.html#trackpoint_data::variant_id" title='trackpoint_data::variant_id' data-ref="trackpoint_data::variant_id">variant_id</a> == <a class="macro" href="trackpoint.h.html#30" title="0x01" data-ref="_M/TP_VARIANT_IBM">TP_VARIANT_IBM</a> ||</td></tr>
<tr><th id="223">223</th><td>		<a class="local col4 ref" href="#44attr" title='attr' data-ref="44attr">attr</a> == &amp;<a class="ref" href="#198" title='psmouse_attr_sensitivity' data-ref="psmouse_attr_sensitivity">psmouse_attr_sensitivity</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a> ||</td></tr>
<tr><th id="224">224</th><td>		<a class="local col4 ref" href="#44attr" title='attr' data-ref="44attr">attr</a> == &amp;<a class="ref" href="#210" title='psmouse_attr_press_to_select' data-ref="psmouse_attr_press_to_select">psmouse_attr_press_to_select</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>;</td></tr>
<tr><th id="225">225</th><td>}</td></tr>
<tr><th id="226">226</th><td></td></tr>
<tr><th id="227">227</th><td><em>static</em> <a class="typedef" href="../../../include/linux/types.h.html#umode_t" title='umode_t' data-type='unsigned short' data-ref="umode_t">umode_t</a> <dfn class="tu decl def fn" id="trackpoint_is_attr_visible" title='trackpoint_is_attr_visible' data-type='umode_t trackpoint_is_attr_visible(struct kobject * kobj, struct attribute * attr, int n)' data-ref="trackpoint_is_attr_visible">trackpoint_is_attr_visible</dfn>(<b>struct</b> <a class="type" href="../../../include/linux/kobject.h.html#kobject" title='kobject' data-ref="kobject">kobject</a> *<dfn class="local col6 decl" id="46kobj" title='kobj' data-type='struct kobject *' data-ref="46kobj">kobj</dfn>,</td></tr>
<tr><th id="228">228</th><td>					  <b>struct</b> <a class="type" href="../../../include/linux/sysfs.h.html#attribute" title='attribute' data-ref="attribute">attribute</a> *<dfn class="local col7 decl" id="47attr" title='attr' data-type='struct attribute *' data-ref="47attr">attr</dfn>, <em>int</em> <dfn class="local col8 decl" id="48n" title='n' data-type='int' data-ref="48n">n</dfn>)</td></tr>
<tr><th id="229">229</th><td>{</td></tr>
<tr><th id="230">230</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/device.h.html#device" title='device' data-ref="device">device</a> *<dfn class="local col9 decl" id="49dev" title='dev' data-type='struct device *' data-ref="49dev">dev</dfn> = <a class="macro" href="../../../include/linux/kernel.h.html#927" title="({ void *__mptr = (void *)(kobj); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(kobj)), typeof(((struct device *)0)-&gt;kobj)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(kobj)), typeof(void)))); extern void __compiletime_assert_230(void) ; if (__cond) __compiletime_assert_230(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((struct device *)(__mptr - __builtin_offsetof(struct device, kobj))); })" data-ref="_M/container_of">container_of</a>(<a class="local col6 ref" href="#46kobj" title='kobj' data-ref="46kobj">kobj</a>, <b>struct</b> <a class="type" href="../../../include/linux/device.h.html#device" title='device' data-ref="device">device</a>, <a class="ref field" href="../../../include/linux/device.h.html#device::kobj" title='device::kobj' data-ref="device::kobj">kobj</a>);</td></tr>
<tr><th id="231">231</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/serio.h.html#serio" title='serio' data-ref="serio">serio</a> *<dfn class="local col0 decl" id="50serio" title='serio' data-type='struct serio *' data-ref="50serio">serio</dfn> = <a class="macro" href="../../../include/linux/serio.h.html#68" title="({ void *__mptr = (void *)(dev); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(dev)), typeof(((struct serio *)0)-&gt;dev)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(dev)), typeof(void)))); extern void __compiletime_assert_231(void) ; if (__cond) __compiletime_assert_231(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((struct serio *)(__mptr - __builtin_offsetof(struct serio, dev))); })" data-ref="_M/to_serio_port">to_serio_port</a>(<a class="local col9 ref" href="#49dev" title='dev' data-ref="49dev">dev</a>);</td></tr>
<tr><th id="232">232</th><td>	<b>struct</b> <a class="type" href="psmouse.h.html#psmouse" title='psmouse' data-ref="psmouse">psmouse</a> *<dfn class="local col1 decl" id="51psmouse" title='psmouse' data-type='struct psmouse *' data-ref="51psmouse">psmouse</dfn> = <a class="ref fn" href="../../../include/linux/serio.h.html#serio_get_drvdata" title='serio_get_drvdata' data-ref="serio_get_drvdata">serio_get_drvdata</a>(<a class="local col0 ref" href="#50serio" title='serio' data-ref="50serio">serio</a>);</td></tr>
<tr><th id="233">233</th><td></td></tr>
<tr><th id="234">234</th><td>	<b>return</b> <a class="tu ref fn" href="#trackpoint_is_attr_available" title='trackpoint_is_attr_available' data-use='c' data-ref="trackpoint_is_attr_available">trackpoint_is_attr_available</a>(<a class="local col1 ref" href="#51psmouse" title='psmouse' data-ref="51psmouse">psmouse</a>, <a class="local col7 ref" href="#47attr" title='attr' data-ref="47attr">attr</a>) ? <a class="local col7 ref" href="#47attr" title='attr' data-ref="47attr">attr</a>-&gt;<a class="ref field" href="../../../include/linux/sysfs.h.html#attribute::mode" title='attribute::mode' data-ref="attribute::mode">mode</a> : <var>0</var>;</td></tr>
<tr><th id="235">235</th><td>}</td></tr>
<tr><th id="236">236</th><td></td></tr>
<tr><th id="237">237</th><td><em>static</em> <b>struct</b> <a class="type" href="../../../include/linux/sysfs.h.html#attribute" title='attribute' data-ref="attribute">attribute</a> *<dfn class="tu decl def" id="trackpoint_attrs" title='trackpoint_attrs' data-type='struct attribute *[15]' data-ref="trackpoint_attrs">trackpoint_attrs</dfn>[] = {</td></tr>
<tr><th id="238">238</th><td>	&amp;<a class="ref" href="#198" title='psmouse_attr_sensitivity' data-ref="psmouse_attr_sensitivity">psmouse_attr_sensitivity</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="239">239</th><td>	&amp;<a class="ref" href="#199" title='psmouse_attr_speed' data-ref="psmouse_attr_speed">psmouse_attr_speed</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="240">240</th><td>	&amp;<a class="ref" href="#200" title='psmouse_attr_inertia' data-ref="psmouse_attr_inertia">psmouse_attr_inertia</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="241">241</th><td>	&amp;<a class="ref" href="#201" title='psmouse_attr_reach' data-ref="psmouse_attr_reach">psmouse_attr_reach</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="242">242</th><td>	&amp;<a class="ref" href="#202" title='psmouse_attr_draghys' data-ref="psmouse_attr_draghys">psmouse_attr_draghys</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="243">243</th><td>	&amp;<a class="ref" href="#203" title='psmouse_attr_mindrag' data-ref="psmouse_attr_mindrag">psmouse_attr_mindrag</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="244">244</th><td>	&amp;<a class="ref" href="#204" title='psmouse_attr_thresh' data-ref="psmouse_attr_thresh">psmouse_attr_thresh</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="245">245</th><td>	&amp;<a class="ref" href="#205" title='psmouse_attr_upthresh' data-ref="psmouse_attr_upthresh">psmouse_attr_upthresh</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="246">246</th><td>	&amp;<a class="ref" href="#206" title='psmouse_attr_ztime' data-ref="psmouse_attr_ztime">psmouse_attr_ztime</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="247">247</th><td>	&amp;<a class="ref" href="#207" title='psmouse_attr_jenks' data-ref="psmouse_attr_jenks">psmouse_attr_jenks</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="248">248</th><td>	&amp;<a class="ref" href="#208" title='psmouse_attr_drift_time' data-ref="psmouse_attr_drift_time">psmouse_attr_drift_time</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="249">249</th><td>	&amp;<a class="ref" href="#210" title='psmouse_attr_press_to_select' data-ref="psmouse_attr_press_to_select">psmouse_attr_press_to_select</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="250">250</th><td>	&amp;<a class="ref" href="#212" title='psmouse_attr_skipback' data-ref="psmouse_attr_skipback">psmouse_attr_skipback</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="251">251</th><td>	&amp;<a class="ref" href="#214" title='psmouse_attr_ext_dev' data-ref="psmouse_attr_ext_dev">psmouse_attr_ext_dev</a>.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>,</td></tr>
<tr><th id="252">252</th><td>	<a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a></td></tr>
<tr><th id="253">253</th><td>};</td></tr>
<tr><th id="254">254</th><td></td></tr>
<tr><th id="255">255</th><td><em>static</em> <b>struct</b> <a class="type" href="../../../include/linux/sysfs.h.html#attribute_group" title='attribute_group' data-ref="attribute_group">attribute_group</a> <dfn class="tu decl def" id="trackpoint_attr_group" title='trackpoint_attr_group' data-type='struct attribute_group' data-ref="trackpoint_attr_group">trackpoint_attr_group</dfn> = {</td></tr>
<tr><th id="256">256</th><td>	.<a class="ref field" href="../../../include/linux/sysfs.h.html#attribute_group::is_visible" title='attribute_group::is_visible' data-ref="attribute_group::is_visible">is_visible</a>	= <a class="tu ref fn" href="#trackpoint_is_attr_visible" title='trackpoint_is_attr_visible' data-ref="trackpoint_is_attr_visible">trackpoint_is_attr_visible</a>,</td></tr>
<tr><th id="257">257</th><td>	.<a class="ref field" href="../../../include/linux/sysfs.h.html#attribute_group::attrs" title='attribute_group::attrs' data-ref="attribute_group::attrs">attrs</a>		= <a class="tu ref" href="#trackpoint_attrs" title='trackpoint_attrs' data-ref="trackpoint_attrs">trackpoint_attrs</a>,</td></tr>
<tr><th id="258">258</th><td>};</td></tr>
<tr><th id="259">259</th><td></td></tr>
<tr><th id="260">260</th><td><u>#define <dfn class="macro" id="_M/TRACKPOINT_UPDATE" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</dfn>(_power_on, _psmouse, _tp, _name)		\</u></td></tr>
<tr><th id="261">261</th><td><u>do {									\</u></td></tr>
<tr><th id="262">262</th><td><u>	struct <a class="type" href="#trackpoint_attr_data" title='trackpoint_attr_data' data-ref="trackpoint_attr_data">trackpoint_attr_data</a> *<dfn class="local col0 decl" id="60_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="60_attr"><dfn class="local col1 decl" id="61_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="61_attr"><dfn class="local col2 decl" id="62_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="62_attr"><dfn class="local col3 decl" id="63_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="63_attr"><dfn class="local col4 decl" id="64_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="64_attr"><dfn class="local col5 decl" id="65_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="65_attr"><dfn class="local col6 decl" id="66_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="66_attr"><dfn class="local col7 decl" id="67_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="67_attr"><dfn class="local col8 decl" id="68_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="68_attr"><dfn class="local col9 decl" id="69_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="69_attr"><dfn class="local col0 decl" id="70_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="70_attr"><dfn class="local col1 decl" id="71_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="71_attr"><dfn class="local col2 decl" id="72_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="72_attr"><dfn class="local col3 decl" id="73_attr" title='_attr' data-type='struct trackpoint_attr_data *' data-ref="73_attr">_attr</dfn></dfn></dfn></dfn></dfn></dfn></dfn></dfn></dfn></dfn></dfn></dfn></dfn></dfn> = &amp;trackpoint_attr_##_name;	\</u></td></tr>
<tr><th id="263">263</th><td><u>									\</u></td></tr>
<tr><th id="264">264</th><td><u>	if ((!_power_on || _tp-&gt;_name != <a class="local col0 ref" href="#338" title='_attr' data-ref="60_attr"><a class="local col1 ref" href="#339" title='_attr' data-ref="61_attr"><a class="local col2 ref" href="#340" title='_attr' data-ref="62_attr"><a class="local col3 ref" href="#341" title='_attr' data-ref="63_attr"><a class="local col4 ref" href="#342" title='_attr' data-ref="64_attr"><a class="local col5 ref" href="#343" title='_attr' data-ref="65_attr"><a class="local col6 ref" href="#344" title='_attr' data-ref="66_attr"><a class="local col7 ref" href="#345" title='_attr' data-ref="67_attr"><a class="local col8 ref" href="#346" title='_attr' data-ref="68_attr"><a class="local col9 ref" href="#347" title='_attr' data-ref="69_attr"><a class="local col0 ref" href="#348" title='_attr' data-ref="70_attr"><a class="local col1 ref" href="#351" title='_attr' data-ref="71_attr"><a class="local col2 ref" href="#352" title='_attr' data-ref="72_attr"><a class="local col3 ref" href="#353" title='_attr' data-ref="73_attr">_attr</a></a></a></a></a></a></a></a></a></a></a></a></a></a>-&gt;<a class="tu ref field" href="#trackpoint_attr_data::power_on_default" title='trackpoint_attr_data::power_on_default' data-use='r' data-ref="trackpoint_attr_data::power_on_default">power_on_default</a>) &amp;&amp;	\</u></td></tr>
<tr><th id="265">265</th><td><u>	    <a class="tu ref fn" href="#trackpoint_is_attr_available" title='trackpoint_is_attr_available' data-use='c' data-ref="trackpoint_is_attr_available">trackpoint_is_attr_available</a>(_psmouse,			\</u></td></tr>
<tr><th id="266">266</th><td><u>				&amp;psmouse_attr_##_name.<a class="ref field" href="psmouse.h.html#psmouse_attribute::dattr" title='psmouse_attribute::dattr' data-ref="psmouse_attribute::dattr">dattr</a>.<a class="ref field" href="../../../include/linux/device.h.html#device_attribute::attr" title='device_attribute::attr' data-ref="device_attribute::attr">attr</a>)) {	\</u></td></tr>
<tr><th id="267">267</th><td><u>		if (!<a class="local col0 ref" href="#338" title='_attr' data-ref="60_attr"><a class="local col1 ref" href="#339" title='_attr' data-ref="61_attr"><a class="local col2 ref" href="#340" title='_attr' data-ref="62_attr"><a class="local col3 ref" href="#341" title='_attr' data-ref="63_attr"><a class="local col4 ref" href="#342" title='_attr' data-ref="64_attr"><a class="local col5 ref" href="#343" title='_attr' data-ref="65_attr"><a class="local col6 ref" href="#344" title='_attr' data-ref="66_attr"><a class="local col7 ref" href="#345" title='_attr' data-ref="67_attr"><a class="local col8 ref" href="#346" title='_attr' data-ref="68_attr"><a class="local col9 ref" href="#347" title='_attr' data-ref="69_attr"><a class="local col0 ref" href="#348" title='_attr' data-ref="70_attr"><a class="local col1 ref" href="#351" title='_attr' data-ref="71_attr"><a class="local col2 ref" href="#352" title='_attr' data-ref="72_attr"><a class="local col3 ref" href="#353" title='_attr' data-ref="73_attr">_attr</a></a></a></a></a></a></a></a></a></a></a></a></a></a>-&gt;<a class="tu ref field" href="#trackpoint_attr_data::mask" title='trackpoint_attr_data::mask' data-use='r' data-ref="trackpoint_attr_data::mask">mask</a>)					\</u></td></tr>
<tr><th id="268">268</th><td><u>			<a class="tu ref fn" href="#trackpoint_write" title='trackpoint_write' data-use='c' data-ref="trackpoint_write">trackpoint_write</a>(&amp;_psmouse-&gt;<a class="ref field" href="psmouse.h.html#psmouse::ps2dev" title='psmouse::ps2dev' data-ref="psmouse::ps2dev">ps2dev</a>,		\</u></td></tr>
<tr><th id="269">269</th><td><u>					 <a class="local col0 ref" href="#338" title='_attr' data-ref="60_attr"><a class="local col1 ref" href="#339" title='_attr' data-ref="61_attr"><a class="local col2 ref" href="#340" title='_attr' data-ref="62_attr"><a class="local col3 ref" href="#341" title='_attr' data-ref="63_attr"><a class="local col4 ref" href="#342" title='_attr' data-ref="64_attr"><a class="local col5 ref" href="#343" title='_attr' data-ref="65_attr"><a class="local col6 ref" href="#344" title='_attr' data-ref="66_attr"><a class="local col7 ref" href="#345" title='_attr' data-ref="67_attr"><a class="local col8 ref" href="#346" title='_attr' data-ref="68_attr"><a class="local col9 ref" href="#347" title='_attr' data-ref="69_attr"><a class="local col0 ref" href="#348" title='_attr' data-ref="70_attr"><a class="local col1 ref" href="#351" title='_attr' data-ref="71_attr"><a class="local col2 ref" href="#352" title='_attr' data-ref="72_attr"><a class="local col3 ref" href="#353" title='_attr' data-ref="73_attr">_attr</a></a></a></a></a></a></a></a></a></a></a></a></a></a>-&gt;<a class="tu ref field" href="#trackpoint_attr_data::command" title='trackpoint_attr_data::command' data-use='r' data-ref="trackpoint_attr_data::command">command</a>, _tp-&gt;_name);	\</u></td></tr>
<tr><th id="270">270</th><td><u>		else							\</u></td></tr>
<tr><th id="271">271</th><td><u>			<a class="tu ref fn" href="#trackpoint_update_bit" title='trackpoint_update_bit' data-use='c' data-ref="trackpoint_update_bit">trackpoint_update_bit</a>(&amp;_psmouse-&gt;<a class="ref field" href="psmouse.h.html#psmouse::ps2dev" title='psmouse::ps2dev' data-ref="psmouse::ps2dev">ps2dev</a>,	\</u></td></tr>
<tr><th id="272">272</th><td><u>					<a class="local col0 ref" href="#338" title='_attr' data-ref="60_attr"><a class="local col1 ref" href="#339" title='_attr' data-ref="61_attr"><a class="local col2 ref" href="#340" title='_attr' data-ref="62_attr"><a class="local col3 ref" href="#341" title='_attr' data-ref="63_attr"><a class="local col4 ref" href="#342" title='_attr' data-ref="64_attr"><a class="local col5 ref" href="#343" title='_attr' data-ref="65_attr"><a class="local col6 ref" href="#344" title='_attr' data-ref="66_attr"><a class="local col7 ref" href="#345" title='_attr' data-ref="67_attr"><a class="local col8 ref" href="#346" title='_attr' data-ref="68_attr"><a class="local col9 ref" href="#347" title='_attr' data-ref="69_attr"><a class="local col0 ref" href="#348" title='_attr' data-ref="70_attr"><a class="local col1 ref" href="#351" title='_attr' data-ref="71_attr"><a class="local col2 ref" href="#352" title='_attr' data-ref="72_attr"><a class="local col3 ref" href="#353" title='_attr' data-ref="73_attr">_attr</a></a></a></a></a></a></a></a></a></a></a></a></a></a>-&gt;<a class="tu ref field" href="#trackpoint_attr_data::command" title='trackpoint_attr_data::command' data-use='r' data-ref="trackpoint_attr_data::command">command</a>, <a class="local col0 ref" href="#338" title='_attr' data-ref="60_attr"><a class="local col1 ref" href="#339" title='_attr' data-ref="61_attr"><a class="local col2 ref" href="#340" title='_attr' data-ref="62_attr"><a class="local col3 ref" href="#341" title='_attr' data-ref="63_attr"><a class="local col4 ref" href="#342" title='_attr' data-ref="64_attr"><a class="local col5 ref" href="#343" title='_attr' data-ref="65_attr"><a class="local col6 ref" href="#344" title='_attr' data-ref="66_attr"><a class="local col7 ref" href="#345" title='_attr' data-ref="67_attr"><a class="local col8 ref" href="#346" title='_attr' data-ref="68_attr"><a class="local col9 ref" href="#347" title='_attr' data-ref="69_attr"><a class="local col0 ref" href="#348" title='_attr' data-ref="70_attr"><a class="local col1 ref" href="#351" title='_attr' data-ref="71_attr"><a class="local col2 ref" href="#352" title='_attr' data-ref="72_attr"><a class="local col3 ref" href="#353" title='_attr' data-ref="73_attr">_attr</a></a></a></a></a></a></a></a></a></a></a></a></a></a>-&gt;<a class="tu ref field" href="#trackpoint_attr_data::mask" title='trackpoint_attr_data::mask' data-use='r' data-ref="trackpoint_attr_data::mask">mask</a>,	\</u></td></tr>
<tr><th id="273">273</th><td><u>					_tp-&gt;_name);			\</u></td></tr>
<tr><th id="274">274</th><td><u>	}								\</u></td></tr>
<tr><th id="275">275</th><td><u>} while (0)</u></td></tr>
<tr><th id="276">276</th><td></td></tr>
<tr><th id="277">277</th><td><u>#define <dfn class="macro" id="_M/TRACKPOINT_SET_POWER_ON_DEFAULT" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</dfn>(_tp, _name)			\</u></td></tr>
<tr><th id="278">278</th><td><u>do {									\</u></td></tr>
<tr><th id="279">279</th><td><u>	_tp-&gt;_name = trackpoint_attr_##_name.<a class="tu ref field" href="#trackpoint_attr_data::power_on_default" title='trackpoint_attr_data::power_on_default' data-use='r' data-ref="trackpoint_attr_data::power_on_default">power_on_default</a>;		\</u></td></tr>
<tr><th id="280">280</th><td><u>} while (0)</u></td></tr>
<tr><th id="281">281</th><td></td></tr>
<tr><th id="282">282</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="trackpoint_start_protocol" title='trackpoint_start_protocol' data-type='int trackpoint_start_protocol(struct psmouse * psmouse, u8 * variant_id, u8 * firmware_id)' data-ref="trackpoint_start_protocol">trackpoint_start_protocol</dfn>(<b>struct</b> <a class="type" href="psmouse.h.html#psmouse" title='psmouse' data-ref="psmouse">psmouse</a> *<dfn class="local col2 decl" id="52psmouse" title='psmouse' data-type='struct psmouse *' data-ref="52psmouse">psmouse</dfn>,</td></tr>
<tr><th id="283">283</th><td>				     <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> *<dfn class="local col3 decl" id="53variant_id" title='variant_id' data-type='u8 *' data-ref="53variant_id">variant_id</dfn>, <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> *<dfn class="local col4 decl" id="54firmware_id" title='firmware_id' data-type='u8 *' data-ref="54firmware_id">firmware_id</dfn>)</td></tr>
<tr><th id="284">284</th><td>{</td></tr>
<tr><th id="285">285</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col5 decl" id="55param" title='param' data-type='u8 [2]' data-ref="55param">param</dfn>[<var>2</var>] = { <var>0</var> };</td></tr>
<tr><th id="286">286</th><td>	<em>int</em> <dfn class="local col6 decl" id="56error" title='error' data-type='int' data-ref="56error">error</dfn>;</td></tr>
<tr><th id="287">287</th><td></td></tr>
<tr><th id="288">288</th><td>	<a class="local col6 ref" href="#56error" title='error' data-ref="56error">error</a> = <a class="ref fn" href="../../../include/linux/libps2.h.html#ps2_command" title='ps2_command' data-ref="ps2_command">ps2_command</a>(&amp;<a class="local col2 ref" href="#52psmouse" title='psmouse' data-ref="52psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::ps2dev" title='psmouse::ps2dev' data-ref="psmouse::ps2dev">ps2dev</a>,</td></tr>
<tr><th id="289">289</th><td>			    <a class="local col5 ref" href="#55param" title='param' data-ref="55param">param</a>, <a class="macro" href="trackpoint.h.html#143" title="((0&lt;&lt;12) | (2&lt;&lt;8) | (0xE1))" data-ref="_M/MAKE_PS2_CMD">MAKE_PS2_CMD</a>(<var>0</var>, <var>2</var>, <a class="macro" href="trackpoint.h.html#23" title="0xE1" data-ref="_M/TP_READ_ID">TP_READ_ID</a>));</td></tr>
<tr><th id="290">290</th><td>	<b>if</b> (<a class="local col6 ref" href="#56error" title='error' data-ref="56error">error</a>)</td></tr>
<tr><th id="291">291</th><td>		<b>return</b> <a class="local col6 ref" href="#56error" title='error' data-ref="56error">error</a>;</td></tr>
<tr><th id="292">292</th><td></td></tr>
<tr><th id="293">293</th><td>	<b>switch</b> (<a class="local col5 ref" href="#55param" title='param' data-ref="55param">param</a>[<var>0</var>]) {</td></tr>
<tr><th id="294">294</th><td>	<b>case</b> <a class="macro" href="trackpoint.h.html#30" title="0x01" data-ref="_M/TP_VARIANT_IBM">TP_VARIANT_IBM</a>:</td></tr>
<tr><th id="295">295</th><td>	<b>case</b> <a class="macro" href="trackpoint.h.html#31" title="0x02" data-ref="_M/TP_VARIANT_ALPS">TP_VARIANT_ALPS</a>:</td></tr>
<tr><th id="296">296</th><td>	<b>case</b> <a class="macro" href="trackpoint.h.html#32" title="0x03" data-ref="_M/TP_VARIANT_ELAN">TP_VARIANT_ELAN</a>:</td></tr>
<tr><th id="297">297</th><td>	<b>case</b> <a class="macro" href="trackpoint.h.html#33" title="0x04" data-ref="_M/TP_VARIANT_NXP">TP_VARIANT_NXP</a>:</td></tr>
<tr><th id="298">298</th><td>		<b>if</b> (<a class="local col3 ref" href="#53variant_id" title='variant_id' data-ref="53variant_id">variant_id</a>)</td></tr>
<tr><th id="299">299</th><td>			*<a class="local col3 ref" href="#53variant_id" title='variant_id' data-ref="53variant_id">variant_id</a> = <a class="local col5 ref" href="#55param" title='param' data-ref="55param">param</a>[<var>0</var>];</td></tr>
<tr><th id="300">300</th><td>		<b>if</b> (<a class="local col4 ref" href="#54firmware_id" title='firmware_id' data-ref="54firmware_id">firmware_id</a>)</td></tr>
<tr><th id="301">301</th><td>			*<a class="local col4 ref" href="#54firmware_id" title='firmware_id' data-ref="54firmware_id">firmware_id</a> = <a class="local col5 ref" href="#55param" title='param' data-ref="55param">param</a>[<var>1</var>];</td></tr>
<tr><th id="302">302</th><td>		<b>return</b> <var>0</var>;</td></tr>
<tr><th id="303">303</th><td>	}</td></tr>
<tr><th id="304">304</th><td></td></tr>
<tr><th id="305">305</th><td>	<b>return</b> -<a class="macro" href="../../../include/uapi/asm-generic/errno-base.h.html#23" title="19" data-ref="_M/ENODEV">ENODEV</a>;</td></tr>
<tr><th id="306">306</th><td>}</td></tr>
<tr><th id="307">307</th><td></td></tr>
<tr><th id="308">308</th><td><i  data-doc="trackpoint_sync">/*</i></td></tr>
<tr><th id="309">309</th><td><i  data-doc="trackpoint_sync"> * Write parameters to trackpad.</i></td></tr>
<tr><th id="310">310</th><td><i  data-doc="trackpoint_sync"> * in_power_on_state: Set to true if TP is in default / power-on state (ex. if</i></td></tr>
<tr><th id="311">311</th><td><i  data-doc="trackpoint_sync"> *		      power-on reset was run). If so, values will only be</i></td></tr>
<tr><th id="312">312</th><td><i  data-doc="trackpoint_sync"> *		      written to TP if they differ from power-on default.</i></td></tr>
<tr><th id="313">313</th><td><i  data-doc="trackpoint_sync"> */</i></td></tr>
<tr><th id="314">314</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="trackpoint_sync" title='trackpoint_sync' data-type='int trackpoint_sync(struct psmouse * psmouse, bool in_power_on_state)' data-ref="trackpoint_sync">trackpoint_sync</dfn>(<b>struct</b> <a class="type" href="psmouse.h.html#psmouse" title='psmouse' data-ref="psmouse">psmouse</a> *<dfn class="local col7 decl" id="57psmouse" title='psmouse' data-type='struct psmouse *' data-ref="57psmouse">psmouse</dfn>, <a class="typedef" href="../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="local col8 decl" id="58in_power_on_state" title='in_power_on_state' data-type='bool' data-ref="58in_power_on_state">in_power_on_state</dfn>)</td></tr>
<tr><th id="315">315</th><td>{</td></tr>
<tr><th id="316">316</th><td>	<b>struct</b> <a class="type" href="trackpoint.h.html#trackpoint_data" title='trackpoint_data' data-ref="trackpoint_data">trackpoint_data</a> *<dfn class="local col9 decl" id="59tp" title='tp' data-type='struct trackpoint_data *' data-ref="59tp">tp</dfn> = <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::private" title='psmouse::private' data-ref="psmouse::private">private</a>;</td></tr>
<tr><th id="317">317</th><td></td></tr>
<tr><th id="318">318</th><td>	<b>if</b> (!<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a> &amp;&amp; <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>-&gt;<a class="ref field" href="trackpoint.h.html#trackpoint_data::variant_id" title='trackpoint_data::variant_id' data-ref="trackpoint_data::variant_id">variant_id</a> == <a class="macro" href="trackpoint.h.html#30" title="0x01" data-ref="_M/TP_VARIANT_IBM">TP_VARIANT_IBM</a>) {</td></tr>
<tr><th id="319">319</th><td>		<i>/*</i></td></tr>
<tr><th id="320">320</th><td><i>		 * Disable features that may make device unusable</i></td></tr>
<tr><th id="321">321</th><td><i>		 * with this driver.</i></td></tr>
<tr><th id="322">322</th><td><i>		 */</i></td></tr>
<tr><th id="323">323</th><td>		<a class="tu ref fn" href="#trackpoint_update_bit" title='trackpoint_update_bit' data-use='c' data-ref="trackpoint_update_bit">trackpoint_update_bit</a>(&amp;<a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::ps2dev" title='psmouse::ps2dev' data-ref="psmouse::ps2dev">ps2dev</a>, <a class="macro" href="trackpoint.h.html#101" title="0x2D" data-ref="_M/TP_TOGGLE_TWOHAND">TP_TOGGLE_TWOHAND</a>,</td></tr>
<tr><th id="324">324</th><td>				      <a class="macro" href="trackpoint.h.html#102" title="0x01" data-ref="_M/TP_MASK_TWOHAND">TP_MASK_TWOHAND</a>, <a class="macro" href="trackpoint.h.html#140" title="0x00" data-ref="_M/TP_DEF_TWOHAND">TP_DEF_TWOHAND</a>);</td></tr>
<tr><th id="325">325</th><td></td></tr>
<tr><th id="326">326</th><td>		<a class="tu ref fn" href="#trackpoint_update_bit" title='trackpoint_update_bit' data-use='c' data-ref="trackpoint_update_bit">trackpoint_update_bit</a>(&amp;<a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::ps2dev" title='psmouse::ps2dev' data-ref="psmouse::ps2dev">ps2dev</a>, <a class="macro" href="trackpoint.h.html#107" title="0x20" data-ref="_M/TP_TOGGLE_SOURCE_TAG">TP_TOGGLE_SOURCE_TAG</a>,</td></tr>
<tr><th id="327">327</th><td>				      <a class="macro" href="trackpoint.h.html#109" title="0x80" data-ref="_M/TP_MASK_SOURCE_TAG">TP_MASK_SOURCE_TAG</a>, <a class="macro" href="trackpoint.h.html#141" title="0x00" data-ref="_M/TP_DEF_SOURCE_TAG">TP_DEF_SOURCE_TAG</a>);</td></tr>
<tr><th id="328">328</th><td></td></tr>
<tr><th id="329">329</th><td>		<a class="tu ref fn" href="#trackpoint_update_bit" title='trackpoint_update_bit' data-use='c' data-ref="trackpoint_update_bit">trackpoint_update_bit</a>(&amp;<a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::ps2dev" title='psmouse::ps2dev' data-ref="psmouse::ps2dev">ps2dev</a>, <a class="macro" href="trackpoint.h.html#89" title="0x23" data-ref="_M/TP_TOGGLE_MB">TP_TOGGLE_MB</a>,</td></tr>
<tr><th id="330">330</th><td>				      <a class="macro" href="trackpoint.h.html#90" title="0x01" data-ref="_M/TP_MASK_MB">TP_MASK_MB</a>, <a class="macro" href="trackpoint.h.html#136" title="0x00" data-ref="_M/TP_DEF_MB">TP_DEF_MB</a>);</td></tr>
<tr><th id="331">331</th><td>	}</td></tr>
<tr><th id="332">332</th><td></td></tr>
<tr><th id="333">333</th><td>	<i>/*</i></td></tr>
<tr><th id="334">334</th><td><i>	 * These properties can be changed in this driver. Only</i></td></tr>
<tr><th id="335">335</th><td><i>	 * configure them if the values are non-default or if the TP is in</i></td></tr>
<tr><th id="336">336</th><td><i>	 * an unknown state.</i></td></tr>
<tr><th id="337">337</th><td><i>	 */</i></td></tr>
<tr><th id="338">338</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_sensitivity; if ((!in_power_on_state || tp-&gt;sensitivity != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_sensitivity.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;sensitivity); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;sensitivity); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::sensitivity" title='trackpoint_data::sensitivity' data-ref="trackpoint_data::sensitivity">sensitivity</a>);</td></tr>
<tr><th id="339">339</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_inertia; if ((!in_power_on_state || tp-&gt;inertia != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_inertia.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;inertia); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;inertia); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::inertia" title='trackpoint_data::inertia' data-ref="trackpoint_data::inertia">inertia</a>);</td></tr>
<tr><th id="340">340</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_speed; if ((!in_power_on_state || tp-&gt;speed != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_speed.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;speed); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;speed); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::speed" title='trackpoint_data::speed' data-ref="trackpoint_data::speed">speed</a>);</td></tr>
<tr><th id="341">341</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_reach; if ((!in_power_on_state || tp-&gt;reach != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_reach.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;reach); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;reach); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::reach" title='trackpoint_data::reach' data-ref="trackpoint_data::reach">reach</a>);</td></tr>
<tr><th id="342">342</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_draghys; if ((!in_power_on_state || tp-&gt;draghys != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_draghys.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;draghys); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;draghys); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::draghys" title='trackpoint_data::draghys' data-ref="trackpoint_data::draghys">draghys</a>);</td></tr>
<tr><th id="343">343</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_mindrag; if ((!in_power_on_state || tp-&gt;mindrag != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_mindrag.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;mindrag); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;mindrag); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::mindrag" title='trackpoint_data::mindrag' data-ref="trackpoint_data::mindrag">mindrag</a>);</td></tr>
<tr><th id="344">344</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_thresh; if ((!in_power_on_state || tp-&gt;thresh != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_thresh.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;thresh); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;thresh); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::thresh" title='trackpoint_data::thresh' data-ref="trackpoint_data::thresh">thresh</a>);</td></tr>
<tr><th id="345">345</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_upthresh; if ((!in_power_on_state || tp-&gt;upthresh != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_upthresh.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;upthresh); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;upthresh); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::upthresh" title='trackpoint_data::upthresh' data-ref="trackpoint_data::upthresh">upthresh</a>);</td></tr>
<tr><th id="346">346</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_ztime; if ((!in_power_on_state || tp-&gt;ztime != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_ztime.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;ztime); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;ztime); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::ztime" title='trackpoint_data::ztime' data-ref="trackpoint_data::ztime">ztime</a>);</td></tr>
<tr><th id="347">347</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_jenks; if ((!in_power_on_state || tp-&gt;jenks != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_jenks.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;jenks); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;jenks); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::jenks" title='trackpoint_data::jenks' data-ref="trackpoint_data::jenks">jenks</a>);</td></tr>
<tr><th id="348">348</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_drift_time; if ((!in_power_on_state || tp-&gt;drift_time != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_drift_time.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;drift_time); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;drift_time); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::drift_time" title='trackpoint_data::drift_time' data-ref="trackpoint_data::drift_time">drift_time</a>);</td></tr>
<tr><th id="349">349</th><td></td></tr>
<tr><th id="350">350</th><td>	<i>/* toggles */</i></td></tr>
<tr><th id="351">351</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_press_to_select; if ((!in_power_on_state || tp-&gt;press_to_select != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_press_to_select.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;press_to_select); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;press_to_select); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::press_to_select" title='trackpoint_data::press_to_select' data-ref="trackpoint_data::press_to_select">press_to_select</a>);</td></tr>
<tr><th id="352">352</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_skipback; if ((!in_power_on_state || tp-&gt;skipback != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_skipback.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;skipback); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;skipback); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::skipback" title='trackpoint_data::skipback' data-ref="trackpoint_data::skipback">skipback</a>);</td></tr>
<tr><th id="353">353</th><td>	<a class="macro" href="#260" title="do { struct trackpoint_attr_data *_attr = &amp;trackpoint_attr_ext_dev; if ((!in_power_on_state || tp-&gt;ext_dev != _attr-&gt;power_on_default) &amp;&amp; trackpoint_is_attr_available(psmouse, &amp;psmouse_attr_ext_dev.dattr.attr)) { if (!_attr-&gt;mask) trackpoint_write(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, tp-&gt;ext_dev); else trackpoint_update_bit(&amp;psmouse-&gt;ps2dev, _attr-&gt;command, _attr-&gt;mask, tp-&gt;ext_dev); } } while (0)" data-ref="_M/TRACKPOINT_UPDATE">TRACKPOINT_UPDATE</a>(<a class="local col8 ref" href="#58in_power_on_state" title='in_power_on_state' data-ref="58in_power_on_state">in_power_on_state</a>, <a class="local col7 ref" href="#57psmouse" title='psmouse' data-ref="57psmouse">psmouse</a>, <a class="local col9 ref" href="#59tp" title='tp' data-ref="59tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::ext_dev" title='trackpoint_data::ext_dev' data-ref="trackpoint_data::ext_dev">ext_dev</a>);</td></tr>
<tr><th id="354">354</th><td></td></tr>
<tr><th id="355">355</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="356">356</th><td>}</td></tr>
<tr><th id="357">357</th><td></td></tr>
<tr><th id="358">358</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="trackpoint_defaults" title='trackpoint_defaults' data-type='void trackpoint_defaults(struct trackpoint_data * tp)' data-ref="trackpoint_defaults">trackpoint_defaults</dfn>(<b>struct</b> <a class="type" href="trackpoint.h.html#trackpoint_data" title='trackpoint_data' data-ref="trackpoint_data">trackpoint_data</a> *<dfn class="local col4 decl" id="74tp" title='tp' data-type='struct trackpoint_data *' data-ref="74tp">tp</dfn>)</td></tr>
<tr><th id="359">359</th><td>{</td></tr>
<tr><th id="360">360</th><td>	<a class="macro" href="#277" title="do { tp-&gt;sensitivity = trackpoint_attr_sensitivity.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::sensitivity" title='trackpoint_data::sensitivity' data-ref="trackpoint_data::sensitivity">sensitivity</a>);</td></tr>
<tr><th id="361">361</th><td>	<a class="macro" href="#277" title="do { tp-&gt;speed = trackpoint_attr_speed.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::speed" title='trackpoint_data::speed' data-ref="trackpoint_data::speed">speed</a>);</td></tr>
<tr><th id="362">362</th><td>	<a class="macro" href="#277" title="do { tp-&gt;reach = trackpoint_attr_reach.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::reach" title='trackpoint_data::reach' data-ref="trackpoint_data::reach">reach</a>);</td></tr>
<tr><th id="363">363</th><td>	<a class="macro" href="#277" title="do { tp-&gt;draghys = trackpoint_attr_draghys.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::draghys" title='trackpoint_data::draghys' data-ref="trackpoint_data::draghys">draghys</a>);</td></tr>
<tr><th id="364">364</th><td>	<a class="macro" href="#277" title="do { tp-&gt;mindrag = trackpoint_attr_mindrag.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::mindrag" title='trackpoint_data::mindrag' data-ref="trackpoint_data::mindrag">mindrag</a>);</td></tr>
<tr><th id="365">365</th><td>	<a class="macro" href="#277" title="do { tp-&gt;thresh = trackpoint_attr_thresh.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::thresh" title='trackpoint_data::thresh' data-ref="trackpoint_data::thresh">thresh</a>);</td></tr>
<tr><th id="366">366</th><td>	<a class="macro" href="#277" title="do { tp-&gt;upthresh = trackpoint_attr_upthresh.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::upthresh" title='trackpoint_data::upthresh' data-ref="trackpoint_data::upthresh">upthresh</a>);</td></tr>
<tr><th id="367">367</th><td>	<a class="macro" href="#277" title="do { tp-&gt;ztime = trackpoint_attr_ztime.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::ztime" title='trackpoint_data::ztime' data-ref="trackpoint_data::ztime">ztime</a>);</td></tr>
<tr><th id="368">368</th><td>	<a class="macro" href="#277" title="do { tp-&gt;jenks = trackpoint_attr_jenks.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::jenks" title='trackpoint_data::jenks' data-ref="trackpoint_data::jenks">jenks</a>);</td></tr>
<tr><th id="369">369</th><td>	<a class="macro" href="#277" title="do { tp-&gt;drift_time = trackpoint_attr_drift_time.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::drift_time" title='trackpoint_data::drift_time' data-ref="trackpoint_data::drift_time">drift_time</a>);</td></tr>
<tr><th id="370">370</th><td>	<a class="macro" href="#277" title="do { tp-&gt;inertia = trackpoint_attr_inertia.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::inertia" title='trackpoint_data::inertia' data-ref="trackpoint_data::inertia">inertia</a>);</td></tr>
<tr><th id="371">371</th><td></td></tr>
<tr><th id="372">372</th><td>	<i>/* toggles */</i></td></tr>
<tr><th id="373">373</th><td>	<a class="macro" href="#277" title="do { tp-&gt;press_to_select = trackpoint_attr_press_to_select.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::press_to_select" title='trackpoint_data::press_to_select' data-ref="trackpoint_data::press_to_select">press_to_select</a>);</td></tr>
<tr><th id="374">374</th><td>	<a class="macro" href="#277" title="do { tp-&gt;skipback = trackpoint_attr_skipback.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::skipback" title='trackpoint_data::skipback' data-ref="trackpoint_data::skipback">skipback</a>);</td></tr>
<tr><th id="375">375</th><td>	<a class="macro" href="#277" title="do { tp-&gt;ext_dev = trackpoint_attr_ext_dev.power_on_default; } while (0)" data-ref="_M/TRACKPOINT_SET_POWER_ON_DEFAULT">TRACKPOINT_SET_POWER_ON_DEFAULT</a>(<a class="local col4 ref" href="#74tp" title='tp' data-ref="74tp">tp</a>, <a class="ref field" href="trackpoint.h.html#trackpoint_data::ext_dev" title='trackpoint_data::ext_dev' data-ref="trackpoint_data::ext_dev">ext_dev</a>);</td></tr>
<tr><th id="376">376</th><td>}</td></tr>
<tr><th id="377">377</th><td></td></tr>
<tr><th id="378">378</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="trackpoint_disconnect" title='trackpoint_disconnect' data-type='void trackpoint_disconnect(struct psmouse * psmouse)' data-ref="trackpoint_disconnect">trackpoint_disconnect</dfn>(<b>struct</b> <a class="type" href="psmouse.h.html#psmouse" title='psmouse' data-ref="psmouse">psmouse</a> *<dfn class="local col5 decl" id="75psmouse" title='psmouse' data-type='struct psmouse *' data-ref="75psmouse">psmouse</dfn>)</td></tr>
<tr><th id="379">379</th><td>{</td></tr>
<tr><th id="380">380</th><td>	<a class="ref fn" href="../../../include/linux/device.h.html#device_remove_group" title='device_remove_group' data-ref="device_remove_group">device_remove_group</a>(&amp;<a class="local col5 ref" href="#75psmouse" title='psmouse' data-ref="75psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::ps2dev" title='psmouse::ps2dev' data-ref="psmouse::ps2dev">ps2dev</a>.<a class="ref field" href="../../../include/linux/libps2.h.html#ps2dev::serio" title='ps2dev::serio' data-ref="ps2dev::serio">serio</a>-&gt;<a class="ref field" href="../../../include/linux/serio.h.html#serio::dev" title='serio::dev' data-ref="serio::dev">dev</a>,</td></tr>
<tr><th id="381">381</th><td>			    &amp;<a class="tu ref" href="#trackpoint_attr_group" title='trackpoint_attr_group' data-use='a' data-ref="trackpoint_attr_group">trackpoint_attr_group</a>);</td></tr>
<tr><th id="382">382</th><td></td></tr>
<tr><th id="383">383</th><td>	<a class="ref fn" href="../../../include/linux/slab.h.html#kfree" title='kfree' data-ref="kfree">kfree</a>(<a class="local col5 ref" href="#75psmouse" title='psmouse' data-ref="75psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::private" title='psmouse::private' data-ref="psmouse::private">private</a>);</td></tr>
<tr><th id="384">384</th><td>	<a class="local col5 ref" href="#75psmouse" title='psmouse' data-ref="75psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::private" title='psmouse::private' data-ref="psmouse::private">private</a> = <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="385">385</th><td>}</td></tr>
<tr><th id="386">386</th><td></td></tr>
<tr><th id="387">387</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="trackpoint_reconnect" title='trackpoint_reconnect' data-type='int trackpoint_reconnect(struct psmouse * psmouse)' data-ref="trackpoint_reconnect">trackpoint_reconnect</dfn>(<b>struct</b> <a class="type" href="psmouse.h.html#psmouse" title='psmouse' data-ref="psmouse">psmouse</a> *<dfn class="local col6 decl" id="76psmouse" title='psmouse' data-type='struct psmouse *' data-ref="76psmouse">psmouse</dfn>)</td></tr>
<tr><th id="388">388</th><td>{</td></tr>
<tr><th id="389">389</th><td>	<b>struct</b> <a class="type" href="trackpoint.h.html#trackpoint_data" title='trackpoint_data' data-ref="trackpoint_data">trackpoint_data</a> *<dfn class="local col7 decl" id="77tp" title='tp' data-type='struct trackpoint_data *' data-ref="77tp">tp</dfn> = <a class="local col6 ref" href="#76psmouse" title='psmouse' data-ref="76psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::private" title='psmouse::private' data-ref="psmouse::private">private</a>;</td></tr>
<tr><th id="390">390</th><td>	<em>int</em> <dfn class="local col8 decl" id="78error" title='error' data-type='int' data-ref="78error">error</dfn>;</td></tr>
<tr><th id="391">391</th><td>	<a class="typedef" href="../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="local col9 decl" id="79was_reset" title='was_reset' data-type='bool' data-ref="79was_reset">was_reset</dfn>;</td></tr>
<tr><th id="392">392</th><td></td></tr>
<tr><th id="393">393</th><td>	<a class="local col8 ref" href="#78error" title='error' data-ref="78error">error</a> = <a class="tu ref fn" href="#trackpoint_start_protocol" title='trackpoint_start_protocol' data-use='c' data-ref="trackpoint_start_protocol">trackpoint_start_protocol</a>(<a class="local col6 ref" href="#76psmouse" title='psmouse' data-ref="76psmouse">psmouse</a>, <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>);</td></tr>
<tr><th id="394">394</th><td>	<b>if</b> (<a class="local col8 ref" href="#78error" title='error' data-ref="78error">error</a>)</td></tr>
<tr><th id="395">395</th><td>		<b>return</b> <a class="local col8 ref" href="#78error" title='error' data-ref="78error">error</a>;</td></tr>
<tr><th id="396">396</th><td></td></tr>
<tr><th id="397">397</th><td>	<a class="local col9 ref" href="#79was_reset" title='was_reset' data-ref="79was_reset">was_reset</a> = <a class="local col7 ref" href="#77tp" title='tp' data-ref="77tp">tp</a>-&gt;<a class="ref field" href="trackpoint.h.html#trackpoint_data::variant_id" title='trackpoint_data::variant_id' data-ref="trackpoint_data::variant_id">variant_id</a> == <a class="macro" href="trackpoint.h.html#30" title="0x01" data-ref="_M/TP_VARIANT_IBM">TP_VARIANT_IBM</a> &amp;&amp;</td></tr>
<tr><th id="398">398</th><td>		    <a class="tu ref fn" href="#trackpoint_power_on_reset" title='trackpoint_power_on_reset' data-use='c' data-ref="trackpoint_power_on_reset">trackpoint_power_on_reset</a>(&amp;<a class="local col6 ref" href="#76psmouse" title='psmouse' data-ref="76psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::ps2dev" title='psmouse::ps2dev' data-ref="psmouse::ps2dev">ps2dev</a>) == <var>0</var>;</td></tr>
<tr><th id="399">399</th><td></td></tr>
<tr><th id="400">400</th><td>	<a class="local col8 ref" href="#78error" title='error' data-ref="78error">error</a> = <a class="tu ref fn" href="#trackpoint_sync" title='trackpoint_sync' data-use='c' data-ref="trackpoint_sync">trackpoint_sync</a>(<a class="local col6 ref" href="#76psmouse" title='psmouse' data-ref="76psmouse">psmouse</a>, <a class="local col9 ref" href="#79was_reset" title='was_reset' data-ref="79was_reset">was_reset</a>);</td></tr>
<tr><th id="401">401</th><td>	<b>if</b> (<a class="local col8 ref" href="#78error" title='error' data-ref="78error">error</a>)</td></tr>
<tr><th id="402">402</th><td>		<b>return</b> <a class="local col8 ref" href="#78error" title='error' data-ref="78error">error</a>;</td></tr>
<tr><th id="403">403</th><td></td></tr>
<tr><th id="404">404</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="405">405</th><td>}</td></tr>
<tr><th id="406">406</th><td></td></tr>
<tr><th id="407">407</th><td><em>int</em> <dfn class="decl def fn" id="trackpoint_detect" title='trackpoint_detect' data-ref="trackpoint_detect">trackpoint_detect</dfn>(<b>struct</b> <a class="type" href="psmouse.h.html#psmouse" title='psmouse' data-ref="psmouse">psmouse</a> *<dfn class="local col0 decl" id="80psmouse" title='psmouse' data-type='struct psmouse *' data-ref="80psmouse">psmouse</dfn>, <a class="typedef" href="../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="local col1 decl" id="81set_properties" title='set_properties' data-type='bool' data-ref="81set_properties">set_properties</dfn>)</td></tr>
<tr><th id="408">408</th><td>{</td></tr>
<tr><th id="409">409</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/libps2.h.html#ps2dev" title='ps2dev' data-ref="ps2dev">ps2dev</a> *<dfn class="local col2 decl" id="82ps2dev" title='ps2dev' data-type='struct ps2dev *' data-ref="82ps2dev">ps2dev</dfn> = &amp;<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::ps2dev" title='psmouse::ps2dev' data-ref="psmouse::ps2dev">ps2dev</a>;</td></tr>
<tr><th id="410">410</th><td>	<b>struct</b> <a class="type" href="trackpoint.h.html#trackpoint_data" title='trackpoint_data' data-ref="trackpoint_data">trackpoint_data</a> *<dfn class="local col3 decl" id="83tp" title='tp' data-type='struct trackpoint_data *' data-ref="83tp">tp</dfn>;</td></tr>
<tr><th id="411">411</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col4 decl" id="84variant_id" title='variant_id' data-type='u8' data-ref="84variant_id">variant_id</dfn>;</td></tr>
<tr><th id="412">412</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col5 decl" id="85firmware_id" title='firmware_id' data-type='u8' data-ref="85firmware_id">firmware_id</dfn>;</td></tr>
<tr><th id="413">413</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> <dfn class="local col6 decl" id="86button_info" title='button_info' data-type='u8' data-ref="86button_info">button_info</dfn>;</td></tr>
<tr><th id="414">414</th><td>	<em>int</em> <dfn class="local col7 decl" id="87error" title='error' data-type='int' data-ref="87error">error</dfn>;</td></tr>
<tr><th id="415">415</th><td></td></tr>
<tr><th id="416">416</th><td>	<a class="local col7 ref" href="#87error" title='error' data-ref="87error">error</a> = <a class="tu ref fn" href="#trackpoint_start_protocol" title='trackpoint_start_protocol' data-use='c' data-ref="trackpoint_start_protocol">trackpoint_start_protocol</a>(<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>, &amp;<a class="local col4 ref" href="#84variant_id" title='variant_id' data-ref="84variant_id">variant_id</a>, &amp;<a class="local col5 ref" href="#85firmware_id" title='firmware_id' data-ref="85firmware_id">firmware_id</a>);</td></tr>
<tr><th id="417">417</th><td>	<b>if</b> (<a class="local col7 ref" href="#87error" title='error' data-ref="87error">error</a>)</td></tr>
<tr><th id="418">418</th><td>		<b>return</b> <a class="local col7 ref" href="#87error" title='error' data-ref="87error">error</a>;</td></tr>
<tr><th id="419">419</th><td></td></tr>
<tr><th id="420">420</th><td>	<b>if</b> (!<a class="local col1 ref" href="#81set_properties" title='set_properties' data-ref="81set_properties">set_properties</a>)</td></tr>
<tr><th id="421">421</th><td>		<b>return</b> <var>0</var>;</td></tr>
<tr><th id="422">422</th><td></td></tr>
<tr><th id="423">423</th><td>	<a class="local col3 ref" href="#83tp" title='tp' data-ref="83tp">tp</a> = <a class="ref fn" href="../../../include/linux/slab.h.html#kzalloc" title='kzalloc' data-ref="kzalloc">kzalloc</a>(<b>sizeof</b>(*<a class="local col3 ref" href="#83tp" title='tp' data-ref="83tp">tp</a>), <a class="macro" href="../../../include/linux/gfp.h.html#278" title="((( gfp_t)(0x400000u|0x1000000u)) | (( gfp_t)0x40u) | (( gfp_t)0x80u))" data-ref="_M/GFP_KERNEL">GFP_KERNEL</a>);</td></tr>
<tr><th id="424">424</th><td>	<b>if</b> (!<a class="local col3 ref" href="#83tp" title='tp' data-ref="83tp">tp</a>)</td></tr>
<tr><th id="425">425</th><td>		<b>return</b> -<a class="macro" href="../../../include/uapi/asm-generic/errno-base.h.html#16" title="12" data-ref="_M/ENOMEM">ENOMEM</a>;</td></tr>
<tr><th id="426">426</th><td></td></tr>
<tr><th id="427">427</th><td>	<a class="tu ref fn" href="#trackpoint_defaults" title='trackpoint_defaults' data-use='c' data-ref="trackpoint_defaults">trackpoint_defaults</a>(<a class="local col3 ref" href="#83tp" title='tp' data-ref="83tp">tp</a>);</td></tr>
<tr><th id="428">428</th><td>	<a class="local col3 ref" href="#83tp" title='tp' data-ref="83tp">tp</a>-&gt;<a class="ref field" href="trackpoint.h.html#trackpoint_data::variant_id" title='trackpoint_data::variant_id' data-ref="trackpoint_data::variant_id">variant_id</a> = <a class="local col4 ref" href="#84variant_id" title='variant_id' data-ref="84variant_id">variant_id</a>;</td></tr>
<tr><th id="429">429</th><td>	<a class="local col3 ref" href="#83tp" title='tp' data-ref="83tp">tp</a>-&gt;<a class="ref field" href="trackpoint.h.html#trackpoint_data::firmware_id" title='trackpoint_data::firmware_id' data-ref="trackpoint_data::firmware_id">firmware_id</a> = <a class="local col5 ref" href="#85firmware_id" title='firmware_id' data-ref="85firmware_id">firmware_id</a>;</td></tr>
<tr><th id="430">430</th><td></td></tr>
<tr><th id="431">431</th><td>	<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::private" title='psmouse::private' data-ref="psmouse::private">private</a> = <a class="local col3 ref" href="#83tp" title='tp' data-ref="83tp">tp</a>;</td></tr>
<tr><th id="432">432</th><td></td></tr>
<tr><th id="433">433</th><td>	<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::vendor" title='psmouse::vendor' data-ref="psmouse::vendor">vendor</a> = <a class="tu ref" href="#trackpoint_variants" title='trackpoint_variants' data-use='r' data-ref="trackpoint_variants">trackpoint_variants</a>[<a class="local col4 ref" href="#84variant_id" title='variant_id' data-ref="84variant_id">variant_id</a>];</td></tr>
<tr><th id="434">434</th><td>	<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::name" title='psmouse::name' data-ref="psmouse::name">name</a> = <q>"TrackPoint"</q>;</td></tr>
<tr><th id="435">435</th><td></td></tr>
<tr><th id="436">436</th><td>	<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::reconnect" title='psmouse::reconnect' data-ref="psmouse::reconnect">reconnect</a> = <a class="tu ref fn" href="#trackpoint_reconnect" title='trackpoint_reconnect' data-use='r' data-ref="trackpoint_reconnect">trackpoint_reconnect</a>;</td></tr>
<tr><th id="437">437</th><td>	<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::disconnect" title='psmouse::disconnect' data-ref="psmouse::disconnect">disconnect</a> = <a class="tu ref fn" href="#trackpoint_disconnect" title='trackpoint_disconnect' data-use='r' data-ref="trackpoint_disconnect">trackpoint_disconnect</a>;</td></tr>
<tr><th id="438">438</th><td></td></tr>
<tr><th id="439">439</th><td>	<b>if</b> (<a class="local col4 ref" href="#84variant_id" title='variant_id' data-ref="84variant_id">variant_id</a> != <a class="macro" href="trackpoint.h.html#30" title="0x01" data-ref="_M/TP_VARIANT_IBM">TP_VARIANT_IBM</a>) {</td></tr>
<tr><th id="440">440</th><td>		<i>/* Newer variants do not support extended button query. */</i></td></tr>
<tr><th id="441">441</th><td>		<a class="local col6 ref" href="#86button_info" title='button_info' data-ref="86button_info">button_info</a> = <var>0x33</var>;</td></tr>
<tr><th id="442">442</th><td>	} <b>else</b> {</td></tr>
<tr><th id="443">443</th><td>		<a class="local col7 ref" href="#87error" title='error' data-ref="87error">error</a> = <a class="tu ref fn" href="#trackpoint_read" title='trackpoint_read' data-use='c' data-ref="trackpoint_read">trackpoint_read</a>(<a class="local col2 ref" href="#82ps2dev" title='ps2dev' data-ref="82ps2dev">ps2dev</a>, <a class="macro" href="trackpoint.h.html#41" title="0x4B" data-ref="_M/TP_EXT_BTN">TP_EXT_BTN</a>, &amp;<a class="local col6 ref" href="#86button_info" title='button_info' data-ref="86button_info">button_info</a>);</td></tr>
<tr><th id="444">444</th><td>		<b>if</b> (<a class="local col7 ref" href="#87error" title='error' data-ref="87error">error</a>) {</td></tr>
<tr><th id="445">445</th><td>			<a class="macro" href="psmouse.h.html#200" title="dev_warn(&amp;(psmouse)-&gt;ps2dev.serio-&gt;dev, &quot;trackpoint&quot; &quot;: &quot; &quot;failed to get extended button data, assuming 3 buttons\n&quot;)" data-ref="_M/psmouse_warn">psmouse_warn</a>(<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>,</td></tr>
<tr><th id="446">446</th><td>				     <q>"failed to get extended button data, assuming 3 buttons\n"</q>);</td></tr>
<tr><th id="447">447</th><td>			<a class="local col6 ref" href="#86button_info" title='button_info' data-ref="86button_info">button_info</a> = <var>0x33</var>;</td></tr>
<tr><th id="448">448</th><td>		} <b>else</b> <b>if</b> (!<a class="local col6 ref" href="#86button_info" title='button_info' data-ref="86button_info">button_info</a>) {</td></tr>
<tr><th id="449">449</th><td>			<a class="macro" href="psmouse.h.html#200" title="dev_warn(&amp;(psmouse)-&gt;ps2dev.serio-&gt;dev, &quot;trackpoint&quot; &quot;: &quot; &quot;got 0 in extended button data, assuming 3 buttons\n&quot;)" data-ref="_M/psmouse_warn">psmouse_warn</a>(<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>,</td></tr>
<tr><th id="450">450</th><td>				     <q>"got 0 in extended button data, assuming 3 buttons\n"</q>);</td></tr>
<tr><th id="451">451</th><td>			<a class="local col6 ref" href="#86button_info" title='button_info' data-ref="86button_info">button_info</a> = <var>0x33</var>;</td></tr>
<tr><th id="452">452</th><td>		}</td></tr>
<tr><th id="453">453</th><td>	}</td></tr>
<tr><th id="454">454</th><td></td></tr>
<tr><th id="455">455</th><td>	<b>if</b> ((<a class="local col6 ref" href="#86button_info" title='button_info' data-ref="86button_info">button_info</a> &amp; <var>0x0f</var>) &gt;= <var>3</var>)</td></tr>
<tr><th id="456">456</th><td>		<a class="ref fn" href="../../../include/linux/input.h.html#input_set_capability" title='input_set_capability' data-ref="input_set_capability">input_set_capability</a>(<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::dev" title='psmouse::dev' data-ref="psmouse::dev">dev</a>, <a class="macro" href="../../../include/uapi/linux/input-event-codes.h.html#39" title="0x01" data-ref="_M/EV_KEY">EV_KEY</a>, <a class="macro" href="../../../include/uapi/linux/input-event-codes.h.html#357" title="0x112" data-ref="_M/BTN_MIDDLE">BTN_MIDDLE</a>);</td></tr>
<tr><th id="457">457</th><td></td></tr>
<tr><th id="458">458</th><td>	<a class="ref fn" href="../../../arch/x86/include/asm/bitops.h.html#__set_bit" title='__set_bit' data-ref="__set_bit">__set_bit</a>(<a class="macro" href="../../../include/uapi/linux/input-event-codes.h.html#23" title="0x00" data-ref="_M/INPUT_PROP_POINTER">INPUT_PROP_POINTER</a>, <a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::dev" title='psmouse::dev' data-ref="psmouse::dev">dev</a>-&gt;<a class="ref field" href="../../../include/linux/input.h.html#input_dev::propbit" title='input_dev::propbit' data-ref="input_dev::propbit">propbit</a>);</td></tr>
<tr><th id="459">459</th><td>	<a class="ref fn" href="../../../arch/x86/include/asm/bitops.h.html#__set_bit" title='__set_bit' data-ref="__set_bit">__set_bit</a>(<a class="macro" href="../../../include/uapi/linux/input-event-codes.h.html#28" title="0x05" data-ref="_M/INPUT_PROP_POINTING_STICK">INPUT_PROP_POINTING_STICK</a>, <a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::dev" title='psmouse::dev' data-ref="psmouse::dev">dev</a>-&gt;<a class="ref field" href="../../../include/linux/input.h.html#input_dev::propbit" title='input_dev::propbit' data-ref="input_dev::propbit">propbit</a>);</td></tr>
<tr><th id="460">460</th><td></td></tr>
<tr><th id="461">461</th><td>	<b>if</b> (<a class="local col4 ref" href="#84variant_id" title='variant_id' data-ref="84variant_id">variant_id</a> != <a class="macro" href="trackpoint.h.html#30" title="0x01" data-ref="_M/TP_VARIANT_IBM">TP_VARIANT_IBM</a> ||</td></tr>
<tr><th id="462">462</th><td>	    <a class="tu ref fn" href="#trackpoint_power_on_reset" title='trackpoint_power_on_reset' data-use='c' data-ref="trackpoint_power_on_reset">trackpoint_power_on_reset</a>(<a class="local col2 ref" href="#82ps2dev" title='ps2dev' data-ref="82ps2dev">ps2dev</a>) != <var>0</var>) {</td></tr>
<tr><th id="463">463</th><td>		<i>/*</i></td></tr>
<tr><th id="464">464</th><td><i>		 * Write defaults to TP if we did not reset the trackpoint.</i></td></tr>
<tr><th id="465">465</th><td><i>		 */</i></td></tr>
<tr><th id="466">466</th><td>		<a class="tu ref fn" href="#trackpoint_sync" title='trackpoint_sync' data-use='c' data-ref="trackpoint_sync">trackpoint_sync</a>(<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>, <a class="enum" href="../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>);</td></tr>
<tr><th id="467">467</th><td>	}</td></tr>
<tr><th id="468">468</th><td></td></tr>
<tr><th id="469">469</th><td>	<a class="local col7 ref" href="#87error" title='error' data-ref="87error">error</a> = <a class="ref fn" href="../../../include/linux/device.h.html#device_add_group" title='device_add_group' data-ref="device_add_group">device_add_group</a>(&amp;<a class="local col2 ref" href="#82ps2dev" title='ps2dev' data-ref="82ps2dev">ps2dev</a>-&gt;<a class="ref field" href="../../../include/linux/libps2.h.html#ps2dev::serio" title='ps2dev::serio' data-ref="ps2dev::serio">serio</a>-&gt;<a class="ref field" href="../../../include/linux/serio.h.html#serio::dev" title='serio::dev' data-ref="serio::dev">dev</a>, &amp;<a class="tu ref" href="#trackpoint_attr_group" title='trackpoint_attr_group' data-use='a' data-ref="trackpoint_attr_group">trackpoint_attr_group</a>);</td></tr>
<tr><th id="470">470</th><td>	<b>if</b> (<a class="local col7 ref" href="#87error" title='error' data-ref="87error">error</a>) {</td></tr>
<tr><th id="471">471</th><td>		<a class="macro" href="psmouse.h.html#203" title="dev_err(&amp;(psmouse)-&gt;ps2dev.serio-&gt;dev, &quot;trackpoint&quot; &quot;: &quot; &quot;failed to create sysfs attributes, error: %d\n&quot;, error)" data-ref="_M/psmouse_err">psmouse_err</a>(<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>,</td></tr>
<tr><th id="472">472</th><td>			    <q>"failed to create sysfs attributes, error: %d\n"</q>,</td></tr>
<tr><th id="473">473</th><td>			    <a class="local col7 ref" href="#87error" title='error' data-ref="87error">error</a>);</td></tr>
<tr><th id="474">474</th><td>		<a class="ref fn" href="../../../include/linux/slab.h.html#kfree" title='kfree' data-ref="kfree">kfree</a>(<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::private" title='psmouse::private' data-ref="psmouse::private">private</a>);</td></tr>
<tr><th id="475">475</th><td>		<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::private" title='psmouse::private' data-ref="psmouse::private">private</a> = <a class="macro" href="../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="476">476</th><td>		<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="477">477</th><td>	}</td></tr>
<tr><th id="478">478</th><td></td></tr>
<tr><th id="479">479</th><td>	<a class="macro" href="psmouse.h.html#197" title="_dev_info(&amp;(psmouse)-&gt;ps2dev.serio-&gt;dev, &quot;trackpoint&quot; &quot;: &quot; &quot;%s TrackPoint firmware: 0x%02x, buttons: %d/%d\n&quot;, psmouse-&gt;vendor, firmware_id, (button_info &amp; 0xf0) &gt;&gt; 4, button_info &amp; 0x0f)" data-ref="_M/psmouse_info">psmouse_info</a>(<a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>,</td></tr>
<tr><th id="480">480</th><td>		     <q>"%s TrackPoint firmware: 0x%02x, buttons: %d/%d\n"</q>,</td></tr>
<tr><th id="481">481</th><td>		     <a class="local col0 ref" href="#80psmouse" title='psmouse' data-ref="80psmouse">psmouse</a>-&gt;<a class="ref field" href="psmouse.h.html#psmouse::vendor" title='psmouse::vendor' data-ref="psmouse::vendor">vendor</a>, <a class="local col5 ref" href="#85firmware_id" title='firmware_id' data-ref="85firmware_id">firmware_id</a>,</td></tr>
<tr><th id="482">482</th><td>		     (<a class="local col6 ref" href="#86button_info" title='button_info' data-ref="86button_info">button_info</a> &amp; <var>0xf0</var>) &gt;&gt; <var>4</var>, <a class="local col6 ref" href="#86button_info" title='button_info' data-ref="86button_info">button_info</a> &amp; <var>0x0f</var>);</td></tr>
<tr><th id="483">483</th><td></td></tr>
<tr><th id="484">484</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="485">485</th><td>}</td></tr>
<tr><th id="486">486</th><td></td></tr>
<tr><th id="487">487</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2018-Aug-05</em> from project linux-4.14.y revision <em>linux-4.14.y</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
