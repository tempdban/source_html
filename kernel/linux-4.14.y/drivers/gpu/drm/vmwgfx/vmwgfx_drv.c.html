<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>vmwgfx_drv.c source code [linux-4.14.y/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'linux-4.14.y/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c'; var root_path = '../../../../..'; var data_path = '../../../../../../data';</script>
<script src='../../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../..'>linux-4.14.y</a>/<a href='../../..'>drivers</a>/<a href='../..'>gpu</a>/<a href='..'>drm</a>/<a href='./'>vmwgfx</a>/<a href='vmwgfx_drv.c.html'>vmwgfx_drv.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/**************************************************************************</i></td></tr>
<tr><th id="2">2</th><td><i> *</i></td></tr>
<tr><th id="3">3</th><td><i> * Copyright Â© 2009-2016 VMware, Inc., Palo Alto, CA., USA</i></td></tr>
<tr><th id="4">4</th><td><i> * All Rights Reserved.</i></td></tr>
<tr><th id="5">5</th><td><i> *</i></td></tr>
<tr><th id="6">6</th><td><i> * Permission is hereby granted, free of charge, to any person obtaining a</i></td></tr>
<tr><th id="7">7</th><td><i> * copy of this software and associated documentation files (the</i></td></tr>
<tr><th id="8">8</th><td><i> * "Software"), to deal in the Software without restriction, including</i></td></tr>
<tr><th id="9">9</th><td><i> * without limitation the rights to use, copy, modify, merge, publish,</i></td></tr>
<tr><th id="10">10</th><td><i> * distribute, sub license, and/or sell copies of the Software, and to</i></td></tr>
<tr><th id="11">11</th><td><i> * permit persons to whom the Software is furnished to do so, subject to</i></td></tr>
<tr><th id="12">12</th><td><i> * the following conditions:</i></td></tr>
<tr><th id="13">13</th><td><i> *</i></td></tr>
<tr><th id="14">14</th><td><i> * The above copyright notice and this permission notice (including the</i></td></tr>
<tr><th id="15">15</th><td><i> * next paragraph) shall be included in all copies or substantial portions</i></td></tr>
<tr><th id="16">16</th><td><i> * of the Software.</i></td></tr>
<tr><th id="17">17</th><td><i> *</i></td></tr>
<tr><th id="18">18</th><td><i> * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</i></td></tr>
<tr><th id="19">19</th><td><i> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</i></td></tr>
<tr><th id="20">20</th><td><i> * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL</i></td></tr>
<tr><th id="21">21</th><td><i> * THE COPYRIGHT HOLDERS, AUTHORS AND/OR ITS SUPPLIERS BE LIABLE FOR ANY CLAIM,</i></td></tr>
<tr><th id="22">22</th><td><i> * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR</i></td></tr>
<tr><th id="23">23</th><td><i> * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE</i></td></tr>
<tr><th id="24">24</th><td><i> * USE OR OTHER DEALINGS IN THE SOFTWARE.</i></td></tr>
<tr><th id="25">25</th><td><i> *</i></td></tr>
<tr><th id="26">26</th><td><i> **************************************************************************/</i></td></tr>
<tr><th id="27">27</th><td><u>#include <a href="../../../../include/linux/module.h.html">&lt;linux/module.h&gt;</a></u></td></tr>
<tr><th id="28">28</th><td><u>#include <a href="../../../../include/linux/console.h.html">&lt;linux/console.h&gt;</a></u></td></tr>
<tr><th id="29">29</th><td></td></tr>
<tr><th id="30">30</th><td><u>#include <a href="../../../../include/drm/drmP.h.html">&lt;drm/drmP.h&gt;</a></u></td></tr>
<tr><th id="31">31</th><td><u>#include <a href="vmwgfx_drv.h.html">"vmwgfx_drv.h"</a></u></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="vmwgfx_binding.h.html">"vmwgfx_binding.h"</a></u></td></tr>
<tr><th id="33">33</th><td><u>#include <a href="../../../../include/drm/ttm/ttm_placement.h.html">&lt;drm/ttm/ttm_placement.h&gt;</a></u></td></tr>
<tr><th id="34">34</th><td><u>#include <a href="../../../../include/drm/ttm/ttm_bo_driver.h.html">&lt;drm/ttm/ttm_bo_driver.h&gt;</a></u></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="../../../../include/drm/ttm/ttm_object.h.html">&lt;drm/ttm/ttm_object.h&gt;</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="../../../../include/drm/ttm/ttm_module.h.html">&lt;drm/ttm/ttm_module.h&gt;</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../../../../include/linux/dma_remapping.h.html">&lt;linux/dma_remapping.h&gt;</a></u></td></tr>
<tr><th id="38">38</th><td></td></tr>
<tr><th id="39">39</th><td><u>#define <dfn class="macro" id="_M/VMWGFX_DRIVER_DESC" data-ref="_M/VMWGFX_DRIVER_DESC">VMWGFX_DRIVER_DESC</dfn> "Linux drm driver for VMware graphics devices"</u></td></tr>
<tr><th id="40">40</th><td><u>#define <dfn class="macro" id="_M/VMWGFX_CHIP_SVGAII" data-ref="_M/VMWGFX_CHIP_SVGAII">VMWGFX_CHIP_SVGAII</dfn> 0</u></td></tr>
<tr><th id="41">41</th><td><u>#define <dfn class="macro" id="_M/VMW_FB_RESERVATION" data-ref="_M/VMW_FB_RESERVATION">VMW_FB_RESERVATION</dfn> 0</u></td></tr>
<tr><th id="42">42</th><td></td></tr>
<tr><th id="43">43</th><td><u>#define <dfn class="macro" id="_M/VMW_MIN_INITIAL_WIDTH" data-ref="_M/VMW_MIN_INITIAL_WIDTH">VMW_MIN_INITIAL_WIDTH</dfn> 800</u></td></tr>
<tr><th id="44">44</th><td><u>#define <dfn class="macro" id="_M/VMW_MIN_INITIAL_HEIGHT" data-ref="_M/VMW_MIN_INITIAL_HEIGHT">VMW_MIN_INITIAL_HEIGHT</dfn> 600</u></td></tr>
<tr><th id="45">45</th><td></td></tr>
<tr><th id="46">46</th><td><u>#<span data-ppcond="46">ifndef</span> <span class="macro" data-ref="_M/VMWGFX_GIT_VERSION">VMWGFX_GIT_VERSION</span></u></td></tr>
<tr><th id="47">47</th><td><u>#define <dfn class="macro" id="_M/VMWGFX_GIT_VERSION" data-ref="_M/VMWGFX_GIT_VERSION">VMWGFX_GIT_VERSION</dfn> "Unknown"</u></td></tr>
<tr><th id="48">48</th><td><u>#<span data-ppcond="46">endif</span></u></td></tr>
<tr><th id="49">49</th><td></td></tr>
<tr><th id="50">50</th><td><u>#define <dfn class="macro" id="_M/VMWGFX_REPO" data-ref="_M/VMWGFX_REPO">VMWGFX_REPO</dfn> "In Tree"</u></td></tr>
<tr><th id="51">51</th><td></td></tr>
<tr><th id="52">52</th><td></td></tr>
<tr><th id="53">53</th><td><i class="doc">/**</i></td></tr>
<tr><th id="54">54</th><td><i class="doc"> * Fully encoded drm commands. Might move to vmw_drm.h</i></td></tr>
<tr><th id="55">55</th><td><i class="doc"> */</i></td></tr>
<tr><th id="56">56</th><td></td></tr>
<tr><th id="57">57</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_GET_PARAM" data-ref="_M/DRM_IOCTL_VMW_GET_PARAM">DRM_IOCTL_VMW_GET_PARAM</dfn>					\</u></td></tr>
<tr><th id="58">58</th><td><u>	DRM_IOWR(DRM_COMMAND_BASE + DRM_VMW_GET_PARAM,		\</u></td></tr>
<tr><th id="59">59</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_getparam_arg" title='drm_vmw_getparam_arg' data-ref="drm_vmw_getparam_arg">drm_vmw_getparam_arg</a>)</u></td></tr>
<tr><th id="60">60</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_ALLOC_DMABUF" data-ref="_M/DRM_IOCTL_VMW_ALLOC_DMABUF">DRM_IOCTL_VMW_ALLOC_DMABUF</dfn>				\</u></td></tr>
<tr><th id="61">61</th><td><u>	DRM_IOWR(DRM_COMMAND_BASE + DRM_VMW_ALLOC_DMABUF,	\</u></td></tr>
<tr><th id="62">62</th><td><u>		union <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_alloc_dmabuf_arg" title='drm_vmw_alloc_dmabuf_arg' data-ref="drm_vmw_alloc_dmabuf_arg">drm_vmw_alloc_dmabuf_arg</a>)</u></td></tr>
<tr><th id="63">63</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_UNREF_DMABUF" data-ref="_M/DRM_IOCTL_VMW_UNREF_DMABUF">DRM_IOCTL_VMW_UNREF_DMABUF</dfn>				\</u></td></tr>
<tr><th id="64">64</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_UNREF_DMABUF,	\</u></td></tr>
<tr><th id="65">65</th><td><u>		struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_unref_dmabuf_arg" title='drm_vmw_unref_dmabuf_arg' data-ref="drm_vmw_unref_dmabuf_arg">drm_vmw_unref_dmabuf_arg</a>)</u></td></tr>
<tr><th id="66">66</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_CURSOR_BYPASS" data-ref="_M/DRM_IOCTL_VMW_CURSOR_BYPASS">DRM_IOCTL_VMW_CURSOR_BYPASS</dfn>				\</u></td></tr>
<tr><th id="67">67</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_CURSOR_BYPASS,	\</u></td></tr>
<tr><th id="68">68</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_cursor_bypass_arg" title='drm_vmw_cursor_bypass_arg' data-ref="drm_vmw_cursor_bypass_arg">drm_vmw_cursor_bypass_arg</a>)</u></td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_CONTROL_STREAM" data-ref="_M/DRM_IOCTL_VMW_CONTROL_STREAM">DRM_IOCTL_VMW_CONTROL_STREAM</dfn>				\</u></td></tr>
<tr><th id="71">71</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_CONTROL_STREAM,	\</u></td></tr>
<tr><th id="72">72</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_control_stream_arg" title='drm_vmw_control_stream_arg' data-ref="drm_vmw_control_stream_arg">drm_vmw_control_stream_arg</a>)</u></td></tr>
<tr><th id="73">73</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_CLAIM_STREAM" data-ref="_M/DRM_IOCTL_VMW_CLAIM_STREAM">DRM_IOCTL_VMW_CLAIM_STREAM</dfn>				\</u></td></tr>
<tr><th id="74">74</th><td><u>	DRM_IOR(DRM_COMMAND_BASE + DRM_VMW_CLAIM_STREAM,	\</u></td></tr>
<tr><th id="75">75</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_stream_arg" title='drm_vmw_stream_arg' data-ref="drm_vmw_stream_arg">drm_vmw_stream_arg</a>)</u></td></tr>
<tr><th id="76">76</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_UNREF_STREAM" data-ref="_M/DRM_IOCTL_VMW_UNREF_STREAM">DRM_IOCTL_VMW_UNREF_STREAM</dfn>				\</u></td></tr>
<tr><th id="77">77</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_UNREF_STREAM,	\</u></td></tr>
<tr><th id="78">78</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_stream_arg" title='drm_vmw_stream_arg' data-ref="drm_vmw_stream_arg">drm_vmw_stream_arg</a>)</u></td></tr>
<tr><th id="79">79</th><td></td></tr>
<tr><th id="80">80</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_CREATE_CONTEXT" data-ref="_M/DRM_IOCTL_VMW_CREATE_CONTEXT">DRM_IOCTL_VMW_CREATE_CONTEXT</dfn>				\</u></td></tr>
<tr><th id="81">81</th><td><u>	DRM_IOR(DRM_COMMAND_BASE + DRM_VMW_CREATE_CONTEXT,	\</u></td></tr>
<tr><th id="82">82</th><td><u>		struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_context_arg" title='drm_vmw_context_arg' data-ref="drm_vmw_context_arg">drm_vmw_context_arg</a>)</u></td></tr>
<tr><th id="83">83</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_UNREF_CONTEXT" data-ref="_M/DRM_IOCTL_VMW_UNREF_CONTEXT">DRM_IOCTL_VMW_UNREF_CONTEXT</dfn>				\</u></td></tr>
<tr><th id="84">84</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_UNREF_CONTEXT,	\</u></td></tr>
<tr><th id="85">85</th><td><u>		struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_context_arg" title='drm_vmw_context_arg' data-ref="drm_vmw_context_arg">drm_vmw_context_arg</a>)</u></td></tr>
<tr><th id="86">86</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_CREATE_SURFACE" data-ref="_M/DRM_IOCTL_VMW_CREATE_SURFACE">DRM_IOCTL_VMW_CREATE_SURFACE</dfn>				\</u></td></tr>
<tr><th id="87">87</th><td><u>	DRM_IOWR(DRM_COMMAND_BASE + DRM_VMW_CREATE_SURFACE,	\</u></td></tr>
<tr><th id="88">88</th><td><u>		 union <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_surface_create_arg" title='drm_vmw_surface_create_arg' data-ref="drm_vmw_surface_create_arg">drm_vmw_surface_create_arg</a>)</u></td></tr>
<tr><th id="89">89</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_UNREF_SURFACE" data-ref="_M/DRM_IOCTL_VMW_UNREF_SURFACE">DRM_IOCTL_VMW_UNREF_SURFACE</dfn>				\</u></td></tr>
<tr><th id="90">90</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_UNREF_SURFACE,	\</u></td></tr>
<tr><th id="91">91</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_surface_arg" title='drm_vmw_surface_arg' data-ref="drm_vmw_surface_arg">drm_vmw_surface_arg</a>)</u></td></tr>
<tr><th id="92">92</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_REF_SURFACE" data-ref="_M/DRM_IOCTL_VMW_REF_SURFACE">DRM_IOCTL_VMW_REF_SURFACE</dfn>				\</u></td></tr>
<tr><th id="93">93</th><td><u>	DRM_IOWR(DRM_COMMAND_BASE + DRM_VMW_REF_SURFACE,	\</u></td></tr>
<tr><th id="94">94</th><td><u>		 union <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_surface_reference_arg" title='drm_vmw_surface_reference_arg' data-ref="drm_vmw_surface_reference_arg">drm_vmw_surface_reference_arg</a>)</u></td></tr>
<tr><th id="95">95</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_EXECBUF" data-ref="_M/DRM_IOCTL_VMW_EXECBUF">DRM_IOCTL_VMW_EXECBUF</dfn>					\</u></td></tr>
<tr><th id="96">96</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_EXECBUF,		\</u></td></tr>
<tr><th id="97">97</th><td><u>		struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_execbuf_arg" title='drm_vmw_execbuf_arg' data-ref="drm_vmw_execbuf_arg">drm_vmw_execbuf_arg</a>)</u></td></tr>
<tr><th id="98">98</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_GET_3D_CAP" data-ref="_M/DRM_IOCTL_VMW_GET_3D_CAP">DRM_IOCTL_VMW_GET_3D_CAP</dfn>				\</u></td></tr>
<tr><th id="99">99</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_GET_3D_CAP,		\</u></td></tr>
<tr><th id="100">100</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_get_3d_cap_arg" title='drm_vmw_get_3d_cap_arg' data-ref="drm_vmw_get_3d_cap_arg">drm_vmw_get_3d_cap_arg</a>)</u></td></tr>
<tr><th id="101">101</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_FENCE_WAIT" data-ref="_M/DRM_IOCTL_VMW_FENCE_WAIT">DRM_IOCTL_VMW_FENCE_WAIT</dfn>				\</u></td></tr>
<tr><th id="102">102</th><td><u>	DRM_IOWR(DRM_COMMAND_BASE + DRM_VMW_FENCE_WAIT,		\</u></td></tr>
<tr><th id="103">103</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_fence_wait_arg" title='drm_vmw_fence_wait_arg' data-ref="drm_vmw_fence_wait_arg">drm_vmw_fence_wait_arg</a>)</u></td></tr>
<tr><th id="104">104</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_FENCE_SIGNALED" data-ref="_M/DRM_IOCTL_VMW_FENCE_SIGNALED">DRM_IOCTL_VMW_FENCE_SIGNALED</dfn>				\</u></td></tr>
<tr><th id="105">105</th><td><u>	DRM_IOWR(DRM_COMMAND_BASE + DRM_VMW_FENCE_SIGNALED,	\</u></td></tr>
<tr><th id="106">106</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_fence_signaled_arg" title='drm_vmw_fence_signaled_arg' data-ref="drm_vmw_fence_signaled_arg">drm_vmw_fence_signaled_arg</a>)</u></td></tr>
<tr><th id="107">107</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_FENCE_UNREF" data-ref="_M/DRM_IOCTL_VMW_FENCE_UNREF">DRM_IOCTL_VMW_FENCE_UNREF</dfn>				\</u></td></tr>
<tr><th id="108">108</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_FENCE_UNREF,		\</u></td></tr>
<tr><th id="109">109</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_fence_arg" title='drm_vmw_fence_arg' data-ref="drm_vmw_fence_arg">drm_vmw_fence_arg</a>)</u></td></tr>
<tr><th id="110">110</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_FENCE_EVENT" data-ref="_M/DRM_IOCTL_VMW_FENCE_EVENT">DRM_IOCTL_VMW_FENCE_EVENT</dfn>				\</u></td></tr>
<tr><th id="111">111</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_FENCE_EVENT,		\</u></td></tr>
<tr><th id="112">112</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_fence_event_arg" title='drm_vmw_fence_event_arg' data-ref="drm_vmw_fence_event_arg">drm_vmw_fence_event_arg</a>)</u></td></tr>
<tr><th id="113">113</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_PRESENT" data-ref="_M/DRM_IOCTL_VMW_PRESENT">DRM_IOCTL_VMW_PRESENT</dfn>					\</u></td></tr>
<tr><th id="114">114</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_PRESENT,		\</u></td></tr>
<tr><th id="115">115</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_present_arg" title='drm_vmw_present_arg' data-ref="drm_vmw_present_arg">drm_vmw_present_arg</a>)</u></td></tr>
<tr><th id="116">116</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_PRESENT_READBACK" data-ref="_M/DRM_IOCTL_VMW_PRESENT_READBACK">DRM_IOCTL_VMW_PRESENT_READBACK</dfn>				\</u></td></tr>
<tr><th id="117">117</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_PRESENT_READBACK,	\</u></td></tr>
<tr><th id="118">118</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_present_readback_arg" title='drm_vmw_present_readback_arg' data-ref="drm_vmw_present_readback_arg">drm_vmw_present_readback_arg</a>)</u></td></tr>
<tr><th id="119">119</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_UPDATE_LAYOUT" data-ref="_M/DRM_IOCTL_VMW_UPDATE_LAYOUT">DRM_IOCTL_VMW_UPDATE_LAYOUT</dfn>				\</u></td></tr>
<tr><th id="120">120</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_UPDATE_LAYOUT,	\</u></td></tr>
<tr><th id="121">121</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_update_layout_arg" title='drm_vmw_update_layout_arg' data-ref="drm_vmw_update_layout_arg">drm_vmw_update_layout_arg</a>)</u></td></tr>
<tr><th id="122">122</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_CREATE_SHADER" data-ref="_M/DRM_IOCTL_VMW_CREATE_SHADER">DRM_IOCTL_VMW_CREATE_SHADER</dfn>				\</u></td></tr>
<tr><th id="123">123</th><td><u>	DRM_IOWR(DRM_COMMAND_BASE + DRM_VMW_CREATE_SHADER,	\</u></td></tr>
<tr><th id="124">124</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_shader_create_arg" title='drm_vmw_shader_create_arg' data-ref="drm_vmw_shader_create_arg">drm_vmw_shader_create_arg</a>)</u></td></tr>
<tr><th id="125">125</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_UNREF_SHADER" data-ref="_M/DRM_IOCTL_VMW_UNREF_SHADER">DRM_IOCTL_VMW_UNREF_SHADER</dfn>				\</u></td></tr>
<tr><th id="126">126</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_UNREF_SHADER,	\</u></td></tr>
<tr><th id="127">127</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_shader_arg" title='drm_vmw_shader_arg' data-ref="drm_vmw_shader_arg">drm_vmw_shader_arg</a>)</u></td></tr>
<tr><th id="128">128</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_GB_SURFACE_CREATE" data-ref="_M/DRM_IOCTL_VMW_GB_SURFACE_CREATE">DRM_IOCTL_VMW_GB_SURFACE_CREATE</dfn>				\</u></td></tr>
<tr><th id="129">129</th><td><u>	DRM_IOWR(DRM_COMMAND_BASE + DRM_VMW_GB_SURFACE_CREATE,	\</u></td></tr>
<tr><th id="130">130</th><td><u>		 union <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_gb_surface_create_arg" title='drm_vmw_gb_surface_create_arg' data-ref="drm_vmw_gb_surface_create_arg">drm_vmw_gb_surface_create_arg</a>)</u></td></tr>
<tr><th id="131">131</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_GB_SURFACE_REF" data-ref="_M/DRM_IOCTL_VMW_GB_SURFACE_REF">DRM_IOCTL_VMW_GB_SURFACE_REF</dfn>				\</u></td></tr>
<tr><th id="132">132</th><td><u>	DRM_IOWR(DRM_COMMAND_BASE + DRM_VMW_GB_SURFACE_REF,	\</u></td></tr>
<tr><th id="133">133</th><td><u>		 union <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_gb_surface_reference_arg" title='drm_vmw_gb_surface_reference_arg' data-ref="drm_vmw_gb_surface_reference_arg">drm_vmw_gb_surface_reference_arg</a>)</u></td></tr>
<tr><th id="134">134</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_SYNCCPU" data-ref="_M/DRM_IOCTL_VMW_SYNCCPU">DRM_IOCTL_VMW_SYNCCPU</dfn>					\</u></td></tr>
<tr><th id="135">135</th><td><u>	DRM_IOW(DRM_COMMAND_BASE + DRM_VMW_SYNCCPU,		\</u></td></tr>
<tr><th id="136">136</th><td><u>		 struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_synccpu_arg" title='drm_vmw_synccpu_arg' data-ref="drm_vmw_synccpu_arg">drm_vmw_synccpu_arg</a>)</u></td></tr>
<tr><th id="137">137</th><td><u>#define <dfn class="macro" id="_M/DRM_IOCTL_VMW_CREATE_EXTENDED_CONTEXT" data-ref="_M/DRM_IOCTL_VMW_CREATE_EXTENDED_CONTEXT">DRM_IOCTL_VMW_CREATE_EXTENDED_CONTEXT</dfn>			\</u></td></tr>
<tr><th id="138">138</th><td><u>	DRM_IOWR(DRM_COMMAND_BASE + DRM_VMW_CREATE_EXTENDED_CONTEXT,	\</u></td></tr>
<tr><th id="139">139</th><td><u>		struct <a class="type" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#drm_vmw_context_arg" title='drm_vmw_context_arg' data-ref="drm_vmw_context_arg">drm_vmw_context_arg</a>)</u></td></tr>
<tr><th id="140">140</th><td></td></tr>
<tr><th id="141">141</th><td><i class="doc">/**</i></td></tr>
<tr><th id="142">142</th><td><i class="doc"> * The core DRM version of this macro doesn't account for</i></td></tr>
<tr><th id="143">143</th><td><i class="doc"> * DRM_COMMAND_BASE.</i></td></tr>
<tr><th id="144">144</th><td><i class="doc"> */</i></td></tr>
<tr><th id="145">145</th><td></td></tr>
<tr><th id="146">146</th><td><u>#define <dfn class="macro" id="_M/VMW_IOCTL_DEF" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</dfn>(ioctl, func, flags) \</u></td></tr>
<tr><th id="147">147</th><td><u>  [DRM_IOCTL_NR(DRM_IOCTL_##ioctl) - DRM_COMMAND_BASE] = {DRM_IOCTL_##ioctl, flags, func}</u></td></tr>
<tr><th id="148">148</th><td></td></tr>
<tr><th id="149">149</th><td><i class="doc" data-doc="vmw_ioctls">/**</i></td></tr>
<tr><th id="150">150</th><td><i class="doc" data-doc="vmw_ioctls"> * Ioctl definitions.</i></td></tr>
<tr><th id="151">151</th><td><i class="doc" data-doc="vmw_ioctls"> */</i></td></tr>
<tr><th id="152">152</th><td></td></tr>
<tr><th id="153">153</th><td><em>static</em> <em>const</em> <b>struct</b> <a class="type" href="../../../../include/drm/drm_ioctl.h.html#drm_ioctl_desc" title='drm_ioctl_desc' data-ref="drm_ioctl_desc">drm_ioctl_desc</a> <dfn class="tu decl def" id="vmw_ioctls" title='vmw_ioctls' data-type='const struct drm_ioctl_desc [27]' data-ref="vmw_ioctls">vmw_ioctls</dfn>[] = {</td></tr>
<tr><th id="154">154</th><td>	<a class="macro" href="#146" title="[((((((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 0)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_getparam_arg) == sizeof(struct drm_vmw_getparam_arg[1]) &amp;&amp; sizeof(struct drm_vmw_getparam_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_getparam_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 0)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_getparam_arg) == sizeof(struct drm_vmw_getparam_arg[1]) &amp;&amp; sizeof(struct drm_vmw_getparam_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_getparam_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_AUTH | DRM_RENDER_ALLOW, vmw_getparam_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_GET_PARAM, <a class="ref fn" href="vmwgfx_drv.h.html#vmw_getparam_ioctl" title='vmw_getparam_ioctl' data-ref="vmw_getparam_ioctl">vmw_getparam_ioctl</a>,</td></tr>
<tr><th id="155">155</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="156">156</th><td>	<a class="macro" href="#146" title="[((((((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 1)) &lt;&lt; 0) | (((((sizeof(union drm_vmw_alloc_dmabuf_arg) == sizeof(union drm_vmw_alloc_dmabuf_arg[1]) &amp;&amp; sizeof(union drm_vmw_alloc_dmabuf_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(union drm_vmw_alloc_dmabuf_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 1)) &lt;&lt; 0) | (((((sizeof(union drm_vmw_alloc_dmabuf_arg) == sizeof(union drm_vmw_alloc_dmabuf_arg[1]) &amp;&amp; sizeof(union drm_vmw_alloc_dmabuf_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(union drm_vmw_alloc_dmabuf_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_AUTH | DRM_RENDER_ALLOW, vmw_dmabuf_alloc_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_ALLOC_DMABUF, <a class="ref fn" href="vmwgfx_drv.h.html#vmw_dmabuf_alloc_ioctl" title='vmw_dmabuf_alloc_ioctl' data-ref="vmw_dmabuf_alloc_ioctl">vmw_dmabuf_alloc_ioctl</a>,</td></tr>
<tr><th id="157">157</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="158">158</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 2)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_unref_dmabuf_arg) == sizeof(struct drm_vmw_unref_dmabuf_arg[1]) &amp;&amp; sizeof(struct drm_vmw_unref_dmabuf_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_unref_dmabuf_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 2)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_unref_dmabuf_arg) == sizeof(struct drm_vmw_unref_dmabuf_arg[1]) &amp;&amp; sizeof(struct drm_vmw_unref_dmabuf_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_unref_dmabuf_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_RENDER_ALLOW, vmw_dmabuf_unref_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_UNREF_DMABUF, <a class="ref fn" href="vmwgfx_drv.h.html#vmw_dmabuf_unref_ioctl" title='vmw_dmabuf_unref_ioctl' data-ref="vmw_dmabuf_unref_ioctl">vmw_dmabuf_unref_ioctl</a>,</td></tr>
<tr><th id="159">159</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="160">160</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 3)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_cursor_bypass_arg) == sizeof(struct drm_vmw_cursor_bypass_arg[1]) &amp;&amp; sizeof(struct drm_vmw_cursor_bypass_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_cursor_bypass_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 3)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_cursor_bypass_arg) == sizeof(struct drm_vmw_cursor_bypass_arg[1]) &amp;&amp; sizeof(struct drm_vmw_cursor_bypass_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_cursor_bypass_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_MASTER | DRM_CONTROL_ALLOW, vmw_kms_cursor_bypass_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_CURSOR_BYPASS,</td></tr>
<tr><th id="161">161</th><td>		      <a class="ref fn" href="vmwgfx_drv.h.html#vmw_kms_cursor_bypass_ioctl" title='vmw_kms_cursor_bypass_ioctl' data-ref="vmw_kms_cursor_bypass_ioctl">vmw_kms_cursor_bypass_ioctl</a>,</td></tr>
<tr><th id="162">162</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_MASTER" title='DRM_MASTER' data-ref="DRM_MASTER">DRM_MASTER</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_CONTROL_ALLOW" title='DRM_CONTROL_ALLOW' data-ref="DRM_CONTROL_ALLOW">DRM_CONTROL_ALLOW</a>),</td></tr>
<tr><th id="163">163</th><td></td></tr>
<tr><th id="164">164</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 4)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_control_stream_arg) == sizeof(struct drm_vmw_control_stream_arg[1]) &amp;&amp; sizeof(struct drm_vmw_control_stream_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_control_stream_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 4)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_control_stream_arg) == sizeof(struct drm_vmw_control_stream_arg[1]) &amp;&amp; sizeof(struct drm_vmw_control_stream_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_control_stream_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_MASTER | DRM_CONTROL_ALLOW, vmw_overlay_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_CONTROL_STREAM, <a class="ref fn" href="vmwgfx_drv.h.html#vmw_overlay_ioctl" title='vmw_overlay_ioctl' data-ref="vmw_overlay_ioctl">vmw_overlay_ioctl</a>,</td></tr>
<tr><th id="165">165</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_MASTER" title='DRM_MASTER' data-ref="DRM_MASTER">DRM_MASTER</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_CONTROL_ALLOW" title='DRM_CONTROL_ALLOW' data-ref="DRM_CONTROL_ALLOW">DRM_CONTROL_ALLOW</a>),</td></tr>
<tr><th id="166">166</th><td>	<a class="macro" href="#146" title="[((((((2U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 5)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_stream_arg) == sizeof(struct drm_vmw_stream_arg[1]) &amp;&amp; sizeof(struct drm_vmw_stream_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_stream_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((2U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 5)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_stream_arg) == sizeof(struct drm_vmw_stream_arg[1]) &amp;&amp; sizeof(struct drm_vmw_stream_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_stream_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_MASTER | DRM_CONTROL_ALLOW, vmw_stream_claim_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_CLAIM_STREAM, <a class="ref fn" href="vmwgfx_drv.h.html#vmw_stream_claim_ioctl" title='vmw_stream_claim_ioctl' data-ref="vmw_stream_claim_ioctl">vmw_stream_claim_ioctl</a>,</td></tr>
<tr><th id="167">167</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_MASTER" title='DRM_MASTER' data-ref="DRM_MASTER">DRM_MASTER</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_CONTROL_ALLOW" title='DRM_CONTROL_ALLOW' data-ref="DRM_CONTROL_ALLOW">DRM_CONTROL_ALLOW</a>),</td></tr>
<tr><th id="168">168</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 6)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_stream_arg) == sizeof(struct drm_vmw_stream_arg[1]) &amp;&amp; sizeof(struct drm_vmw_stream_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_stream_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 6)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_stream_arg) == sizeof(struct drm_vmw_stream_arg[1]) &amp;&amp; sizeof(struct drm_vmw_stream_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_stream_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_MASTER | DRM_CONTROL_ALLOW, vmw_stream_unref_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_UNREF_STREAM, <a class="ref fn" href="vmwgfx_drv.h.html#vmw_stream_unref_ioctl" title='vmw_stream_unref_ioctl' data-ref="vmw_stream_unref_ioctl">vmw_stream_unref_ioctl</a>,</td></tr>
<tr><th id="169">169</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_MASTER" title='DRM_MASTER' data-ref="DRM_MASTER">DRM_MASTER</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_CONTROL_ALLOW" title='DRM_CONTROL_ALLOW' data-ref="DRM_CONTROL_ALLOW">DRM_CONTROL_ALLOW</a>),</td></tr>
<tr><th id="170">170</th><td></td></tr>
<tr><th id="171">171</th><td>	<a class="macro" href="#146" title="[((((((2U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 7)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_context_arg) == sizeof(struct drm_vmw_context_arg[1]) &amp;&amp; sizeof(struct drm_vmw_context_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_context_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((2U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 7)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_context_arg) == sizeof(struct drm_vmw_context_arg[1]) &amp;&amp; sizeof(struct drm_vmw_context_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_context_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_AUTH | DRM_RENDER_ALLOW, vmw_context_define_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_CREATE_CONTEXT, <a class="ref fn" href="vmwgfx_drv.h.html#vmw_context_define_ioctl" title='vmw_context_define_ioctl' data-ref="vmw_context_define_ioctl">vmw_context_define_ioctl</a>,</td></tr>
<tr><th id="172">172</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="173">173</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 8)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_context_arg) == sizeof(struct drm_vmw_context_arg[1]) &amp;&amp; sizeof(struct drm_vmw_context_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_context_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 8)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_context_arg) == sizeof(struct drm_vmw_context_arg[1]) &amp;&amp; sizeof(struct drm_vmw_context_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_context_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_RENDER_ALLOW, vmw_context_destroy_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_UNREF_CONTEXT, <a class="ref fn" href="vmwgfx_drv.h.html#vmw_context_destroy_ioctl" title='vmw_context_destroy_ioctl' data-ref="vmw_context_destroy_ioctl">vmw_context_destroy_ioctl</a>,</td></tr>
<tr><th id="174">174</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="175">175</th><td>	<a class="macro" href="#146" title="[((((((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 9)) &lt;&lt; 0) | (((((sizeof(union drm_vmw_surface_create_arg) == sizeof(union drm_vmw_surface_create_arg[1]) &amp;&amp; sizeof(union drm_vmw_surface_create_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(union drm_vmw_surface_create_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 9)) &lt;&lt; 0) | (((((sizeof(union drm_vmw_surface_create_arg) == sizeof(union drm_vmw_surface_create_arg[1]) &amp;&amp; sizeof(union drm_vmw_surface_create_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(union drm_vmw_surface_create_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_AUTH | DRM_RENDER_ALLOW, vmw_surface_define_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_CREATE_SURFACE, <a class="ref fn" href="vmwgfx_drv.h.html#vmw_surface_define_ioctl" title='vmw_surface_define_ioctl' data-ref="vmw_surface_define_ioctl">vmw_surface_define_ioctl</a>,</td></tr>
<tr><th id="176">176</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="177">177</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 10)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_surface_arg) == sizeof(struct drm_vmw_surface_arg[1]) &amp;&amp; sizeof(struct drm_vmw_surface_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_surface_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 10)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_surface_arg) == sizeof(struct drm_vmw_surface_arg[1]) &amp;&amp; sizeof(struct drm_vmw_surface_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_surface_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_RENDER_ALLOW, vmw_surface_destroy_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_UNREF_SURFACE, <a class="ref fn" href="vmwgfx_drv.h.html#vmw_surface_destroy_ioctl" title='vmw_surface_destroy_ioctl' data-ref="vmw_surface_destroy_ioctl">vmw_surface_destroy_ioctl</a>,</td></tr>
<tr><th id="178">178</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="179">179</th><td>	<a class="macro" href="#146" title="[((((((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 11)) &lt;&lt; 0) | (((((sizeof(union drm_vmw_surface_reference_arg) == sizeof(union drm_vmw_surface_reference_arg[1]) &amp;&amp; sizeof(union drm_vmw_surface_reference_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(union drm_vmw_surface_reference_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 11)) &lt;&lt; 0) | (((((sizeof(union drm_vmw_surface_reference_arg) == sizeof(union drm_vmw_surface_reference_arg[1]) &amp;&amp; sizeof(union drm_vmw_surface_reference_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(union drm_vmw_surface_reference_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_AUTH | DRM_RENDER_ALLOW, vmw_surface_reference_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_REF_SURFACE, <a class="ref fn" href="vmwgfx_drv.h.html#vmw_surface_reference_ioctl" title='vmw_surface_reference_ioctl' data-ref="vmw_surface_reference_ioctl">vmw_surface_reference_ioctl</a>,</td></tr>
<tr><th id="180">180</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="181">181</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 12)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_execbuf_arg) == sizeof(struct drm_vmw_execbuf_arg[1]) &amp;&amp; sizeof(struct drm_vmw_execbuf_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_execbuf_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 12)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_execbuf_arg) == sizeof(struct drm_vmw_execbuf_arg[1]) &amp;&amp; sizeof(struct drm_vmw_execbuf_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_execbuf_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_AUTH | DRM_RENDER_ALLOW, ((void *)0)}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_EXECBUF, <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a> |</td></tr>
<tr><th id="182">182</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="183">183</th><td>	<a class="macro" href="#146" title="[((((((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 14)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_fence_wait_arg) == sizeof(struct drm_vmw_fence_wait_arg[1]) &amp;&amp; sizeof(struct drm_vmw_fence_wait_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_fence_wait_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 14)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_fence_wait_arg) == sizeof(struct drm_vmw_fence_wait_arg[1]) &amp;&amp; sizeof(struct drm_vmw_fence_wait_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_fence_wait_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_RENDER_ALLOW, vmw_fence_obj_wait_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_FENCE_WAIT, <a class="ref fn" href="vmwgfx_fence.h.html#vmw_fence_obj_wait_ioctl" title='vmw_fence_obj_wait_ioctl' data-ref="vmw_fence_obj_wait_ioctl">vmw_fence_obj_wait_ioctl</a>,</td></tr>
<tr><th id="184">184</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="185">185</th><td>	<a class="macro" href="#146" title="[((((((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 15)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_fence_signaled_arg) == sizeof(struct drm_vmw_fence_signaled_arg[1]) &amp;&amp; sizeof(struct drm_vmw_fence_signaled_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_fence_signaled_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 15)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_fence_signaled_arg) == sizeof(struct drm_vmw_fence_signaled_arg[1]) &amp;&amp; sizeof(struct drm_vmw_fence_signaled_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_fence_signaled_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_RENDER_ALLOW, vmw_fence_obj_signaled_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_FENCE_SIGNALED,</td></tr>
<tr><th id="186">186</th><td>		      <a class="ref fn" href="vmwgfx_fence.h.html#vmw_fence_obj_signaled_ioctl" title='vmw_fence_obj_signaled_ioctl' data-ref="vmw_fence_obj_signaled_ioctl">vmw_fence_obj_signaled_ioctl</a>,</td></tr>
<tr><th id="187">187</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="188">188</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 16)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_fence_arg) == sizeof(struct drm_vmw_fence_arg[1]) &amp;&amp; sizeof(struct drm_vmw_fence_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_fence_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 16)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_fence_arg) == sizeof(struct drm_vmw_fence_arg[1]) &amp;&amp; sizeof(struct drm_vmw_fence_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_fence_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_RENDER_ALLOW, vmw_fence_obj_unref_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_FENCE_UNREF, <a class="ref fn" href="vmwgfx_fence.h.html#vmw_fence_obj_unref_ioctl" title='vmw_fence_obj_unref_ioctl' data-ref="vmw_fence_obj_unref_ioctl">vmw_fence_obj_unref_ioctl</a>,</td></tr>
<tr><th id="189">189</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="190">190</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 17)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_fence_event_arg) == sizeof(struct drm_vmw_fence_event_arg[1]) &amp;&amp; sizeof(struct drm_vmw_fence_event_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_fence_event_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 17)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_fence_event_arg) == sizeof(struct drm_vmw_fence_event_arg[1]) &amp;&amp; sizeof(struct drm_vmw_fence_event_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_fence_event_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_AUTH | DRM_RENDER_ALLOW, vmw_fence_event_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_FENCE_EVENT, <a class="ref fn" href="vmwgfx_fence.h.html#vmw_fence_event_ioctl" title='vmw_fence_event_ioctl' data-ref="vmw_fence_event_ioctl">vmw_fence_event_ioctl</a>,</td></tr>
<tr><th id="191">191</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="192">192</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 13)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_get_3d_cap_arg) == sizeof(struct drm_vmw_get_3d_cap_arg[1]) &amp;&amp; sizeof(struct drm_vmw_get_3d_cap_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_get_3d_cap_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 13)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_get_3d_cap_arg) == sizeof(struct drm_vmw_get_3d_cap_arg[1]) &amp;&amp; sizeof(struct drm_vmw_get_3d_cap_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_get_3d_cap_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_AUTH | DRM_RENDER_ALLOW, vmw_get_cap_3d_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_GET_3D_CAP, <a class="ref fn" href="vmwgfx_drv.h.html#vmw_get_cap_3d_ioctl" title='vmw_get_cap_3d_ioctl' data-ref="vmw_get_cap_3d_ioctl">vmw_get_cap_3d_ioctl</a>,</td></tr>
<tr><th id="193">193</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="194">194</th><td></td></tr>
<tr><th id="195">195</th><td>	<i>/* these allow direct access to the framebuffers mark as master only */</i></td></tr>
<tr><th id="196">196</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 18)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_present_arg) == sizeof(struct drm_vmw_present_arg[1]) &amp;&amp; sizeof(struct drm_vmw_present_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_present_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 18)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_present_arg) == sizeof(struct drm_vmw_present_arg[1]) &amp;&amp; sizeof(struct drm_vmw_present_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_present_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_MASTER | DRM_AUTH, vmw_present_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_PRESENT, <a class="ref fn" href="vmwgfx_drv.h.html#vmw_present_ioctl" title='vmw_present_ioctl' data-ref="vmw_present_ioctl">vmw_present_ioctl</a>,</td></tr>
<tr><th id="197">197</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_MASTER" title='DRM_MASTER' data-ref="DRM_MASTER">DRM_MASTER</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a>),</td></tr>
<tr><th id="198">198</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 19)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_present_readback_arg) == sizeof(struct drm_vmw_present_readback_arg[1]) &amp;&amp; sizeof(struct drm_vmw_present_readback_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_present_readback_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 19)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_present_readback_arg) == sizeof(struct drm_vmw_present_readback_arg[1]) &amp;&amp; sizeof(struct drm_vmw_present_readback_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_present_readback_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_MASTER | DRM_AUTH, vmw_present_readback_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_PRESENT_READBACK,</td></tr>
<tr><th id="199">199</th><td>		      <a class="ref fn" href="vmwgfx_drv.h.html#vmw_present_readback_ioctl" title='vmw_present_readback_ioctl' data-ref="vmw_present_readback_ioctl">vmw_present_readback_ioctl</a>,</td></tr>
<tr><th id="200">200</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_MASTER" title='DRM_MASTER' data-ref="DRM_MASTER">DRM_MASTER</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a>),</td></tr>
<tr><th id="201">201</th><td>	<i>/*</i></td></tr>
<tr><th id="202">202</th><td><i>	 * The permissions of the below ioctl are overridden in</i></td></tr>
<tr><th id="203">203</th><td><i>	 * vmw_generic_ioctl(). We require either</i></td></tr>
<tr><th id="204">204</th><td><i>	 * DRM_MASTER or capable(CAP_SYS_ADMIN).</i></td></tr>
<tr><th id="205">205</th><td><i>	 */</i></td></tr>
<tr><th id="206">206</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 20)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_update_layout_arg) == sizeof(struct drm_vmw_update_layout_arg[1]) &amp;&amp; sizeof(struct drm_vmw_update_layout_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_update_layout_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 20)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_update_layout_arg) == sizeof(struct drm_vmw_update_layout_arg[1]) &amp;&amp; sizeof(struct drm_vmw_update_layout_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_update_layout_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_RENDER_ALLOW, vmw_kms_update_layout_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_UPDATE_LAYOUT,</td></tr>
<tr><th id="207">207</th><td>		      <a class="ref fn" href="vmwgfx_drv.h.html#vmw_kms_update_layout_ioctl" title='vmw_kms_update_layout_ioctl' data-ref="vmw_kms_update_layout_ioctl">vmw_kms_update_layout_ioctl</a>,</td></tr>
<tr><th id="208">208</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="209">209</th><td>	<a class="macro" href="#146" title="[((((((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 21)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_shader_create_arg) == sizeof(struct drm_vmw_shader_create_arg[1]) &amp;&amp; sizeof(struct drm_vmw_shader_create_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_shader_create_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 21)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_shader_create_arg) == sizeof(struct drm_vmw_shader_create_arg[1]) &amp;&amp; sizeof(struct drm_vmw_shader_create_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_shader_create_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_AUTH | DRM_RENDER_ALLOW, vmw_shader_define_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_CREATE_SHADER,</td></tr>
<tr><th id="210">210</th><td>		      <a class="ref fn" href="vmwgfx_drv.h.html#vmw_shader_define_ioctl" title='vmw_shader_define_ioctl' data-ref="vmw_shader_define_ioctl">vmw_shader_define_ioctl</a>,</td></tr>
<tr><th id="211">211</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="212">212</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 22)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_shader_arg) == sizeof(struct drm_vmw_shader_arg[1]) &amp;&amp; sizeof(struct drm_vmw_shader_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_shader_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 22)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_shader_arg) == sizeof(struct drm_vmw_shader_arg[1]) &amp;&amp; sizeof(struct drm_vmw_shader_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_shader_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_RENDER_ALLOW, vmw_shader_destroy_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_UNREF_SHADER,</td></tr>
<tr><th id="213">213</th><td>		      <a class="ref fn" href="vmwgfx_drv.h.html#vmw_shader_destroy_ioctl" title='vmw_shader_destroy_ioctl' data-ref="vmw_shader_destroy_ioctl">vmw_shader_destroy_ioctl</a>,</td></tr>
<tr><th id="214">214</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="215">215</th><td>	<a class="macro" href="#146" title="[((((((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 23)) &lt;&lt; 0) | (((((sizeof(union drm_vmw_gb_surface_create_arg) == sizeof(union drm_vmw_gb_surface_create_arg[1]) &amp;&amp; sizeof(union drm_vmw_gb_surface_create_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(union drm_vmw_gb_surface_create_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 23)) &lt;&lt; 0) | (((((sizeof(union drm_vmw_gb_surface_create_arg) == sizeof(union drm_vmw_gb_surface_create_arg[1]) &amp;&amp; sizeof(union drm_vmw_gb_surface_create_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(union drm_vmw_gb_surface_create_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_AUTH | DRM_RENDER_ALLOW, vmw_gb_surface_define_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_GB_SURFACE_CREATE,</td></tr>
<tr><th id="216">216</th><td>		      <a class="ref fn" href="vmwgfx_drv.h.html#vmw_gb_surface_define_ioctl" title='vmw_gb_surface_define_ioctl' data-ref="vmw_gb_surface_define_ioctl">vmw_gb_surface_define_ioctl</a>,</td></tr>
<tr><th id="217">217</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="218">218</th><td>	<a class="macro" href="#146" title="[((((((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 24)) &lt;&lt; 0) | (((((sizeof(union drm_vmw_gb_surface_reference_arg) == sizeof(union drm_vmw_gb_surface_reference_arg[1]) &amp;&amp; sizeof(union drm_vmw_gb_surface_reference_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(union drm_vmw_gb_surface_reference_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 24)) &lt;&lt; 0) | (((((sizeof(union drm_vmw_gb_surface_reference_arg) == sizeof(union drm_vmw_gb_surface_reference_arg[1]) &amp;&amp; sizeof(union drm_vmw_gb_surface_reference_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(union drm_vmw_gb_surface_reference_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_AUTH | DRM_RENDER_ALLOW, vmw_gb_surface_reference_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_GB_SURFACE_REF,</td></tr>
<tr><th id="219">219</th><td>		      <a class="ref fn" href="vmwgfx_drv.h.html#vmw_gb_surface_reference_ioctl" title='vmw_gb_surface_reference_ioctl' data-ref="vmw_gb_surface_reference_ioctl">vmw_gb_surface_reference_ioctl</a>,</td></tr>
<tr><th id="220">220</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="221">221</th><td>	<a class="macro" href="#146" title="[((((((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 25)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_synccpu_arg) == sizeof(struct drm_vmw_synccpu_arg[1]) &amp;&amp; sizeof(struct drm_vmw_synccpu_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_synccpu_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 25)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_synccpu_arg) == sizeof(struct drm_vmw_synccpu_arg[1]) &amp;&amp; sizeof(struct drm_vmw_synccpu_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_synccpu_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_RENDER_ALLOW, vmw_user_dmabuf_synccpu_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_SYNCCPU,</td></tr>
<tr><th id="222">222</th><td>		      <a class="ref fn" href="vmwgfx_drv.h.html#vmw_user_dmabuf_synccpu_ioctl" title='vmw_user_dmabuf_synccpu_ioctl' data-ref="vmw_user_dmabuf_synccpu_ioctl">vmw_user_dmabuf_synccpu_ioctl</a>,</td></tr>
<tr><th id="223">223</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="224">224</th><td>	<a class="macro" href="#146" title="[((((((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 26)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_context_arg) == sizeof(struct drm_vmw_context_arg[1]) &amp;&amp; sizeof(struct drm_vmw_context_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_context_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8)))) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1)) - 0x40] = {(((2U|1U) &lt;&lt; (((0+8)+8)+14)) | (((&apos;d&apos;)) &lt;&lt; (0+8)) | (((0x40 + 26)) &lt;&lt; 0) | (((((sizeof(struct drm_vmw_context_arg) == sizeof(struct drm_vmw_context_arg[1]) &amp;&amp; sizeof(struct drm_vmw_context_arg) &lt; (1 &lt;&lt; 14)) ? sizeof(struct drm_vmw_context_arg) : __invalid_size_argument_for_IOC))) &lt;&lt; ((0+8)+8))), DRM_AUTH | DRM_RENDER_ALLOW, vmw_extended_context_define_ioctl}" data-ref="_M/VMW_IOCTL_DEF">VMW_IOCTL_DEF</a>(VMW_CREATE_EXTENDED_CONTEXT,</td></tr>
<tr><th id="225">225</th><td>		      <a class="ref fn" href="vmwgfx_drv.h.html#vmw_extended_context_define_ioctl" title='vmw_extended_context_define_ioctl' data-ref="vmw_extended_context_define_ioctl">vmw_extended_context_define_ioctl</a>,</td></tr>
<tr><th id="226">226</th><td>		      <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a> | <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>),</td></tr>
<tr><th id="227">227</th><td>};</td></tr>
<tr><th id="228">228</th><td></td></tr>
<tr><th id="229">229</th><td><em>static</em> <em>const</em> <b>struct</b> <a class="type" href="../../../../include/linux/mod_devicetable.h.html#pci_device_id" title='pci_device_id' data-ref="pci_device_id">pci_device_id</a> <dfn class="tu decl def" id="vmw_pci_id_list" title='vmw_pci_id_list' data-type='const struct pci_device_id [2]' data-ref="vmw_pci_id_list">vmw_pci_id_list</dfn>[] = {</td></tr>
<tr><th id="230">230</th><td>	{<var>0x15ad</var>, <var>0x0405</var>, <a class="macro" href="../../../../include/linux/mod_devicetable.h.html#17" title="(~0)" data-ref="_M/PCI_ANY_ID">PCI_ANY_ID</a>, <a class="macro" href="../../../../include/linux/mod_devicetable.h.html#17" title="(~0)" data-ref="_M/PCI_ANY_ID">PCI_ANY_ID</a>, <var>0</var>, <var>0</var>, <a class="macro" href="#40" title="0" data-ref="_M/VMWGFX_CHIP_SVGAII">VMWGFX_CHIP_SVGAII</a>},</td></tr>
<tr><th id="231">231</th><td>	{<var>0</var>, <var>0</var>, <var>0</var>}</td></tr>
<tr><th id="232">232</th><td>};</td></tr>
<tr><th id="233">233</th><td><a class="macro" href="../../../../include/linux/module.h.html#215" title="" data-ref="_M/MODULE_DEVICE_TABLE">MODULE_DEVICE_TABLE</a>(pci, vmw_pci_id_list);</td></tr>
<tr><th id="234">234</th><td></td></tr>
<tr><th id="235">235</th><td><em>static</em> <em>int</em> <dfn class="tu decl def" id="enable_fbdev" title='enable_fbdev' data-type='int' data-ref="enable_fbdev">enable_fbdev</dfn> = <a class="macro" href="../../../../include/linux/kconfig.h.html#71" title="1" data-ref="_M/IS_ENABLED">IS_ENABLED</a>(<a class="macro" href="../../../../include/generated/autoconf.h.html#151" title="1" data-ref="_M/CONFIG_DRM_VMWGFX_FBCON">CONFIG_DRM_VMWGFX_FBCON</a>);</td></tr>
<tr><th id="236">236</th><td><em>static</em> <em>int</em> <dfn class="tu decl def" id="vmw_force_iommu" title='vmw_force_iommu' data-type='int' data-ref="vmw_force_iommu">vmw_force_iommu</dfn>;</td></tr>
<tr><th id="237">237</th><td><em>static</em> <em>int</em> <dfn class="tu decl def" id="vmw_restrict_iommu" title='vmw_restrict_iommu' data-type='int' data-ref="vmw_restrict_iommu">vmw_restrict_iommu</dfn>;</td></tr>
<tr><th id="238">238</th><td><em>static</em> <em>int</em> <dfn class="tu decl def" id="vmw_force_coherent" title='vmw_force_coherent' data-type='int' data-ref="vmw_force_coherent">vmw_force_coherent</dfn>;</td></tr>
<tr><th id="239">239</th><td><em>static</em> <em>int</em> <dfn class="tu decl def" id="vmw_restrict_dma_mask" title='vmw_restrict_dma_mask' data-type='int' data-ref="vmw_restrict_dma_mask">vmw_restrict_dma_mask</dfn>;</td></tr>
<tr><th id="240">240</th><td><em>static</em> <em>int</em> <dfn class="tu decl def" id="vmw_assume_16bpp" title='vmw_assume_16bpp' data-type='int' data-ref="vmw_assume_16bpp">vmw_assume_16bpp</dfn>;</td></tr>
<tr><th id="241">241</th><td></td></tr>
<tr><th id="242">242</th><td><em>static</em> <em>int</em> <a class="tu decl fn" href="#vmw_probe" title='vmw_probe' data-type='int vmw_probe(struct pci_dev * , const struct pci_device_id * )' data-ref="vmw_probe">vmw_probe</a>(<b>struct</b> <a class="type" href="../../../../include/linux/pci.h.html#pci_dev" title='pci_dev' data-ref="pci_dev">pci_dev</a> *, <em>const</em> <b>struct</b> <a class="type" href="../../../../include/linux/mod_devicetable.h.html#pci_device_id" title='pci_device_id' data-ref="pci_device_id">pci_device_id</a> *);</td></tr>
<tr><th id="243">243</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#vmw_master_init" title='vmw_master_init' data-type='void vmw_master_init(struct vmw_master * )' data-ref="vmw_master_init">vmw_master_init</a>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a> *);</td></tr>
<tr><th id="244">244</th><td><em>static</em> <em>int</em> <a class="tu decl fn" href="#vmwgfx_pm_notifier" title='vmwgfx_pm_notifier' data-type='int vmwgfx_pm_notifier(struct notifier_block * nb, unsigned long val, void * ptr)' data-ref="vmwgfx_pm_notifier">vmwgfx_pm_notifier</a>(<b>struct</b> <a class="type" href="../../../../include/linux/notifier.h.html#notifier_block" title='notifier_block' data-ref="notifier_block">notifier_block</a> *<dfn class="local col3 decl" id="3nb" title='nb' data-type='struct notifier_block *' data-ref="3nb">nb</dfn>, <em>unsigned</em> <em>long</em> <dfn class="local col4 decl" id="4val" title='val' data-type='unsigned long' data-ref="4val">val</dfn>,</td></tr>
<tr><th id="245">245</th><td>			      <em>void</em> *<dfn class="local col5 decl" id="5ptr" title='ptr' data-type='void *' data-ref="5ptr">ptr</dfn>);</td></tr>
<tr><th id="246">246</th><td></td></tr>
<tr><th id="247">247</th><td><a class="macro" href="../../../../include/linux/moduleparam.h.html#35" title="struct __UNIQUE_ID_enable_fbdev82 {}" data-ref="_M/MODULE_PARM_DESC">MODULE_PARM_DESC</a>(enable_fbdev, <q>"Enable vmwgfx fbdev"</q>);</td></tr>
<tr><th id="248">248</th><td><a class="macro" href="../../../../include/linux/moduleparam.h.html#148" title="static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) int __attribute__((unused)) *__check_enable_fbdev(void) { return(&amp;(enable_fbdev)); }; static const char __param_str_enable_fbdev[] = &quot;vmwgfx&quot; &quot;.&quot; &quot;enable_fbdev&quot;; static struct kernel_param const __param_enable_fbdev __attribute__((__used__)) __attribute__ ((unused,__section__ (&quot;__param&quot;),aligned(sizeof(void *)))) = { __param_str_enable_fbdev, ((struct module *)0), &amp;param_ops_int, ((sizeof(struct { int:(-!!((0600) &lt; 0)); })) + (sizeof(struct { int:(-!!((0600) &gt; 0777)); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 6) &amp; 4) &lt; (((0600) &gt;&gt; 3) &amp; 4))); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 3) &amp; 4) &lt; ((0600) &amp; 4))); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 6) &amp; 2) &lt; (((0600) &gt;&gt; 3) &amp; 2))); })) + (sizeof(struct { int:(-!!((0600) &amp; 2)); })) + (0600)), -1, 0, { &amp;enable_fbdev } }; struct __UNIQUE_ID_enable_fbdevtype84 {}" data-ref="_M/module_param_named">module_param_named</a>(enable_fbdev, <a class="tu ref" href="#enable_fbdev" title='enable_fbdev' data-use='a' data-ref="enable_fbdev">enable_fbdev</a>, <em>int</em>, <var>0600</var>);</td></tr>
<tr><th id="249">249</th><td><a class="macro" href="../../../../include/linux/moduleparam.h.html#35" title="struct __UNIQUE_ID_force_dma_api86 {}" data-ref="_M/MODULE_PARM_DESC">MODULE_PARM_DESC</a>(force_dma_api, <q>"Force using the DMA API for TTM pages"</q>);</td></tr>
<tr><th id="250">250</th><td><a class="macro" href="../../../../include/linux/moduleparam.h.html#148" title="static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) int __attribute__((unused)) *__check_force_dma_api(void) { return(&amp;(vmw_force_iommu)); }; static const char __param_str_force_dma_api[] = &quot;vmwgfx&quot; &quot;.&quot; &quot;force_dma_api&quot;; static struct kernel_param const __param_force_dma_api __attribute__((__used__)) __attribute__ ((unused,__section__ (&quot;__param&quot;),aligned(sizeof(void *)))) = { __param_str_force_dma_api, ((struct module *)0), &amp;param_ops_int, ((sizeof(struct { int:(-!!((0600) &lt; 0)); })) + (sizeof(struct { int:(-!!((0600) &gt; 0777)); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 6) &amp; 4) &lt; (((0600) &gt;&gt; 3) &amp; 4))); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 3) &amp; 4) &lt; ((0600) &amp; 4))); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 6) &amp; 2) &lt; (((0600) &gt;&gt; 3) &amp; 2))); })) + (sizeof(struct { int:(-!!((0600) &amp; 2)); })) + (0600)), -1, 0, { &amp;vmw_force_iommu } }; struct __UNIQUE_ID_force_dma_apitype88 {}" data-ref="_M/module_param_named">module_param_named</a>(force_dma_api, <a class="tu ref" href="#vmw_force_iommu" title='vmw_force_iommu' data-use='a' data-ref="vmw_force_iommu">vmw_force_iommu</a>, <em>int</em>, <var>0600</var>);</td></tr>
<tr><th id="251">251</th><td><a class="macro" href="../../../../include/linux/moduleparam.h.html#35" title="struct __UNIQUE_ID_restrict_iommu90 {}" data-ref="_M/MODULE_PARM_DESC">MODULE_PARM_DESC</a>(restrict_iommu, <q>"Try to limit IOMMU usage for TTM pages"</q>);</td></tr>
<tr><th id="252">252</th><td><a class="macro" href="../../../../include/linux/moduleparam.h.html#148" title="static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) int __attribute__((unused)) *__check_restrict_iommu(void) { return(&amp;(vmw_restrict_iommu)); }; static const char __param_str_restrict_iommu[] = &quot;vmwgfx&quot; &quot;.&quot; &quot;restrict_iommu&quot;; static struct kernel_param const __param_restrict_iommu __attribute__((__used__)) __attribute__ ((unused,__section__ (&quot;__param&quot;),aligned(sizeof(void *)))) = { __param_str_restrict_iommu, ((struct module *)0), &amp;param_ops_int, ((sizeof(struct { int:(-!!((0600) &lt; 0)); })) + (sizeof(struct { int:(-!!((0600) &gt; 0777)); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 6) &amp; 4) &lt; (((0600) &gt;&gt; 3) &amp; 4))); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 3) &amp; 4) &lt; ((0600) &amp; 4))); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 6) &amp; 2) &lt; (((0600) &gt;&gt; 3) &amp; 2))); })) + (sizeof(struct { int:(-!!((0600) &amp; 2)); })) + (0600)), -1, 0, { &amp;vmw_restrict_iommu } }; struct __UNIQUE_ID_restrict_iommutype92 {}" data-ref="_M/module_param_named">module_param_named</a>(restrict_iommu, <a class="tu ref" href="#vmw_restrict_iommu" title='vmw_restrict_iommu' data-use='a' data-ref="vmw_restrict_iommu">vmw_restrict_iommu</a>, <em>int</em>, <var>0600</var>);</td></tr>
<tr><th id="253">253</th><td><a class="macro" href="../../../../include/linux/moduleparam.h.html#35" title="struct __UNIQUE_ID_force_coherent94 {}" data-ref="_M/MODULE_PARM_DESC">MODULE_PARM_DESC</a>(force_coherent, <q>"Force coherent TTM pages"</q>);</td></tr>
<tr><th id="254">254</th><td><a class="macro" href="../../../../include/linux/moduleparam.h.html#148" title="static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) int __attribute__((unused)) *__check_force_coherent(void) { return(&amp;(vmw_force_coherent)); }; static const char __param_str_force_coherent[] = &quot;vmwgfx&quot; &quot;.&quot; &quot;force_coherent&quot;; static struct kernel_param const __param_force_coherent __attribute__((__used__)) __attribute__ ((unused,__section__ (&quot;__param&quot;),aligned(sizeof(void *)))) = { __param_str_force_coherent, ((struct module *)0), &amp;param_ops_int, ((sizeof(struct { int:(-!!((0600) &lt; 0)); })) + (sizeof(struct { int:(-!!((0600) &gt; 0777)); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 6) &amp; 4) &lt; (((0600) &gt;&gt; 3) &amp; 4))); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 3) &amp; 4) &lt; ((0600) &amp; 4))); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 6) &amp; 2) &lt; (((0600) &gt;&gt; 3) &amp; 2))); })) + (sizeof(struct { int:(-!!((0600) &amp; 2)); })) + (0600)), -1, 0, { &amp;vmw_force_coherent } }; struct __UNIQUE_ID_force_coherenttype96 {}" data-ref="_M/module_param_named">module_param_named</a>(force_coherent, <a class="tu ref" href="#vmw_force_coherent" title='vmw_force_coherent' data-use='a' data-ref="vmw_force_coherent">vmw_force_coherent</a>, <em>int</em>, <var>0600</var>);</td></tr>
<tr><th id="255">255</th><td><a class="macro" href="../../../../include/linux/moduleparam.h.html#35" title="struct __UNIQUE_ID_restrict_dma_mask98 {}" data-ref="_M/MODULE_PARM_DESC">MODULE_PARM_DESC</a>(restrict_dma_mask, <q>"Restrict DMA mask to 44 bits with IOMMU"</q>);</td></tr>
<tr><th id="256">256</th><td><a class="macro" href="../../../../include/linux/moduleparam.h.html#148" title="static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) int __attribute__((unused)) *__check_restrict_dma_mask(void) { return(&amp;(vmw_restrict_dma_mask)); }; static const char __param_str_restrict_dma_mask[] = &quot;vmwgfx&quot; &quot;.&quot; &quot;restrict_dma_mask&quot;; static struct kernel_param const __param_restrict_dma_mask __attribute__((__used__)) __attribute__ ((unused,__section__ (&quot;__param&quot;),aligned(sizeof(void *)))) = { __param_str_restrict_dma_mask, ((struct module *)0), &amp;param_ops_int, ((sizeof(struct { int:(-!!((0600) &lt; 0)); })) + (sizeof(struct { int:(-!!((0600) &gt; 0777)); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 6) &amp; 4) &lt; (((0600) &gt;&gt; 3) &amp; 4))); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 3) &amp; 4) &lt; ((0600) &amp; 4))); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 6) &amp; 2) &lt; (((0600) &gt;&gt; 3) &amp; 2))); })) + (sizeof(struct { int:(-!!((0600) &amp; 2)); })) + (0600)), -1, 0, { &amp;vmw_restrict_dma_mask } }; struct __UNIQUE_ID_restrict_dma_masktype100 {}" data-ref="_M/module_param_named">module_param_named</a>(restrict_dma_mask, <a class="tu ref" href="#vmw_restrict_dma_mask" title='vmw_restrict_dma_mask' data-use='a' data-ref="vmw_restrict_dma_mask">vmw_restrict_dma_mask</a>, <em>int</em>, <var>0600</var>);</td></tr>
<tr><th id="257">257</th><td><a class="macro" href="../../../../include/linux/moduleparam.h.html#35" title="struct __UNIQUE_ID_assume_16bpp102 {}" data-ref="_M/MODULE_PARM_DESC">MODULE_PARM_DESC</a>(assume_16bpp, <q>"Assume 16-bpp when filtering modes"</q>);</td></tr>
<tr><th id="258">258</th><td><a class="macro" href="../../../../include/linux/moduleparam.h.html#148" title="static inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function)) int __attribute__((unused)) *__check_assume_16bpp(void) { return(&amp;(vmw_assume_16bpp)); }; static const char __param_str_assume_16bpp[] = &quot;vmwgfx&quot; &quot;.&quot; &quot;assume_16bpp&quot;; static struct kernel_param const __param_assume_16bpp __attribute__((__used__)) __attribute__ ((unused,__section__ (&quot;__param&quot;),aligned(sizeof(void *)))) = { __param_str_assume_16bpp, ((struct module *)0), &amp;param_ops_int, ((sizeof(struct { int:(-!!((0600) &lt; 0)); })) + (sizeof(struct { int:(-!!((0600) &gt; 0777)); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 6) &amp; 4) &lt; (((0600) &gt;&gt; 3) &amp; 4))); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 3) &amp; 4) &lt; ((0600) &amp; 4))); })) + (sizeof(struct { int:(-!!((((0600) &gt;&gt; 6) &amp; 2) &lt; (((0600) &gt;&gt; 3) &amp; 2))); })) + (sizeof(struct { int:(-!!((0600) &amp; 2)); })) + (0600)), -1, 0, { &amp;vmw_assume_16bpp } }; struct __UNIQUE_ID_assume_16bpptype104 {}" data-ref="_M/module_param_named">module_param_named</a>(assume_16bpp, <a class="tu ref" href="#vmw_assume_16bpp" title='vmw_assume_16bpp' data-use='a' data-ref="vmw_assume_16bpp">vmw_assume_16bpp</a>, <em>int</em>, <var>0600</var>);</td></tr>
<tr><th id="259">259</th><td></td></tr>
<tr><th id="260">260</th><td></td></tr>
<tr><th id="261">261</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="vmw_print_capabilities" title='vmw_print_capabilities' data-type='void vmw_print_capabilities(uint32_t capabilities)' data-ref="vmw_print_capabilities">vmw_print_capabilities</dfn>(<a class="typedef" href="../../../../include/linux/types.h.html#uint32_t" title='uint32_t' data-type='__u32' data-ref="uint32_t">uint32_t</a> <dfn class="local col6 decl" id="6capabilities" title='capabilities' data-type='uint32_t' data-ref="6capabilities">capabilities</dfn>)</td></tr>
<tr><th id="262">262</th><td>{</td></tr>
<tr><th id="263">263</th><td>	<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;Capabilities:\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"Capabilities:\n"</q>);</td></tr>
<tr><th id="264">264</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#671" title="0x00000002" data-ref="_M/SVGA_CAP_RECT_COPY">SVGA_CAP_RECT_COPY</a>)</td></tr>
<tr><th id="265">265</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Rect copy.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Rect copy.\n"</q>);</td></tr>
<tr><th id="266">266</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#672" title="0x00000020" data-ref="_M/SVGA_CAP_CURSOR">SVGA_CAP_CURSOR</a>)</td></tr>
<tr><th id="267">267</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Cursor.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Cursor.\n"</q>);</td></tr>
<tr><th id="268">268</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#673" title="0x00000040" data-ref="_M/SVGA_CAP_CURSOR_BYPASS">SVGA_CAP_CURSOR_BYPASS</a>)</td></tr>
<tr><th id="269">269</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Cursor bypass.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Cursor bypass.\n"</q>);</td></tr>
<tr><th id="270">270</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#674" title="0x00000080" data-ref="_M/SVGA_CAP_CURSOR_BYPASS_2">SVGA_CAP_CURSOR_BYPASS_2</a>)</td></tr>
<tr><th id="271">271</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Cursor bypass 2.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Cursor bypass 2.\n"</q>);</td></tr>
<tr><th id="272">272</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#675" title="0x00000100" data-ref="_M/SVGA_CAP_8BIT_EMULATION">SVGA_CAP_8BIT_EMULATION</a>)</td></tr>
<tr><th id="273">273</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  8bit emulation.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  8bit emulation.\n"</q>);</td></tr>
<tr><th id="274">274</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#676" title="0x00000200" data-ref="_M/SVGA_CAP_ALPHA_CURSOR">SVGA_CAP_ALPHA_CURSOR</a>)</td></tr>
<tr><th id="275">275</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Alpha cursor.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Alpha cursor.\n"</q>);</td></tr>
<tr><th id="276">276</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#677" title="0x00004000" data-ref="_M/SVGA_CAP_3D">SVGA_CAP_3D</a>)</td></tr>
<tr><th id="277">277</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  3D.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  3D.\n"</q>);</td></tr>
<tr><th id="278">278</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#678" title="0x00008000" data-ref="_M/SVGA_CAP_EXTENDED_FIFO">SVGA_CAP_EXTENDED_FIFO</a>)</td></tr>
<tr><th id="279">279</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Extended Fifo.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Extended Fifo.\n"</q>);</td></tr>
<tr><th id="280">280</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#679" title="0x00010000" data-ref="_M/SVGA_CAP_MULTIMON">SVGA_CAP_MULTIMON</a>)</td></tr>
<tr><th id="281">281</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Multimon.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Multimon.\n"</q>);</td></tr>
<tr><th id="282">282</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#680" title="0x00020000" data-ref="_M/SVGA_CAP_PITCHLOCK">SVGA_CAP_PITCHLOCK</a>)</td></tr>
<tr><th id="283">283</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Pitchlock.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Pitchlock.\n"</q>);</td></tr>
<tr><th id="284">284</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#681" title="0x00040000" data-ref="_M/SVGA_CAP_IRQMASK">SVGA_CAP_IRQMASK</a>)</td></tr>
<tr><th id="285">285</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Irq mask.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Irq mask.\n"</q>);</td></tr>
<tr><th id="286">286</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#682" title="0x00080000" data-ref="_M/SVGA_CAP_DISPLAY_TOPOLOGY">SVGA_CAP_DISPLAY_TOPOLOGY</a>)</td></tr>
<tr><th id="287">287</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Display Topology.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Display Topology.\n"</q>);</td></tr>
<tr><th id="288">288</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#683" title="0x00100000" data-ref="_M/SVGA_CAP_GMR">SVGA_CAP_GMR</a>)</td></tr>
<tr><th id="289">289</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  GMR.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  GMR.\n"</q>);</td></tr>
<tr><th id="290">290</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#684" title="0x00200000" data-ref="_M/SVGA_CAP_TRACES">SVGA_CAP_TRACES</a>)</td></tr>
<tr><th id="291">291</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Traces.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Traces.\n"</q>);</td></tr>
<tr><th id="292">292</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#685" title="0x00400000" data-ref="_M/SVGA_CAP_GMR2">SVGA_CAP_GMR2</a>)</td></tr>
<tr><th id="293">293</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  GMR2.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  GMR2.\n"</q>);</td></tr>
<tr><th id="294">294</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#686" title="0x00800000" data-ref="_M/SVGA_CAP_SCREEN_OBJECT_2">SVGA_CAP_SCREEN_OBJECT_2</a>)</td></tr>
<tr><th id="295">295</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Screen Object 2.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Screen Object 2.\n"</q>);</td></tr>
<tr><th id="296">296</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#687" title="0x01000000" data-ref="_M/SVGA_CAP_COMMAND_BUFFERS">SVGA_CAP_COMMAND_BUFFERS</a>)</td></tr>
<tr><th id="297">297</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Command Buffers.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Command Buffers.\n"</q>);</td></tr>
<tr><th id="298">298</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#689" title="0x04000000" data-ref="_M/SVGA_CAP_CMD_BUFFERS_2">SVGA_CAP_CMD_BUFFERS_2</a>)</td></tr>
<tr><th id="299">299</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Command Buffers 2.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Command Buffers 2.\n"</q>);</td></tr>
<tr><th id="300">300</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#690" title="0x08000000" data-ref="_M/SVGA_CAP_GBOBJECTS">SVGA_CAP_GBOBJECTS</a>)</td></tr>
<tr><th id="301">301</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  Guest Backed Resources.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  Guest Backed Resources.\n"</q>);</td></tr>
<tr><th id="302">302</th><td>	<b>if</b> (<a class="local col6 ref" href="#6capabilities" title='capabilities' data-ref="6capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#691" title="0x10000000" data-ref="_M/SVGA_CAP_DX">SVGA_CAP_DX</a>)</td></tr>
<tr><th id="303">303</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;  DX Features.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"  DX Features.\n"</q>);</td></tr>
<tr><th id="304">304</th><td>}</td></tr>
<tr><th id="305">305</th><td></td></tr>
<tr><th id="306">306</th><td><i class="doc" data-doc="vmw_dummy_query_bo_create">/**</i></td></tr>
<tr><th id="307">307</th><td><i class="doc" data-doc="vmw_dummy_query_bo_create"> * vmw_dummy_query_bo_create - create a bo to hold a dummy query result</i></td></tr>
<tr><th id="308">308</th><td><i class="doc" data-doc="vmw_dummy_query_bo_create"> *</i></td></tr>
<tr><th id="309">309</th><td><i class="doc" data-doc="vmw_dummy_query_bo_create"> * <span class="command">@dev</span>_<span class="verb">priv: A device private structure.</span></i></td></tr>
<tr><th id="310">310</th><td><i class="doc" data-doc="vmw_dummy_query_bo_create"> *</i></td></tr>
<tr><th id="311">311</th><td><i class="doc" data-doc="vmw_dummy_query_bo_create"> * This function creates a small buffer object that holds the query</i></td></tr>
<tr><th id="312">312</th><td><i class="doc" data-doc="vmw_dummy_query_bo_create"> * result for dummy queries emitted as query barriers.</i></td></tr>
<tr><th id="313">313</th><td><i class="doc" data-doc="vmw_dummy_query_bo_create"> * The function will then map the first page and initialize a pending</i></td></tr>
<tr><th id="314">314</th><td><i class="doc" data-doc="vmw_dummy_query_bo_create"> * occlusion query result structure, Finally it will unmap the buffer.</i></td></tr>
<tr><th id="315">315</th><td><i class="doc" data-doc="vmw_dummy_query_bo_create"> * No interruptible waits are done within this function.</i></td></tr>
<tr><th id="316">316</th><td><i class="doc" data-doc="vmw_dummy_query_bo_create"> *</i></td></tr>
<tr><th id="317">317</th><td><i class="doc" data-doc="vmw_dummy_query_bo_create"> * Returns an error if bo creation or initialization fails.</i></td></tr>
<tr><th id="318">318</th><td><i class="doc" data-doc="vmw_dummy_query_bo_create"> */</i></td></tr>
<tr><th id="319">319</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_dummy_query_bo_create" title='vmw_dummy_query_bo_create' data-type='int vmw_dummy_query_bo_create(struct vmw_private * dev_priv)' data-ref="vmw_dummy_query_bo_create">vmw_dummy_query_bo_create</dfn>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col7 decl" id="7dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="7dev_priv">dev_priv</dfn>)</td></tr>
<tr><th id="320">320</th><td>{</td></tr>
<tr><th id="321">321</th><td>	<em>int</em> <dfn class="local col8 decl" id="8ret" title='ret' data-type='int' data-ref="8ret">ret</dfn>;</td></tr>
<tr><th id="322">322</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_dma_buffer" title='vmw_dma_buffer' data-ref="vmw_dma_buffer">vmw_dma_buffer</a> *<dfn class="local col9 decl" id="9vbo" title='vbo' data-type='struct vmw_dma_buffer *' data-ref="9vbo">vbo</dfn>;</td></tr>
<tr><th id="323">323</th><td>	<b>struct</b> <a class="type" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_kmap_obj" title='ttm_bo_kmap_obj' data-ref="ttm_bo_kmap_obj">ttm_bo_kmap_obj</a> <dfn class="local col0 decl" id="10map" title='map' data-type='struct ttm_bo_kmap_obj' data-ref="10map">map</dfn>;</td></tr>
<tr><th id="324">324</th><td>	<em>volatile</em> <a class="typedef" href="device_include/svga3d_cmd.h.html#SVGA3dQueryResult" title='SVGA3dQueryResult' data-type='struct SVGA3dQueryResult' data-ref="SVGA3dQueryResult">SVGA3dQueryResult</a> *<dfn class="local col1 decl" id="11result" title='result' data-type='volatile SVGA3dQueryResult *' data-ref="11result">result</dfn>;</td></tr>
<tr><th id="325">325</th><td>	<a class="typedef" href="../../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="local col2 decl" id="12dummy" title='dummy' data-type='bool' data-ref="12dummy">dummy</dfn>;</td></tr>
<tr><th id="326">326</th><td></td></tr>
<tr><th id="327">327</th><td>	<i>/*</i></td></tr>
<tr><th id="328">328</th><td><i>	 * Create the vbo as pinned, so that a tryreserve will</i></td></tr>
<tr><th id="329">329</th><td><i>	 * immediately succeed. This is because we're the only</i></td></tr>
<tr><th id="330">330</th><td><i>	 * user of the bo currently.</i></td></tr>
<tr><th id="331">331</th><td><i>	 */</i></td></tr>
<tr><th id="332">332</th><td>	<a class="local col9 ref" href="#9vbo" title='vbo' data-ref="9vbo">vbo</a> = <a class="ref fn" href="../../../../include/linux/slab.h.html#kzalloc" title='kzalloc' data-ref="kzalloc">kzalloc</a>(<b>sizeof</b>(*<a class="local col9 ref" href="#9vbo" title='vbo' data-ref="9vbo">vbo</a>), <a class="macro" href="../../../../include/linux/gfp.h.html#278" title="((( gfp_t)(0x400000u|0x1000000u)) | (( gfp_t)0x40u) | (( gfp_t)0x80u))" data-ref="_M/GFP_KERNEL">GFP_KERNEL</a>);</td></tr>
<tr><th id="333">333</th><td>	<b>if</b> (!<a class="local col9 ref" href="#9vbo" title='vbo' data-ref="9vbo">vbo</a>)</td></tr>
<tr><th id="334">334</th><td>		<b>return</b> -<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#16" title="12" data-ref="_M/ENOMEM">ENOMEM</a>;</td></tr>
<tr><th id="335">335</th><td></td></tr>
<tr><th id="336">336</th><td>	<a class="local col8 ref" href="#8ret" title='ret' data-ref="8ret">ret</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_dmabuf_init" title='vmw_dmabuf_init' data-ref="vmw_dmabuf_init">vmw_dmabuf_init</a>(<a class="local col7 ref" href="#7dev_priv" title='dev_priv' data-ref="7dev_priv">dev_priv</a>, <a class="local col9 ref" href="#9vbo" title='vbo' data-ref="9vbo">vbo</a>, <a class="macro" href="../../../../arch/x86/include/asm/page_types.h.html#11" title="((1UL) &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>,</td></tr>
<tr><th id="337">337</th><td>			      &amp;<a class="ref" href="vmwgfx_drv.h.html#vmw_sys_ne_placement" title='vmw_sys_ne_placement' data-ref="vmw_sys_ne_placement">vmw_sys_ne_placement</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>,</td></tr>
<tr><th id="338">338</th><td>			      &amp;<a class="ref fn" href="vmwgfx_drv.h.html#vmw_dmabuf_bo_free" title='vmw_dmabuf_bo_free' data-ref="vmw_dmabuf_bo_free">vmw_dmabuf_bo_free</a>);</td></tr>
<tr><th id="339">339</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col8 ref" href="#8ret" title='ret' data-ref="8ret">ret</a> != <var>0</var>))</td></tr>
<tr><th id="340">340</th><td>		<b>return</b> <a class="local col8 ref" href="#8ret" title='ret' data-ref="8ret">ret</a>;</td></tr>
<tr><th id="341">341</th><td></td></tr>
<tr><th id="342">342</th><td>	<a class="local col8 ref" href="#8ret" title='ret' data-ref="8ret">ret</a> = <a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_bo_reserve" title='ttm_bo_reserve' data-ref="ttm_bo_reserve">ttm_bo_reserve</a>(&amp;<a class="local col9 ref" href="#9vbo" title='vbo' data-ref="9vbo">vbo</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_dma_buffer::base" title='vmw_dma_buffer::base' data-ref="vmw_dma_buffer::base">base</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>, <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>);</td></tr>
<tr><th id="343">343</th><td>	<a class="macro" href="../../../../include/asm-generic/bug.h.html#59" title="do { if (__builtin_expect(!!(ret != 0), 0)) do { do { asm volatile(&quot;1:\t&quot; &quot;.byte 0x0f, 0x0b&quot; &quot;\n&quot; &quot;.pushsection __bug_table,\&quot;aw\&quot;\n&quot; &quot;2:\t&quot; &quot;.long &quot; &quot;1b&quot; &quot; - 2b&quot; &quot;\t# bug_entry::bug_addr\n&quot; &quot;\t&quot; &quot;.long &quot; &quot;%c0&quot; &quot; - 2b&quot; &quot;\t# bug_entry::file\n&quot; &quot;\t.word %c1&quot; &quot;\t# bug_entry::line\n&quot; &quot;\t.word %c2&quot; &quot;\t# bug_entry::flags\n&quot; &quot;\t.org 2b+%c3\n&quot; &quot;.popsection&quot; : : &quot;i&quot; (&quot;/home/tempdban/kernel/stable/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c&quot;), &quot;i&quot; (343), &quot;i&quot; (0), &quot;i&quot; (sizeof(struct bug_entry))); } while (0); do { ({ asm(&quot;%c0:\n\t&quot; &quot;.pushsection .discard.reachable\n\t&quot; &quot;.long %c0b - .\n\t&quot; &quot;.popsection\n\t&quot; : : &quot;i&quot; (106)); }); do { } while (1); } while (0); } while (0); } while (0)" data-ref="_M/BUG_ON">BUG_ON</a>(<a class="local col8 ref" href="#8ret" title='ret' data-ref="8ret">ret</a> != <var>0</var>);</td></tr>
<tr><th id="344">344</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_bo_pin_reserved" title='vmw_bo_pin_reserved' data-ref="vmw_bo_pin_reserved">vmw_bo_pin_reserved</a>(<a class="local col9 ref" href="#9vbo" title='vbo' data-ref="9vbo">vbo</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>);</td></tr>
<tr><th id="345">345</th><td></td></tr>
<tr><th id="346">346</th><td>	<a class="local col8 ref" href="#8ret" title='ret' data-ref="8ret">ret</a> = <a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_kmap" title='ttm_bo_kmap' data-ref="ttm_bo_kmap">ttm_bo_kmap</a>(&amp;<a class="local col9 ref" href="#9vbo" title='vbo' data-ref="9vbo">vbo</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_dma_buffer::base" title='vmw_dma_buffer::base' data-ref="vmw_dma_buffer::base">base</a>, <var>0</var>, <var>1</var>, &amp;<a class="local col0 ref" href="#10map" title='map' data-ref="10map">map</a>);</td></tr>
<tr><th id="347">347</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#76" title="__builtin_expect(!!(ret == 0), 1)" data-ref="_M/likely">likely</a>(<a class="local col8 ref" href="#8ret" title='ret' data-ref="8ret">ret</a> == <var>0</var>)) {</td></tr>
<tr><th id="348">348</th><td>		<a class="local col1 ref" href="#11result" title='result' data-ref="11result">result</a> = <a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_kmap_obj_virtual" title='ttm_kmap_obj_virtual' data-ref="ttm_kmap_obj_virtual">ttm_kmap_obj_virtual</a>(&amp;<a class="local col0 ref" href="#10map" title='map' data-ref="10map">map</a>, &amp;<a class="local col2 ref" href="#12dummy" title='dummy' data-ref="12dummy">dummy</a>);</td></tr>
<tr><th id="349">349</th><td>		<a class="local col1 ref" href="#11result" title='result' data-ref="11result">result</a>-&gt;<a class="ref field" href="device_include/svga3d_cmd.h.html#(anonymous)::totalSize" title='(anonymous struct)::totalSize' data-ref="(anonymous)::totalSize">totalSize</a> = <b>sizeof</b>(*<a class="local col1 ref" href="#11result" title='result' data-ref="11result">result</a>);</td></tr>
<tr><th id="350">350</th><td>		<a class="local col1 ref" href="#11result" title='result' data-ref="11result">result</a>-&gt;<a class="ref field" href="device_include/svga3d_cmd.h.html#(anonymous)::state" title='(anonymous struct)::state' data-ref="(anonymous)::state">state</a> = <a class="enum" href="device_include/svga3d_types.h.html#SVGA3D_QUERYSTATE_PENDING" title='SVGA3D_QUERYSTATE_PENDING' data-ref="SVGA3D_QUERYSTATE_PENDING">SVGA3D_QUERYSTATE_PENDING</a>;</td></tr>
<tr><th id="351">351</th><td>		<a class="local col1 ref" href="#11result" title='result' data-ref="11result">result</a>-&gt;<a class="ref field" href="device_include/svga3d_cmd.h.html#(anonymousstruct)::(anonymous)::result32" title='(anonymous struct)::(anonymous union)::result32' data-ref="(anonymousstruct)::(anonymous)::result32">result32</a> = <var>0xff</var>;</td></tr>
<tr><th id="352">352</th><td>		<a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_kunmap" title='ttm_bo_kunmap' data-ref="ttm_bo_kunmap">ttm_bo_kunmap</a>(&amp;<a class="local col0 ref" href="#10map" title='map' data-ref="10map">map</a>);</td></tr>
<tr><th id="353">353</th><td>	}</td></tr>
<tr><th id="354">354</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_bo_pin_reserved" title='vmw_bo_pin_reserved' data-ref="vmw_bo_pin_reserved">vmw_bo_pin_reserved</a>(<a class="local col9 ref" href="#9vbo" title='vbo' data-ref="9vbo">vbo</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>);</td></tr>
<tr><th id="355">355</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_bo_unreserve" title='ttm_bo_unreserve' data-ref="ttm_bo_unreserve">ttm_bo_unreserve</a>(&amp;<a class="local col9 ref" href="#9vbo" title='vbo' data-ref="9vbo">vbo</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_dma_buffer::base" title='vmw_dma_buffer::base' data-ref="vmw_dma_buffer::base">base</a>);</td></tr>
<tr><th id="356">356</th><td></td></tr>
<tr><th id="357">357</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col8 ref" href="#8ret" title='ret' data-ref="8ret">ret</a> != <var>0</var>)) {</td></tr>
<tr><th id="358">358</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Dummy query buffer map failed.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Dummy query buffer map failed.\n"</q>);</td></tr>
<tr><th id="359">359</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_dmabuf_unreference" title='vmw_dmabuf_unreference' data-ref="vmw_dmabuf_unreference">vmw_dmabuf_unreference</a>(&amp;<a class="local col9 ref" href="#9vbo" title='vbo' data-ref="9vbo">vbo</a>);</td></tr>
<tr><th id="360">360</th><td>	} <b>else</b></td></tr>
<tr><th id="361">361</th><td>		<a class="local col7 ref" href="#7dev_priv" title='dev_priv' data-ref="7dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::dummy_query_bo" title='vmw_private::dummy_query_bo' data-ref="vmw_private::dummy_query_bo">dummy_query_bo</a> = <a class="local col9 ref" href="#9vbo" title='vbo' data-ref="9vbo">vbo</a>;</td></tr>
<tr><th id="362">362</th><td></td></tr>
<tr><th id="363">363</th><td>	<b>return</b> <a class="local col8 ref" href="#8ret" title='ret' data-ref="8ret">ret</a>;</td></tr>
<tr><th id="364">364</th><td>}</td></tr>
<tr><th id="365">365</th><td></td></tr>
<tr><th id="366">366</th><td><i class="doc" data-doc="vmw_request_device_late">/**</i></td></tr>
<tr><th id="367">367</th><td><i class="doc" data-doc="vmw_request_device_late"> * vmw_request_device_late - Perform late device setup</i></td></tr>
<tr><th id="368">368</th><td><i class="doc" data-doc="vmw_request_device_late"> *</i></td></tr>
<tr><th id="369">369</th><td><i class="doc" data-doc="vmw_request_device_late"> * <span class="command">@dev</span>_<span class="verb">priv: Pointer to device private.</span></i></td></tr>
<tr><th id="370">370</th><td><i class="doc" data-doc="vmw_request_device_late"> *</i></td></tr>
<tr><th id="371">371</th><td><i class="doc" data-doc="vmw_request_device_late"> * This function performs setup of otables and enables large command</i></td></tr>
<tr><th id="372">372</th><td><i class="doc" data-doc="vmw_request_device_late"> * buffer submission. These tasks are split out to a separate function</i></td></tr>
<tr><th id="373">373</th><td><i class="doc" data-doc="vmw_request_device_late"> * because it reverts vmw_release_device_early and is intended to be used</i></td></tr>
<tr><th id="374">374</th><td><i class="doc" data-doc="vmw_request_device_late"> * by an error path in the hibernation code.</i></td></tr>
<tr><th id="375">375</th><td><i class="doc" data-doc="vmw_request_device_late"> */</i></td></tr>
<tr><th id="376">376</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_request_device_late" title='vmw_request_device_late' data-type='int vmw_request_device_late(struct vmw_private * dev_priv)' data-ref="vmw_request_device_late">vmw_request_device_late</dfn>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col3 decl" id="13dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="13dev_priv">dev_priv</dfn>)</td></tr>
<tr><th id="377">377</th><td>{</td></tr>
<tr><th id="378">378</th><td>	<em>int</em> <dfn class="local col4 decl" id="14ret" title='ret' data-type='int' data-ref="14ret">ret</dfn>;</td></tr>
<tr><th id="379">379</th><td></td></tr>
<tr><th id="380">380</th><td>	<b>if</b> (<a class="local col3 ref" href="#13dev_priv" title='dev_priv' data-ref="13dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_mob" title='vmw_private::has_mob' data-ref="vmw_private::has_mob">has_mob</a>) {</td></tr>
<tr><th id="381">381</th><td>		<a class="local col4 ref" href="#14ret" title='ret' data-ref="14ret">ret</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_otables_setup" title='vmw_otables_setup' data-ref="vmw_otables_setup">vmw_otables_setup</a>(<a class="local col3 ref" href="#13dev_priv" title='dev_priv' data-ref="13dev_priv">dev_priv</a>);</td></tr>
<tr><th id="382">382</th><td>		<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col4 ref" href="#14ret" title='ret' data-ref="14ret">ret</a> != <var>0</var>)) {</td></tr>
<tr><th id="383">383</th><td>			<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Unable to initialize &quot; &quot;guest Memory OBjects.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Unable to initialize "</q></td></tr>
<tr><th id="384">384</th><td>				  <q>"guest Memory OBjects.\n"</q>);</td></tr>
<tr><th id="385">385</th><td>			<b>return</b> <a class="local col4 ref" href="#14ret" title='ret' data-ref="14ret">ret</a>;</td></tr>
<tr><th id="386">386</th><td>		}</td></tr>
<tr><th id="387">387</th><td>	}</td></tr>
<tr><th id="388">388</th><td></td></tr>
<tr><th id="389">389</th><td>	<b>if</b> (<a class="local col3 ref" href="#13dev_priv" title='dev_priv' data-ref="13dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a>) {</td></tr>
<tr><th id="390">390</th><td>		<a class="local col4 ref" href="#14ret" title='ret' data-ref="14ret">ret</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_cmdbuf_set_pool_size" title='vmw_cmdbuf_set_pool_size' data-ref="vmw_cmdbuf_set_pool_size">vmw_cmdbuf_set_pool_size</a>(<a class="local col3 ref" href="#13dev_priv" title='dev_priv' data-ref="13dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a>,</td></tr>
<tr><th id="391">391</th><td>					       <var>256</var>*<var>4096</var>, <var>2</var>*<var>4096</var>);</td></tr>
<tr><th id="392">392</th><td>		<b>if</b> (<a class="local col4 ref" href="#14ret" title='ret' data-ref="14ret">ret</a>) {</td></tr>
<tr><th id="393">393</th><td>			<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_cmdbuf_man" title='vmw_cmdbuf_man' data-ref="vmw_cmdbuf_man">vmw_cmdbuf_man</a> *<dfn class="local col5 decl" id="15man" title='man' data-type='struct vmw_cmdbuf_man *' data-ref="15man">man</dfn> = <a class="local col3 ref" href="#13dev_priv" title='dev_priv' data-ref="13dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a>;</td></tr>
<tr><th id="394">394</th><td></td></tr>
<tr><th id="395">395</th><td>			<a class="local col3 ref" href="#13dev_priv" title='dev_priv' data-ref="13dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a> = <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="396">396</th><td>			<a class="ref fn" href="vmwgfx_drv.h.html#vmw_cmdbuf_man_destroy" title='vmw_cmdbuf_man_destroy' data-ref="vmw_cmdbuf_man_destroy">vmw_cmdbuf_man_destroy</a>(<a class="local col5 ref" href="#15man" title='man' data-ref="15man">man</a>);</td></tr>
<tr><th id="397">397</th><td>		}</td></tr>
<tr><th id="398">398</th><td>	}</td></tr>
<tr><th id="399">399</th><td></td></tr>
<tr><th id="400">400</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="401">401</th><td>}</td></tr>
<tr><th id="402">402</th><td></td></tr>
<tr><th id="403">403</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_request_device" title='vmw_request_device' data-type='int vmw_request_device(struct vmw_private * dev_priv)' data-ref="vmw_request_device">vmw_request_device</dfn>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col6 decl" id="16dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="16dev_priv">dev_priv</dfn>)</td></tr>
<tr><th id="404">404</th><td>{</td></tr>
<tr><th id="405">405</th><td>	<em>int</em> <dfn class="local col7 decl" id="17ret" title='ret' data-type='int' data-ref="17ret">ret</dfn>;</td></tr>
<tr><th id="406">406</th><td></td></tr>
<tr><th id="407">407</th><td>	<a class="local col7 ref" href="#17ret" title='ret' data-ref="17ret">ret</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_fifo_init" title='vmw_fifo_init' data-ref="vmw_fifo_init">vmw_fifo_init</a>(<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>, &amp;<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fifo" title='vmw_private::fifo' data-ref="vmw_private::fifo">fifo</a>);</td></tr>
<tr><th id="408">408</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col7 ref" href="#17ret" title='ret' data-ref="17ret">ret</a> != <var>0</var>)) {</td></tr>
<tr><th id="409">409</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Unable to initialize FIFO.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Unable to initialize FIFO.\n"</q>);</td></tr>
<tr><th id="410">410</th><td>		<b>return</b> <a class="local col7 ref" href="#17ret" title='ret' data-ref="17ret">ret</a>;</td></tr>
<tr><th id="411">411</th><td>	}</td></tr>
<tr><th id="412">412</th><td>	<a class="ref fn" href="vmwgfx_fence.h.html#vmw_fence_fifo_up" title='vmw_fence_fifo_up' data-ref="vmw_fence_fifo_up">vmw_fence_fifo_up</a>(<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fman" title='vmw_private::fman' data-ref="vmw_private::fman">fman</a>);</td></tr>
<tr><th id="413">413</th><td>	<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_cmdbuf_man_create" title='vmw_cmdbuf_man_create' data-ref="vmw_cmdbuf_man_create">vmw_cmdbuf_man_create</a>(<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>);</td></tr>
<tr><th id="414">414</th><td>	<b>if</b> (<a class="ref fn" href="../../../../include/linux/err.h.html#IS_ERR" title='IS_ERR' data-ref="IS_ERR">IS_ERR</a>(<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a>)) {</td></tr>
<tr><th id="415">415</th><td>		<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a> = <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="416">416</th><td>		<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_dx" title='vmw_private::has_dx' data-ref="vmw_private::has_dx">has_dx</a> = <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>;</td></tr>
<tr><th id="417">417</th><td>	}</td></tr>
<tr><th id="418">418</th><td></td></tr>
<tr><th id="419">419</th><td>	<a class="local col7 ref" href="#17ret" title='ret' data-ref="17ret">ret</a> = <a class="tu ref fn" href="#vmw_request_device_late" title='vmw_request_device_late' data-use='c' data-ref="vmw_request_device_late">vmw_request_device_late</a>(<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>);</td></tr>
<tr><th id="420">420</th><td>	<b>if</b> (<a class="local col7 ref" href="#17ret" title='ret' data-ref="17ret">ret</a>)</td></tr>
<tr><th id="421">421</th><td>		<b>goto</b> <a class="lbl" href="#18out_no_mob" data-ref="18out_no_mob">out_no_mob</a>;</td></tr>
<tr><th id="422">422</th><td></td></tr>
<tr><th id="423">423</th><td>	<a class="local col7 ref" href="#17ret" title='ret' data-ref="17ret">ret</a> = <a class="tu ref fn" href="#vmw_dummy_query_bo_create" title='vmw_dummy_query_bo_create' data-use='c' data-ref="vmw_dummy_query_bo_create">vmw_dummy_query_bo_create</a>(<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>);</td></tr>
<tr><th id="424">424</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col7 ref" href="#17ret" title='ret' data-ref="17ret">ret</a> != <var>0</var>))</td></tr>
<tr><th id="425">425</th><td>		<b>goto</b> <a class="lbl" href="#19out_no_query_bo" data-ref="19out_no_query_bo">out_no_query_bo</a>;</td></tr>
<tr><th id="426">426</th><td></td></tr>
<tr><th id="427">427</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="428">428</th><td></td></tr>
<tr><th id="429">429</th><td><dfn class="lbl" id="19out_no_query_bo" data-ref="19out_no_query_bo">out_no_query_bo</dfn>:</td></tr>
<tr><th id="430">430</th><td>	<b>if</b> (<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a>)</td></tr>
<tr><th id="431">431</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_cmdbuf_remove_pool" title='vmw_cmdbuf_remove_pool' data-ref="vmw_cmdbuf_remove_pool">vmw_cmdbuf_remove_pool</a>(<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a>);</td></tr>
<tr><th id="432">432</th><td>	<b>if</b> (<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_mob" title='vmw_private::has_mob' data-ref="vmw_private::has_mob">has_mob</a>) {</td></tr>
<tr><th id="433">433</th><td>		(<em>void</em>) <a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_evict_mm" title='ttm_bo_evict_mm' data-ref="ttm_bo_evict_mm">ttm_bo_evict_mm</a>(&amp;<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>, <a class="macro" href="vmwgfx_drv.h.html#74" title="(3 + 1)" data-ref="_M/VMW_PL_MOB">VMW_PL_MOB</a>);</td></tr>
<tr><th id="434">434</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_otables_takedown" title='vmw_otables_takedown' data-ref="vmw_otables_takedown">vmw_otables_takedown</a>(<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>);</td></tr>
<tr><th id="435">435</th><td>	}</td></tr>
<tr><th id="436">436</th><td>	<b>if</b> (<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a>)</td></tr>
<tr><th id="437">437</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_cmdbuf_man_destroy" title='vmw_cmdbuf_man_destroy' data-ref="vmw_cmdbuf_man_destroy">vmw_cmdbuf_man_destroy</a>(<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a>);</td></tr>
<tr><th id="438">438</th><td><dfn class="lbl" id="18out_no_mob" data-ref="18out_no_mob">out_no_mob</dfn>:</td></tr>
<tr><th id="439">439</th><td>	<a class="ref fn" href="vmwgfx_fence.h.html#vmw_fence_fifo_down" title='vmw_fence_fifo_down' data-ref="vmw_fence_fifo_down">vmw_fence_fifo_down</a>(<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fman" title='vmw_private::fman' data-ref="vmw_private::fman">fman</a>);</td></tr>
<tr><th id="440">440</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fifo_release" title='vmw_fifo_release' data-ref="vmw_fifo_release">vmw_fifo_release</a>(<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>, &amp;<a class="local col6 ref" href="#16dev_priv" title='dev_priv' data-ref="16dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fifo" title='vmw_private::fifo' data-ref="vmw_private::fifo">fifo</a>);</td></tr>
<tr><th id="441">441</th><td>	<b>return</b> <a class="local col7 ref" href="#17ret" title='ret' data-ref="17ret">ret</a>;</td></tr>
<tr><th id="442">442</th><td>}</td></tr>
<tr><th id="443">443</th><td></td></tr>
<tr><th id="444">444</th><td><i class="doc" data-doc="vmw_release_device_early">/**</i></td></tr>
<tr><th id="445">445</th><td><i class="doc" data-doc="vmw_release_device_early"> * vmw_release_device_early - Early part of fifo takedown.</i></td></tr>
<tr><th id="446">446</th><td><i class="doc" data-doc="vmw_release_device_early"> *</i></td></tr>
<tr><th id="447">447</th><td><i class="doc" data-doc="vmw_release_device_early"> * <span class="command">@dev</span>_<span class="verb">priv: Pointer to device private struct.</span></i></td></tr>
<tr><th id="448">448</th><td><i class="doc" data-doc="vmw_release_device_early"> *</i></td></tr>
<tr><th id="449">449</th><td><i class="doc" data-doc="vmw_release_device_early"> * This is the first part of command submission takedown, to be called before</i></td></tr>
<tr><th id="450">450</th><td><i class="doc" data-doc="vmw_release_device_early"> * buffer management is taken down.</i></td></tr>
<tr><th id="451">451</th><td><i class="doc" data-doc="vmw_release_device_early"> */</i></td></tr>
<tr><th id="452">452</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="vmw_release_device_early" title='vmw_release_device_early' data-type='void vmw_release_device_early(struct vmw_private * dev_priv)' data-ref="vmw_release_device_early">vmw_release_device_early</dfn>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col0 decl" id="20dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="20dev_priv">dev_priv</dfn>)</td></tr>
<tr><th id="453">453</th><td>{</td></tr>
<tr><th id="454">454</th><td>	<i>/*</i></td></tr>
<tr><th id="455">455</th><td><i>	 * Previous destructions should've released</i></td></tr>
<tr><th id="456">456</th><td><i>	 * the pinned bo.</i></td></tr>
<tr><th id="457">457</th><td><i>	 */</i></td></tr>
<tr><th id="458">458</th><td></td></tr>
<tr><th id="459">459</th><td>	<a class="macro" href="../../../../include/asm-generic/bug.h.html#59" title="do { if (__builtin_expect(!!(dev_priv-&gt;pinned_bo != ((void *)0)), 0)) do { do { asm volatile(&quot;1:\t&quot; &quot;.byte 0x0f, 0x0b&quot; &quot;\n&quot; &quot;.pushsection __bug_table,\&quot;aw\&quot;\n&quot; &quot;2:\t&quot; &quot;.long &quot; &quot;1b&quot; &quot; - 2b&quot; &quot;\t# bug_entry::bug_addr\n&quot; &quot;\t&quot; &quot;.long &quot; &quot;%c0&quot; &quot; - 2b&quot; &quot;\t# bug_entry::file\n&quot; &quot;\t.word %c1&quot; &quot;\t# bug_entry::line\n&quot; &quot;\t.word %c2&quot; &quot;\t# bug_entry::flags\n&quot; &quot;\t.org 2b+%c3\n&quot; &quot;.popsection&quot; : : &quot;i&quot; (&quot;/home/tempdban/kernel/stable/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c&quot;), &quot;i&quot; (459), &quot;i&quot; (0), &quot;i&quot; (sizeof(struct bug_entry))); } while (0); do { ({ asm(&quot;%c0:\n\t&quot; &quot;.pushsection .discard.reachable\n\t&quot; &quot;.long %c0b - .\n\t&quot; &quot;.popsection\n\t&quot; : : &quot;i&quot; (108)); }); do { } while (1); } while (0); } while (0); } while (0)" data-ref="_M/BUG_ON">BUG_ON</a>(<a class="local col0 ref" href="#20dev_priv" title='dev_priv' data-ref="20dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::pinned_bo" title='vmw_private::pinned_bo' data-ref="vmw_private::pinned_bo">pinned_bo</a> != <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>);</td></tr>
<tr><th id="460">460</th><td></td></tr>
<tr><th id="461">461</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_dmabuf_unreference" title='vmw_dmabuf_unreference' data-ref="vmw_dmabuf_unreference">vmw_dmabuf_unreference</a>(&amp;<a class="local col0 ref" href="#20dev_priv" title='dev_priv' data-ref="20dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::dummy_query_bo" title='vmw_private::dummy_query_bo' data-ref="vmw_private::dummy_query_bo">dummy_query_bo</a>);</td></tr>
<tr><th id="462">462</th><td>	<b>if</b> (<a class="local col0 ref" href="#20dev_priv" title='dev_priv' data-ref="20dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a>)</td></tr>
<tr><th id="463">463</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_cmdbuf_remove_pool" title='vmw_cmdbuf_remove_pool' data-ref="vmw_cmdbuf_remove_pool">vmw_cmdbuf_remove_pool</a>(<a class="local col0 ref" href="#20dev_priv" title='dev_priv' data-ref="20dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a>);</td></tr>
<tr><th id="464">464</th><td></td></tr>
<tr><th id="465">465</th><td>	<b>if</b> (<a class="local col0 ref" href="#20dev_priv" title='dev_priv' data-ref="20dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_mob" title='vmw_private::has_mob' data-ref="vmw_private::has_mob">has_mob</a>) {</td></tr>
<tr><th id="466">466</th><td>		<a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_evict_mm" title='ttm_bo_evict_mm' data-ref="ttm_bo_evict_mm">ttm_bo_evict_mm</a>(&amp;<a class="local col0 ref" href="#20dev_priv" title='dev_priv' data-ref="20dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>, <a class="macro" href="vmwgfx_drv.h.html#74" title="(3 + 1)" data-ref="_M/VMW_PL_MOB">VMW_PL_MOB</a>);</td></tr>
<tr><th id="467">467</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_otables_takedown" title='vmw_otables_takedown' data-ref="vmw_otables_takedown">vmw_otables_takedown</a>(<a class="local col0 ref" href="#20dev_priv" title='dev_priv' data-ref="20dev_priv">dev_priv</a>);</td></tr>
<tr><th id="468">468</th><td>	}</td></tr>
<tr><th id="469">469</th><td>}</td></tr>
<tr><th id="470">470</th><td></td></tr>
<tr><th id="471">471</th><td><i class="doc" data-doc="vmw_release_device_late">/**</i></td></tr>
<tr><th id="472">472</th><td><i class="doc" data-doc="vmw_release_device_late"> * vmw_release_device_late - Late part of fifo takedown.</i></td></tr>
<tr><th id="473">473</th><td><i class="doc" data-doc="vmw_release_device_late"> *</i></td></tr>
<tr><th id="474">474</th><td><i class="doc" data-doc="vmw_release_device_late"> * <span class="command">@dev</span>_<span class="verb">priv: Pointer to device private struct.</span></i></td></tr>
<tr><th id="475">475</th><td><i class="doc" data-doc="vmw_release_device_late"> *</i></td></tr>
<tr><th id="476">476</th><td><i class="doc" data-doc="vmw_release_device_late"> * This is the last part of the command submission takedown, to be called when</i></td></tr>
<tr><th id="477">477</th><td><i class="doc" data-doc="vmw_release_device_late"> * command submission is no longer needed. It may wait on pending fences.</i></td></tr>
<tr><th id="478">478</th><td><i class="doc" data-doc="vmw_release_device_late"> */</i></td></tr>
<tr><th id="479">479</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="vmw_release_device_late" title='vmw_release_device_late' data-type='void vmw_release_device_late(struct vmw_private * dev_priv)' data-ref="vmw_release_device_late">vmw_release_device_late</dfn>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col1 decl" id="21dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="21dev_priv">dev_priv</dfn>)</td></tr>
<tr><th id="480">480</th><td>{</td></tr>
<tr><th id="481">481</th><td>	<a class="ref fn" href="vmwgfx_fence.h.html#vmw_fence_fifo_down" title='vmw_fence_fifo_down' data-ref="vmw_fence_fifo_down">vmw_fence_fifo_down</a>(<a class="local col1 ref" href="#21dev_priv" title='dev_priv' data-ref="21dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fman" title='vmw_private::fman' data-ref="vmw_private::fman">fman</a>);</td></tr>
<tr><th id="482">482</th><td>	<b>if</b> (<a class="local col1 ref" href="#21dev_priv" title='dev_priv' data-ref="21dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a>)</td></tr>
<tr><th id="483">483</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_cmdbuf_man_destroy" title='vmw_cmdbuf_man_destroy' data-ref="vmw_cmdbuf_man_destroy">vmw_cmdbuf_man_destroy</a>(<a class="local col1 ref" href="#21dev_priv" title='dev_priv' data-ref="21dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cman" title='vmw_private::cman' data-ref="vmw_private::cman">cman</a>);</td></tr>
<tr><th id="484">484</th><td></td></tr>
<tr><th id="485">485</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fifo_release" title='vmw_fifo_release' data-ref="vmw_fifo_release">vmw_fifo_release</a>(<a class="local col1 ref" href="#21dev_priv" title='dev_priv' data-ref="21dev_priv">dev_priv</a>, &amp;<a class="local col1 ref" href="#21dev_priv" title='dev_priv' data-ref="21dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fifo" title='vmw_private::fifo' data-ref="vmw_private::fifo">fifo</a>);</td></tr>
<tr><th id="486">486</th><td>}</td></tr>
<tr><th id="487">487</th><td></td></tr>
<tr><th id="488">488</th><td><i class="doc" data-doc="vmw_get_initial_size">/**</i></td></tr>
<tr><th id="489">489</th><td><i class="doc" data-doc="vmw_get_initial_size"> * Sets the initial_[width|height] fields on the given vmw_private.</i></td></tr>
<tr><th id="490">490</th><td><i class="doc" data-doc="vmw_get_initial_size"> *</i></td></tr>
<tr><th id="491">491</th><td><i class="doc" data-doc="vmw_get_initial_size"> * It does so by reading SVGA_REG_[WIDTH|HEIGHT] regs and then</i></td></tr>
<tr><th id="492">492</th><td><i class="doc" data-doc="vmw_get_initial_size"> * clamping the value to fb_max_[width|height] fields and the</i></td></tr>
<tr><th id="493">493</th><td><i class="doc" data-doc="vmw_get_initial_size"> * VMW_MIN_INITIAL_[WIDTH|HEIGHT].</i></td></tr>
<tr><th id="494">494</th><td><i class="doc" data-doc="vmw_get_initial_size"> * If the values appear to be invalid, set them to</i></td></tr>
<tr><th id="495">495</th><td><i class="doc" data-doc="vmw_get_initial_size"> * VMW_MIN_INITIAL_[WIDTH|HEIGHT].</i></td></tr>
<tr><th id="496">496</th><td><i class="doc" data-doc="vmw_get_initial_size"> */</i></td></tr>
<tr><th id="497">497</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="vmw_get_initial_size" title='vmw_get_initial_size' data-type='void vmw_get_initial_size(struct vmw_private * dev_priv)' data-ref="vmw_get_initial_size">vmw_get_initial_size</dfn>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col2 decl" id="22dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="22dev_priv">dev_priv</dfn>)</td></tr>
<tr><th id="498">498</th><td>{</td></tr>
<tr><th id="499">499</th><td>	<a class="typedef" href="../../../../include/linux/types.h.html#uint32_t" title='uint32_t' data-type='__u32' data-ref="uint32_t">uint32_t</a> <dfn class="local col3 decl" id="23width" title='width' data-type='uint32_t' data-ref="23width">width</dfn>;</td></tr>
<tr><th id="500">500</th><td>	<a class="typedef" href="../../../../include/linux/types.h.html#uint32_t" title='uint32_t' data-type='__u32' data-ref="uint32_t">uint32_t</a> <dfn class="local col4 decl" id="24height" title='height' data-type='uint32_t' data-ref="24height">height</dfn>;</td></tr>
<tr><th id="501">501</th><td></td></tr>
<tr><th id="502">502</th><td>	<a class="local col3 ref" href="#23width" title='width' data-ref="23width">width</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col2 ref" href="#22dev_priv" title='dev_priv' data-ref="22dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_WIDTH" title='SVGA_REG_WIDTH' data-ref="SVGA_REG_WIDTH">SVGA_REG_WIDTH</a>);</td></tr>
<tr><th id="503">503</th><td>	<a class="local col4 ref" href="#24height" title='height' data-ref="24height">height</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col2 ref" href="#22dev_priv" title='dev_priv' data-ref="22dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_HEIGHT" title='SVGA_REG_HEIGHT' data-ref="SVGA_REG_HEIGHT">SVGA_REG_HEIGHT</a>);</td></tr>
<tr><th id="504">504</th><td></td></tr>
<tr><th id="505">505</th><td>	<a class="local col3 ref" href="#23width" title='width' data-ref="23width">width</a> = <a class="macro" href="../../../../include/linux/kernel.h.html#881" title="({ uint32_t __UNIQUE_ID_min1_110 = (width); uint32_t __UNIQUE_ID_min2_111 = (800); (void) (&amp;__UNIQUE_ID_min1_110 == &amp;__UNIQUE_ID_min2_111); __UNIQUE_ID_min1_110 &gt; __UNIQUE_ID_min2_111 ? __UNIQUE_ID_min1_110 : __UNIQUE_ID_min2_111; })" data-ref="_M/max_t">max_t</a>(<a class="typedef" href="../../../../include/linux/types.h.html#uint32_t" title='uint32_t' data-type='__u32' data-ref="uint32_t">uint32_t</a>, <a class="local col3 ref" href="#23width" title='width' data-ref="23width">width</a>, <a class="macro" href="#43" title="800" data-ref="_M/VMW_MIN_INITIAL_WIDTH">VMW_MIN_INITIAL_WIDTH</a>);</td></tr>
<tr><th id="506">506</th><td>	<a class="local col4 ref" href="#24height" title='height' data-ref="24height">height</a> = <a class="macro" href="../../../../include/linux/kernel.h.html#881" title="({ uint32_t __UNIQUE_ID_min1_114 = (height); uint32_t __UNIQUE_ID_min2_115 = (600); (void) (&amp;__UNIQUE_ID_min1_114 == &amp;__UNIQUE_ID_min2_115); __UNIQUE_ID_min1_114 &gt; __UNIQUE_ID_min2_115 ? __UNIQUE_ID_min1_114 : __UNIQUE_ID_min2_115; })" data-ref="_M/max_t">max_t</a>(<a class="typedef" href="../../../../include/linux/types.h.html#uint32_t" title='uint32_t' data-type='__u32' data-ref="uint32_t">uint32_t</a>, <a class="local col4 ref" href="#24height" title='height' data-ref="24height">height</a>, <a class="macro" href="#44" title="600" data-ref="_M/VMW_MIN_INITIAL_HEIGHT">VMW_MIN_INITIAL_HEIGHT</a>);</td></tr>
<tr><th id="507">507</th><td></td></tr>
<tr><th id="508">508</th><td>	<b>if</b> (<a class="local col3 ref" href="#23width" title='width' data-ref="23width">width</a> &gt; <a class="local col2 ref" href="#22dev_priv" title='dev_priv' data-ref="22dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fb_max_width" title='vmw_private::fb_max_width' data-ref="vmw_private::fb_max_width">fb_max_width</a> ||</td></tr>
<tr><th id="509">509</th><td>	    <a class="local col4 ref" href="#24height" title='height' data-ref="24height">height</a> &gt; <a class="local col2 ref" href="#22dev_priv" title='dev_priv' data-ref="22dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fb_max_height" title='vmw_private::fb_max_height' data-ref="vmw_private::fb_max_height">fb_max_height</a>) {</td></tr>
<tr><th id="510">510</th><td></td></tr>
<tr><th id="511">511</th><td>		<i>/*</i></td></tr>
<tr><th id="512">512</th><td><i>		 * This is a host error and shouldn't occur.</i></td></tr>
<tr><th id="513">513</th><td><i>		 */</i></td></tr>
<tr><th id="514">514</th><td></td></tr>
<tr><th id="515">515</th><td>		<a class="local col3 ref" href="#23width" title='width' data-ref="23width">width</a> = <a class="macro" href="#43" title="800" data-ref="_M/VMW_MIN_INITIAL_WIDTH">VMW_MIN_INITIAL_WIDTH</a>;</td></tr>
<tr><th id="516">516</th><td>		<a class="local col4 ref" href="#24height" title='height' data-ref="24height">height</a> = <a class="macro" href="#44" title="600" data-ref="_M/VMW_MIN_INITIAL_HEIGHT">VMW_MIN_INITIAL_HEIGHT</a>;</td></tr>
<tr><th id="517">517</th><td>	}</td></tr>
<tr><th id="518">518</th><td></td></tr>
<tr><th id="519">519</th><td>	<a class="local col2 ref" href="#22dev_priv" title='dev_priv' data-ref="22dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::initial_width" title='vmw_private::initial_width' data-ref="vmw_private::initial_width">initial_width</a> = <a class="local col3 ref" href="#23width" title='width' data-ref="23width">width</a>;</td></tr>
<tr><th id="520">520</th><td>	<a class="local col2 ref" href="#22dev_priv" title='dev_priv' data-ref="22dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::initial_height" title='vmw_private::initial_height' data-ref="vmw_private::initial_height">initial_height</a> = <a class="local col4 ref" href="#24height" title='height' data-ref="24height">height</a>;</td></tr>
<tr><th id="521">521</th><td>}</td></tr>
<tr><th id="522">522</th><td></td></tr>
<tr><th id="523">523</th><td><i class="doc" data-doc="vmw_dma_select_mode">/**</i></td></tr>
<tr><th id="524">524</th><td><i class="doc" data-doc="vmw_dma_select_mode"> * vmw_dma_select_mode - Determine how DMA mappings should be set up for this</i></td></tr>
<tr><th id="525">525</th><td><i class="doc" data-doc="vmw_dma_select_mode"> * system.</i></td></tr>
<tr><th id="526">526</th><td><i class="doc" data-doc="vmw_dma_select_mode"> *</i></td></tr>
<tr><th id="527">527</th><td><i class="doc" data-doc="vmw_dma_select_mode"> * <span class="command">@dev</span>_<span class="verb">priv: Pointer to a struct vmw_private</span></i></td></tr>
<tr><th id="528">528</th><td><i class="doc" data-doc="vmw_dma_select_mode"> *</i></td></tr>
<tr><th id="529">529</th><td><i class="doc" data-doc="vmw_dma_select_mode"> * This functions tries to determine the IOMMU setup and what actions</i></td></tr>
<tr><th id="530">530</th><td><i class="doc" data-doc="vmw_dma_select_mode"> * need to be taken by the driver to make system pages visible to the</i></td></tr>
<tr><th id="531">531</th><td><i class="doc" data-doc="vmw_dma_select_mode"> * device.</i></td></tr>
<tr><th id="532">532</th><td><i class="doc" data-doc="vmw_dma_select_mode"> * If this function decides that DMA is not possible, it returns -EINVAL.</i></td></tr>
<tr><th id="533">533</th><td><i class="doc" data-doc="vmw_dma_select_mode"> * The driver may then try to disable features of the device that require</i></td></tr>
<tr><th id="534">534</th><td><i class="doc" data-doc="vmw_dma_select_mode"> * DMA.</i></td></tr>
<tr><th id="535">535</th><td><i class="doc" data-doc="vmw_dma_select_mode"> */</i></td></tr>
<tr><th id="536">536</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_dma_select_mode" title='vmw_dma_select_mode' data-type='int vmw_dma_select_mode(struct vmw_private * dev_priv)' data-ref="vmw_dma_select_mode">vmw_dma_select_mode</dfn>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col5 decl" id="25dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="25dev_priv">dev_priv</dfn>)</td></tr>
<tr><th id="537">537</th><td>{</td></tr>
<tr><th id="538">538</th><td>	<em>static</em> <em>const</em> <em>char</em> *<dfn class="local col6 decl" id="26names" title='names' data-type='const char *[4]' data-ref="26names">names</dfn>[<a class="enum" href="vmwgfx_drv.h.html#vmw_dma_map_max" title='vmw_dma_map_max' data-ref="vmw_dma_map_max">vmw_dma_map_max</a>] = {</td></tr>
<tr><th id="539">539</th><td>		[<a class="enum" href="vmwgfx_drv.h.html#vmw_dma_phys" title='vmw_dma_phys' data-ref="vmw_dma_phys">vmw_dma_phys</a>] = <q>"Using physical TTM page addresses."</q>,</td></tr>
<tr><th id="540">540</th><td>		[<a class="enum" href="vmwgfx_drv.h.html#vmw_dma_alloc_coherent" title='vmw_dma_alloc_coherent' data-ref="vmw_dma_alloc_coherent">vmw_dma_alloc_coherent</a>] = <q>"Using coherent TTM pages."</q>,</td></tr>
<tr><th id="541">541</th><td>		[<a class="enum" href="vmwgfx_drv.h.html#vmw_dma_map_populate" title='vmw_dma_map_populate' data-ref="vmw_dma_map_populate">vmw_dma_map_populate</a>] = <q>"Keeping DMA mappings."</q>,</td></tr>
<tr><th id="542">542</th><td>		[<a class="enum" href="vmwgfx_drv.h.html#vmw_dma_map_bind" title='vmw_dma_map_bind' data-ref="vmw_dma_map_bind">vmw_dma_map_bind</a>] = <q>"Giving up DMA mappings early."</q>};</td></tr>
<tr><th id="543">543</th><td><u>#<span data-ppcond="543">ifdef</span> <a class="macro" href="../../../../include/generated/autoconf.h.html#181" data-ref="_M/CONFIG_X86">CONFIG_X86</a></u></td></tr>
<tr><th id="544">544</th><td>	<em>const</em> <b>struct</b> <a class="type" href="../../../../include/linux/dma-mapping.h.html#dma_map_ops" title='dma_map_ops' data-ref="dma_map_ops">dma_map_ops</a> *<dfn class="local col7 decl" id="27dma_ops" title='dma_ops' data-type='const struct dma_map_ops *' data-ref="27dma_ops">dma_ops</dfn> = <a class="ref fn" href="../../../../include/linux/dma-mapping.h.html#get_dma_ops" title='get_dma_ops' data-ref="get_dma_ops">get_dma_ops</a>(<a class="local col5 ref" href="#25dev_priv" title='dev_priv' data-ref="25dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::dev" title='vmw_private::dev' data-ref="vmw_private::dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::dev" title='drm_device::dev' data-ref="drm_device::dev">dev</a>);</td></tr>
<tr><th id="545">545</th><td></td></tr>
<tr><th id="546">546</th><td><u>#<span data-ppcond="546">ifdef</span> <a class="macro" href="../../../../include/generated/autoconf.h.html#1107" data-ref="_M/CONFIG_INTEL_IOMMU">CONFIG_INTEL_IOMMU</a></u></td></tr>
<tr><th id="547">547</th><td>	<b>if</b> (<a class="ref" href="../../../../include/linux/dma_remapping.h.html#intel_iommu_enabled" title='intel_iommu_enabled' data-ref="intel_iommu_enabled">intel_iommu_enabled</a>) {</td></tr>
<tr><th id="548">548</th><td>		<a class="local col5 ref" href="#25dev_priv" title='dev_priv' data-ref="25dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::map_mode" title='vmw_private::map_mode' data-ref="vmw_private::map_mode">map_mode</a> = <a class="enum" href="vmwgfx_drv.h.html#vmw_dma_map_populate" title='vmw_dma_map_populate' data-ref="vmw_dma_map_populate">vmw_dma_map_populate</a>;</td></tr>
<tr><th id="549">549</th><td>		<b>goto</b> <a class="lbl" href="#28out_fixup" data-ref="28out_fixup">out_fixup</a>;</td></tr>
<tr><th id="550">550</th><td>	}</td></tr>
<tr><th id="551">551</th><td><u>#<span data-ppcond="546">endif</span></u></td></tr>
<tr><th id="552">552</th><td></td></tr>
<tr><th id="553">553</th><td>	<b>if</b> (!(<a class="tu ref" href="#vmw_force_iommu" title='vmw_force_iommu' data-use='r' data-ref="vmw_force_iommu">vmw_force_iommu</a> || <a class="tu ref" href="#vmw_force_coherent" title='vmw_force_coherent' data-use='r' data-ref="vmw_force_coherent">vmw_force_coherent</a>)) {</td></tr>
<tr><th id="554">554</th><td>		<a class="local col5 ref" href="#25dev_priv" title='dev_priv' data-ref="25dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::map_mode" title='vmw_private::map_mode' data-ref="vmw_private::map_mode">map_mode</a> = <a class="enum" href="vmwgfx_drv.h.html#vmw_dma_phys" title='vmw_dma_phys' data-ref="vmw_dma_phys">vmw_dma_phys</a>;</td></tr>
<tr><th id="555">555</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;DMA map mode: %s\n&quot;, names[dev_priv-&gt;map_mode]); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"DMA map mode: %s\n"</q>, <a class="local col6 ref" href="#26names" title='names' data-ref="26names">names</a>[<a class="local col5 ref" href="#25dev_priv" title='dev_priv' data-ref="25dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::map_mode" title='vmw_private::map_mode' data-ref="vmw_private::map_mode">map_mode</a>]);</td></tr>
<tr><th id="556">556</th><td>		<b>return</b> <var>0</var>;</td></tr>
<tr><th id="557">557</th><td>	}</td></tr>
<tr><th id="558">558</th><td></td></tr>
<tr><th id="559">559</th><td>	<a class="local col5 ref" href="#25dev_priv" title='dev_priv' data-ref="25dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::map_mode" title='vmw_private::map_mode' data-ref="vmw_private::map_mode">map_mode</a> = <a class="enum" href="vmwgfx_drv.h.html#vmw_dma_map_populate" title='vmw_dma_map_populate' data-ref="vmw_dma_map_populate">vmw_dma_map_populate</a>;</td></tr>
<tr><th id="560">560</th><td></td></tr>
<tr><th id="561">561</th><td>	<b>if</b> (<a class="local col7 ref" href="#27dma_ops" title='dma_ops' data-ref="27dma_ops">dma_ops</a>-&gt;<a class="ref field" href="../../../../include/linux/dma-mapping.h.html#dma_map_ops::sync_single_for_cpu" title='dma_map_ops::sync_single_for_cpu' data-ref="dma_map_ops::sync_single_for_cpu">sync_single_for_cpu</a>)</td></tr>
<tr><th id="562">562</th><td>		<a class="local col5 ref" href="#25dev_priv" title='dev_priv' data-ref="25dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::map_mode" title='vmw_private::map_mode' data-ref="vmw_private::map_mode">map_mode</a> = <a class="enum" href="vmwgfx_drv.h.html#vmw_dma_alloc_coherent" title='vmw_dma_alloc_coherent' data-ref="vmw_dma_alloc_coherent">vmw_dma_alloc_coherent</a>;</td></tr>
<tr><th id="563">563</th><td><u>#<span data-ppcond="563">ifdef</span> <a class="macro" href="../../../../include/generated/autoconf.h.html#414" data-ref="_M/CONFIG_SWIOTLB">CONFIG_SWIOTLB</a></u></td></tr>
<tr><th id="564">564</th><td>	<b>if</b> (<a class="ref fn" href="../../../../include/linux/swiotlb.h.html#swiotlb_nr_tbl" title='swiotlb_nr_tbl' data-ref="swiotlb_nr_tbl">swiotlb_nr_tbl</a>() == <var>0</var>)</td></tr>
<tr><th id="565">565</th><td>		<a class="local col5 ref" href="#25dev_priv" title='dev_priv' data-ref="25dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::map_mode" title='vmw_private::map_mode' data-ref="vmw_private::map_mode">map_mode</a> = <a class="enum" href="vmwgfx_drv.h.html#vmw_dma_map_populate" title='vmw_dma_map_populate' data-ref="vmw_dma_map_populate">vmw_dma_map_populate</a>;</td></tr>
<tr><th id="566">566</th><td><u>#<span data-ppcond="563">endif</span></u></td></tr>
<tr><th id="567">567</th><td></td></tr>
<tr><th id="568">568</th><td><u>#<span data-ppcond="568">ifdef</span> <a class="macro" href="../../../../include/generated/autoconf.h.html#1107" data-ref="_M/CONFIG_INTEL_IOMMU">CONFIG_INTEL_IOMMU</a></u></td></tr>
<tr><th id="569">569</th><td><dfn class="lbl" id="28out_fixup" data-ref="28out_fixup">out_fixup</dfn>:</td></tr>
<tr><th id="570">570</th><td><u>#<span data-ppcond="568">endif</span></u></td></tr>
<tr><th id="571">571</th><td>	<b>if</b> (<a class="local col5 ref" href="#25dev_priv" title='dev_priv' data-ref="25dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::map_mode" title='vmw_private::map_mode' data-ref="vmw_private::map_mode">map_mode</a> == <a class="enum" href="vmwgfx_drv.h.html#vmw_dma_map_populate" title='vmw_dma_map_populate' data-ref="vmw_dma_map_populate">vmw_dma_map_populate</a> &amp;&amp;</td></tr>
<tr><th id="572">572</th><td>	    <a class="tu ref" href="#vmw_restrict_iommu" title='vmw_restrict_iommu' data-use='r' data-ref="vmw_restrict_iommu">vmw_restrict_iommu</a>)</td></tr>
<tr><th id="573">573</th><td>		<a class="local col5 ref" href="#25dev_priv" title='dev_priv' data-ref="25dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::map_mode" title='vmw_private::map_mode' data-ref="vmw_private::map_mode">map_mode</a> = <a class="enum" href="vmwgfx_drv.h.html#vmw_dma_map_bind" title='vmw_dma_map_bind' data-ref="vmw_dma_map_bind">vmw_dma_map_bind</a>;</td></tr>
<tr><th id="574">574</th><td></td></tr>
<tr><th id="575">575</th><td>	<b>if</b> (<a class="tu ref" href="#vmw_force_coherent" title='vmw_force_coherent' data-use='r' data-ref="vmw_force_coherent">vmw_force_coherent</a>)</td></tr>
<tr><th id="576">576</th><td>		<a class="local col5 ref" href="#25dev_priv" title='dev_priv' data-ref="25dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::map_mode" title='vmw_private::map_mode' data-ref="vmw_private::map_mode">map_mode</a> = <a class="enum" href="vmwgfx_drv.h.html#vmw_dma_alloc_coherent" title='vmw_dma_alloc_coherent' data-ref="vmw_dma_alloc_coherent">vmw_dma_alloc_coherent</a>;</td></tr>
<tr><th id="577">577</th><td></td></tr>
<tr><th id="578">578</th><td><u>#<span data-ppcond="578">if</span> !defined(<a class="macro" href="../../../../include/generated/autoconf.h.html#414" data-ref="_M/CONFIG_SWIOTLB">CONFIG_SWIOTLB</a>) &amp;&amp; !defined(<a class="macro" href="../../../../include/generated/autoconf.h.html#1107" data-ref="_M/CONFIG_INTEL_IOMMU">CONFIG_INTEL_IOMMU</a>)</u></td></tr>
<tr><th id="579">579</th><td>	<i>/*</i></td></tr>
<tr><th id="580">580</th><td><i>	 * No coherent page pool</i></td></tr>
<tr><th id="581">581</th><td><i>	 */</i></td></tr>
<tr><th id="582">582</th><td>	<b>if</b> (dev_priv-&gt;map_mode == vmw_dma_alloc_coherent)</td></tr>
<tr><th id="583">583</th><td>		<b>return</b> -EINVAL;</td></tr>
<tr><th id="584">584</th><td><u>#<span data-ppcond="578">endif</span></u></td></tr>
<tr><th id="585">585</th><td></td></tr>
<tr><th id="586">586</th><td><u>#<span data-ppcond="543">else</span> /* CONFIG_X86 */</u></td></tr>
<tr><th id="587">587</th><td>	dev_priv-&gt;map_mode = vmw_dma_map_populate;</td></tr>
<tr><th id="588">588</th><td><u>#<span data-ppcond="543">endif</span> /* CONFIG_X86 */</u></td></tr>
<tr><th id="589">589</th><td></td></tr>
<tr><th id="590">590</th><td>	<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;DMA map mode: %s\n&quot;, names[dev_priv-&gt;map_mode]); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"DMA map mode: %s\n"</q>, <a class="local col6 ref" href="#26names" title='names' data-ref="26names">names</a>[<a class="local col5 ref" href="#25dev_priv" title='dev_priv' data-ref="25dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::map_mode" title='vmw_private::map_mode' data-ref="vmw_private::map_mode">map_mode</a>]);</td></tr>
<tr><th id="591">591</th><td></td></tr>
<tr><th id="592">592</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="593">593</th><td>}</td></tr>
<tr><th id="594">594</th><td></td></tr>
<tr><th id="595">595</th><td><i class="doc">/**</i></td></tr>
<tr><th id="596">596</th><td><i class="doc"> * vmw_dma_masks - set required page- and dma masks</i></td></tr>
<tr><th id="597">597</th><td><i class="doc"> *</i></td></tr>
<tr><th id="598">598</th><td><i class="doc"> * <span class="command">@dev</span>:<span class="verb"> Pointer to struct drm-device</span></i></td></tr>
<tr><th id="599">599</th><td><i class="doc"> *</i></td></tr>
<tr><th id="600">600</th><td><i class="doc"> * With 32-bit we can only handle 32 bit PFNs. Optionally set that</i></td></tr>
<tr><th id="601">601</th><td><i class="doc"> * restriction also for 64-bit systems.</i></td></tr>
<tr><th id="602">602</th><td><i class="doc"> */</i></td></tr>
<tr><th id="603">603</th><td><u>#<span data-ppcond="603">ifdef</span> <a class="macro" href="../../../../include/generated/autoconf.h.html#1107" data-ref="_M/CONFIG_INTEL_IOMMU">CONFIG_INTEL_IOMMU</a></u></td></tr>
<tr><th id="604">604</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_dma_masks" title='vmw_dma_masks' data-type='int vmw_dma_masks(struct vmw_private * dev_priv)' data-ref="vmw_dma_masks">vmw_dma_masks</dfn>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col9 decl" id="29dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="29dev_priv">dev_priv</dfn>)</td></tr>
<tr><th id="605">605</th><td>{</td></tr>
<tr><th id="606">606</th><td>	<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col0 decl" id="30dev" title='dev' data-type='struct drm_device *' data-ref="30dev">dev</dfn> = <a class="local col9 ref" href="#29dev_priv" title='dev_priv' data-ref="29dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::dev" title='vmw_private::dev' data-ref="vmw_private::dev">dev</a>;</td></tr>
<tr><th id="607">607</th><td></td></tr>
<tr><th id="608">608</th><td>	<b>if</b> (<a class="ref" href="../../../../include/linux/dma_remapping.h.html#intel_iommu_enabled" title='intel_iommu_enabled' data-ref="intel_iommu_enabled">intel_iommu_enabled</a> &amp;&amp;</td></tr>
<tr><th id="609">609</th><td>	    (<b>sizeof</b>(<em>unsigned</em> <em>long</em>) == <var>4</var> || <a class="tu ref" href="#vmw_restrict_dma_mask" title='vmw_restrict_dma_mask' data-use='r' data-ref="vmw_restrict_dma_mask">vmw_restrict_dma_mask</a>)) {</td></tr>
<tr><th id="610">610</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;Restricting DMA addresses to 44 bits.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"Restricting DMA addresses to 44 bits.\n"</q>);</td></tr>
<tr><th id="611">611</th><td>		<b>return</b> <a class="ref fn" href="../../../../include/linux/dma-mapping.h.html#dma_set_mask" title='dma_set_mask' data-ref="dma_set_mask">dma_set_mask</a>(<a class="local col0 ref" href="#30dev" title='dev' data-ref="30dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::dev" title='drm_device::dev' data-ref="drm_device::dev">dev</a>, <a class="macro" href="../../../../include/linux/dma-mapping.h.html#140" title="(((44) == 64) ? ~0ULL : ((1ULL&lt;&lt;(44))-1))" data-ref="_M/DMA_BIT_MASK">DMA_BIT_MASK</a>(<var>44</var>));</td></tr>
<tr><th id="612">612</th><td>	}</td></tr>
<tr><th id="613">613</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="614">614</th><td>}</td></tr>
<tr><th id="615">615</th><td><u>#<span data-ppcond="603">else</span></u></td></tr>
<tr><th id="616">616</th><td><em>static</em> <em>int</em> vmw_dma_masks(<b>struct</b> vmw_private *dev_priv)</td></tr>
<tr><th id="617">617</th><td>{</td></tr>
<tr><th id="618">618</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="619">619</th><td>}</td></tr>
<tr><th id="620">620</th><td><u>#<span data-ppcond="603">endif</span></u></td></tr>
<tr><th id="621">621</th><td></td></tr>
<tr><th id="622">622</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_driver_load" title='vmw_driver_load' data-type='int vmw_driver_load(struct drm_device * dev, unsigned long chipset)' data-ref="vmw_driver_load">vmw_driver_load</dfn>(<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col1 decl" id="31dev" title='dev' data-type='struct drm_device *' data-ref="31dev">dev</dfn>, <em>unsigned</em> <em>long</em> <dfn class="local col2 decl" id="32chipset" title='chipset' data-type='unsigned long' data-ref="32chipset">chipset</dfn>)</td></tr>
<tr><th id="623">623</th><td>{</td></tr>
<tr><th id="624">624</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col3 decl" id="33dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="33dev_priv">dev_priv</dfn>;</td></tr>
<tr><th id="625">625</th><td>	<em>int</em> <dfn class="local col4 decl" id="34ret" title='ret' data-type='int' data-ref="34ret">ret</dfn>;</td></tr>
<tr><th id="626">626</th><td>	<a class="typedef" href="../../../../include/linux/types.h.html#uint32_t" title='uint32_t' data-type='__u32' data-ref="uint32_t">uint32_t</a> <dfn class="local col5 decl" id="35svga_id" title='svga_id' data-type='uint32_t' data-ref="35svga_id">svga_id</dfn>;</td></tr>
<tr><th id="627">627</th><td>	<b>enum</b> <a class="type" href="vmwgfx_drv.h.html#vmw_res_type" title='vmw_res_type' data-ref="vmw_res_type">vmw_res_type</a> <dfn class="local col6 decl" id="36i" title='i' data-type='enum vmw_res_type' data-ref="36i">i</dfn>;</td></tr>
<tr><th id="628">628</th><td>	<a class="typedef" href="../../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="local col7 decl" id="37refuse_dma" title='refuse_dma' data-type='bool' data-ref="37refuse_dma">refuse_dma</dfn> = <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>;</td></tr>
<tr><th id="629">629</th><td>	<em>char</em> <dfn class="local col8 decl" id="38host_log" title='host_log' data-type='char [100]' data-ref="38host_log">host_log</dfn>[<var>100</var>] = {<var>0</var>};</td></tr>
<tr><th id="630">630</th><td></td></tr>
<tr><th id="631">631</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a> = <a class="ref fn" href="../../../../include/linux/slab.h.html#kzalloc" title='kzalloc' data-ref="kzalloc">kzalloc</a>(<b>sizeof</b>(*<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>), <a class="macro" href="../../../../include/linux/gfp.h.html#278" title="((( gfp_t)(0x400000u|0x1000000u)) | (( gfp_t)0x40u) | (( gfp_t)0x80u))" data-ref="_M/GFP_KERNEL">GFP_KERNEL</a>);</td></tr>
<tr><th id="632">632</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(!dev_priv), 0)" data-ref="_M/unlikely">unlikely</a>(!<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>)) {</td></tr>
<tr><th id="633">633</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Failed allocating a device private struct.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Failed allocating a device private struct.\n"</q>);</td></tr>
<tr><th id="634">634</th><td>		<b>return</b> -<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#16" title="12" data-ref="_M/ENOMEM">ENOMEM</a>;</td></tr>
<tr><th id="635">635</th><td>	}</td></tr>
<tr><th id="636">636</th><td></td></tr>
<tr><th id="637">637</th><td>	<a class="ref fn" href="../../../../include/linux/pci.h.html#pci_set_master" title='pci_set_master' data-ref="pci_set_master">pci_set_master</a>(<a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::pdev" title='drm_device::pdev' data-ref="drm_device::pdev">pdev</a>);</td></tr>
<tr><th id="638">638</th><td></td></tr>
<tr><th id="639">639</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::dev" title='vmw_private::dev' data-ref="vmw_private::dev">dev</a> = <a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>;</td></tr>
<tr><th id="640">640</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::vmw_chipset" title='vmw_private::vmw_chipset' data-ref="vmw_private::vmw_chipset">vmw_chipset</a> = <a class="local col2 ref" href="#32chipset" title='chipset' data-ref="32chipset">chipset</a>;</td></tr>
<tr><th id="641">641</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::last_read_seqno" title='vmw_private::last_read_seqno' data-ref="vmw_private::last_read_seqno">last_read_seqno</a> = (<a class="typedef" href="../../../../include/linux/types.h.html#uint32_t" title='uint32_t' data-type='__u32' data-ref="uint32_t">uint32_t</a>) -<var>100</var>;</td></tr>
<tr><th id="642">642</th><td>	<a class="macro" href="../../../../include/linux/mutex.h.html#110" title="do { static struct lock_class_key __key; __mutex_init((&amp;dev_priv-&gt;cmdbuf_mutex), &quot;&amp;dev_priv-&gt;cmdbuf_mutex&quot;, &amp;__key); } while (0)" data-ref="_M/mutex_init">mutex_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cmdbuf_mutex" title='vmw_private::cmdbuf_mutex' data-ref="vmw_private::cmdbuf_mutex">cmdbuf_mutex</a>);</td></tr>
<tr><th id="643">643</th><td>	<a class="macro" href="../../../../include/linux/mutex.h.html#110" title="do { static struct lock_class_key __key; __mutex_init((&amp;dev_priv-&gt;release_mutex), &quot;&amp;dev_priv-&gt;release_mutex&quot;, &amp;__key); } while (0)" data-ref="_M/mutex_init">mutex_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::release_mutex" title='vmw_private::release_mutex' data-ref="vmw_private::release_mutex">release_mutex</a>);</td></tr>
<tr><th id="644">644</th><td>	<a class="macro" href="../../../../include/linux/mutex.h.html#110" title="do { static struct lock_class_key __key; __mutex_init((&amp;dev_priv-&gt;binding_mutex), &quot;&amp;dev_priv-&gt;binding_mutex&quot;, &amp;__key); } while (0)" data-ref="_M/mutex_init">mutex_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::binding_mutex" title='vmw_private::binding_mutex' data-ref="vmw_private::binding_mutex">binding_mutex</a>);</td></tr>
<tr><th id="645">645</th><td>	<a class="macro" href="../../../../include/linux/mutex.h.html#110" title="do { static struct lock_class_key __key; __mutex_init((&amp;dev_priv-&gt;global_kms_state_mutex), &quot;&amp;dev_priv-&gt;global_kms_state_mutex&quot;, &amp;__key); } while (0)" data-ref="_M/mutex_init">mutex_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::global_kms_state_mutex" title='vmw_private::global_kms_state_mutex' data-ref="vmw_private::global_kms_state_mutex">global_kms_state_mutex</a>);</td></tr>
<tr><th id="646">646</th><td>	<a class="macro" href="../../../../include/linux/rwlock.h.html#27" title="do { *(&amp;dev_priv-&gt;resource_lock) = (rwlock_t) { .raw_lock = { .cnts = { (0) }, .wait_lock = { { (0) } }, }, }; } while (0)" data-ref="_M/rwlock_init">rwlock_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::resource_lock" title='vmw_private::resource_lock' data-ref="vmw_private::resource_lock">resource_lock</a>);</td></tr>
<tr><th id="647">647</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_lock_init" title='ttm_lock_init' data-ref="ttm_lock_init">ttm_lock_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::reservation_sem" title='vmw_private::reservation_sem' data-ref="vmw_private::reservation_sem">reservation_sem</a>);</td></tr>
<tr><th id="648">648</th><td>	<a class="macro" href="../../../../include/linux/spinlock.h.html#309" title="do { spinlock_check(&amp;dev_priv-&gt;hw_lock); do { *(&amp;(&amp;dev_priv-&gt;hw_lock)-&gt;rlock) = (raw_spinlock_t) { .raw_lock = { { (0) } }, }; } while (0); } while (0)" data-ref="_M/spin_lock_init">spin_lock_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::hw_lock" title='vmw_private::hw_lock' data-ref="vmw_private::hw_lock">hw_lock</a>);</td></tr>
<tr><th id="649">649</th><td>	<a class="macro" href="../../../../include/linux/spinlock.h.html#309" title="do { spinlock_check(&amp;dev_priv-&gt;waiter_lock); do { *(&amp;(&amp;dev_priv-&gt;waiter_lock)-&gt;rlock) = (raw_spinlock_t) { .raw_lock = { { (0) } }, }; } while (0); } while (0)" data-ref="_M/spin_lock_init">spin_lock_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::waiter_lock" title='vmw_private::waiter_lock' data-ref="vmw_private::waiter_lock">waiter_lock</a>);</td></tr>
<tr><th id="650">650</th><td>	<a class="macro" href="../../../../include/linux/spinlock.h.html#309" title="do { spinlock_check(&amp;dev_priv-&gt;cap_lock); do { *(&amp;(&amp;dev_priv-&gt;cap_lock)-&gt;rlock) = (raw_spinlock_t) { .raw_lock = { { (0) } }, }; } while (0); } while (0)" data-ref="_M/spin_lock_init">spin_lock_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cap_lock" title='vmw_private::cap_lock' data-ref="vmw_private::cap_lock">cap_lock</a>);</td></tr>
<tr><th id="651">651</th><td>	<a class="macro" href="../../../../include/linux/spinlock.h.html#309" title="do { spinlock_check(&amp;dev_priv-&gt;svga_lock); do { *(&amp;(&amp;dev_priv-&gt;svga_lock)-&gt;rlock) = (raw_spinlock_t) { .raw_lock = { { (0) } }, }; } while (0); } while (0)" data-ref="_M/spin_lock_init">spin_lock_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::svga_lock" title='vmw_private::svga_lock' data-ref="vmw_private::svga_lock">svga_lock</a>);</td></tr>
<tr><th id="652">652</th><td>	<a class="macro" href="../../../../include/linux/spinlock.h.html#309" title="do { spinlock_check(&amp;dev_priv-&gt;cursor_lock); do { *(&amp;(&amp;dev_priv-&gt;cursor_lock)-&gt;rlock) = (raw_spinlock_t) { .raw_lock = { { (0) } }, }; } while (0); } while (0)" data-ref="_M/spin_lock_init">spin_lock_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cursor_lock" title='vmw_private::cursor_lock' data-ref="vmw_private::cursor_lock">cursor_lock</a>);</td></tr>
<tr><th id="653">653</th><td></td></tr>
<tr><th id="654">654</th><td>	<b>for</b> (<a class="local col6 ref" href="#36i" title='i' data-ref="36i">i</a> = <a class="enum" href="vmwgfx_drv.h.html#vmw_res_context" title='vmw_res_context' data-ref="vmw_res_context">vmw_res_context</a>; <a class="local col6 ref" href="#36i" title='i' data-ref="36i">i</a> &lt; <a class="enum" href="vmwgfx_drv.h.html#vmw_res_max" title='vmw_res_max' data-ref="vmw_res_max">vmw_res_max</a>; ++<a class="local col6 ref" href="#36i" title='i' data-ref="36i">i</a>) {</td></tr>
<tr><th id="655">655</th><td>		<a class="ref fn" href="../../../../include/linux/idr.h.html#idr_init" title='idr_init' data-ref="idr_init">idr_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::res_idr" title='vmw_private::res_idr' data-ref="vmw_private::res_idr">res_idr</a>[<a class="local col6 ref" href="#36i" title='i' data-ref="36i">i</a>]);</td></tr>
<tr><th id="656">656</th><td>		<a class="ref fn" href="../../../../include/linux/list.h.html#INIT_LIST_HEAD" title='INIT_LIST_HEAD' data-ref="INIT_LIST_HEAD">INIT_LIST_HEAD</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::res_lru" title='vmw_private::res_lru' data-ref="vmw_private::res_lru">res_lru</a>[<a class="local col6 ref" href="#36i" title='i' data-ref="36i">i</a>]);</td></tr>
<tr><th id="657">657</th><td>	}</td></tr>
<tr><th id="658">658</th><td></td></tr>
<tr><th id="659">659</th><td>	<a class="macro" href="../../../../include/linux/mutex.h.html#110" title="do { static struct lock_class_key __key; __mutex_init((&amp;dev_priv-&gt;init_mutex), &quot;&amp;dev_priv-&gt;init_mutex&quot;, &amp;__key); } while (0)" data-ref="_M/mutex_init">mutex_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::init_mutex" title='vmw_private::init_mutex' data-ref="vmw_private::init_mutex">init_mutex</a>);</td></tr>
<tr><th id="660">660</th><td>	<a class="macro" href="../../../../include/linux/wait.h.html#63" title="do { static struct lock_class_key __key; __init_waitqueue_head((&amp;dev_priv-&gt;fence_queue), &quot;&amp;dev_priv-&gt;fence_queue&quot;, &amp;__key); } while (0)" data-ref="_M/init_waitqueue_head">init_waitqueue_head</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fence_queue" title='vmw_private::fence_queue' data-ref="vmw_private::fence_queue">fence_queue</a>);</td></tr>
<tr><th id="661">661</th><td>	<a class="macro" href="../../../../include/linux/wait.h.html#63" title="do { static struct lock_class_key __key; __init_waitqueue_head((&amp;dev_priv-&gt;fifo_queue), &quot;&amp;dev_priv-&gt;fifo_queue&quot;, &amp;__key); } while (0)" data-ref="_M/init_waitqueue_head">init_waitqueue_head</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fifo_queue" title='vmw_private::fifo_queue' data-ref="vmw_private::fifo_queue">fifo_queue</a>);</td></tr>
<tr><th id="662">662</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fence_queue_waiters" title='vmw_private::fence_queue_waiters' data-ref="vmw_private::fence_queue_waiters">fence_queue_waiters</a> = <var>0</var>;</td></tr>
<tr><th id="663">663</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fifo_queue_waiters" title='vmw_private::fifo_queue_waiters' data-ref="vmw_private::fifo_queue_waiters">fifo_queue_waiters</a> = <var>0</var>;</td></tr>
<tr><th id="664">664</th><td></td></tr>
<tr><th id="665">665</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::used_memory_size" title='vmw_private::used_memory_size' data-ref="vmw_private::used_memory_size">used_memory_size</a> = <var>0</var>;</td></tr>
<tr><th id="666">666</th><td></td></tr>
<tr><th id="667">667</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::io_start" title='vmw_private::io_start' data-ref="vmw_private::io_start">io_start</a> = <a class="macro" href="../../../../include/linux/pci.h.html#1740" title="((dev-&gt;pdev)-&gt;resource[(0)].start)" data-ref="_M/pci_resource_start">pci_resource_start</a>(<a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::pdev" title='drm_device::pdev' data-ref="drm_device::pdev">pdev</a>, <var>0</var>);</td></tr>
<tr><th id="668">668</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::vram_start" title='vmw_private::vram_start' data-ref="vmw_private::vram_start">vram_start</a> = <a class="macro" href="../../../../include/linux/pci.h.html#1740" title="((dev-&gt;pdev)-&gt;resource[(1)].start)" data-ref="_M/pci_resource_start">pci_resource_start</a>(<a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::pdev" title='drm_device::pdev' data-ref="drm_device::pdev">pdev</a>, <var>1</var>);</td></tr>
<tr><th id="669">669</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::mmio_start" title='vmw_private::mmio_start' data-ref="vmw_private::mmio_start">mmio_start</a> = <a class="macro" href="../../../../include/linux/pci.h.html#1740" title="((dev-&gt;pdev)-&gt;resource[(2)].start)" data-ref="_M/pci_resource_start">pci_resource_start</a>(<a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::pdev" title='drm_device::pdev' data-ref="drm_device::pdev">pdev</a>, <var>2</var>);</td></tr>
<tr><th id="670">670</th><td></td></tr>
<tr><th id="671">671</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::assume_16bpp" title='vmw_private::assume_16bpp' data-ref="vmw_private::assume_16bpp">assume_16bpp</a> = !!<a class="tu ref" href="#vmw_assume_16bpp" title='vmw_assume_16bpp' data-use='r' data-ref="vmw_assume_16bpp">vmw_assume_16bpp</a>;</td></tr>
<tr><th id="672">672</th><td></td></tr>
<tr><th id="673">673</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::enable_fb" title='vmw_private::enable_fb' data-ref="vmw_private::enable_fb">enable_fb</a> = <a class="tu ref" href="#enable_fbdev" title='enable_fbdev' data-use='r' data-ref="enable_fbdev">enable_fbdev</a>;</td></tr>
<tr><th id="674">674</th><td></td></tr>
<tr><th id="675">675</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_write" title='vmw_write' data-ref="vmw_write">vmw_write</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_ID" title='SVGA_REG_ID' data-ref="SVGA_REG_ID">SVGA_REG_ID</a>, <a class="macro" href="device_include/svga_reg.h.html#93" title="(0x900000UL &lt;&lt; 8 | (2))" data-ref="_M/SVGA_ID_2">SVGA_ID_2</a>);</td></tr>
<tr><th id="676">676</th><td>	<a class="local col5 ref" href="#35svga_id" title='svga_id' data-ref="35svga_id">svga_id</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_ID" title='SVGA_REG_ID' data-ref="SVGA_REG_ID">SVGA_REG_ID</a>);</td></tr>
<tr><th id="677">677</th><td>	<b>if</b> (<a class="local col5 ref" href="#35svga_id" title='svga_id' data-ref="35svga_id">svga_id</a> != <a class="macro" href="device_include/svga_reg.h.html#93" title="(0x900000UL &lt;&lt; 8 | (2))" data-ref="_M/SVGA_ID_2">SVGA_ID_2</a>) {</td></tr>
<tr><th id="678">678</th><td>		<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = -<a class="macro" href="../../../../include/uapi/asm-generic/errno.h.html#18" title="38" data-ref="_M/ENOSYS">ENOSYS</a>;</td></tr>
<tr><th id="679">679</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Unsupported SVGA ID 0x%x\n&quot;, svga_id)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Unsupported SVGA ID 0x%x\n"</q>, <a class="local col5 ref" href="#35svga_id" title='svga_id' data-ref="35svga_id">svga_id</a>);</td></tr>
<tr><th id="680">680</th><td>		<b>goto</b> <a class="lbl" href="#39out_err0" data-ref="39out_err0">out_err0</a>;</td></tr>
<tr><th id="681">681</th><td>	}</td></tr>
<tr><th id="682">682</th><td></td></tr>
<tr><th id="683">683</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::capabilities" title='vmw_private::capabilities' data-ref="vmw_private::capabilities">capabilities</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_CAPABILITIES" title='SVGA_REG_CAPABILITIES' data-ref="SVGA_REG_CAPABILITIES">SVGA_REG_CAPABILITIES</a>);</td></tr>
<tr><th id="684">684</th><td>	<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = <a class="tu ref fn" href="#vmw_dma_select_mode" title='vmw_dma_select_mode' data-use='c' data-ref="vmw_dma_select_mode">vmw_dma_select_mode</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="685">685</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> != <var>0</var>)) {</td></tr>
<tr><th id="686">686</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;Restricting capabilities due to IOMMU setup.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"Restricting capabilities due to IOMMU setup.\n"</q>);</td></tr>
<tr><th id="687">687</th><td>		<a class="local col7 ref" href="#37refuse_dma" title='refuse_dma' data-ref="37refuse_dma">refuse_dma</a> = <a class="enum" href="../../../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>;</td></tr>
<tr><th id="688">688</th><td>	}</td></tr>
<tr><th id="689">689</th><td></td></tr>
<tr><th id="690">690</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::vram_size" title='vmw_private::vram_size' data-ref="vmw_private::vram_size">vram_size</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_VRAM_SIZE" title='SVGA_REG_VRAM_SIZE' data-ref="SVGA_REG_VRAM_SIZE">SVGA_REG_VRAM_SIZE</a>);</td></tr>
<tr><th id="691">691</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::mmio_size" title='vmw_private::mmio_size' data-ref="vmw_private::mmio_size">mmio_size</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_MEM_SIZE" title='SVGA_REG_MEM_SIZE' data-ref="SVGA_REG_MEM_SIZE">SVGA_REG_MEM_SIZE</a>);</td></tr>
<tr><th id="692">692</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fb_max_width" title='vmw_private::fb_max_width' data-ref="vmw_private::fb_max_width">fb_max_width</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_MAX_WIDTH" title='SVGA_REG_MAX_WIDTH' data-ref="SVGA_REG_MAX_WIDTH">SVGA_REG_MAX_WIDTH</a>);</td></tr>
<tr><th id="693">693</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fb_max_height" title='vmw_private::fb_max_height' data-ref="vmw_private::fb_max_height">fb_max_height</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_MAX_HEIGHT" title='SVGA_REG_MAX_HEIGHT' data-ref="SVGA_REG_MAX_HEIGHT">SVGA_REG_MAX_HEIGHT</a>);</td></tr>
<tr><th id="694">694</th><td></td></tr>
<tr><th id="695">695</th><td>	<a class="tu ref fn" href="#vmw_get_initial_size" title='vmw_get_initial_size' data-use='c' data-ref="vmw_get_initial_size">vmw_get_initial_size</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="696">696</th><td></td></tr>
<tr><th id="697">697</th><td>	<b>if</b> (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::capabilities" title='vmw_private::capabilities' data-ref="vmw_private::capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#685" title="0x00400000" data-ref="_M/SVGA_CAP_GMR2">SVGA_CAP_GMR2</a>) {</td></tr>
<tr><th id="698">698</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::max_gmr_ids" title='vmw_private::max_gmr_ids' data-ref="vmw_private::max_gmr_ids">max_gmr_ids</a> =</td></tr>
<tr><th id="699">699</th><td>			<a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_GMR_MAX_IDS" title='SVGA_REG_GMR_MAX_IDS' data-ref="SVGA_REG_GMR_MAX_IDS">SVGA_REG_GMR_MAX_IDS</a>);</td></tr>
<tr><th id="700">700</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::max_gmr_pages" title='vmw_private::max_gmr_pages' data-ref="vmw_private::max_gmr_pages">max_gmr_pages</a> =</td></tr>
<tr><th id="701">701</th><td>			<a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_GMRS_MAX_PAGES" title='SVGA_REG_GMRS_MAX_PAGES' data-ref="SVGA_REG_GMRS_MAX_PAGES">SVGA_REG_GMRS_MAX_PAGES</a>);</td></tr>
<tr><th id="702">702</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::memory_size" title='vmw_private::memory_size' data-ref="vmw_private::memory_size">memory_size</a> =</td></tr>
<tr><th id="703">703</th><td>			<a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_MEMORY_SIZE" title='SVGA_REG_MEMORY_SIZE' data-ref="SVGA_REG_MEMORY_SIZE">SVGA_REG_MEMORY_SIZE</a>);</td></tr>
<tr><th id="704">704</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::memory_size" title='vmw_private::memory_size' data-ref="vmw_private::memory_size">memory_size</a> -= <a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::vram_size" title='vmw_private::vram_size' data-ref="vmw_private::vram_size">vram_size</a>;</td></tr>
<tr><th id="705">705</th><td>	} <b>else</b> {</td></tr>
<tr><th id="706">706</th><td>		<i>/*</i></td></tr>
<tr><th id="707">707</th><td><i>		 * An arbitrary limit of 512MiB on surface</i></td></tr>
<tr><th id="708">708</th><td><i>		 * memory. But all HWV8 hardware supports GMR2.</i></td></tr>
<tr><th id="709">709</th><td><i>		 */</i></td></tr>
<tr><th id="710">710</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::memory_size" title='vmw_private::memory_size' data-ref="vmw_private::memory_size">memory_size</a> = <var>512</var>*<var>1024</var>*<var>1024</var>;</td></tr>
<tr><th id="711">711</th><td>	}</td></tr>
<tr><th id="712">712</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::max_mob_pages" title='vmw_private::max_mob_pages' data-ref="vmw_private::max_mob_pages">max_mob_pages</a> = <var>0</var>;</td></tr>
<tr><th id="713">713</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::max_mob_size" title='vmw_private::max_mob_size' data-ref="vmw_private::max_mob_size">max_mob_size</a> = <var>0</var>;</td></tr>
<tr><th id="714">714</th><td>	<b>if</b> (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::capabilities" title='vmw_private::capabilities' data-ref="vmw_private::capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#690" title="0x08000000" data-ref="_M/SVGA_CAP_GBOBJECTS">SVGA_CAP_GBOBJECTS</a>) {</td></tr>
<tr><th id="715">715</th><td>		<a class="typedef" href="../../../../include/linux/types.h.html#uint64_t" title='uint64_t' data-type='__u64' data-ref="uint64_t">uint64_t</a> <dfn class="local col0 decl" id="40mem_size" title='mem_size' data-type='uint64_t' data-ref="40mem_size">mem_size</dfn> =</td></tr>
<tr><th id="716">716</th><td>			<a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>,</td></tr>
<tr><th id="717">717</th><td>				 <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_SUGGESTED_GBOBJECT_MEM_SIZE_KB" title='SVGA_REG_SUGGESTED_GBOBJECT_MEM_SIZE_KB' data-ref="SVGA_REG_SUGGESTED_GBOBJECT_MEM_SIZE_KB">SVGA_REG_SUGGESTED_GBOBJECT_MEM_SIZE_KB</a>);</td></tr>
<tr><th id="718">718</th><td></td></tr>
<tr><th id="719">719</th><td>		<i>/*</i></td></tr>
<tr><th id="720">720</th><td><i>		 * Workaround for low memory 2D VMs to compensate for the</i></td></tr>
<tr><th id="721">721</th><td><i>		 * allocation taken by fbdev</i></td></tr>
<tr><th id="722">722</th><td><i>		 */</i></td></tr>
<tr><th id="723">723</th><td>		<b>if</b> (!(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::capabilities" title='vmw_private::capabilities' data-ref="vmw_private::capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#677" title="0x00004000" data-ref="_M/SVGA_CAP_3D">SVGA_CAP_3D</a>))</td></tr>
<tr><th id="724">724</th><td>			<a class="local col0 ref" href="#40mem_size" title='mem_size' data-ref="40mem_size">mem_size</a> *= <var>3</var>;</td></tr>
<tr><th id="725">725</th><td></td></tr>
<tr><th id="726">726</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::max_mob_pages" title='vmw_private::max_mob_pages' data-ref="vmw_private::max_mob_pages">max_mob_pages</a> = <a class="local col0 ref" href="#40mem_size" title='mem_size' data-ref="40mem_size">mem_size</a> * <var>1024</var> / <a class="macro" href="../../../../arch/x86/include/asm/page_types.h.html#11" title="((1UL) &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>;</td></tr>
<tr><th id="727">727</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::prim_bb_mem" title='vmw_private::prim_bb_mem' data-ref="vmw_private::prim_bb_mem">prim_bb_mem</a> =</td></tr>
<tr><th id="728">728</th><td>			<a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>,</td></tr>
<tr><th id="729">729</th><td>				 <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_MAX_PRIMARY_BOUNDING_BOX_MEM" title='SVGA_REG_MAX_PRIMARY_BOUNDING_BOX_MEM' data-ref="SVGA_REG_MAX_PRIMARY_BOUNDING_BOX_MEM">SVGA_REG_MAX_PRIMARY_BOUNDING_BOX_MEM</a>);</td></tr>
<tr><th id="730">730</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::max_mob_size" title='vmw_private::max_mob_size' data-ref="vmw_private::max_mob_size">max_mob_size</a> =</td></tr>
<tr><th id="731">731</th><td>			<a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_MOB_MAX_SIZE" title='SVGA_REG_MOB_MAX_SIZE' data-ref="SVGA_REG_MOB_MAX_SIZE">SVGA_REG_MOB_MAX_SIZE</a>);</td></tr>
<tr><th id="732">732</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::stdu_max_width" title='vmw_private::stdu_max_width' data-ref="vmw_private::stdu_max_width">stdu_max_width</a> =</td></tr>
<tr><th id="733">733</th><td>			<a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_SCREENTARGET_MAX_WIDTH" title='SVGA_REG_SCREENTARGET_MAX_WIDTH' data-ref="SVGA_REG_SCREENTARGET_MAX_WIDTH">SVGA_REG_SCREENTARGET_MAX_WIDTH</a>);</td></tr>
<tr><th id="734">734</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::stdu_max_height" title='vmw_private::stdu_max_height' data-ref="vmw_private::stdu_max_height">stdu_max_height</a> =</td></tr>
<tr><th id="735">735</th><td>			<a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_SCREENTARGET_MAX_HEIGHT" title='SVGA_REG_SCREENTARGET_MAX_HEIGHT' data-ref="SVGA_REG_SCREENTARGET_MAX_HEIGHT">SVGA_REG_SCREENTARGET_MAX_HEIGHT</a>);</td></tr>
<tr><th id="736">736</th><td></td></tr>
<tr><th id="737">737</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_write" title='vmw_write' data-ref="vmw_write">vmw_write</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_DEV_CAP" title='SVGA_REG_DEV_CAP' data-ref="SVGA_REG_DEV_CAP">SVGA_REG_DEV_CAP</a>,</td></tr>
<tr><th id="738">738</th><td>			  <a class="enum" href="device_include/svga3d_devcaps.h.html#SVGA3D_DEVCAP_MAX_TEXTURE_WIDTH" title='SVGA3D_DEVCAP_MAX_TEXTURE_WIDTH' data-ref="SVGA3D_DEVCAP_MAX_TEXTURE_WIDTH">SVGA3D_DEVCAP_MAX_TEXTURE_WIDTH</a>);</td></tr>
<tr><th id="739">739</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::texture_max_width" title='vmw_private::texture_max_width' data-ref="vmw_private::texture_max_width">texture_max_width</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>,</td></tr>
<tr><th id="740">740</th><td>						       <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_DEV_CAP" title='SVGA_REG_DEV_CAP' data-ref="SVGA_REG_DEV_CAP">SVGA_REG_DEV_CAP</a>);</td></tr>
<tr><th id="741">741</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_write" title='vmw_write' data-ref="vmw_write">vmw_write</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_DEV_CAP" title='SVGA_REG_DEV_CAP' data-ref="SVGA_REG_DEV_CAP">SVGA_REG_DEV_CAP</a>,</td></tr>
<tr><th id="742">742</th><td>			  <a class="enum" href="device_include/svga3d_devcaps.h.html#SVGA3D_DEVCAP_MAX_TEXTURE_HEIGHT" title='SVGA3D_DEVCAP_MAX_TEXTURE_HEIGHT' data-ref="SVGA3D_DEVCAP_MAX_TEXTURE_HEIGHT">SVGA3D_DEVCAP_MAX_TEXTURE_HEIGHT</a>);</td></tr>
<tr><th id="743">743</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::texture_max_height" title='vmw_private::texture_max_height' data-ref="vmw_private::texture_max_height">texture_max_height</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>,</td></tr>
<tr><th id="744">744</th><td>							<a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_DEV_CAP" title='SVGA_REG_DEV_CAP' data-ref="SVGA_REG_DEV_CAP">SVGA_REG_DEV_CAP</a>);</td></tr>
<tr><th id="745">745</th><td>	} <b>else</b> {</td></tr>
<tr><th id="746">746</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::texture_max_width" title='vmw_private::texture_max_width' data-ref="vmw_private::texture_max_width">texture_max_width</a> = <var>8192</var>;</td></tr>
<tr><th id="747">747</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::texture_max_height" title='vmw_private::texture_max_height' data-ref="vmw_private::texture_max_height">texture_max_height</a> = <var>8192</var>;</td></tr>
<tr><th id="748">748</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::prim_bb_mem" title='vmw_private::prim_bb_mem' data-ref="vmw_private::prim_bb_mem">prim_bb_mem</a> = <a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::vram_size" title='vmw_private::vram_size' data-ref="vmw_private::vram_size">vram_size</a>;</td></tr>
<tr><th id="749">749</th><td>	}</td></tr>
<tr><th id="750">750</th><td></td></tr>
<tr><th id="751">751</th><td>	<a class="tu ref fn" href="#vmw_print_capabilities" title='vmw_print_capabilities' data-use='c' data-ref="vmw_print_capabilities">vmw_print_capabilities</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::capabilities" title='vmw_private::capabilities' data-ref="vmw_private::capabilities">capabilities</a>);</td></tr>
<tr><th id="752">752</th><td></td></tr>
<tr><th id="753">753</th><td>	<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = <a class="tu ref fn" href="#vmw_dma_masks" title='vmw_dma_masks' data-use='c' data-ref="vmw_dma_masks">vmw_dma_masks</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="754">754</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> != <var>0</var>))</td></tr>
<tr><th id="755">755</th><td>		<b>goto</b> <a class="lbl" href="#39out_err0" data-ref="39out_err0">out_err0</a>;</td></tr>
<tr><th id="756">756</th><td></td></tr>
<tr><th id="757">757</th><td>	<b>if</b> (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::capabilities" title='vmw_private::capabilities' data-ref="vmw_private::capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#685" title="0x00400000" data-ref="_M/SVGA_CAP_GMR2">SVGA_CAP_GMR2</a>) {</td></tr>
<tr><th id="758">758</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;Max GMR ids is %u\n&quot;, (unsigned)dev_priv-&gt;max_gmr_ids); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"Max GMR ids is %u\n"</q>,</td></tr>
<tr><th id="759">759</th><td>			 (<em>unsigned</em>)<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::max_gmr_ids" title='vmw_private::max_gmr_ids' data-ref="vmw_private::max_gmr_ids">max_gmr_ids</a>);</td></tr>
<tr><th id="760">760</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;Max number of GMR pages is %u\n&quot;, (unsigned)dev_priv-&gt;max_gmr_pages); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"Max number of GMR pages is %u\n"</q>,</td></tr>
<tr><th id="761">761</th><td>			 (<em>unsigned</em>)<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::max_gmr_pages" title='vmw_private::max_gmr_pages' data-ref="vmw_private::max_gmr_pages">max_gmr_pages</a>);</td></tr>
<tr><th id="762">762</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;Max dedicated hypervisor surface memory is %u kiB\n&quot;, (unsigned)dev_priv-&gt;memory_size / 1024); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"Max dedicated hypervisor surface memory is %u kiB\n"</q>,</td></tr>
<tr><th id="763">763</th><td>			 (<em>unsigned</em>)<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::memory_size" title='vmw_private::memory_size' data-ref="vmw_private::memory_size">memory_size</a> / <var>1024</var>);</td></tr>
<tr><th id="764">764</th><td>	}</td></tr>
<tr><th id="765">765</th><td>	<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;Maximum display memory size is %u kiB\n&quot;, dev_priv-&gt;prim_bb_mem / 1024); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"Maximum display memory size is %u kiB\n"</q>,</td></tr>
<tr><th id="766">766</th><td>		 <a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::prim_bb_mem" title='vmw_private::prim_bb_mem' data-ref="vmw_private::prim_bb_mem">prim_bb_mem</a> / <var>1024</var>);</td></tr>
<tr><th id="767">767</th><td>	<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;VRAM at 0x%08x size is %u kiB\n&quot;, dev_priv-&gt;vram_start, dev_priv-&gt;vram_size / 1024); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"VRAM at 0x%08x size is %u kiB\n"</q>,</td></tr>
<tr><th id="768">768</th><td>		 <a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::vram_start" title='vmw_private::vram_start' data-ref="vmw_private::vram_start">vram_start</a>, <a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::vram_size" title='vmw_private::vram_size' data-ref="vmw_private::vram_size">vram_size</a> / <var>1024</var>);</td></tr>
<tr><th id="769">769</th><td>	<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;MMIO at 0x%08x size is %u kiB\n&quot;, dev_priv-&gt;mmio_start, dev_priv-&gt;mmio_size / 1024); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"MMIO at 0x%08x size is %u kiB\n"</q>,</td></tr>
<tr><th id="770">770</th><td>		 <a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::mmio_start" title='vmw_private::mmio_start' data-ref="vmw_private::mmio_start">mmio_start</a>, <a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::mmio_size" title='vmw_private::mmio_size' data-ref="vmw_private::mmio_size">mmio_size</a> / <var>1024</var>);</td></tr>
<tr><th id="771">771</th><td></td></tr>
<tr><th id="772">772</th><td>	<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_ttm_global_init" title='vmw_ttm_global_init' data-ref="vmw_ttm_global_init">vmw_ttm_global_init</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="773">773</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> != <var>0</var>))</td></tr>
<tr><th id="774">774</th><td>		<b>goto</b> <a class="lbl" href="#39out_err0" data-ref="39out_err0">out_err0</a>;</td></tr>
<tr><th id="775">775</th><td></td></tr>
<tr><th id="776">776</th><td></td></tr>
<tr><th id="777">777</th><td>	<a class="tu ref fn" href="#vmw_master_init" title='vmw_master_init' data-use='c' data-ref="vmw_master_init">vmw_master_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fbdev_master" title='vmw_private::fbdev_master' data-ref="vmw_private::fbdev_master">fbdev_master</a>);</td></tr>
<tr><th id="778">778</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_lock_set_kill" title='ttm_lock_set_kill' data-ref="ttm_lock_set_kill">ttm_lock_set_kill</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fbdev_master" title='vmw_private::fbdev_master' data-ref="vmw_private::fbdev_master">fbdev_master</a>.<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>, <a class="macro" href="../../../../arch/x86/include/uapi/asm/signal.h.html#38" title="15" data-ref="_M/SIGTERM">SIGTERM</a>);</td></tr>
<tr><th id="779">779</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::active_master" title='vmw_private::active_master' data-ref="vmw_private::active_master">active_master</a> = &amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fbdev_master" title='vmw_private::fbdev_master' data-ref="vmw_private::fbdev_master">fbdev_master</a>;</td></tr>
<tr><th id="780">780</th><td></td></tr>
<tr><th id="781">781</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::mmio_virt" title='vmw_private::mmio_virt' data-ref="vmw_private::mmio_virt">mmio_virt</a> = <a class="ref fn" href="../../../../include/linux/io.h.html#memremap" title='memremap' data-ref="memremap">memremap</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::mmio_start" title='vmw_private::mmio_start' data-ref="vmw_private::mmio_start">mmio_start</a>,</td></tr>
<tr><th id="782">782</th><td>				       <a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::mmio_size" title='vmw_private::mmio_size' data-ref="vmw_private::mmio_size">mmio_size</a>, <a class="enum" href="../../../../include/linux/io.h.html#MEMREMAP_WB" title='MEMREMAP_WB' data-ref="MEMREMAP_WB">MEMREMAP_WB</a>);</td></tr>
<tr><th id="783">783</th><td></td></tr>
<tr><th id="784">784</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(dev_priv-&gt;mmio_virt == ((void *)0)), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::mmio_virt" title='vmw_private::mmio_virt' data-ref="vmw_private::mmio_virt">mmio_virt</a> == <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>)) {</td></tr>
<tr><th id="785">785</th><td>		<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = -<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#16" title="12" data-ref="_M/ENOMEM">ENOMEM</a>;</td></tr>
<tr><th id="786">786</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Failed mapping MMIO.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Failed mapping MMIO.\n"</q>);</td></tr>
<tr><th id="787">787</th><td>		<b>goto</b> <a class="lbl" href="#41out_err3" data-ref="41out_err3">out_err3</a>;</td></tr>
<tr><th id="788">788</th><td>	}</td></tr>
<tr><th id="789">789</th><td></td></tr>
<tr><th id="790">790</th><td>	<i>/* Need mmio memory to check for fifo pitchlock cap. */</i></td></tr>
<tr><th id="791">791</th><td>	<b>if</b> (!(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::capabilities" title='vmw_private::capabilities' data-ref="vmw_private::capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#682" title="0x00080000" data-ref="_M/SVGA_CAP_DISPLAY_TOPOLOGY">SVGA_CAP_DISPLAY_TOPOLOGY</a>) &amp;&amp;</td></tr>
<tr><th id="792">792</th><td>	    !(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::capabilities" title='vmw_private::capabilities' data-ref="vmw_private::capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#680" title="0x00020000" data-ref="_M/SVGA_CAP_PITCHLOCK">SVGA_CAP_PITCHLOCK</a>) &amp;&amp;</td></tr>
<tr><th id="793">793</th><td>	    !<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fifo_have_pitchlock" title='vmw_fifo_have_pitchlock' data-ref="vmw_fifo_have_pitchlock">vmw_fifo_have_pitchlock</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>)) {</td></tr>
<tr><th id="794">794</th><td>		<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = -<a class="macro" href="../../../../include/uapi/asm-generic/errno.h.html#18" title="38" data-ref="_M/ENOSYS">ENOSYS</a>;</td></tr>
<tr><th id="795">795</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Hardware has no pitchlock\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Hardware has no pitchlock\n"</q>);</td></tr>
<tr><th id="796">796</th><td>		<b>goto</b> <a class="lbl" href="#42out_err4" data-ref="42out_err4">out_err4</a>;</td></tr>
<tr><th id="797">797</th><td>	}</td></tr>
<tr><th id="798">798</th><td></td></tr>
<tr><th id="799">799</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::tdev" title='vmw_private::tdev' data-ref="vmw_private::tdev">tdev</a> = <a class="ref fn" href="../../../../include/drm/ttm/ttm_object.h.html#ttm_object_device_init" title='ttm_object_device_init' data-ref="ttm_object_device_init">ttm_object_device_init</a></td></tr>
<tr><th id="800">800</th><td>		(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::mem_global_ref" title='vmw_private::mem_global_ref' data-ref="vmw_private::mem_global_ref">mem_global_ref</a>.<a class="ref field" href="../../../../include/drm/drm_global.h.html#drm_global_reference::object" title='drm_global_reference::object' data-ref="drm_global_reference::object">object</a>, <var>12</var>, &amp;<a class="ref" href="vmwgfx_drv.h.html#vmw_prime_dmabuf_ops" title='vmw_prime_dmabuf_ops' data-ref="vmw_prime_dmabuf_ops">vmw_prime_dmabuf_ops</a>);</td></tr>
<tr><th id="801">801</th><td></td></tr>
<tr><th id="802">802</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(dev_priv-&gt;tdev == ((void *)0)), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::tdev" title='vmw_private::tdev' data-ref="vmw_private::tdev">tdev</a> == <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>)) {</td></tr>
<tr><th id="803">803</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Unable to initialize TTM object management.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Unable to initialize TTM object management.\n"</q>);</td></tr>
<tr><th id="804">804</th><td>		<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = -<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#16" title="12" data-ref="_M/ENOMEM">ENOMEM</a>;</td></tr>
<tr><th id="805">805</th><td>		<b>goto</b> <a class="lbl" href="#42out_err4" data-ref="42out_err4">out_err4</a>;</td></tr>
<tr><th id="806">806</th><td>	}</td></tr>
<tr><th id="807">807</th><td></td></tr>
<tr><th id="808">808</th><td>	<a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::dev_private" title='drm_device::dev_private' data-ref="drm_device::dev_private">dev_private</a> = <a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>;</td></tr>
<tr><th id="809">809</th><td></td></tr>
<tr><th id="810">810</th><td>	<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = <a class="ref fn" href="../../../../include/linux/pci.h.html#pci_request_regions" title='pci_request_regions' data-ref="pci_request_regions">pci_request_regions</a>(<a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::pdev" title='drm_device::pdev' data-ref="drm_device::pdev">pdev</a>, <q>"vmwgfx probe"</q>);</td></tr>
<tr><th id="811">811</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::stealth" title='vmw_private::stealth' data-ref="vmw_private::stealth">stealth</a> = (<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> != <var>0</var>);</td></tr>
<tr><th id="812">812</th><td>	<b>if</b> (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::stealth" title='vmw_private::stealth' data-ref="vmw_private::stealth">stealth</a>) {</td></tr>
<tr><th id="813">813</th><td>		<i class="doc">/**</i></td></tr>
<tr><th id="814">814</th><td><i class="doc">		 * Request at least the mmio PCI resource.</i></td></tr>
<tr><th id="815">815</th><td><i class="doc">		 */</i></td></tr>
<tr><th id="816">816</th><td></td></tr>
<tr><th id="817">817</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;It appears like vesafb is loaded. &quot; &quot;Ignore above error if any.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"It appears like vesafb is loaded. "</q></td></tr>
<tr><th id="818">818</th><td>			 <q>"Ignore above error if any.\n"</q>);</td></tr>
<tr><th id="819">819</th><td>		<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = <a class="ref fn" href="../../../../include/linux/pci.h.html#pci_request_region" title='pci_request_region' data-ref="pci_request_region">pci_request_region</a>(<a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::pdev" title='drm_device::pdev' data-ref="drm_device::pdev">pdev</a>, <var>2</var>, <q>"vmwgfx stealth probe"</q>);</td></tr>
<tr><th id="820">820</th><td>		<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> != <var>0</var>)) {</td></tr>
<tr><th id="821">821</th><td>			<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Failed reserving the SVGA MMIO resource.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Failed reserving the SVGA MMIO resource.\n"</q>);</td></tr>
<tr><th id="822">822</th><td>			<b>goto</b> <a class="lbl" href="#43out_no_device" data-ref="43out_no_device">out_no_device</a>;</td></tr>
<tr><th id="823">823</th><td>		}</td></tr>
<tr><th id="824">824</th><td>	}</td></tr>
<tr><th id="825">825</th><td></td></tr>
<tr><th id="826">826</th><td>	<b>if</b> (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::capabilities" title='vmw_private::capabilities' data-ref="vmw_private::capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#681" title="0x00040000" data-ref="_M/SVGA_CAP_IRQMASK">SVGA_CAP_IRQMASK</a>) {</td></tr>
<tr><th id="827">827</th><td>		<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_irq_install" title='vmw_irq_install' data-ref="vmw_irq_install">vmw_irq_install</a>(<a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>, <a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::pdev" title='drm_device::pdev' data-ref="drm_device::pdev">pdev</a>-&gt;<a class="ref field" href="../../../../include/linux/pci.h.html#pci_dev::irq" title='pci_dev::irq' data-ref="pci_dev::irq">irq</a>);</td></tr>
<tr><th id="828">828</th><td>		<b>if</b> (<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> != <var>0</var>) {</td></tr>
<tr><th id="829">829</th><td>			<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Failed installing irq: %d\n&quot;, ret)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Failed installing irq: %d\n"</q>, <a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a>);</td></tr>
<tr><th id="830">830</th><td>			<b>goto</b> <a class="lbl" href="#44out_no_irq" data-ref="44out_no_irq">out_no_irq</a>;</td></tr>
<tr><th id="831">831</th><td>		}</td></tr>
<tr><th id="832">832</th><td>	}</td></tr>
<tr><th id="833">833</th><td></td></tr>
<tr><th id="834">834</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fman" title='vmw_private::fman' data-ref="vmw_private::fman">fman</a> = <a class="ref fn" href="vmwgfx_fence.h.html#vmw_fence_manager_init" title='vmw_fence_manager_init' data-ref="vmw_fence_manager_init">vmw_fence_manager_init</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="835">835</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(dev_priv-&gt;fman == ((void *)0)), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fman" title='vmw_private::fman' data-ref="vmw_private::fman">fman</a> == <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>)) {</td></tr>
<tr><th id="836">836</th><td>		<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = -<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#16" title="12" data-ref="_M/ENOMEM">ENOMEM</a>;</td></tr>
<tr><th id="837">837</th><td>		<b>goto</b> <a class="lbl" href="#45out_no_fman" data-ref="45out_no_fman">out_no_fman</a>;</td></tr>
<tr><th id="838">838</th><td>	}</td></tr>
<tr><th id="839">839</th><td></td></tr>
<tr><th id="840">840</th><td>	<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = <a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_bo_device_init" title='ttm_bo_device_init' data-ref="ttm_bo_device_init">ttm_bo_device_init</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>,</td></tr>
<tr><th id="841">841</th><td>				 <a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bo_global_ref" title='vmw_private::bo_global_ref' data-ref="vmw_private::bo_global_ref">bo_global_ref</a>.<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_bo_global_ref::ref" title='ttm_bo_global_ref::ref' data-ref="ttm_bo_global_ref::ref">ref</a>.<a class="ref field" href="../../../../include/drm/drm_global.h.html#drm_global_reference::object" title='drm_global_reference::object' data-ref="drm_global_reference::object">object</a>,</td></tr>
<tr><th id="842">842</th><td>				 &amp;<a class="ref" href="vmwgfx_drv.h.html#vmw_bo_driver" title='vmw_bo_driver' data-ref="vmw_bo_driver">vmw_bo_driver</a>,</td></tr>
<tr><th id="843">843</th><td>				 <a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::anon_inode" title='drm_device::anon_inode' data-ref="drm_device::anon_inode">anon_inode</a>-&gt;<a class="ref field" href="../../../../include/linux/fs.h.html#inode::i_mapping" title='inode::i_mapping' data-ref="inode::i_mapping">i_mapping</a>,</td></tr>
<tr><th id="844">844</th><td>				 <a class="macro" href="vmwgfx_drv.h.html#50" title="0x00100000" data-ref="_M/VMWGFX_FILE_PAGE_OFFSET">VMWGFX_FILE_PAGE_OFFSET</a>,</td></tr>
<tr><th id="845">845</th><td>				 <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>);</td></tr>
<tr><th id="846">846</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> != <var>0</var>)) {</td></tr>
<tr><th id="847">847</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Failed initializing TTM buffer object driver.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Failed initializing TTM buffer object driver.\n"</q>);</td></tr>
<tr><th id="848">848</th><td>		<b>goto</b> <a class="lbl" href="#46out_no_bdev" data-ref="46out_no_bdev">out_no_bdev</a>;</td></tr>
<tr><th id="849">849</th><td>	}</td></tr>
<tr><th id="850">850</th><td></td></tr>
<tr><th id="851">851</th><td>	<i>/*</i></td></tr>
<tr><th id="852">852</th><td><i>	 * Enable VRAM, but initially don't use it until SVGA is enabled and</i></td></tr>
<tr><th id="853">853</th><td><i>	 * unhidden.</i></td></tr>
<tr><th id="854">854</th><td><i>	 */</i></td></tr>
<tr><th id="855">855</th><td>	<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = <a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_init_mm" title='ttm_bo_init_mm' data-ref="ttm_bo_init_mm">ttm_bo_init_mm</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>, <a class="macro" href="../../../../include/drm/ttm/ttm_placement.h.html#42" title="2" data-ref="_M/TTM_PL_VRAM">TTM_PL_VRAM</a>,</td></tr>
<tr><th id="856">856</th><td>			     (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::vram_size" title='vmw_private::vram_size' data-ref="vmw_private::vram_size">vram_size</a> &gt;&gt; <a class="macro" href="../../../../arch/x86/include/asm/page_types.h.html#10" title="12" data-ref="_M/PAGE_SHIFT">PAGE_SHIFT</a>));</td></tr>
<tr><th id="857">857</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> != <var>0</var>)) {</td></tr>
<tr><th id="858">858</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Failed initializing memory manager for VRAM.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Failed initializing memory manager for VRAM.\n"</q>);</td></tr>
<tr><th id="859">859</th><td>		<b>goto</b> <a class="lbl" href="#47out_no_vram" data-ref="47out_no_vram">out_no_vram</a>;</td></tr>
<tr><th id="860">860</th><td>	}</td></tr>
<tr><th id="861">861</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>.<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_bo_device::man" title='ttm_bo_device::man' data-ref="ttm_bo_device::man">man</a>[<a class="macro" href="../../../../include/drm/ttm/ttm_placement.h.html#42" title="2" data-ref="_M/TTM_PL_VRAM">TTM_PL_VRAM</a>].<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_mem_type_manager::use_type" title='ttm_mem_type_manager::use_type' data-ref="ttm_mem_type_manager::use_type">use_type</a> = <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>;</td></tr>
<tr><th id="862">862</th><td></td></tr>
<tr><th id="863">863</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_gmr" title='vmw_private::has_gmr' data-ref="vmw_private::has_gmr">has_gmr</a> = <a class="enum" href="../../../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>;</td></tr>
<tr><th id="864">864</th><td>	<b>if</b> (((<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::capabilities" title='vmw_private::capabilities' data-ref="vmw_private::capabilities">capabilities</a> &amp; (<a class="macro" href="device_include/svga_reg.h.html#683" title="0x00100000" data-ref="_M/SVGA_CAP_GMR">SVGA_CAP_GMR</a> | <a class="macro" href="device_include/svga_reg.h.html#685" title="0x00400000" data-ref="_M/SVGA_CAP_GMR2">SVGA_CAP_GMR2</a>)) == <var>0</var>) ||</td></tr>
<tr><th id="865">865</th><td>	    <a class="local col7 ref" href="#37refuse_dma" title='refuse_dma' data-ref="37refuse_dma">refuse_dma</a> || <a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_init_mm" title='ttm_bo_init_mm' data-ref="ttm_bo_init_mm">ttm_bo_init_mm</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>, <a class="macro" href="vmwgfx_drv.h.html#72" title="(3 + 0)" data-ref="_M/VMW_PL_GMR">VMW_PL_GMR</a>,</td></tr>
<tr><th id="866">866</th><td>					 <a class="macro" href="vmwgfx_drv.h.html#72" title="(3 + 0)" data-ref="_M/VMW_PL_GMR">VMW_PL_GMR</a>) != <var>0</var>) {</td></tr>
<tr><th id="867">867</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;No GMR memory available. &quot; &quot;Graphics memory resources are very limited.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"No GMR memory available. "</q></td></tr>
<tr><th id="868">868</th><td>			 <q>"Graphics memory resources are very limited.\n"</q>);</td></tr>
<tr><th id="869">869</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_gmr" title='vmw_private::has_gmr' data-ref="vmw_private::has_gmr">has_gmr</a> = <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>;</td></tr>
<tr><th id="870">870</th><td>	}</td></tr>
<tr><th id="871">871</th><td></td></tr>
<tr><th id="872">872</th><td>	<b>if</b> (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::capabilities" title='vmw_private::capabilities' data-ref="vmw_private::capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#690" title="0x08000000" data-ref="_M/SVGA_CAP_GBOBJECTS">SVGA_CAP_GBOBJECTS</a>) {</td></tr>
<tr><th id="873">873</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_mob" title='vmw_private::has_mob' data-ref="vmw_private::has_mob">has_mob</a> = <a class="enum" href="../../../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>;</td></tr>
<tr><th id="874">874</th><td>		<b>if</b> (<a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_init_mm" title='ttm_bo_init_mm' data-ref="ttm_bo_init_mm">ttm_bo_init_mm</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>, <a class="macro" href="vmwgfx_drv.h.html#74" title="(3 + 1)" data-ref="_M/VMW_PL_MOB">VMW_PL_MOB</a>,</td></tr>
<tr><th id="875">875</th><td>				   <a class="macro" href="vmwgfx_drv.h.html#74" title="(3 + 1)" data-ref="_M/VMW_PL_MOB">VMW_PL_MOB</a>) != <var>0</var>) {</td></tr>
<tr><th id="876">876</th><td>			<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;No MOB memory available. &quot; &quot;3D will be disabled.\n&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"No MOB memory available. "</q></td></tr>
<tr><th id="877">877</th><td>				 <q>"3D will be disabled.\n"</q>);</td></tr>
<tr><th id="878">878</th><td>			<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_mob" title='vmw_private::has_mob' data-ref="vmw_private::has_mob">has_mob</a> = <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>;</td></tr>
<tr><th id="879">879</th><td>		}</td></tr>
<tr><th id="880">880</th><td>	}</td></tr>
<tr><th id="881">881</th><td></td></tr>
<tr><th id="882">882</th><td>	<b>if</b> (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_mob" title='vmw_private::has_mob' data-ref="vmw_private::has_mob">has_mob</a>) {</td></tr>
<tr><th id="883">883</th><td>		<a class="ref fn" href="../../../../include/linux/spinlock.h.html#spin_lock" title='spin_lock' data-ref="spin_lock">spin_lock</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cap_lock" title='vmw_private::cap_lock' data-ref="vmw_private::cap_lock">cap_lock</a>);</td></tr>
<tr><th id="884">884</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_write" title='vmw_write' data-ref="vmw_write">vmw_write</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_DEV_CAP" title='SVGA_REG_DEV_CAP' data-ref="SVGA_REG_DEV_CAP">SVGA_REG_DEV_CAP</a>, <a class="enum" href="device_include/svga3d_devcaps.h.html#SVGA3D_DEVCAP_DX" title='SVGA3D_DEVCAP_DX' data-ref="SVGA3D_DEVCAP_DX">SVGA3D_DEVCAP_DX</a>);</td></tr>
<tr><th id="885">885</th><td>		<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_dx" title='vmw_private::has_dx' data-ref="vmw_private::has_dx">has_dx</a> = !!<a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_DEV_CAP" title='SVGA_REG_DEV_CAP' data-ref="SVGA_REG_DEV_CAP">SVGA_REG_DEV_CAP</a>);</td></tr>
<tr><th id="886">886</th><td>		<a class="ref fn" href="../../../../include/linux/spinlock.h.html#spin_unlock" title='spin_unlock' data-ref="spin_unlock">spin_unlock</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::cap_lock" title='vmw_private::cap_lock' data-ref="vmw_private::cap_lock">cap_lock</a>);</td></tr>
<tr><th id="887">887</th><td>	}</td></tr>
<tr><th id="888">888</th><td></td></tr>
<tr><th id="889">889</th><td></td></tr>
<tr><th id="890">890</th><td>	<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_kms_init" title='vmw_kms_init' data-ref="vmw_kms_init">vmw_kms_init</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="891">891</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> != <var>0</var>))</td></tr>
<tr><th id="892">892</th><td>		<b>goto</b> <a class="lbl" href="#48out_no_kms" data-ref="48out_no_kms">out_no_kms</a>;</td></tr>
<tr><th id="893">893</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_overlay_init" title='vmw_overlay_init' data-ref="vmw_overlay_init">vmw_overlay_init</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="894">894</th><td></td></tr>
<tr><th id="895">895</th><td>	<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a> = <a class="tu ref fn" href="#vmw_request_device" title='vmw_request_device' data-use='c' data-ref="vmw_request_device">vmw_request_device</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="896">896</th><td>	<b>if</b> (<a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a>)</td></tr>
<tr><th id="897">897</th><td>		<b>goto</b> <a class="lbl" href="#49out_no_fifo" data-ref="49out_no_fifo">out_no_fifo</a>;</td></tr>
<tr><th id="898">898</th><td></td></tr>
<tr><th id="899">899</th><td>	<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;DX: %s\n&quot;, dev_priv-&gt;has_dx ? &quot;yes.&quot; : &quot;no.&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"DX: %s\n"</q>, <a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_dx" title='vmw_private::has_dx' data-ref="vmw_private::has_dx">has_dx</a> ? <q>"yes."</q> : <q>"no."</q>);</td></tr>
<tr><th id="900">900</th><td>	<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;Atomic: %s\n&quot;, (dev-&gt;driver-&gt;driver_features &amp; 0x10000) ? &quot;yes&quot; : &quot;no&quot;); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"Atomic: %s\n"</q>,</td></tr>
<tr><th id="901">901</th><td>		 (<a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::driver" title='drm_device::driver' data-ref="drm_device::driver">driver</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::driver_features" title='drm_driver::driver_features' data-ref="drm_driver::driver_features">driver_features</a> &amp; DRIVER_ATOMIC) ? <q>"yes"</q> : <q>"no"</q>);</td></tr>
<tr><th id="902">902</th><td></td></tr>
<tr><th id="903">903</th><td>	<a class="ref fn" href="../../../../include/linux/kernel.h.html#snprintf" title='snprintf' data-ref="snprintf">snprintf</a>(<a class="local col8 ref" href="#38host_log" title='host_log' data-ref="38host_log">host_log</a>, <b>sizeof</b>(<a class="local col8 ref" href="#38host_log" title='host_log' data-ref="38host_log">host_log</a>), <q>"vmwgfx: %s-%s"</q>,</td></tr>
<tr><th id="904">904</th><td>		<a class="macro" href="#50" title="&quot;In Tree&quot;" data-ref="_M/VMWGFX_REPO">VMWGFX_REPO</a>, <a class="macro" href="#47" title="&quot;Unknown&quot;" data-ref="_M/VMWGFX_GIT_VERSION">VMWGFX_GIT_VERSION</a>);</td></tr>
<tr><th id="905">905</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_host_log" title='vmw_host_log' data-ref="vmw_host_log">vmw_host_log</a>(<a class="local col8 ref" href="#38host_log" title='host_log' data-ref="38host_log">host_log</a>);</td></tr>
<tr><th id="906">906</th><td></td></tr>
<tr><th id="907">907</th><td>	<a class="ref fn" href="../../../../arch/x86/include/asm/string_64.h.html#memset" title='memset' data-ref="memset">memset</a>(<a class="local col8 ref" href="#38host_log" title='host_log' data-ref="38host_log">host_log</a>, <var>0</var>, <b>sizeof</b>(<a class="local col8 ref" href="#38host_log" title='host_log' data-ref="38host_log">host_log</a>));</td></tr>
<tr><th id="908">908</th><td>	<a class="ref fn" href="../../../../include/linux/kernel.h.html#snprintf" title='snprintf' data-ref="snprintf">snprintf</a>(<a class="local col8 ref" href="#38host_log" title='host_log' data-ref="38host_log">host_log</a>, <b>sizeof</b>(<a class="local col8 ref" href="#38host_log" title='host_log' data-ref="38host_log">host_log</a>), <q>"vmwgfx: Module Version: %d.%d.%d"</q>,</td></tr>
<tr><th id="909">909</th><td>		<a class="macro" href="vmwgfx_drv.h.html#47" title="2" data-ref="_M/VMWGFX_DRIVER_MAJOR">VMWGFX_DRIVER_MAJOR</a>, <a class="macro" href="vmwgfx_drv.h.html#48" title="14" data-ref="_M/VMWGFX_DRIVER_MINOR">VMWGFX_DRIVER_MINOR</a>,</td></tr>
<tr><th id="910">910</th><td>		<a class="macro" href="vmwgfx_drv.h.html#49" title="0" data-ref="_M/VMWGFX_DRIVER_PATCHLEVEL">VMWGFX_DRIVER_PATCHLEVEL</a>);</td></tr>
<tr><th id="911">911</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_host_log" title='vmw_host_log' data-ref="vmw_host_log">vmw_host_log</a>(<a class="local col8 ref" href="#38host_log" title='host_log' data-ref="38host_log">host_log</a>);</td></tr>
<tr><th id="912">912</th><td></td></tr>
<tr><th id="913">913</th><td>	<b>if</b> (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::enable_fb" title='vmw_private::enable_fb' data-ref="vmw_private::enable_fb">enable_fb</a>) {</td></tr>
<tr><th id="914">914</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fifo_resource_inc" title='vmw_fifo_resource_inc' data-ref="vmw_fifo_resource_inc">vmw_fifo_resource_inc</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="915">915</th><td>		<a class="ref fn" href="#vmw_svga_enable" title='vmw_svga_enable' data-ref="vmw_svga_enable">vmw_svga_enable</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="916">916</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fb_init" title='vmw_fb_init' data-ref="vmw_fb_init">vmw_fb_init</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="917">917</th><td>	}</td></tr>
<tr><th id="918">918</th><td></td></tr>
<tr><th id="919">919</th><td>	<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::pm_nb" title='vmw_private::pm_nb' data-ref="vmw_private::pm_nb">pm_nb</a>.<a class="ref field" href="../../../../include/linux/notifier.h.html#notifier_block::notifier_call" title='notifier_block::notifier_call' data-ref="notifier_block::notifier_call">notifier_call</a> = <a class="tu ref fn" href="#vmwgfx_pm_notifier" title='vmwgfx_pm_notifier' data-use='r' data-ref="vmwgfx_pm_notifier">vmwgfx_pm_notifier</a>;</td></tr>
<tr><th id="920">920</th><td>	<a class="ref fn" href="../../../../include/linux/suspend.h.html#register_pm_notifier" title='register_pm_notifier' data-ref="register_pm_notifier">register_pm_notifier</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::pm_nb" title='vmw_private::pm_nb' data-ref="vmw_private::pm_nb">pm_nb</a>);</td></tr>
<tr><th id="921">921</th><td></td></tr>
<tr><th id="922">922</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="923">923</th><td></td></tr>
<tr><th id="924">924</th><td><dfn class="lbl" id="49out_no_fifo" data-ref="49out_no_fifo">out_no_fifo</dfn>:</td></tr>
<tr><th id="925">925</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_overlay_close" title='vmw_overlay_close' data-ref="vmw_overlay_close">vmw_overlay_close</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="926">926</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_kms_close" title='vmw_kms_close' data-ref="vmw_kms_close">vmw_kms_close</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="927">927</th><td><dfn class="lbl" id="48out_no_kms" data-ref="48out_no_kms">out_no_kms</dfn>:</td></tr>
<tr><th id="928">928</th><td>	<b>if</b> (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_mob" title='vmw_private::has_mob' data-ref="vmw_private::has_mob">has_mob</a>)</td></tr>
<tr><th id="929">929</th><td>		(<em>void</em>) <a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_clean_mm" title='ttm_bo_clean_mm' data-ref="ttm_bo_clean_mm">ttm_bo_clean_mm</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>, <a class="macro" href="vmwgfx_drv.h.html#74" title="(3 + 1)" data-ref="_M/VMW_PL_MOB">VMW_PL_MOB</a>);</td></tr>
<tr><th id="930">930</th><td>	<b>if</b> (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_gmr" title='vmw_private::has_gmr' data-ref="vmw_private::has_gmr">has_gmr</a>)</td></tr>
<tr><th id="931">931</th><td>		(<em>void</em>) <a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_clean_mm" title='ttm_bo_clean_mm' data-ref="ttm_bo_clean_mm">ttm_bo_clean_mm</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>, <a class="macro" href="vmwgfx_drv.h.html#72" title="(3 + 0)" data-ref="_M/VMW_PL_GMR">VMW_PL_GMR</a>);</td></tr>
<tr><th id="932">932</th><td>	(<em>void</em>)<a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_clean_mm" title='ttm_bo_clean_mm' data-ref="ttm_bo_clean_mm">ttm_bo_clean_mm</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>, <a class="macro" href="../../../../include/drm/ttm/ttm_placement.h.html#42" title="2" data-ref="_M/TTM_PL_VRAM">TTM_PL_VRAM</a>);</td></tr>
<tr><th id="933">933</th><td><dfn class="lbl" id="47out_no_vram" data-ref="47out_no_vram">out_no_vram</dfn>:</td></tr>
<tr><th id="934">934</th><td>	(<em>void</em>)<a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_bo_device_release" title='ttm_bo_device_release' data-ref="ttm_bo_device_release">ttm_bo_device_release</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>);</td></tr>
<tr><th id="935">935</th><td><dfn class="lbl" id="46out_no_bdev" data-ref="46out_no_bdev">out_no_bdev</dfn>:</td></tr>
<tr><th id="936">936</th><td>	<a class="ref fn" href="vmwgfx_fence.h.html#vmw_fence_manager_takedown" title='vmw_fence_manager_takedown' data-ref="vmw_fence_manager_takedown">vmw_fence_manager_takedown</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fman" title='vmw_private::fman' data-ref="vmw_private::fman">fman</a>);</td></tr>
<tr><th id="937">937</th><td><dfn class="lbl" id="45out_no_fman" data-ref="45out_no_fman">out_no_fman</dfn>:</td></tr>
<tr><th id="938">938</th><td>	<b>if</b> (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::capabilities" title='vmw_private::capabilities' data-ref="vmw_private::capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#681" title="0x00040000" data-ref="_M/SVGA_CAP_IRQMASK">SVGA_CAP_IRQMASK</a>)</td></tr>
<tr><th id="939">939</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_irq_uninstall" title='vmw_irq_uninstall' data-ref="vmw_irq_uninstall">vmw_irq_uninstall</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::dev" title='vmw_private::dev' data-ref="vmw_private::dev">dev</a>);</td></tr>
<tr><th id="940">940</th><td><dfn class="lbl" id="44out_no_irq" data-ref="44out_no_irq">out_no_irq</dfn>:</td></tr>
<tr><th id="941">941</th><td>	<b>if</b> (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::stealth" title='vmw_private::stealth' data-ref="vmw_private::stealth">stealth</a>)</td></tr>
<tr><th id="942">942</th><td>		<a class="ref fn" href="../../../../include/linux/pci.h.html#pci_release_region" title='pci_release_region' data-ref="pci_release_region">pci_release_region</a>(<a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::pdev" title='drm_device::pdev' data-ref="drm_device::pdev">pdev</a>, <var>2</var>);</td></tr>
<tr><th id="943">943</th><td>	<b>else</b></td></tr>
<tr><th id="944">944</th><td>		<a class="ref fn" href="../../../../include/linux/pci.h.html#pci_release_regions" title='pci_release_regions' data-ref="pci_release_regions">pci_release_regions</a>(<a class="local col1 ref" href="#31dev" title='dev' data-ref="31dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::pdev" title='drm_device::pdev' data-ref="drm_device::pdev">pdev</a>);</td></tr>
<tr><th id="945">945</th><td><dfn class="lbl" id="43out_no_device" data-ref="43out_no_device">out_no_device</dfn>:</td></tr>
<tr><th id="946">946</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_object.h.html#ttm_object_device_release" title='ttm_object_device_release' data-ref="ttm_object_device_release">ttm_object_device_release</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::tdev" title='vmw_private::tdev' data-ref="vmw_private::tdev">tdev</a>);</td></tr>
<tr><th id="947">947</th><td><dfn class="lbl" id="42out_err4" data-ref="42out_err4">out_err4</dfn>:</td></tr>
<tr><th id="948">948</th><td>	<a class="ref fn" href="../../../../include/linux/io.h.html#memunmap" title='memunmap' data-ref="memunmap">memunmap</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::mmio_virt" title='vmw_private::mmio_virt' data-ref="vmw_private::mmio_virt">mmio_virt</a>);</td></tr>
<tr><th id="949">949</th><td><dfn class="lbl" id="41out_err3" data-ref="41out_err3">out_err3</dfn>:</td></tr>
<tr><th id="950">950</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_ttm_global_release" title='vmw_ttm_global_release' data-ref="vmw_ttm_global_release">vmw_ttm_global_release</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="951">951</th><td><dfn class="lbl" id="39out_err0" data-ref="39out_err0">out_err0</dfn>:</td></tr>
<tr><th id="952">952</th><td>	<b>for</b> (<a class="local col6 ref" href="#36i" title='i' data-ref="36i">i</a> = <a class="enum" href="vmwgfx_drv.h.html#vmw_res_context" title='vmw_res_context' data-ref="vmw_res_context">vmw_res_context</a>; <a class="local col6 ref" href="#36i" title='i' data-ref="36i">i</a> &lt; <a class="enum" href="vmwgfx_drv.h.html#vmw_res_max" title='vmw_res_max' data-ref="vmw_res_max">vmw_res_max</a>; ++<a class="local col6 ref" href="#36i" title='i' data-ref="36i">i</a>)</td></tr>
<tr><th id="953">953</th><td>		<a class="ref fn" href="../../../../include/linux/idr.h.html#idr_destroy" title='idr_destroy' data-ref="idr_destroy">idr_destroy</a>(&amp;<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::res_idr" title='vmw_private::res_idr' data-ref="vmw_private::res_idr">res_idr</a>[<a class="local col6 ref" href="#36i" title='i' data-ref="36i">i</a>]);</td></tr>
<tr><th id="954">954</th><td></td></tr>
<tr><th id="955">955</th><td>	<b>if</b> (<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::ctx" title='vmw_private::ctx' data-ref="vmw_private::ctx">ctx</a>.<a class="ref field" href="vmwgfx_drv.h.html#vmw_sw_context::staged_bindings" title='vmw_sw_context::staged_bindings' data-ref="vmw_sw_context::staged_bindings">staged_bindings</a>)</td></tr>
<tr><th id="956">956</th><td>		<a class="ref fn" href="vmwgfx_binding.h.html#vmw_binding_state_free" title='vmw_binding_state_free' data-ref="vmw_binding_state_free">vmw_binding_state_free</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::ctx" title='vmw_private::ctx' data-ref="vmw_private::ctx">ctx</a>.<a class="ref field" href="vmwgfx_drv.h.html#vmw_sw_context::staged_bindings" title='vmw_sw_context::staged_bindings' data-ref="vmw_sw_context::staged_bindings">staged_bindings</a>);</td></tr>
<tr><th id="957">957</th><td>	<a class="ref fn" href="../../../../include/linux/slab.h.html#kfree" title='kfree' data-ref="kfree">kfree</a>(<a class="local col3 ref" href="#33dev_priv" title='dev_priv' data-ref="33dev_priv">dev_priv</a>);</td></tr>
<tr><th id="958">958</th><td>	<b>return</b> <a class="local col4 ref" href="#34ret" title='ret' data-ref="34ret">ret</a>;</td></tr>
<tr><th id="959">959</th><td>}</td></tr>
<tr><th id="960">960</th><td></td></tr>
<tr><th id="961">961</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="vmw_driver_unload" title='vmw_driver_unload' data-type='void vmw_driver_unload(struct drm_device * dev)' data-ref="vmw_driver_unload">vmw_driver_unload</dfn>(<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col0 decl" id="50dev" title='dev' data-type='struct drm_device *' data-ref="50dev">dev</dfn>)</td></tr>
<tr><th id="962">962</th><td>{</td></tr>
<tr><th id="963">963</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col1 decl" id="51dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="51dev_priv">dev_priv</dfn> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_priv" title='vmw_priv' data-ref="vmw_priv">vmw_priv</a>(<a class="local col0 ref" href="#50dev" title='dev' data-ref="50dev">dev</a>);</td></tr>
<tr><th id="964">964</th><td>	<b>enum</b> <a class="type" href="vmwgfx_drv.h.html#vmw_res_type" title='vmw_res_type' data-ref="vmw_res_type">vmw_res_type</a> <dfn class="local col2 decl" id="52i" title='i' data-type='enum vmw_res_type' data-ref="52i">i</dfn>;</td></tr>
<tr><th id="965">965</th><td></td></tr>
<tr><th id="966">966</th><td>	<a class="ref fn" href="../../../../include/linux/suspend.h.html#unregister_pm_notifier" title='unregister_pm_notifier' data-ref="unregister_pm_notifier">unregister_pm_notifier</a>(&amp;<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::pm_nb" title='vmw_private::pm_nb' data-ref="vmw_private::pm_nb">pm_nb</a>);</td></tr>
<tr><th id="967">967</th><td></td></tr>
<tr><th id="968">968</th><td>	<b>if</b> (<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::ctx" title='vmw_private::ctx' data-ref="vmw_private::ctx">ctx</a>.<a class="ref field" href="vmwgfx_drv.h.html#vmw_sw_context::res_ht_initialized" title='vmw_sw_context::res_ht_initialized' data-ref="vmw_sw_context::res_ht_initialized">res_ht_initialized</a>)</td></tr>
<tr><th id="969">969</th><td>		<a class="ref fn" href="../../../../include/drm/drm_hashtab.h.html#drm_ht_remove" title='drm_ht_remove' data-ref="drm_ht_remove">drm_ht_remove</a>(&amp;<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::ctx" title='vmw_private::ctx' data-ref="vmw_private::ctx">ctx</a>.<a class="ref field" href="vmwgfx_drv.h.html#vmw_sw_context::res_ht" title='vmw_sw_context::res_ht' data-ref="vmw_sw_context::res_ht">res_ht</a>);</td></tr>
<tr><th id="970">970</th><td>	<a class="ref fn" href="../../../../include/linux/vmalloc.h.html#vfree" title='vfree' data-ref="vfree">vfree</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::ctx" title='vmw_private::ctx' data-ref="vmw_private::ctx">ctx</a>.<a class="ref field" href="vmwgfx_drv.h.html#vmw_sw_context::cmd_bounce" title='vmw_sw_context::cmd_bounce' data-ref="vmw_sw_context::cmd_bounce">cmd_bounce</a>);</td></tr>
<tr><th id="971">971</th><td>	<b>if</b> (<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::enable_fb" title='vmw_private::enable_fb' data-ref="vmw_private::enable_fb">enable_fb</a>) {</td></tr>
<tr><th id="972">972</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fb_off" title='vmw_fb_off' data-ref="vmw_fb_off">vmw_fb_off</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>);</td></tr>
<tr><th id="973">973</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fb_close" title='vmw_fb_close' data-ref="vmw_fb_close">vmw_fb_close</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>);</td></tr>
<tr><th id="974">974</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fifo_resource_dec" title='vmw_fifo_resource_dec' data-ref="vmw_fifo_resource_dec">vmw_fifo_resource_dec</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>);</td></tr>
<tr><th id="975">975</th><td>		<a class="ref fn" href="#vmw_svga_disable" title='vmw_svga_disable' data-ref="vmw_svga_disable">vmw_svga_disable</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>);</td></tr>
<tr><th id="976">976</th><td>	}</td></tr>
<tr><th id="977">977</th><td></td></tr>
<tr><th id="978">978</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_kms_close" title='vmw_kms_close' data-ref="vmw_kms_close">vmw_kms_close</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>);</td></tr>
<tr><th id="979">979</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_overlay_close" title='vmw_overlay_close' data-ref="vmw_overlay_close">vmw_overlay_close</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>);</td></tr>
<tr><th id="980">980</th><td></td></tr>
<tr><th id="981">981</th><td>	<b>if</b> (<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_gmr" title='vmw_private::has_gmr' data-ref="vmw_private::has_gmr">has_gmr</a>)</td></tr>
<tr><th id="982">982</th><td>		(<em>void</em>)<a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_clean_mm" title='ttm_bo_clean_mm' data-ref="ttm_bo_clean_mm">ttm_bo_clean_mm</a>(&amp;<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>, <a class="macro" href="vmwgfx_drv.h.html#72" title="(3 + 0)" data-ref="_M/VMW_PL_GMR">VMW_PL_GMR</a>);</td></tr>
<tr><th id="983">983</th><td>	(<em>void</em>)<a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_clean_mm" title='ttm_bo_clean_mm' data-ref="ttm_bo_clean_mm">ttm_bo_clean_mm</a>(&amp;<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>, <a class="macro" href="../../../../include/drm/ttm/ttm_placement.h.html#42" title="2" data-ref="_M/TTM_PL_VRAM">TTM_PL_VRAM</a>);</td></tr>
<tr><th id="984">984</th><td></td></tr>
<tr><th id="985">985</th><td>	<a class="tu ref fn" href="#vmw_release_device_early" title='vmw_release_device_early' data-use='c' data-ref="vmw_release_device_early">vmw_release_device_early</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>);</td></tr>
<tr><th id="986">986</th><td>	<b>if</b> (<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::has_mob" title='vmw_private::has_mob' data-ref="vmw_private::has_mob">has_mob</a>)</td></tr>
<tr><th id="987">987</th><td>		(<em>void</em>) <a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_clean_mm" title='ttm_bo_clean_mm' data-ref="ttm_bo_clean_mm">ttm_bo_clean_mm</a>(&amp;<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>, <a class="macro" href="vmwgfx_drv.h.html#74" title="(3 + 1)" data-ref="_M/VMW_PL_MOB">VMW_PL_MOB</a>);</td></tr>
<tr><th id="988">988</th><td>	(<em>void</em>) <a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_bo_device_release" title='ttm_bo_device_release' data-ref="ttm_bo_device_release">ttm_bo_device_release</a>(&amp;<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>);</td></tr>
<tr><th id="989">989</th><td>	<a class="tu ref fn" href="#vmw_release_device_late" title='vmw_release_device_late' data-use='c' data-ref="vmw_release_device_late">vmw_release_device_late</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>);</td></tr>
<tr><th id="990">990</th><td>	<a class="ref fn" href="vmwgfx_fence.h.html#vmw_fence_manager_takedown" title='vmw_fence_manager_takedown' data-ref="vmw_fence_manager_takedown">vmw_fence_manager_takedown</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fman" title='vmw_private::fman' data-ref="vmw_private::fman">fman</a>);</td></tr>
<tr><th id="991">991</th><td>	<b>if</b> (<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::capabilities" title='vmw_private::capabilities' data-ref="vmw_private::capabilities">capabilities</a> &amp; <a class="macro" href="device_include/svga_reg.h.html#681" title="0x00040000" data-ref="_M/SVGA_CAP_IRQMASK">SVGA_CAP_IRQMASK</a>)</td></tr>
<tr><th id="992">992</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_irq_uninstall" title='vmw_irq_uninstall' data-ref="vmw_irq_uninstall">vmw_irq_uninstall</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::dev" title='vmw_private::dev' data-ref="vmw_private::dev">dev</a>);</td></tr>
<tr><th id="993">993</th><td>	<b>if</b> (<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::stealth" title='vmw_private::stealth' data-ref="vmw_private::stealth">stealth</a>)</td></tr>
<tr><th id="994">994</th><td>		<a class="ref fn" href="../../../../include/linux/pci.h.html#pci_release_region" title='pci_release_region' data-ref="pci_release_region">pci_release_region</a>(<a class="local col0 ref" href="#50dev" title='dev' data-ref="50dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::pdev" title='drm_device::pdev' data-ref="drm_device::pdev">pdev</a>, <var>2</var>);</td></tr>
<tr><th id="995">995</th><td>	<b>else</b></td></tr>
<tr><th id="996">996</th><td>		<a class="ref fn" href="../../../../include/linux/pci.h.html#pci_release_regions" title='pci_release_regions' data-ref="pci_release_regions">pci_release_regions</a>(<a class="local col0 ref" href="#50dev" title='dev' data-ref="50dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::pdev" title='drm_device::pdev' data-ref="drm_device::pdev">pdev</a>);</td></tr>
<tr><th id="997">997</th><td></td></tr>
<tr><th id="998">998</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_object.h.html#ttm_object_device_release" title='ttm_object_device_release' data-ref="ttm_object_device_release">ttm_object_device_release</a>(&amp;<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::tdev" title='vmw_private::tdev' data-ref="vmw_private::tdev">tdev</a>);</td></tr>
<tr><th id="999">999</th><td>	<a class="ref fn" href="../../../../include/linux/io.h.html#memunmap" title='memunmap' data-ref="memunmap">memunmap</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::mmio_virt" title='vmw_private::mmio_virt' data-ref="vmw_private::mmio_virt">mmio_virt</a>);</td></tr>
<tr><th id="1000">1000</th><td>	<b>if</b> (<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::ctx" title='vmw_private::ctx' data-ref="vmw_private::ctx">ctx</a>.<a class="ref field" href="vmwgfx_drv.h.html#vmw_sw_context::staged_bindings" title='vmw_sw_context::staged_bindings' data-ref="vmw_sw_context::staged_bindings">staged_bindings</a>)</td></tr>
<tr><th id="1001">1001</th><td>		<a class="ref fn" href="vmwgfx_binding.h.html#vmw_binding_state_free" title='vmw_binding_state_free' data-ref="vmw_binding_state_free">vmw_binding_state_free</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::ctx" title='vmw_private::ctx' data-ref="vmw_private::ctx">ctx</a>.<a class="ref field" href="vmwgfx_drv.h.html#vmw_sw_context::staged_bindings" title='vmw_sw_context::staged_bindings' data-ref="vmw_sw_context::staged_bindings">staged_bindings</a>);</td></tr>
<tr><th id="1002">1002</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_ttm_global_release" title='vmw_ttm_global_release' data-ref="vmw_ttm_global_release">vmw_ttm_global_release</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1003">1003</th><td></td></tr>
<tr><th id="1004">1004</th><td>	<b>for</b> (<a class="local col2 ref" href="#52i" title='i' data-ref="52i">i</a> = <a class="enum" href="vmwgfx_drv.h.html#vmw_res_context" title='vmw_res_context' data-ref="vmw_res_context">vmw_res_context</a>; <a class="local col2 ref" href="#52i" title='i' data-ref="52i">i</a> &lt; <a class="enum" href="vmwgfx_drv.h.html#vmw_res_max" title='vmw_res_max' data-ref="vmw_res_max">vmw_res_max</a>; ++<a class="local col2 ref" href="#52i" title='i' data-ref="52i">i</a>)</td></tr>
<tr><th id="1005">1005</th><td>		<a class="ref fn" href="../../../../include/linux/idr.h.html#idr_destroy" title='idr_destroy' data-ref="idr_destroy">idr_destroy</a>(&amp;<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::res_idr" title='vmw_private::res_idr' data-ref="vmw_private::res_idr">res_idr</a>[<a class="local col2 ref" href="#52i" title='i' data-ref="52i">i</a>]);</td></tr>
<tr><th id="1006">1006</th><td></td></tr>
<tr><th id="1007">1007</th><td>	<a class="ref fn" href="../../../../include/linux/slab.h.html#kfree" title='kfree' data-ref="kfree">kfree</a>(<a class="local col1 ref" href="#51dev_priv" title='dev_priv' data-ref="51dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1008">1008</th><td>}</td></tr>
<tr><th id="1009">1009</th><td></td></tr>
<tr><th id="1010">1010</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="vmw_postclose" title='vmw_postclose' data-type='void vmw_postclose(struct drm_device * dev, struct drm_file * file_priv)' data-ref="vmw_postclose">vmw_postclose</dfn>(<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col3 decl" id="53dev" title='dev' data-type='struct drm_device *' data-ref="53dev">dev</dfn>,</td></tr>
<tr><th id="1011">1011</th><td>			 <b>struct</b> <a class="type" href="../../../../include/drm/drm_file.h.html#drm_file" title='drm_file' data-ref="drm_file">drm_file</a> *<dfn class="local col4 decl" id="54file_priv" title='file_priv' data-type='struct drm_file *' data-ref="54file_priv">file_priv</dfn>)</td></tr>
<tr><th id="1012">1012</th><td>{</td></tr>
<tr><th id="1013">1013</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_fpriv" title='vmw_fpriv' data-ref="vmw_fpriv">vmw_fpriv</a> *<dfn class="local col5 decl" id="55vmw_fp" title='vmw_fp' data-type='struct vmw_fpriv *' data-ref="55vmw_fp">vmw_fp</dfn>;</td></tr>
<tr><th id="1014">1014</th><td></td></tr>
<tr><th id="1015">1015</th><td>	<a class="local col5 ref" href="#55vmw_fp" title='vmw_fp' data-ref="55vmw_fp">vmw_fp</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_fpriv" title='vmw_fpriv' data-ref="vmw_fpriv">vmw_fpriv</a>(<a class="local col4 ref" href="#54file_priv" title='file_priv' data-ref="54file_priv">file_priv</a>);</td></tr>
<tr><th id="1016">1016</th><td></td></tr>
<tr><th id="1017">1017</th><td>	<b>if</b> (<a class="local col5 ref" href="#55vmw_fp" title='vmw_fp' data-ref="55vmw_fp">vmw_fp</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_fpriv::locked_master" title='vmw_fpriv::locked_master' data-ref="vmw_fpriv::locked_master">locked_master</a>) {</td></tr>
<tr><th id="1018">1018</th><td>		<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a> *<dfn class="local col6 decl" id="56vmaster" title='vmaster' data-type='struct vmw_master *' data-ref="56vmaster">vmaster</dfn> =</td></tr>
<tr><th id="1019">1019</th><td>			<a class="ref fn" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a>(<a class="local col5 ref" href="#55vmw_fp" title='vmw_fp' data-ref="55vmw_fp">vmw_fp</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_fpriv::locked_master" title='vmw_fpriv::locked_master' data-ref="vmw_fpriv::locked_master">locked_master</a>);</td></tr>
<tr><th id="1020">1020</th><td></td></tr>
<tr><th id="1021">1021</th><td>		<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_lock_set_kill" title='ttm_lock_set_kill' data-ref="ttm_lock_set_kill">ttm_lock_set_kill</a>(&amp;<a class="local col6 ref" href="#56vmaster" title='vmaster' data-ref="56vmaster">vmaster</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>, <a class="macro" href="../../../../arch/x86/include/uapi/asm/signal.h.html#38" title="15" data-ref="_M/SIGTERM">SIGTERM</a>);</td></tr>
<tr><th id="1022">1022</th><td>		<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_vt_unlock" title='ttm_vt_unlock' data-ref="ttm_vt_unlock">ttm_vt_unlock</a>(&amp;<a class="local col6 ref" href="#56vmaster" title='vmaster' data-ref="56vmaster">vmaster</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>);</td></tr>
<tr><th id="1023">1023</th><td>		<a class="ref fn" href="../../../../include/drm/drm_auth.h.html#drm_master_put" title='drm_master_put' data-ref="drm_master_put">drm_master_put</a>(&amp;<a class="local col5 ref" href="#55vmw_fp" title='vmw_fp' data-ref="55vmw_fp">vmw_fp</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_fpriv::locked_master" title='vmw_fpriv::locked_master' data-ref="vmw_fpriv::locked_master">locked_master</a>);</td></tr>
<tr><th id="1024">1024</th><td>	}</td></tr>
<tr><th id="1025">1025</th><td></td></tr>
<tr><th id="1026">1026</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_object.h.html#ttm_object_file_release" title='ttm_object_file_release' data-ref="ttm_object_file_release">ttm_object_file_release</a>(&amp;<a class="local col5 ref" href="#55vmw_fp" title='vmw_fp' data-ref="55vmw_fp">vmw_fp</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_fpriv::tfile" title='vmw_fpriv::tfile' data-ref="vmw_fpriv::tfile">tfile</a>);</td></tr>
<tr><th id="1027">1027</th><td>	<a class="ref fn" href="../../../../include/linux/slab.h.html#kfree" title='kfree' data-ref="kfree">kfree</a>(<a class="local col5 ref" href="#55vmw_fp" title='vmw_fp' data-ref="55vmw_fp">vmw_fp</a>);</td></tr>
<tr><th id="1028">1028</th><td>}</td></tr>
<tr><th id="1029">1029</th><td></td></tr>
<tr><th id="1030">1030</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_driver_open" title='vmw_driver_open' data-type='int vmw_driver_open(struct drm_device * dev, struct drm_file * file_priv)' data-ref="vmw_driver_open">vmw_driver_open</dfn>(<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col7 decl" id="57dev" title='dev' data-type='struct drm_device *' data-ref="57dev">dev</dfn>, <b>struct</b> <a class="type" href="../../../../include/drm/drm_file.h.html#drm_file" title='drm_file' data-ref="drm_file">drm_file</a> *<dfn class="local col8 decl" id="58file_priv" title='file_priv' data-type='struct drm_file *' data-ref="58file_priv">file_priv</dfn>)</td></tr>
<tr><th id="1031">1031</th><td>{</td></tr>
<tr><th id="1032">1032</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col9 decl" id="59dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="59dev_priv">dev_priv</dfn> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_priv" title='vmw_priv' data-ref="vmw_priv">vmw_priv</a>(<a class="local col7 ref" href="#57dev" title='dev' data-ref="57dev">dev</a>);</td></tr>
<tr><th id="1033">1033</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_fpriv" title='vmw_fpriv' data-ref="vmw_fpriv">vmw_fpriv</a> *<dfn class="local col0 decl" id="60vmw_fp" title='vmw_fp' data-type='struct vmw_fpriv *' data-ref="60vmw_fp">vmw_fp</dfn>;</td></tr>
<tr><th id="1034">1034</th><td>	<em>int</em> <dfn class="local col1 decl" id="61ret" title='ret' data-type='int' data-ref="61ret">ret</dfn> = -<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#16" title="12" data-ref="_M/ENOMEM">ENOMEM</a>;</td></tr>
<tr><th id="1035">1035</th><td></td></tr>
<tr><th id="1036">1036</th><td>	<a class="local col0 ref" href="#60vmw_fp" title='vmw_fp' data-ref="60vmw_fp">vmw_fp</a> = <a class="ref fn" href="../../../../include/linux/slab.h.html#kzalloc" title='kzalloc' data-ref="kzalloc">kzalloc</a>(<b>sizeof</b>(*<a class="local col0 ref" href="#60vmw_fp" title='vmw_fp' data-ref="60vmw_fp">vmw_fp</a>), <a class="macro" href="../../../../include/linux/gfp.h.html#278" title="((( gfp_t)(0x400000u|0x1000000u)) | (( gfp_t)0x40u) | (( gfp_t)0x80u))" data-ref="_M/GFP_KERNEL">GFP_KERNEL</a>);</td></tr>
<tr><th id="1037">1037</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(!vmw_fp), 0)" data-ref="_M/unlikely">unlikely</a>(!<a class="local col0 ref" href="#60vmw_fp" title='vmw_fp' data-ref="60vmw_fp">vmw_fp</a>))</td></tr>
<tr><th id="1038">1038</th><td>		<b>return</b> <a class="local col1 ref" href="#61ret" title='ret' data-ref="61ret">ret</a>;</td></tr>
<tr><th id="1039">1039</th><td></td></tr>
<tr><th id="1040">1040</th><td>	<a class="local col0 ref" href="#60vmw_fp" title='vmw_fp' data-ref="60vmw_fp">vmw_fp</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_fpriv::tfile" title='vmw_fpriv::tfile' data-ref="vmw_fpriv::tfile">tfile</a> = <a class="ref fn" href="../../../../include/drm/ttm/ttm_object.h.html#ttm_object_file_init" title='ttm_object_file_init' data-ref="ttm_object_file_init">ttm_object_file_init</a>(<a class="local col9 ref" href="#59dev_priv" title='dev_priv' data-ref="59dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::tdev" title='vmw_private::tdev' data-ref="vmw_private::tdev">tdev</a>, <var>10</var>);</td></tr>
<tr><th id="1041">1041</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(vmw_fp-&gt;tfile == ((void *)0)), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col0 ref" href="#60vmw_fp" title='vmw_fp' data-ref="60vmw_fp">vmw_fp</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_fpriv::tfile" title='vmw_fpriv::tfile' data-ref="vmw_fpriv::tfile">tfile</a> == <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>))</td></tr>
<tr><th id="1042">1042</th><td>		<b>goto</b> <a class="lbl" href="#62out_no_tfile" data-ref="62out_no_tfile">out_no_tfile</a>;</td></tr>
<tr><th id="1043">1043</th><td></td></tr>
<tr><th id="1044">1044</th><td>	<a class="local col8 ref" href="#58file_priv" title='file_priv' data-ref="58file_priv">file_priv</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_file.h.html#drm_file::driver_priv" title='drm_file::driver_priv' data-ref="drm_file::driver_priv">driver_priv</a> = <a class="local col0 ref" href="#60vmw_fp" title='vmw_fp' data-ref="60vmw_fp">vmw_fp</a>;</td></tr>
<tr><th id="1045">1045</th><td></td></tr>
<tr><th id="1046">1046</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1047">1047</th><td></td></tr>
<tr><th id="1048">1048</th><td><dfn class="lbl" id="62out_no_tfile" data-ref="62out_no_tfile">out_no_tfile</dfn>:</td></tr>
<tr><th id="1049">1049</th><td>	<a class="ref fn" href="../../../../include/linux/slab.h.html#kfree" title='kfree' data-ref="kfree">kfree</a>(<a class="local col0 ref" href="#60vmw_fp" title='vmw_fp' data-ref="60vmw_fp">vmw_fp</a>);</td></tr>
<tr><th id="1050">1050</th><td>	<b>return</b> <a class="local col1 ref" href="#61ret" title='ret' data-ref="61ret">ret</a>;</td></tr>
<tr><th id="1051">1051</th><td>}</td></tr>
<tr><th id="1052">1052</th><td></td></tr>
<tr><th id="1053">1053</th><td><em>static</em> <b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a> *<dfn class="tu decl def fn" id="vmw_master_check" title='vmw_master_check' data-type='struct vmw_master * vmw_master_check(struct drm_device * dev, struct drm_file * file_priv, unsigned int flags)' data-ref="vmw_master_check">vmw_master_check</dfn>(<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col3 decl" id="63dev" title='dev' data-type='struct drm_device *' data-ref="63dev">dev</dfn>,</td></tr>
<tr><th id="1054">1054</th><td>					   <b>struct</b> <a class="type" href="../../../../include/drm/drm_file.h.html#drm_file" title='drm_file' data-ref="drm_file">drm_file</a> *<dfn class="local col4 decl" id="64file_priv" title='file_priv' data-type='struct drm_file *' data-ref="64file_priv">file_priv</dfn>,</td></tr>
<tr><th id="1055">1055</th><td>					   <em>unsigned</em> <em>int</em> <dfn class="local col5 decl" id="65flags" title='flags' data-type='unsigned int' data-ref="65flags">flags</dfn>)</td></tr>
<tr><th id="1056">1056</th><td>{</td></tr>
<tr><th id="1057">1057</th><td>	<em>int</em> <dfn class="local col6 decl" id="66ret" title='ret' data-type='int' data-ref="66ret">ret</dfn>;</td></tr>
<tr><th id="1058">1058</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_fpriv" title='vmw_fpriv' data-ref="vmw_fpriv">vmw_fpriv</a> *<dfn class="local col7 decl" id="67vmw_fp" title='vmw_fp' data-type='struct vmw_fpriv *' data-ref="67vmw_fp">vmw_fp</dfn> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_fpriv" title='vmw_fpriv' data-ref="vmw_fpriv">vmw_fpriv</a>(<a class="local col4 ref" href="#64file_priv" title='file_priv' data-ref="64file_priv">file_priv</a>);</td></tr>
<tr><th id="1059">1059</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a> *<dfn class="local col8 decl" id="68vmaster" title='vmaster' data-type='struct vmw_master *' data-ref="68vmaster">vmaster</dfn>;</td></tr>
<tr><th id="1060">1060</th><td></td></tr>
<tr><th id="1061">1061</th><td>	<b>if</b> (!<a class="ref fn" href="../../../../include/drm/drm_file.h.html#drm_is_primary_client" title='drm_is_primary_client' data-ref="drm_is_primary_client">drm_is_primary_client</a>(<a class="local col4 ref" href="#64file_priv" title='file_priv' data-ref="64file_priv">file_priv</a>) || !(<a class="local col5 ref" href="#65flags" title='flags' data-ref="65flags">flags</a> &amp; <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_AUTH" title='DRM_AUTH' data-ref="DRM_AUTH">DRM_AUTH</a>))</td></tr>
<tr><th id="1062">1062</th><td>		<b>return</b> <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="1063">1063</th><td></td></tr>
<tr><th id="1064">1064</th><td>	<a class="local col6 ref" href="#66ret" title='ret' data-ref="66ret">ret</a> = <a class="ref fn" href="../../../../include/linux/mutex.h.html#mutex_lock_interruptible" title='mutex_lock_interruptible' data-ref="mutex_lock_interruptible">mutex_lock_interruptible</a>(&amp;<a class="local col3 ref" href="#63dev" title='dev' data-ref="63dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::master_mutex" title='drm_device::master_mutex' data-ref="drm_device::master_mutex">master_mutex</a>);</td></tr>
<tr><th id="1065">1065</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col6 ref" href="#66ret" title='ret' data-ref="66ret">ret</a> != <var>0</var>))</td></tr>
<tr><th id="1066">1066</th><td>		<b>return</b> <a class="ref fn" href="../../../../include/linux/err.h.html#ERR_PTR" title='ERR_PTR' data-ref="ERR_PTR">ERR_PTR</a>(-<a class="macro" href="../../../../include/linux/errno.h.html#14" title="512" data-ref="_M/ERESTARTSYS">ERESTARTSYS</a>);</td></tr>
<tr><th id="1067">1067</th><td></td></tr>
<tr><th id="1068">1068</th><td>	<b>if</b> (<a class="ref fn" href="../../../../include/drm/drm_auth.h.html#drm_is_current_master" title='drm_is_current_master' data-ref="drm_is_current_master">drm_is_current_master</a>(<a class="local col4 ref" href="#64file_priv" title='file_priv' data-ref="64file_priv">file_priv</a>)) {</td></tr>
<tr><th id="1069">1069</th><td>		<a class="ref fn" href="../../../../include/linux/mutex.h.html#mutex_unlock" title='mutex_unlock' data-ref="mutex_unlock">mutex_unlock</a>(&amp;<a class="local col3 ref" href="#63dev" title='dev' data-ref="63dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::master_mutex" title='drm_device::master_mutex' data-ref="drm_device::master_mutex">master_mutex</a>);</td></tr>
<tr><th id="1070">1070</th><td>		<b>return</b> <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="1071">1071</th><td>	}</td></tr>
<tr><th id="1072">1072</th><td></td></tr>
<tr><th id="1073">1073</th><td>	<i>/*</i></td></tr>
<tr><th id="1074">1074</th><td><i>	 * Check if we were previously master, but now dropped. In that</i></td></tr>
<tr><th id="1075">1075</th><td><i>	 * case, allow at least render node functionality.</i></td></tr>
<tr><th id="1076">1076</th><td><i>	 */</i></td></tr>
<tr><th id="1077">1077</th><td>	<b>if</b> (<a class="local col7 ref" href="#67vmw_fp" title='vmw_fp' data-ref="67vmw_fp">vmw_fp</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_fpriv::locked_master" title='vmw_fpriv::locked_master' data-ref="vmw_fpriv::locked_master">locked_master</a>) {</td></tr>
<tr><th id="1078">1078</th><td>		<a class="ref fn" href="../../../../include/linux/mutex.h.html#mutex_unlock" title='mutex_unlock' data-ref="mutex_unlock">mutex_unlock</a>(&amp;<a class="local col3 ref" href="#63dev" title='dev' data-ref="63dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::master_mutex" title='drm_device::master_mutex' data-ref="drm_device::master_mutex">master_mutex</a>);</td></tr>
<tr><th id="1079">1079</th><td></td></tr>
<tr><th id="1080">1080</th><td>		<b>if</b> (<a class="local col5 ref" href="#65flags" title='flags' data-ref="65flags">flags</a> &amp; <a class="enum" href="../../../../include/drm/drm_ioctl.h.html#DRM_RENDER_ALLOW" title='DRM_RENDER_ALLOW' data-ref="DRM_RENDER_ALLOW">DRM_RENDER_ALLOW</a>)</td></tr>
<tr><th id="1081">1081</th><td>			<b>return</b> <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="1082">1082</th><td></td></tr>
<tr><th id="1083">1083</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Dropped master trying to access ioctl that &quot; &quot;requires authentication.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Dropped master trying to access ioctl that "</q></td></tr>
<tr><th id="1084">1084</th><td>			  <q>"requires authentication.\n"</q>);</td></tr>
<tr><th id="1085">1085</th><td>		<b>return</b> <a class="ref fn" href="../../../../include/linux/err.h.html#ERR_PTR" title='ERR_PTR' data-ref="ERR_PTR">ERR_PTR</a>(-<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#17" title="13" data-ref="_M/EACCES">EACCES</a>);</td></tr>
<tr><th id="1086">1086</th><td>	}</td></tr>
<tr><th id="1087">1087</th><td>	<a class="ref fn" href="../../../../include/linux/mutex.h.html#mutex_unlock" title='mutex_unlock' data-ref="mutex_unlock">mutex_unlock</a>(&amp;<a class="local col3 ref" href="#63dev" title='dev' data-ref="63dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::master_mutex" title='drm_device::master_mutex' data-ref="drm_device::master_mutex">master_mutex</a>);</td></tr>
<tr><th id="1088">1088</th><td></td></tr>
<tr><th id="1089">1089</th><td>	<i>/*</i></td></tr>
<tr><th id="1090">1090</th><td><i>	 * Take the TTM lock. Possibly sleep waiting for the authenticating</i></td></tr>
<tr><th id="1091">1091</th><td><i>	 * master to become master again, or for a SIGTERM if the</i></td></tr>
<tr><th id="1092">1092</th><td><i>	 * authenticating master exits.</i></td></tr>
<tr><th id="1093">1093</th><td><i>	 */</i></td></tr>
<tr><th id="1094">1094</th><td>	<a class="local col8 ref" href="#68vmaster" title='vmaster' data-ref="68vmaster">vmaster</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a>(<a class="local col4 ref" href="#64file_priv" title='file_priv' data-ref="64file_priv">file_priv</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_file.h.html#drm_file::master" title='drm_file::master' data-ref="drm_file::master">master</a>);</td></tr>
<tr><th id="1095">1095</th><td>	<a class="local col6 ref" href="#66ret" title='ret' data-ref="66ret">ret</a> = <a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_read_lock" title='ttm_read_lock' data-ref="ttm_read_lock">ttm_read_lock</a>(&amp;<a class="local col8 ref" href="#68vmaster" title='vmaster' data-ref="68vmaster">vmaster</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>);</td></tr>
<tr><th id="1096">1096</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col6 ref" href="#66ret" title='ret' data-ref="66ret">ret</a> != <var>0</var>))</td></tr>
<tr><th id="1097">1097</th><td>		<a class="local col8 ref" href="#68vmaster" title='vmaster' data-ref="68vmaster">vmaster</a> = <a class="ref fn" href="../../../../include/linux/err.h.html#ERR_PTR" title='ERR_PTR' data-ref="ERR_PTR">ERR_PTR</a>(<a class="local col6 ref" href="#66ret" title='ret' data-ref="66ret">ret</a>);</td></tr>
<tr><th id="1098">1098</th><td></td></tr>
<tr><th id="1099">1099</th><td>	<b>return</b> <a class="local col8 ref" href="#68vmaster" title='vmaster' data-ref="68vmaster">vmaster</a>;</td></tr>
<tr><th id="1100">1100</th><td>}</td></tr>
<tr><th id="1101">1101</th><td></td></tr>
<tr><th id="1102">1102</th><td><em>static</em> <em>long</em> <dfn class="tu decl def fn" id="vmw_generic_ioctl" title='vmw_generic_ioctl' data-type='long vmw_generic_ioctl(struct file * filp, unsigned int cmd, unsigned long arg, long (*)(struct file *, unsigned int, unsigned long) ioctl_func)' data-ref="vmw_generic_ioctl">vmw_generic_ioctl</dfn>(<b>struct</b> <a class="type" href="../../../../include/linux/fs.h.html#file" title='file' data-ref="file">file</a> *<dfn class="local col9 decl" id="69filp" title='filp' data-type='struct file *' data-ref="69filp">filp</dfn>, <em>unsigned</em> <em>int</em> <dfn class="local col0 decl" id="70cmd" title='cmd' data-type='unsigned int' data-ref="70cmd">cmd</dfn>,</td></tr>
<tr><th id="1103">1103</th><td>			      <em>unsigned</em> <em>long</em> <dfn class="local col1 decl" id="71arg" title='arg' data-type='unsigned long' data-ref="71arg">arg</dfn>,</td></tr>
<tr><th id="1104">1104</th><td>			      <em>long</em> (*<dfn class="local col2 decl" id="72ioctl_func" title='ioctl_func' data-type='long (*)(struct file *, unsigned int, unsigned long)' data-ref="72ioctl_func">ioctl_func</dfn>)(<b>struct</b> <a class="type" href="../../../../include/linux/fs.h.html#file" title='file' data-ref="file">file</a> *, <em>unsigned</em> <em>int</em>,</td></tr>
<tr><th id="1105">1105</th><td>						 <em>unsigned</em> <em>long</em>))</td></tr>
<tr><th id="1106">1106</th><td>{</td></tr>
<tr><th id="1107">1107</th><td>	<b>struct</b> <a class="type" href="../../../../include/drm/drm_file.h.html#drm_file" title='drm_file' data-ref="drm_file">drm_file</a> *<dfn class="local col3 decl" id="73file_priv" title='file_priv' data-type='struct drm_file *' data-ref="73file_priv">file_priv</dfn> = <a class="local col9 ref" href="#69filp" title='filp' data-ref="69filp">filp</a>-&gt;<a class="ref field" href="../../../../include/linux/fs.h.html#file::private_data" title='file::private_data' data-ref="file::private_data">private_data</a>;</td></tr>
<tr><th id="1108">1108</th><td>	<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col4 decl" id="74dev" title='dev' data-type='struct drm_device *' data-ref="74dev">dev</dfn> = <a class="local col3 ref" href="#73file_priv" title='file_priv' data-ref="73file_priv">file_priv</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_file.h.html#drm_file::minor" title='drm_file::minor' data-ref="drm_file::minor">minor</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_file.h.html#drm_minor::dev" title='drm_minor::dev' data-ref="drm_minor::dev">dev</a>;</td></tr>
<tr><th id="1109">1109</th><td>	<em>unsigned</em> <em>int</em> <dfn class="local col5 decl" id="75nr" title='nr' data-type='unsigned int' data-ref="75nr">nr</dfn> = <a class="macro" href="../../../../include/drm/drm_ioctl.h.html#70" title="(((cmd) &gt;&gt; 0) &amp; ((1 &lt;&lt; 8)-1))" data-ref="_M/DRM_IOCTL_NR">DRM_IOCTL_NR</a>(<a class="local col0 ref" href="#70cmd" title='cmd' data-ref="70cmd">cmd</a>);</td></tr>
<tr><th id="1110">1110</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a> *<dfn class="local col6 decl" id="76vmaster" title='vmaster' data-type='struct vmw_master *' data-ref="76vmaster">vmaster</dfn>;</td></tr>
<tr><th id="1111">1111</th><td>	<em>unsigned</em> <em>int</em> <dfn class="local col7 decl" id="77flags" title='flags' data-type='unsigned int' data-ref="77flags">flags</dfn>;</td></tr>
<tr><th id="1112">1112</th><td>	<em>long</em> <dfn class="local col8 decl" id="78ret" title='ret' data-type='long' data-ref="78ret">ret</dfn>;</td></tr>
<tr><th id="1113">1113</th><td></td></tr>
<tr><th id="1114">1114</th><td>	<i>/*</i></td></tr>
<tr><th id="1115">1115</th><td><i>	 * Do extra checking on driver private ioctls.</i></td></tr>
<tr><th id="1116">1116</th><td><i>	 */</i></td></tr>
<tr><th id="1117">1117</th><td></td></tr>
<tr><th id="1118">1118</th><td>	<b>if</b> ((<a class="local col5 ref" href="#75nr" title='nr' data-ref="75nr">nr</a> &gt;= <a class="macro" href="../../../../include/uapi/drm/drm.h.html#874" title="0x40" data-ref="_M/DRM_COMMAND_BASE">DRM_COMMAND_BASE</a>) &amp;&amp; (<a class="local col5 ref" href="#75nr" title='nr' data-ref="75nr">nr</a> &lt; <a class="macro" href="../../../../include/uapi/drm/drm.h.html#875" title="0xA0" data-ref="_M/DRM_COMMAND_END">DRM_COMMAND_END</a>)</td></tr>
<tr><th id="1119">1119</th><td>	    &amp;&amp; (<a class="local col5 ref" href="#75nr" title='nr' data-ref="75nr">nr</a> &lt; <a class="macro" href="../../../../include/uapi/drm/drm.h.html#874" title="0x40" data-ref="_M/DRM_COMMAND_BASE">DRM_COMMAND_BASE</a> + <a class="local col4 ref" href="#74dev" title='dev' data-ref="74dev">dev</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_device.h.html#drm_device::driver" title='drm_device::driver' data-ref="drm_device::driver">driver</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::num_ioctls" title='drm_driver::num_ioctls' data-ref="drm_driver::num_ioctls">num_ioctls</a>)) {</td></tr>
<tr><th id="1120">1120</th><td>		<em>const</em> <b>struct</b> <a class="type" href="../../../../include/drm/drm_ioctl.h.html#drm_ioctl_desc" title='drm_ioctl_desc' data-ref="drm_ioctl_desc">drm_ioctl_desc</a> *<dfn class="local col9 decl" id="79ioctl" title='ioctl' data-type='const struct drm_ioctl_desc *' data-ref="79ioctl">ioctl</dfn> =</td></tr>
<tr><th id="1121">1121</th><td>			&amp;<a class="tu ref" href="#vmw_ioctls" title='vmw_ioctls' data-use='a' data-ref="vmw_ioctls">vmw_ioctls</a>[<a class="local col5 ref" href="#75nr" title='nr' data-ref="75nr">nr</a> - <a class="macro" href="../../../../include/uapi/drm/drm.h.html#874" title="0x40" data-ref="_M/DRM_COMMAND_BASE">DRM_COMMAND_BASE</a>];</td></tr>
<tr><th id="1122">1122</th><td></td></tr>
<tr><th id="1123">1123</th><td>		<b>if</b> (<a class="local col5 ref" href="#75nr" title='nr' data-ref="75nr">nr</a> == <a class="macro" href="../../../../include/uapi/drm/drm.h.html#874" title="0x40" data-ref="_M/DRM_COMMAND_BASE">DRM_COMMAND_BASE</a> + <a class="macro" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#56" title="12" data-ref="_M/DRM_VMW_EXECBUF">DRM_VMW_EXECBUF</a>) {</td></tr>
<tr><th id="1124">1124</th><td>			<a class="local col8 ref" href="#78ret" title='ret' data-ref="78ret">ret</a> = (<em>long</em>) <a class="ref fn" href="../../../../include/drm/drm_ioctl.h.html#drm_ioctl_permit" title='drm_ioctl_permit' data-ref="drm_ioctl_permit">drm_ioctl_permit</a>(<a class="local col9 ref" href="#79ioctl" title='ioctl' data-ref="79ioctl">ioctl</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_ioctl.h.html#drm_ioctl_desc::flags" title='drm_ioctl_desc::flags' data-ref="drm_ioctl_desc::flags">flags</a>, <a class="local col3 ref" href="#73file_priv" title='file_priv' data-ref="73file_priv">file_priv</a>);</td></tr>
<tr><th id="1125">1125</th><td>			<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col8 ref" href="#78ret" title='ret' data-ref="78ret">ret</a> != <var>0</var>))</td></tr>
<tr><th id="1126">1126</th><td>				<b>return</b> <a class="local col8 ref" href="#78ret" title='ret' data-ref="78ret">ret</a>;</td></tr>
<tr><th id="1127">1127</th><td></td></tr>
<tr><th id="1128">1128</th><td>			<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!((cmd &amp; ((1U &lt;&lt; (((0+8)+8)+14)) | (2U &lt;&lt; (((0+8)+8)+14)))) != (1U &lt;&lt; (((0+8)+8)+14))), 0)" data-ref="_M/unlikely">unlikely</a>((<a class="local col0 ref" href="#70cmd" title='cmd' data-ref="70cmd">cmd</a> &amp; (<a class="macro" href="../../../../include/uapi/asm-generic/ioctl.h.html#101" title="(1U &lt;&lt; (((0+8)+8)+14))" data-ref="_M/IOC_IN">IOC_IN</a> | <a class="macro" href="../../../../include/uapi/asm-generic/ioctl.h.html#102" title="(2U &lt;&lt; (((0+8)+8)+14))" data-ref="_M/IOC_OUT">IOC_OUT</a>)) != <a class="macro" href="../../../../include/uapi/asm-generic/ioctl.h.html#101" title="(1U &lt;&lt; (((0+8)+8)+14))" data-ref="_M/IOC_IN">IOC_IN</a>))</td></tr>
<tr><th id="1129">1129</th><td>				<b>goto</b> <a class="lbl" href="#80out_io_encoding" data-ref="80out_io_encoding">out_io_encoding</a>;</td></tr>
<tr><th id="1130">1130</th><td></td></tr>
<tr><th id="1131">1131</th><td>			<b>return</b> (<em>long</em>) <a class="ref fn" href="vmwgfx_drv.h.html#vmw_execbuf_ioctl" title='vmw_execbuf_ioctl' data-ref="vmw_execbuf_ioctl">vmw_execbuf_ioctl</a>(<a class="local col4 ref" href="#74dev" title='dev' data-ref="74dev">dev</a>, <a class="local col1 ref" href="#71arg" title='arg' data-ref="71arg">arg</a>, <a class="local col3 ref" href="#73file_priv" title='file_priv' data-ref="73file_priv">file_priv</a>,</td></tr>
<tr><th id="1132">1132</th><td>							<a class="macro" href="../../../../include/uapi/asm-generic/ioctl.h.html#97" title="(((cmd) &gt;&gt; ((0+8)+8)) &amp; ((1 &lt;&lt; 14)-1))" data-ref="_M/_IOC_SIZE">_IOC_SIZE</a>(<a class="local col0 ref" href="#70cmd" title='cmd' data-ref="70cmd">cmd</a>));</td></tr>
<tr><th id="1133">1133</th><td>		} <b>else</b> <b>if</b> (<a class="local col5 ref" href="#75nr" title='nr' data-ref="75nr">nr</a> == <a class="macro" href="../../../../include/uapi/drm/drm.h.html#874" title="0x40" data-ref="_M/DRM_COMMAND_BASE">DRM_COMMAND_BASE</a> + <a class="macro" href="../../../../include/uapi/drm/vmwgfx_drm.h.html#64" title="20" data-ref="_M/DRM_VMW_UPDATE_LAYOUT">DRM_VMW_UPDATE_LAYOUT</a>) {</td></tr>
<tr><th id="1134">1134</th><td>			<b>if</b> (!<a class="ref fn" href="../../../../include/drm/drm_auth.h.html#drm_is_current_master" title='drm_is_current_master' data-ref="drm_is_current_master">drm_is_current_master</a>(<a class="local col3 ref" href="#73file_priv" title='file_priv' data-ref="73file_priv">file_priv</a>) &amp;&amp;</td></tr>
<tr><th id="1135">1135</th><td>			    !<a class="ref fn" href="../../../../include/linux/capability.h.html#capable" title='capable' data-ref="capable">capable</a>(<a class="macro" href="../../../../include/uapi/linux/capability.h.html#278" title="21" data-ref="_M/CAP_SYS_ADMIN">CAP_SYS_ADMIN</a>))</td></tr>
<tr><th id="1136">1136</th><td>				<b>return</b> -<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#17" title="13" data-ref="_M/EACCES">EACCES</a>;</td></tr>
<tr><th id="1137">1137</th><td>		}</td></tr>
<tr><th id="1138">1138</th><td></td></tr>
<tr><th id="1139">1139</th><td>		<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ioctl-&gt;cmd != cmd), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col9 ref" href="#79ioctl" title='ioctl' data-ref="79ioctl">ioctl</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_ioctl.h.html#drm_ioctl_desc::cmd" title='drm_ioctl_desc::cmd' data-ref="drm_ioctl_desc::cmd">cmd</a> != <a class="local col0 ref" href="#70cmd" title='cmd' data-ref="70cmd">cmd</a>))</td></tr>
<tr><th id="1140">1140</th><td>			<b>goto</b> <a class="lbl" href="#80out_io_encoding" data-ref="80out_io_encoding">out_io_encoding</a>;</td></tr>
<tr><th id="1141">1141</th><td></td></tr>
<tr><th id="1142">1142</th><td>		<a class="local col7 ref" href="#77flags" title='flags' data-ref="77flags">flags</a> = <a class="local col9 ref" href="#79ioctl" title='ioctl' data-ref="79ioctl">ioctl</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_ioctl.h.html#drm_ioctl_desc::flags" title='drm_ioctl_desc::flags' data-ref="drm_ioctl_desc::flags">flags</a>;</td></tr>
<tr><th id="1143">1143</th><td>	} <b>else</b> <b>if</b> (!<a class="ref fn" href="../../../../include/drm/drm_ioctl.h.html#drm_ioctl_flags" title='drm_ioctl_flags' data-ref="drm_ioctl_flags">drm_ioctl_flags</a>(<a class="local col5 ref" href="#75nr" title='nr' data-ref="75nr">nr</a>, &amp;<a class="local col7 ref" href="#77flags" title='flags' data-ref="77flags">flags</a>))</td></tr>
<tr><th id="1144">1144</th><td>		<b>return</b> -<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#26" title="22" data-ref="_M/EINVAL">EINVAL</a>;</td></tr>
<tr><th id="1145">1145</th><td></td></tr>
<tr><th id="1146">1146</th><td>	<a class="local col6 ref" href="#76vmaster" title='vmaster' data-ref="76vmaster">vmaster</a> = <a class="tu ref fn" href="#vmw_master_check" title='vmw_master_check' data-use='c' data-ref="vmw_master_check">vmw_master_check</a>(<a class="local col4 ref" href="#74dev" title='dev' data-ref="74dev">dev</a>, <a class="local col3 ref" href="#73file_priv" title='file_priv' data-ref="73file_priv">file_priv</a>, <a class="local col7 ref" href="#77flags" title='flags' data-ref="77flags">flags</a>);</td></tr>
<tr><th id="1147">1147</th><td>	<b>if</b> (<a class="ref fn" href="../../../../include/linux/err.h.html#IS_ERR" title='IS_ERR' data-ref="IS_ERR">IS_ERR</a>(<a class="local col6 ref" href="#76vmaster" title='vmaster' data-ref="76vmaster">vmaster</a>)) {</td></tr>
<tr><th id="1148">1148</th><td>		<a class="local col8 ref" href="#78ret" title='ret' data-ref="78ret">ret</a> = <a class="ref fn" href="../../../../include/linux/err.h.html#PTR_ERR" title='PTR_ERR' data-ref="PTR_ERR">PTR_ERR</a>(<a class="local col6 ref" href="#76vmaster" title='vmaster' data-ref="76vmaster">vmaster</a>);</td></tr>
<tr><th id="1149">1149</th><td></td></tr>
<tr><th id="1150">1150</th><td>		<b>if</b> (<a class="local col8 ref" href="#78ret" title='ret' data-ref="78ret">ret</a> != -<a class="macro" href="../../../../include/linux/errno.h.html#14" title="512" data-ref="_M/ERESTARTSYS">ERESTARTSYS</a>)</td></tr>
<tr><th id="1151">1151</th><td>			<a class="macro" href="../../../../include/drm/drmP.h.html#154" title="do { printk(&quot;\001&quot; &quot;6&quot; &quot;[&quot; &quot;drm&quot; &quot;] &quot; &quot;IOCTL ERROR Command %d, Error %ld.\n&quot;, nr, ret); } while (0)" data-ref="_M/DRM_INFO">DRM_INFO</a>(<q>"IOCTL ERROR Command %d, Error %ld.\n"</q>,</td></tr>
<tr><th id="1152">1152</th><td>				 <a class="local col5 ref" href="#75nr" title='nr' data-ref="75nr">nr</a>, <a class="local col8 ref" href="#78ret" title='ret' data-ref="78ret">ret</a>);</td></tr>
<tr><th id="1153">1153</th><td>		<b>return</b> <a class="local col8 ref" href="#78ret" title='ret' data-ref="78ret">ret</a>;</td></tr>
<tr><th id="1154">1154</th><td>	}</td></tr>
<tr><th id="1155">1155</th><td></td></tr>
<tr><th id="1156">1156</th><td>	<a class="local col8 ref" href="#78ret" title='ret' data-ref="78ret">ret</a> = <a class="local col2 ref" href="#72ioctl_func" title='ioctl_func' data-ref="72ioctl_func">ioctl_func</a>(<a class="local col9 ref" href="#69filp" title='filp' data-ref="69filp">filp</a>, <a class="local col0 ref" href="#70cmd" title='cmd' data-ref="70cmd">cmd</a>, <a class="local col1 ref" href="#71arg" title='arg' data-ref="71arg">arg</a>);</td></tr>
<tr><th id="1157">1157</th><td>	<b>if</b> (<a class="local col6 ref" href="#76vmaster" title='vmaster' data-ref="76vmaster">vmaster</a>)</td></tr>
<tr><th id="1158">1158</th><td>		<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_read_unlock" title='ttm_read_unlock' data-ref="ttm_read_unlock">ttm_read_unlock</a>(&amp;<a class="local col6 ref" href="#76vmaster" title='vmaster' data-ref="76vmaster">vmaster</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>);</td></tr>
<tr><th id="1159">1159</th><td></td></tr>
<tr><th id="1160">1160</th><td>	<b>return</b> <a class="local col8 ref" href="#78ret" title='ret' data-ref="78ret">ret</a>;</td></tr>
<tr><th id="1161">1161</th><td></td></tr>
<tr><th id="1162">1162</th><td><dfn class="lbl" id="80out_io_encoding" data-ref="80out_io_encoding">out_io_encoding</dfn>:</td></tr>
<tr><th id="1163">1163</th><td>	<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Invalid command format, ioctl %d\n&quot;, nr - 0x40)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Invalid command format, ioctl %d\n"</q>,</td></tr>
<tr><th id="1164">1164</th><td>		  <a class="local col5 ref" href="#75nr" title='nr' data-ref="75nr">nr</a> - DRM_COMMAND_BASE);</td></tr>
<tr><th id="1165">1165</th><td></td></tr>
<tr><th id="1166">1166</th><td>	<b>return</b> -<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#26" title="22" data-ref="_M/EINVAL">EINVAL</a>;</td></tr>
<tr><th id="1167">1167</th><td>}</td></tr>
<tr><th id="1168">1168</th><td></td></tr>
<tr><th id="1169">1169</th><td><em>static</em> <em>long</em> <dfn class="tu decl def fn" id="vmw_unlocked_ioctl" title='vmw_unlocked_ioctl' data-type='long vmw_unlocked_ioctl(struct file * filp, unsigned int cmd, unsigned long arg)' data-ref="vmw_unlocked_ioctl">vmw_unlocked_ioctl</dfn>(<b>struct</b> <a class="type" href="../../../../include/linux/fs.h.html#file" title='file' data-ref="file">file</a> *<dfn class="local col1 decl" id="81filp" title='filp' data-type='struct file *' data-ref="81filp">filp</dfn>, <em>unsigned</em> <em>int</em> <dfn class="local col2 decl" id="82cmd" title='cmd' data-type='unsigned int' data-ref="82cmd">cmd</dfn>,</td></tr>
<tr><th id="1170">1170</th><td>			       <em>unsigned</em> <em>long</em> <dfn class="local col3 decl" id="83arg" title='arg' data-type='unsigned long' data-ref="83arg">arg</dfn>)</td></tr>
<tr><th id="1171">1171</th><td>{</td></tr>
<tr><th id="1172">1172</th><td>	<b>return</b> <a class="tu ref fn" href="#vmw_generic_ioctl" title='vmw_generic_ioctl' data-use='c' data-ref="vmw_generic_ioctl">vmw_generic_ioctl</a>(<a class="local col1 ref" href="#81filp" title='filp' data-ref="81filp">filp</a>, <a class="local col2 ref" href="#82cmd" title='cmd' data-ref="82cmd">cmd</a>, <a class="local col3 ref" href="#83arg" title='arg' data-ref="83arg">arg</a>, &amp;<a class="ref fn" href="../../../../include/drm/drm_ioctl.h.html#drm_ioctl" title='drm_ioctl' data-ref="drm_ioctl">drm_ioctl</a>);</td></tr>
<tr><th id="1173">1173</th><td>}</td></tr>
<tr><th id="1174">1174</th><td></td></tr>
<tr><th id="1175">1175</th><td><u>#<span data-ppcond="1175">ifdef</span> <a class="macro" href="../../../../include/generated/autoconf.h.html#83" data-ref="_M/CONFIG_COMPAT">CONFIG_COMPAT</a></u></td></tr>
<tr><th id="1176">1176</th><td><em>static</em> <em>long</em> <dfn class="tu decl def fn" id="vmw_compat_ioctl" title='vmw_compat_ioctl' data-type='long vmw_compat_ioctl(struct file * filp, unsigned int cmd, unsigned long arg)' data-ref="vmw_compat_ioctl">vmw_compat_ioctl</dfn>(<b>struct</b> <a class="type" href="../../../../include/linux/fs.h.html#file" title='file' data-ref="file">file</a> *<dfn class="local col4 decl" id="84filp" title='filp' data-type='struct file *' data-ref="84filp">filp</dfn>, <em>unsigned</em> <em>int</em> <dfn class="local col5 decl" id="85cmd" title='cmd' data-type='unsigned int' data-ref="85cmd">cmd</dfn>,</td></tr>
<tr><th id="1177">1177</th><td>			     <em>unsigned</em> <em>long</em> <dfn class="local col6 decl" id="86arg" title='arg' data-type='unsigned long' data-ref="86arg">arg</dfn>)</td></tr>
<tr><th id="1178">1178</th><td>{</td></tr>
<tr><th id="1179">1179</th><td>	<b>return</b> <a class="tu ref fn" href="#vmw_generic_ioctl" title='vmw_generic_ioctl' data-use='c' data-ref="vmw_generic_ioctl">vmw_generic_ioctl</a>(<a class="local col4 ref" href="#84filp" title='filp' data-ref="84filp">filp</a>, <a class="local col5 ref" href="#85cmd" title='cmd' data-ref="85cmd">cmd</a>, <a class="local col6 ref" href="#86arg" title='arg' data-ref="86arg">arg</a>, &amp;<a class="ref fn" href="../../../../include/drm/drm_ioctl.h.html#drm_compat_ioctl" title='drm_compat_ioctl' data-ref="drm_compat_ioctl">drm_compat_ioctl</a>);</td></tr>
<tr><th id="1180">1180</th><td>}</td></tr>
<tr><th id="1181">1181</th><td><u>#<span data-ppcond="1175">endif</span></u></td></tr>
<tr><th id="1182">1182</th><td></td></tr>
<tr><th id="1183">1183</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="vmw_lastclose" title='vmw_lastclose' data-type='void vmw_lastclose(struct drm_device * dev)' data-ref="vmw_lastclose">vmw_lastclose</dfn>(<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col7 decl" id="87dev" title='dev' data-type='struct drm_device *' data-ref="87dev">dev</dfn>)</td></tr>
<tr><th id="1184">1184</th><td>{</td></tr>
<tr><th id="1185">1185</th><td>}</td></tr>
<tr><th id="1186">1186</th><td></td></tr>
<tr><th id="1187">1187</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="vmw_master_init" title='vmw_master_init' data-type='void vmw_master_init(struct vmw_master * vmaster)' data-ref="vmw_master_init">vmw_master_init</dfn>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a> *<dfn class="local col8 decl" id="88vmaster" title='vmaster' data-type='struct vmw_master *' data-ref="88vmaster">vmaster</dfn>)</td></tr>
<tr><th id="1188">1188</th><td>{</td></tr>
<tr><th id="1189">1189</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_lock_init" title='ttm_lock_init' data-ref="ttm_lock_init">ttm_lock_init</a>(&amp;<a class="local col8 ref" href="#88vmaster" title='vmaster' data-ref="88vmaster">vmaster</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>);</td></tr>
<tr><th id="1190">1190</th><td>}</td></tr>
<tr><th id="1191">1191</th><td></td></tr>
<tr><th id="1192">1192</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_master_create" title='vmw_master_create' data-type='int vmw_master_create(struct drm_device * dev, struct drm_master * master)' data-ref="vmw_master_create">vmw_master_create</dfn>(<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col9 decl" id="89dev" title='dev' data-type='struct drm_device *' data-ref="89dev">dev</dfn>,</td></tr>
<tr><th id="1193">1193</th><td>			     <b>struct</b> <a class="type" href="../../../../include/drm/drm_auth.h.html#drm_master" title='drm_master' data-ref="drm_master">drm_master</a> *<dfn class="local col0 decl" id="90master" title='master' data-type='struct drm_master *' data-ref="90master">master</dfn>)</td></tr>
<tr><th id="1194">1194</th><td>{</td></tr>
<tr><th id="1195">1195</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a> *<dfn class="local col1 decl" id="91vmaster" title='vmaster' data-type='struct vmw_master *' data-ref="91vmaster">vmaster</dfn>;</td></tr>
<tr><th id="1196">1196</th><td></td></tr>
<tr><th id="1197">1197</th><td>	<a class="local col1 ref" href="#91vmaster" title='vmaster' data-ref="91vmaster">vmaster</a> = <a class="ref fn" href="../../../../include/linux/slab.h.html#kzalloc" title='kzalloc' data-ref="kzalloc">kzalloc</a>(<b>sizeof</b>(*<a class="local col1 ref" href="#91vmaster" title='vmaster' data-ref="91vmaster">vmaster</a>), <a class="macro" href="../../../../include/linux/gfp.h.html#278" title="((( gfp_t)(0x400000u|0x1000000u)) | (( gfp_t)0x40u) | (( gfp_t)0x80u))" data-ref="_M/GFP_KERNEL">GFP_KERNEL</a>);</td></tr>
<tr><th id="1198">1198</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(!vmaster), 0)" data-ref="_M/unlikely">unlikely</a>(!<a class="local col1 ref" href="#91vmaster" title='vmaster' data-ref="91vmaster">vmaster</a>))</td></tr>
<tr><th id="1199">1199</th><td>		<b>return</b> -<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#16" title="12" data-ref="_M/ENOMEM">ENOMEM</a>;</td></tr>
<tr><th id="1200">1200</th><td></td></tr>
<tr><th id="1201">1201</th><td>	<a class="tu ref fn" href="#vmw_master_init" title='vmw_master_init' data-use='c' data-ref="vmw_master_init">vmw_master_init</a>(<a class="local col1 ref" href="#91vmaster" title='vmaster' data-ref="91vmaster">vmaster</a>);</td></tr>
<tr><th id="1202">1202</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_lock_set_kill" title='ttm_lock_set_kill' data-ref="ttm_lock_set_kill">ttm_lock_set_kill</a>(&amp;<a class="local col1 ref" href="#91vmaster" title='vmaster' data-ref="91vmaster">vmaster</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>, <a class="macro" href="../../../../arch/x86/include/uapi/asm/signal.h.html#38" title="15" data-ref="_M/SIGTERM">SIGTERM</a>);</td></tr>
<tr><th id="1203">1203</th><td>	<a class="local col0 ref" href="#90master" title='master' data-ref="90master">master</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_auth.h.html#drm_master::driver_priv" title='drm_master::driver_priv' data-ref="drm_master::driver_priv">driver_priv</a> = <a class="local col1 ref" href="#91vmaster" title='vmaster' data-ref="91vmaster">vmaster</a>;</td></tr>
<tr><th id="1204">1204</th><td></td></tr>
<tr><th id="1205">1205</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1206">1206</th><td>}</td></tr>
<tr><th id="1207">1207</th><td></td></tr>
<tr><th id="1208">1208</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="vmw_master_destroy" title='vmw_master_destroy' data-type='void vmw_master_destroy(struct drm_device * dev, struct drm_master * master)' data-ref="vmw_master_destroy">vmw_master_destroy</dfn>(<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col2 decl" id="92dev" title='dev' data-type='struct drm_device *' data-ref="92dev">dev</dfn>,</td></tr>
<tr><th id="1209">1209</th><td>			       <b>struct</b> <a class="type" href="../../../../include/drm/drm_auth.h.html#drm_master" title='drm_master' data-ref="drm_master">drm_master</a> *<dfn class="local col3 decl" id="93master" title='master' data-type='struct drm_master *' data-ref="93master">master</dfn>)</td></tr>
<tr><th id="1210">1210</th><td>{</td></tr>
<tr><th id="1211">1211</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a> *<dfn class="local col4 decl" id="94vmaster" title='vmaster' data-type='struct vmw_master *' data-ref="94vmaster">vmaster</dfn> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a>(<a class="local col3 ref" href="#93master" title='master' data-ref="93master">master</a>);</td></tr>
<tr><th id="1212">1212</th><td></td></tr>
<tr><th id="1213">1213</th><td>	<a class="local col3 ref" href="#93master" title='master' data-ref="93master">master</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_auth.h.html#drm_master::driver_priv" title='drm_master::driver_priv' data-ref="drm_master::driver_priv">driver_priv</a> = <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="1214">1214</th><td>	<a class="ref fn" href="../../../../include/linux/slab.h.html#kfree" title='kfree' data-ref="kfree">kfree</a>(<a class="local col4 ref" href="#94vmaster" title='vmaster' data-ref="94vmaster">vmaster</a>);</td></tr>
<tr><th id="1215">1215</th><td>}</td></tr>
<tr><th id="1216">1216</th><td></td></tr>
<tr><th id="1217">1217</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_master_set" title='vmw_master_set' data-type='int vmw_master_set(struct drm_device * dev, struct drm_file * file_priv, bool from_open)' data-ref="vmw_master_set">vmw_master_set</dfn>(<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col5 decl" id="95dev" title='dev' data-type='struct drm_device *' data-ref="95dev">dev</dfn>,</td></tr>
<tr><th id="1218">1218</th><td>			  <b>struct</b> <a class="type" href="../../../../include/drm/drm_file.h.html#drm_file" title='drm_file' data-ref="drm_file">drm_file</a> *<dfn class="local col6 decl" id="96file_priv" title='file_priv' data-type='struct drm_file *' data-ref="96file_priv">file_priv</dfn>,</td></tr>
<tr><th id="1219">1219</th><td>			  <a class="typedef" href="../../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="local col7 decl" id="97from_open" title='from_open' data-type='bool' data-ref="97from_open">from_open</dfn>)</td></tr>
<tr><th id="1220">1220</th><td>{</td></tr>
<tr><th id="1221">1221</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col8 decl" id="98dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="98dev_priv">dev_priv</dfn> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_priv" title='vmw_priv' data-ref="vmw_priv">vmw_priv</a>(<a class="local col5 ref" href="#95dev" title='dev' data-ref="95dev">dev</a>);</td></tr>
<tr><th id="1222">1222</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_fpriv" title='vmw_fpriv' data-ref="vmw_fpriv">vmw_fpriv</a> *<dfn class="local col9 decl" id="99vmw_fp" title='vmw_fp' data-type='struct vmw_fpriv *' data-ref="99vmw_fp">vmw_fp</dfn> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_fpriv" title='vmw_fpriv' data-ref="vmw_fpriv">vmw_fpriv</a>(<a class="local col6 ref" href="#96file_priv" title='file_priv' data-ref="96file_priv">file_priv</a>);</td></tr>
<tr><th id="1223">1223</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a> *<dfn class="local col0 decl" id="100active" title='active' data-type='struct vmw_master *' data-ref="100active">active</dfn> = <a class="local col8 ref" href="#98dev_priv" title='dev_priv' data-ref="98dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::active_master" title='vmw_private::active_master' data-ref="vmw_private::active_master">active_master</a>;</td></tr>
<tr><th id="1224">1224</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a> *<dfn class="local col1 decl" id="101vmaster" title='vmaster' data-type='struct vmw_master *' data-ref="101vmaster">vmaster</dfn> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a>(<a class="local col6 ref" href="#96file_priv" title='file_priv' data-ref="96file_priv">file_priv</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_file.h.html#drm_file::master" title='drm_file::master' data-ref="drm_file::master">master</a>);</td></tr>
<tr><th id="1225">1225</th><td>	<em>int</em> <dfn class="local col2 decl" id="102ret" title='ret' data-type='int' data-ref="102ret">ret</dfn> = <var>0</var>;</td></tr>
<tr><th id="1226">1226</th><td></td></tr>
<tr><th id="1227">1227</th><td>	<b>if</b> (<a class="local col0 ref" href="#100active" title='active' data-ref="100active">active</a>) {</td></tr>
<tr><th id="1228">1228</th><td>		<a class="macro" href="../../../../include/asm-generic/bug.h.html#59" title="do { if (__builtin_expect(!!(active != &amp;dev_priv-&gt;fbdev_master), 0)) do { do { asm volatile(&quot;1:\t&quot; &quot;.byte 0x0f, 0x0b&quot; &quot;\n&quot; &quot;.pushsection __bug_table,\&quot;aw\&quot;\n&quot; &quot;2:\t&quot; &quot;.long &quot; &quot;1b&quot; &quot; - 2b&quot; &quot;\t# bug_entry::bug_addr\n&quot; &quot;\t&quot; &quot;.long &quot; &quot;%c0&quot; &quot; - 2b&quot; &quot;\t# bug_entry::file\n&quot; &quot;\t.word %c1&quot; &quot;\t# bug_entry::line\n&quot; &quot;\t.word %c2&quot; &quot;\t# bug_entry::flags\n&quot; &quot;\t.org 2b+%c3\n&quot; &quot;.popsection&quot; : : &quot;i&quot; (&quot;/home/tempdban/kernel/stable/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c&quot;), &quot;i&quot; (1228), &quot;i&quot; (0), &quot;i&quot; (sizeof(struct bug_entry))); } while (0); do { ({ asm(&quot;%c0:\n\t&quot; &quot;.pushsection .discard.reachable\n\t&quot; &quot;.long %c0b - .\n\t&quot; &quot;.popsection\n\t&quot; : : &quot;i&quot; (118)); }); do { } while (1); } while (0); } while (0); } while (0)" data-ref="_M/BUG_ON">BUG_ON</a>(<a class="local col0 ref" href="#100active" title='active' data-ref="100active">active</a> != &amp;<a class="local col8 ref" href="#98dev_priv" title='dev_priv' data-ref="98dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fbdev_master" title='vmw_private::fbdev_master' data-ref="vmw_private::fbdev_master">fbdev_master</a>);</td></tr>
<tr><th id="1229">1229</th><td>		<a class="local col2 ref" href="#102ret" title='ret' data-ref="102ret">ret</a> = <a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_vt_lock" title='ttm_vt_lock' data-ref="ttm_vt_lock">ttm_vt_lock</a>(&amp;<a class="local col0 ref" href="#100active" title='active' data-ref="100active">active</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>, <a class="local col9 ref" href="#99vmw_fp" title='vmw_fp' data-ref="99vmw_fp">vmw_fp</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_fpriv::tfile" title='vmw_fpriv::tfile' data-ref="vmw_fpriv::tfile">tfile</a>);</td></tr>
<tr><th id="1230">1230</th><td>		<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!(ret != 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col2 ref" href="#102ret" title='ret' data-ref="102ret">ret</a> != <var>0</var>))</td></tr>
<tr><th id="1231">1231</th><td>			<b>return</b> <a class="local col2 ref" href="#102ret" title='ret' data-ref="102ret">ret</a>;</td></tr>
<tr><th id="1232">1232</th><td></td></tr>
<tr><th id="1233">1233</th><td>		<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_lock_set_kill" title='ttm_lock_set_kill' data-ref="ttm_lock_set_kill">ttm_lock_set_kill</a>(&amp;<a class="local col0 ref" href="#100active" title='active' data-ref="100active">active</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>, <a class="macro" href="../../../../arch/x86/include/uapi/asm/signal.h.html#38" title="15" data-ref="_M/SIGTERM">SIGTERM</a>);</td></tr>
<tr><th id="1234">1234</th><td>		<a class="local col8 ref" href="#98dev_priv" title='dev_priv' data-ref="98dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::active_master" title='vmw_private::active_master' data-ref="vmw_private::active_master">active_master</a> = <a class="macro" href="../../../../include/linux/stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="1235">1235</th><td>	}</td></tr>
<tr><th id="1236">1236</th><td></td></tr>
<tr><th id="1237">1237</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_lock_set_kill" title='ttm_lock_set_kill' data-ref="ttm_lock_set_kill">ttm_lock_set_kill</a>(&amp;<a class="local col1 ref" href="#101vmaster" title='vmaster' data-ref="101vmaster">vmaster</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>, <a class="macro" href="../../../../arch/x86/include/uapi/asm/signal.h.html#38" title="15" data-ref="_M/SIGTERM">SIGTERM</a>);</td></tr>
<tr><th id="1238">1238</th><td>	<b>if</b> (!<a class="local col7 ref" href="#97from_open" title='from_open' data-ref="97from_open">from_open</a>) {</td></tr>
<tr><th id="1239">1239</th><td>		<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_vt_unlock" title='ttm_vt_unlock' data-ref="ttm_vt_unlock">ttm_vt_unlock</a>(&amp;<a class="local col1 ref" href="#101vmaster" title='vmaster' data-ref="101vmaster">vmaster</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>);</td></tr>
<tr><th id="1240">1240</th><td>		<a class="macro" href="../../../../include/asm-generic/bug.h.html#59" title="do { if (__builtin_expect(!!(vmw_fp-&gt;locked_master != file_priv-&gt;master), 0)) do { do { asm volatile(&quot;1:\t&quot; &quot;.byte 0x0f, 0x0b&quot; &quot;\n&quot; &quot;.pushsection __bug_table,\&quot;aw\&quot;\n&quot; &quot;2:\t&quot; &quot;.long &quot; &quot;1b&quot; &quot; - 2b&quot; &quot;\t# bug_entry::bug_addr\n&quot; &quot;\t&quot; &quot;.long &quot; &quot;%c0&quot; &quot; - 2b&quot; &quot;\t# bug_entry::file\n&quot; &quot;\t.word %c1&quot; &quot;\t# bug_entry::line\n&quot; &quot;\t.word %c2&quot; &quot;\t# bug_entry::flags\n&quot; &quot;\t.org 2b+%c3\n&quot; &quot;.popsection&quot; : : &quot;i&quot; (&quot;/home/tempdban/kernel/stable/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c&quot;), &quot;i&quot; (1240), &quot;i&quot; (0), &quot;i&quot; (sizeof(struct bug_entry))); } while (0); do { ({ asm(&quot;%c0:\n\t&quot; &quot;.pushsection .discard.reachable\n\t&quot; &quot;.long %c0b - .\n\t&quot; &quot;.popsection\n\t&quot; : : &quot;i&quot; (120)); }); do { } while (1); } while (0); } while (0); } while (0)" data-ref="_M/BUG_ON">BUG_ON</a>(<a class="local col9 ref" href="#99vmw_fp" title='vmw_fp' data-ref="99vmw_fp">vmw_fp</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_fpriv::locked_master" title='vmw_fpriv::locked_master' data-ref="vmw_fpriv::locked_master">locked_master</a> != <a class="local col6 ref" href="#96file_priv" title='file_priv' data-ref="96file_priv">file_priv</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_file.h.html#drm_file::master" title='drm_file::master' data-ref="drm_file::master">master</a>);</td></tr>
<tr><th id="1241">1241</th><td>		<a class="ref fn" href="../../../../include/drm/drm_auth.h.html#drm_master_put" title='drm_master_put' data-ref="drm_master_put">drm_master_put</a>(&amp;<a class="local col9 ref" href="#99vmw_fp" title='vmw_fp' data-ref="99vmw_fp">vmw_fp</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_fpriv::locked_master" title='vmw_fpriv::locked_master' data-ref="vmw_fpriv::locked_master">locked_master</a>);</td></tr>
<tr><th id="1242">1242</th><td>	}</td></tr>
<tr><th id="1243">1243</th><td></td></tr>
<tr><th id="1244">1244</th><td>	<a class="local col8 ref" href="#98dev_priv" title='dev_priv' data-ref="98dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::active_master" title='vmw_private::active_master' data-ref="vmw_private::active_master">active_master</a> = <a class="local col1 ref" href="#101vmaster" title='vmaster' data-ref="101vmaster">vmaster</a>;</td></tr>
<tr><th id="1245">1245</th><td>	<a class="ref fn" href="../../../../include/drm/drm_sysfs.h.html#drm_sysfs_hotplug_event" title='drm_sysfs_hotplug_event' data-ref="drm_sysfs_hotplug_event">drm_sysfs_hotplug_event</a>(<a class="local col5 ref" href="#95dev" title='dev' data-ref="95dev">dev</a>);</td></tr>
<tr><th id="1246">1246</th><td></td></tr>
<tr><th id="1247">1247</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1248">1248</th><td>}</td></tr>
<tr><th id="1249">1249</th><td></td></tr>
<tr><th id="1250">1250</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="vmw_master_drop" title='vmw_master_drop' data-type='void vmw_master_drop(struct drm_device * dev, struct drm_file * file_priv)' data-ref="vmw_master_drop">vmw_master_drop</dfn>(<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col3 decl" id="103dev" title='dev' data-type='struct drm_device *' data-ref="103dev">dev</dfn>,</td></tr>
<tr><th id="1251">1251</th><td>			    <b>struct</b> <a class="type" href="../../../../include/drm/drm_file.h.html#drm_file" title='drm_file' data-ref="drm_file">drm_file</a> *<dfn class="local col4 decl" id="104file_priv" title='file_priv' data-type='struct drm_file *' data-ref="104file_priv">file_priv</dfn>)</td></tr>
<tr><th id="1252">1252</th><td>{</td></tr>
<tr><th id="1253">1253</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col5 decl" id="105dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="105dev_priv">dev_priv</dfn> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_priv" title='vmw_priv' data-ref="vmw_priv">vmw_priv</a>(<a class="local col3 ref" href="#103dev" title='dev' data-ref="103dev">dev</a>);</td></tr>
<tr><th id="1254">1254</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_fpriv" title='vmw_fpriv' data-ref="vmw_fpriv">vmw_fpriv</a> *<dfn class="local col6 decl" id="106vmw_fp" title='vmw_fp' data-type='struct vmw_fpriv *' data-ref="106vmw_fp">vmw_fp</dfn> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_fpriv" title='vmw_fpriv' data-ref="vmw_fpriv">vmw_fpriv</a>(<a class="local col4 ref" href="#104file_priv" title='file_priv' data-ref="104file_priv">file_priv</a>);</td></tr>
<tr><th id="1255">1255</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a> *<dfn class="local col7 decl" id="107vmaster" title='vmaster' data-type='struct vmw_master *' data-ref="107vmaster">vmaster</dfn> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_master" title='vmw_master' data-ref="vmw_master">vmw_master</a>(<a class="local col4 ref" href="#104file_priv" title='file_priv' data-ref="104file_priv">file_priv</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_file.h.html#drm_file::master" title='drm_file::master' data-ref="drm_file::master">master</a>);</td></tr>
<tr><th id="1256">1256</th><td>	<em>int</em> <dfn class="local col8 decl" id="108ret" title='ret' data-type='int' data-ref="108ret">ret</dfn>;</td></tr>
<tr><th id="1257">1257</th><td></td></tr>
<tr><th id="1258">1258</th><td>	<i class="doc">/**</i></td></tr>
<tr><th id="1259">1259</th><td><i class="doc">	 * Make sure the master doesn't disappear while we have</i></td></tr>
<tr><th id="1260">1260</th><td><i class="doc">	 * it locked.</i></td></tr>
<tr><th id="1261">1261</th><td><i class="doc">	 */</i></td></tr>
<tr><th id="1262">1262</th><td></td></tr>
<tr><th id="1263">1263</th><td>	<a class="local col6 ref" href="#106vmw_fp" title='vmw_fp' data-ref="106vmw_fp">vmw_fp</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_fpriv::locked_master" title='vmw_fpriv::locked_master' data-ref="vmw_fpriv::locked_master">locked_master</a> = <a class="ref fn" href="../../../../include/drm/drm_auth.h.html#drm_master_get" title='drm_master_get' data-ref="drm_master_get">drm_master_get</a>(<a class="local col4 ref" href="#104file_priv" title='file_priv' data-ref="104file_priv">file_priv</a>-&gt;<a class="ref field" href="../../../../include/drm/drm_file.h.html#drm_file::master" title='drm_file::master' data-ref="drm_file::master">master</a>);</td></tr>
<tr><th id="1264">1264</th><td>	<a class="local col8 ref" href="#108ret" title='ret' data-ref="108ret">ret</a> = <a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_vt_lock" title='ttm_vt_lock' data-ref="ttm_vt_lock">ttm_vt_lock</a>(&amp;<a class="local col7 ref" href="#107vmaster" title='vmaster' data-ref="107vmaster">vmaster</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>, <a class="local col6 ref" href="#106vmw_fp" title='vmw_fp' data-ref="106vmw_fp">vmw_fp</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_fpriv::tfile" title='vmw_fpriv::tfile' data-ref="vmw_fpriv::tfile">tfile</a>);</td></tr>
<tr><th id="1265">1265</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_kms_legacy_hotspot_clear" title='vmw_kms_legacy_hotspot_clear' data-ref="vmw_kms_legacy_hotspot_clear">vmw_kms_legacy_hotspot_clear</a>(<a class="local col5 ref" href="#105dev_priv" title='dev_priv' data-ref="105dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1266">1266</th><td>	<b>if</b> (<a class="macro" href="../../../../include/linux/compiler.h.html#77" title="__builtin_expect(!!((ret != 0)), 0)" data-ref="_M/unlikely">unlikely</a>((<a class="local col8 ref" href="#108ret" title='ret' data-ref="108ret">ret</a> != <var>0</var>))) {</td></tr>
<tr><th id="1267">1267</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Unable to lock TTM at VT switch.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Unable to lock TTM at VT switch.\n"</q>);</td></tr>
<tr><th id="1268">1268</th><td>		<a class="ref fn" href="../../../../include/drm/drm_auth.h.html#drm_master_put" title='drm_master_put' data-ref="drm_master_put">drm_master_put</a>(&amp;<a class="local col6 ref" href="#106vmw_fp" title='vmw_fp' data-ref="106vmw_fp">vmw_fp</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_fpriv::locked_master" title='vmw_fpriv::locked_master' data-ref="vmw_fpriv::locked_master">locked_master</a>);</td></tr>
<tr><th id="1269">1269</th><td>	}</td></tr>
<tr><th id="1270">1270</th><td></td></tr>
<tr><th id="1271">1271</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_lock_set_kill" title='ttm_lock_set_kill' data-ref="ttm_lock_set_kill">ttm_lock_set_kill</a>(&amp;<a class="local col7 ref" href="#107vmaster" title='vmaster' data-ref="107vmaster">vmaster</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>, <a class="macro" href="../../../../arch/x86/include/uapi/asm/signal.h.html#38" title="15" data-ref="_M/SIGTERM">SIGTERM</a>);</td></tr>
<tr><th id="1272">1272</th><td></td></tr>
<tr><th id="1273">1273</th><td>	<b>if</b> (!<a class="local col5 ref" href="#105dev_priv" title='dev_priv' data-ref="105dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::enable_fb" title='vmw_private::enable_fb' data-ref="vmw_private::enable_fb">enable_fb</a>)</td></tr>
<tr><th id="1274">1274</th><td>		<a class="ref fn" href="#vmw_svga_disable" title='vmw_svga_disable' data-ref="vmw_svga_disable">vmw_svga_disable</a>(<a class="local col5 ref" href="#105dev_priv" title='dev_priv' data-ref="105dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1275">1275</th><td></td></tr>
<tr><th id="1276">1276</th><td>	<a class="local col5 ref" href="#105dev_priv" title='dev_priv' data-ref="105dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::active_master" title='vmw_private::active_master' data-ref="vmw_private::active_master">active_master</a> = &amp;<a class="local col5 ref" href="#105dev_priv" title='dev_priv' data-ref="105dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fbdev_master" title='vmw_private::fbdev_master' data-ref="vmw_private::fbdev_master">fbdev_master</a>;</td></tr>
<tr><th id="1277">1277</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_lock_set_kill" title='ttm_lock_set_kill' data-ref="ttm_lock_set_kill">ttm_lock_set_kill</a>(&amp;<a class="local col5 ref" href="#105dev_priv" title='dev_priv' data-ref="105dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fbdev_master" title='vmw_private::fbdev_master' data-ref="vmw_private::fbdev_master">fbdev_master</a>.<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>, <a class="macro" href="../../../../arch/x86/include/uapi/asm/signal.h.html#38" title="15" data-ref="_M/SIGTERM">SIGTERM</a>);</td></tr>
<tr><th id="1278">1278</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_vt_unlock" title='ttm_vt_unlock' data-ref="ttm_vt_unlock">ttm_vt_unlock</a>(&amp;<a class="local col5 ref" href="#105dev_priv" title='dev_priv' data-ref="105dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fbdev_master" title='vmw_private::fbdev_master' data-ref="vmw_private::fbdev_master">fbdev_master</a>.<a class="ref field" href="vmwgfx_drv.h.html#vmw_master::lock" title='vmw_master::lock' data-ref="vmw_master::lock">lock</a>);</td></tr>
<tr><th id="1279">1279</th><td></td></tr>
<tr><th id="1280">1280</th><td>	<b>if</b> (<a class="local col5 ref" href="#105dev_priv" title='dev_priv' data-ref="105dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::enable_fb" title='vmw_private::enable_fb' data-ref="vmw_private::enable_fb">enable_fb</a>)</td></tr>
<tr><th id="1281">1281</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fb_on" title='vmw_fb_on' data-ref="vmw_fb_on">vmw_fb_on</a>(<a class="local col5 ref" href="#105dev_priv" title='dev_priv' data-ref="105dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1282">1282</th><td>}</td></tr>
<tr><th id="1283">1283</th><td></td></tr>
<tr><th id="1284">1284</th><td><i class="doc" data-doc="__vmw_svga_enable">/**</i></td></tr>
<tr><th id="1285">1285</th><td><i class="doc" data-doc="__vmw_svga_enable"> * __vmw_svga_enable - Enable SVGA mode, FIFO and use of VRAM.</i></td></tr>
<tr><th id="1286">1286</th><td><i class="doc" data-doc="__vmw_svga_enable"> *</i></td></tr>
<tr><th id="1287">1287</th><td><i class="doc" data-doc="__vmw_svga_enable"> * <span class="command">@dev</span>_<span class="verb">priv: Pointer to device private struct.</span></i></td></tr>
<tr><th id="1288">1288</th><td><i class="doc" data-doc="__vmw_svga_enable"> * Needs the reservation sem to be held in non-exclusive mode.</i></td></tr>
<tr><th id="1289">1289</th><td><i class="doc" data-doc="__vmw_svga_enable"> */</i></td></tr>
<tr><th id="1290">1290</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="__vmw_svga_enable" title='__vmw_svga_enable' data-type='void __vmw_svga_enable(struct vmw_private * dev_priv)' data-ref="__vmw_svga_enable">__vmw_svga_enable</dfn>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col9 decl" id="109dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="109dev_priv">dev_priv</dfn>)</td></tr>
<tr><th id="1291">1291</th><td>{</td></tr>
<tr><th id="1292">1292</th><td>	<a class="ref fn" href="../../../../include/linux/spinlock.h.html#spin_lock" title='spin_lock' data-ref="spin_lock">spin_lock</a>(&amp;<a class="local col9 ref" href="#109dev_priv" title='dev_priv' data-ref="109dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::svga_lock" title='vmw_private::svga_lock' data-ref="vmw_private::svga_lock">svga_lock</a>);</td></tr>
<tr><th id="1293">1293</th><td>	<b>if</b> (!<a class="local col9 ref" href="#109dev_priv" title='dev_priv' data-ref="109dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>.<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_bo_device::man" title='ttm_bo_device::man' data-ref="ttm_bo_device::man">man</a>[<a class="macro" href="../../../../include/drm/ttm/ttm_placement.h.html#42" title="2" data-ref="_M/TTM_PL_VRAM">TTM_PL_VRAM</a>].<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_mem_type_manager::use_type" title='ttm_mem_type_manager::use_type' data-ref="ttm_mem_type_manager::use_type">use_type</a>) {</td></tr>
<tr><th id="1294">1294</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_write" title='vmw_write' data-ref="vmw_write">vmw_write</a>(<a class="local col9 ref" href="#109dev_priv" title='dev_priv' data-ref="109dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_ENABLE" title='SVGA_REG_ENABLE' data-ref="SVGA_REG_ENABLE">SVGA_REG_ENABLE</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_ENABLE" title='SVGA_REG_ENABLE' data-ref="SVGA_REG_ENABLE">SVGA_REG_ENABLE</a>);</td></tr>
<tr><th id="1295">1295</th><td>		<a class="local col9 ref" href="#109dev_priv" title='dev_priv' data-ref="109dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>.<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_bo_device::man" title='ttm_bo_device::man' data-ref="ttm_bo_device::man">man</a>[<a class="macro" href="../../../../include/drm/ttm/ttm_placement.h.html#42" title="2" data-ref="_M/TTM_PL_VRAM">TTM_PL_VRAM</a>].<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_mem_type_manager::use_type" title='ttm_mem_type_manager::use_type' data-ref="ttm_mem_type_manager::use_type">use_type</a> = <a class="enum" href="../../../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>;</td></tr>
<tr><th id="1296">1296</th><td>	}</td></tr>
<tr><th id="1297">1297</th><td>	<a class="ref fn" href="../../../../include/linux/spinlock.h.html#spin_unlock" title='spin_unlock' data-ref="spin_unlock">spin_unlock</a>(&amp;<a class="local col9 ref" href="#109dev_priv" title='dev_priv' data-ref="109dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::svga_lock" title='vmw_private::svga_lock' data-ref="vmw_private::svga_lock">svga_lock</a>);</td></tr>
<tr><th id="1298">1298</th><td>}</td></tr>
<tr><th id="1299">1299</th><td></td></tr>
<tr><th id="1300">1300</th><td><i class="doc">/**</i></td></tr>
<tr><th id="1301">1301</th><td><i class="doc"> * vmw_svga_enable - Enable SVGA mode, FIFO and use of VRAM.</i></td></tr>
<tr><th id="1302">1302</th><td><i class="doc"> *</i></td></tr>
<tr><th id="1303">1303</th><td><i class="doc"> * <span class="command">@dev</span>_<span class="verb">priv: Pointer to device private struct.</span></i></td></tr>
<tr><th id="1304">1304</th><td><i class="doc"> */</i></td></tr>
<tr><th id="1305">1305</th><td><em>void</em> <dfn class="decl def fn" id="vmw_svga_enable" title='vmw_svga_enable' data-ref="vmw_svga_enable">vmw_svga_enable</dfn>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col0 decl" id="110dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="110dev_priv">dev_priv</dfn>)</td></tr>
<tr><th id="1306">1306</th><td>{</td></tr>
<tr><th id="1307">1307</th><td>	(<em>void</em>) <a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_read_lock" title='ttm_read_lock' data-ref="ttm_read_lock">ttm_read_lock</a>(&amp;<a class="local col0 ref" href="#110dev_priv" title='dev_priv' data-ref="110dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::reservation_sem" title='vmw_private::reservation_sem' data-ref="vmw_private::reservation_sem">reservation_sem</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>);</td></tr>
<tr><th id="1308">1308</th><td>	<a class="tu ref fn" href="#__vmw_svga_enable" title='__vmw_svga_enable' data-use='c' data-ref="__vmw_svga_enable">__vmw_svga_enable</a>(<a class="local col0 ref" href="#110dev_priv" title='dev_priv' data-ref="110dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1309">1309</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_read_unlock" title='ttm_read_unlock' data-ref="ttm_read_unlock">ttm_read_unlock</a>(&amp;<a class="local col0 ref" href="#110dev_priv" title='dev_priv' data-ref="110dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::reservation_sem" title='vmw_private::reservation_sem' data-ref="vmw_private::reservation_sem">reservation_sem</a>);</td></tr>
<tr><th id="1310">1310</th><td>}</td></tr>
<tr><th id="1311">1311</th><td></td></tr>
<tr><th id="1312">1312</th><td><i class="doc" data-doc="__vmw_svga_disable">/**</i></td></tr>
<tr><th id="1313">1313</th><td><i class="doc" data-doc="__vmw_svga_disable"> * __vmw_svga_disable - Disable SVGA mode and use of VRAM.</i></td></tr>
<tr><th id="1314">1314</th><td><i class="doc" data-doc="__vmw_svga_disable"> *</i></td></tr>
<tr><th id="1315">1315</th><td><i class="doc" data-doc="__vmw_svga_disable"> * <span class="command">@dev</span>_<span class="verb">priv: Pointer to device private struct.</span></i></td></tr>
<tr><th id="1316">1316</th><td><i class="doc" data-doc="__vmw_svga_disable"> * Needs the reservation sem to be held in exclusive mode.</i></td></tr>
<tr><th id="1317">1317</th><td><i class="doc" data-doc="__vmw_svga_disable"> * Will not empty VRAM. VRAM must be emptied by caller.</i></td></tr>
<tr><th id="1318">1318</th><td><i class="doc" data-doc="__vmw_svga_disable"> */</i></td></tr>
<tr><th id="1319">1319</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="__vmw_svga_disable" title='__vmw_svga_disable' data-type='void __vmw_svga_disable(struct vmw_private * dev_priv)' data-ref="__vmw_svga_disable">__vmw_svga_disable</dfn>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col1 decl" id="111dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="111dev_priv">dev_priv</dfn>)</td></tr>
<tr><th id="1320">1320</th><td>{</td></tr>
<tr><th id="1321">1321</th><td>	<a class="ref fn" href="../../../../include/linux/spinlock.h.html#spin_lock" title='spin_lock' data-ref="spin_lock">spin_lock</a>(&amp;<a class="local col1 ref" href="#111dev_priv" title='dev_priv' data-ref="111dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::svga_lock" title='vmw_private::svga_lock' data-ref="vmw_private::svga_lock">svga_lock</a>);</td></tr>
<tr><th id="1322">1322</th><td>	<b>if</b> (<a class="local col1 ref" href="#111dev_priv" title='dev_priv' data-ref="111dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>.<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_bo_device::man" title='ttm_bo_device::man' data-ref="ttm_bo_device::man">man</a>[<a class="macro" href="../../../../include/drm/ttm/ttm_placement.h.html#42" title="2" data-ref="_M/TTM_PL_VRAM">TTM_PL_VRAM</a>].<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_mem_type_manager::use_type" title='ttm_mem_type_manager::use_type' data-ref="ttm_mem_type_manager::use_type">use_type</a>) {</td></tr>
<tr><th id="1323">1323</th><td>		<a class="local col1 ref" href="#111dev_priv" title='dev_priv' data-ref="111dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>.<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_bo_device::man" title='ttm_bo_device::man' data-ref="ttm_bo_device::man">man</a>[<a class="macro" href="../../../../include/drm/ttm/ttm_placement.h.html#42" title="2" data-ref="_M/TTM_PL_VRAM">TTM_PL_VRAM</a>].<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_mem_type_manager::use_type" title='ttm_mem_type_manager::use_type' data-ref="ttm_mem_type_manager::use_type">use_type</a> = <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>;</td></tr>
<tr><th id="1324">1324</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_write" title='vmw_write' data-ref="vmw_write">vmw_write</a>(<a class="local col1 ref" href="#111dev_priv" title='dev_priv' data-ref="111dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_ENABLE" title='SVGA_REG_ENABLE' data-ref="SVGA_REG_ENABLE">SVGA_REG_ENABLE</a>,</td></tr>
<tr><th id="1325">1325</th><td>			  <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_ENABLE_HIDE" title='SVGA_REG_ENABLE_HIDE' data-ref="SVGA_REG_ENABLE_HIDE">SVGA_REG_ENABLE_HIDE</a> |</td></tr>
<tr><th id="1326">1326</th><td>			  <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_ENABLE_ENABLE" title='SVGA_REG_ENABLE_ENABLE' data-ref="SVGA_REG_ENABLE_ENABLE">SVGA_REG_ENABLE_ENABLE</a>);</td></tr>
<tr><th id="1327">1327</th><td>	}</td></tr>
<tr><th id="1328">1328</th><td>	<a class="ref fn" href="../../../../include/linux/spinlock.h.html#spin_unlock" title='spin_unlock' data-ref="spin_unlock">spin_unlock</a>(&amp;<a class="local col1 ref" href="#111dev_priv" title='dev_priv' data-ref="111dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::svga_lock" title='vmw_private::svga_lock' data-ref="vmw_private::svga_lock">svga_lock</a>);</td></tr>
<tr><th id="1329">1329</th><td>}</td></tr>
<tr><th id="1330">1330</th><td></td></tr>
<tr><th id="1331">1331</th><td><i class="doc">/**</i></td></tr>
<tr><th id="1332">1332</th><td><i class="doc"> * vmw_svga_disable - Disable SVGA_MODE, and use of VRAM. Keep the fifo</i></td></tr>
<tr><th id="1333">1333</th><td><i class="doc"> * running.</i></td></tr>
<tr><th id="1334">1334</th><td><i class="doc"> *</i></td></tr>
<tr><th id="1335">1335</th><td><i class="doc"> * <span class="command">@dev</span>_<span class="verb">priv: Pointer to device private struct.</span></i></td></tr>
<tr><th id="1336">1336</th><td><i class="doc"> * Will empty VRAM.</i></td></tr>
<tr><th id="1337">1337</th><td><i class="doc"> */</i></td></tr>
<tr><th id="1338">1338</th><td><em>void</em> <dfn class="decl def fn" id="vmw_svga_disable" title='vmw_svga_disable' data-ref="vmw_svga_disable">vmw_svga_disable</dfn>(<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col2 decl" id="112dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="112dev_priv">dev_priv</dfn>)</td></tr>
<tr><th id="1339">1339</th><td>{</td></tr>
<tr><th id="1340">1340</th><td>	<i>/*</i></td></tr>
<tr><th id="1341">1341</th><td><i>	 * Disabling SVGA will turn off device modesetting capabilities, so</i></td></tr>
<tr><th id="1342">1342</th><td><i>	 * notify KMS about that so that it doesn't cache atomic state that</i></td></tr>
<tr><th id="1343">1343</th><td><i>	 * isn't valid anymore, for example crtcs turned on.</i></td></tr>
<tr><th id="1344">1344</th><td><i>	 * Strictly we'd want to do this under the SVGA lock (or an SVGA mutex),</i></td></tr>
<tr><th id="1345">1345</th><td><i>	 * but vmw_kms_lost_device() takes the reservation sem and thus we'll</i></td></tr>
<tr><th id="1346">1346</th><td><i>	 * end up with lock order reversal. Thus, a master may actually perform</i></td></tr>
<tr><th id="1347">1347</th><td><i>	 * a new modeset just after we call vmw_kms_lost_device() and race with</i></td></tr>
<tr><th id="1348">1348</th><td><i>	 * vmw_svga_disable(), but that should at worst cause atomic KMS state</i></td></tr>
<tr><th id="1349">1349</th><td><i>	 * to be inconsistent with the device, causing modesetting problems.</i></td></tr>
<tr><th id="1350">1350</th><td><i>	 *</i></td></tr>
<tr><th id="1351">1351</th><td><i>	 */</i></td></tr>
<tr><th id="1352">1352</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_kms_lost_device" title='vmw_kms_lost_device' data-ref="vmw_kms_lost_device">vmw_kms_lost_device</a>(<a class="local col2 ref" href="#112dev_priv" title='dev_priv' data-ref="112dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::dev" title='vmw_private::dev' data-ref="vmw_private::dev">dev</a>);</td></tr>
<tr><th id="1353">1353</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_write_lock" title='ttm_write_lock' data-ref="ttm_write_lock">ttm_write_lock</a>(&amp;<a class="local col2 ref" href="#112dev_priv" title='dev_priv' data-ref="112dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::reservation_sem" title='vmw_private::reservation_sem' data-ref="vmw_private::reservation_sem">reservation_sem</a>, <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>);</td></tr>
<tr><th id="1354">1354</th><td>	<a class="ref fn" href="../../../../include/linux/spinlock.h.html#spin_lock" title='spin_lock' data-ref="spin_lock">spin_lock</a>(&amp;<a class="local col2 ref" href="#112dev_priv" title='dev_priv' data-ref="112dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::svga_lock" title='vmw_private::svga_lock' data-ref="vmw_private::svga_lock">svga_lock</a>);</td></tr>
<tr><th id="1355">1355</th><td>	<b>if</b> (<a class="local col2 ref" href="#112dev_priv" title='dev_priv' data-ref="112dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>.<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_bo_device::man" title='ttm_bo_device::man' data-ref="ttm_bo_device::man">man</a>[<a class="macro" href="../../../../include/drm/ttm/ttm_placement.h.html#42" title="2" data-ref="_M/TTM_PL_VRAM">TTM_PL_VRAM</a>].<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_mem_type_manager::use_type" title='ttm_mem_type_manager::use_type' data-ref="ttm_mem_type_manager::use_type">use_type</a>) {</td></tr>
<tr><th id="1356">1356</th><td>		<a class="local col2 ref" href="#112dev_priv" title='dev_priv' data-ref="112dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>.<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_bo_device::man" title='ttm_bo_device::man' data-ref="ttm_bo_device::man">man</a>[<a class="macro" href="../../../../include/drm/ttm/ttm_placement.h.html#42" title="2" data-ref="_M/TTM_PL_VRAM">TTM_PL_VRAM</a>].<a class="ref field" href="../../../../include/drm/ttm/ttm_bo_driver.h.html#ttm_mem_type_manager::use_type" title='ttm_mem_type_manager::use_type' data-ref="ttm_mem_type_manager::use_type">use_type</a> = <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>;</td></tr>
<tr><th id="1357">1357</th><td>		<a class="ref fn" href="../../../../include/linux/spinlock.h.html#spin_unlock" title='spin_unlock' data-ref="spin_unlock">spin_unlock</a>(&amp;<a class="local col2 ref" href="#112dev_priv" title='dev_priv' data-ref="112dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::svga_lock" title='vmw_private::svga_lock' data-ref="vmw_private::svga_lock">svga_lock</a>);</td></tr>
<tr><th id="1358">1358</th><td>		<b>if</b> (<a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_evict_mm" title='ttm_bo_evict_mm' data-ref="ttm_bo_evict_mm">ttm_bo_evict_mm</a>(&amp;<a class="local col2 ref" href="#112dev_priv" title='dev_priv' data-ref="112dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>, <a class="macro" href="../../../../include/drm/ttm/ttm_placement.h.html#42" title="2" data-ref="_M/TTM_PL_VRAM">TTM_PL_VRAM</a>))</td></tr>
<tr><th id="1359">1359</th><td>			<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Failed evicting VRAM buffers.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Failed evicting VRAM buffers.\n"</q>);</td></tr>
<tr><th id="1360">1360</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_write" title='vmw_write' data-ref="vmw_write">vmw_write</a>(<a class="local col2 ref" href="#112dev_priv" title='dev_priv' data-ref="112dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_ENABLE" title='SVGA_REG_ENABLE' data-ref="SVGA_REG_ENABLE">SVGA_REG_ENABLE</a>,</td></tr>
<tr><th id="1361">1361</th><td>			  <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_ENABLE_HIDE" title='SVGA_REG_ENABLE_HIDE' data-ref="SVGA_REG_ENABLE_HIDE">SVGA_REG_ENABLE_HIDE</a> |</td></tr>
<tr><th id="1362">1362</th><td>			  <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_ENABLE_ENABLE" title='SVGA_REG_ENABLE_ENABLE' data-ref="SVGA_REG_ENABLE_ENABLE">SVGA_REG_ENABLE_ENABLE</a>);</td></tr>
<tr><th id="1363">1363</th><td>	} <b>else</b></td></tr>
<tr><th id="1364">1364</th><td>		<a class="ref fn" href="../../../../include/linux/spinlock.h.html#spin_unlock" title='spin_unlock' data-ref="spin_unlock">spin_unlock</a>(&amp;<a class="local col2 ref" href="#112dev_priv" title='dev_priv' data-ref="112dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::svga_lock" title='vmw_private::svga_lock' data-ref="vmw_private::svga_lock">svga_lock</a>);</td></tr>
<tr><th id="1365">1365</th><td>	<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_write_unlock" title='ttm_write_unlock' data-ref="ttm_write_unlock">ttm_write_unlock</a>(&amp;<a class="local col2 ref" href="#112dev_priv" title='dev_priv' data-ref="112dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::reservation_sem" title='vmw_private::reservation_sem' data-ref="vmw_private::reservation_sem">reservation_sem</a>);</td></tr>
<tr><th id="1366">1366</th><td>}</td></tr>
<tr><th id="1367">1367</th><td></td></tr>
<tr><th id="1368">1368</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="vmw_remove" title='vmw_remove' data-type='void vmw_remove(struct pci_dev * pdev)' data-ref="vmw_remove">vmw_remove</dfn>(<b>struct</b> <a class="type" href="../../../../include/linux/pci.h.html#pci_dev" title='pci_dev' data-ref="pci_dev">pci_dev</a> *<dfn class="local col3 decl" id="113pdev" title='pdev' data-type='struct pci_dev *' data-ref="113pdev">pdev</dfn>)</td></tr>
<tr><th id="1369">1369</th><td>{</td></tr>
<tr><th id="1370">1370</th><td>	<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col4 decl" id="114dev" title='dev' data-type='struct drm_device *' data-ref="114dev">dev</dfn> = <a class="ref fn" href="../../../../include/linux/pci.h.html#pci_get_drvdata" title='pci_get_drvdata' data-ref="pci_get_drvdata">pci_get_drvdata</a>(<a class="local col3 ref" href="#113pdev" title='pdev' data-ref="113pdev">pdev</a>);</td></tr>
<tr><th id="1371">1371</th><td></td></tr>
<tr><th id="1372">1372</th><td>	<a class="ref fn" href="../../../../include/linux/pci.h.html#pci_disable_device" title='pci_disable_device' data-ref="pci_disable_device">pci_disable_device</a>(<a class="local col3 ref" href="#113pdev" title='pdev' data-ref="113pdev">pdev</a>);</td></tr>
<tr><th id="1373">1373</th><td>	<a class="ref fn" href="../../../../include/drm/drm_drv.h.html#drm_put_dev" title='drm_put_dev' data-ref="drm_put_dev">drm_put_dev</a>(<a class="local col4 ref" href="#114dev" title='dev' data-ref="114dev">dev</a>);</td></tr>
<tr><th id="1374">1374</th><td>}</td></tr>
<tr><th id="1375">1375</th><td></td></tr>
<tr><th id="1376">1376</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmwgfx_pm_notifier" title='vmwgfx_pm_notifier' data-type='int vmwgfx_pm_notifier(struct notifier_block * nb, unsigned long val, void * ptr)' data-ref="vmwgfx_pm_notifier">vmwgfx_pm_notifier</dfn>(<b>struct</b> <a class="type" href="../../../../include/linux/notifier.h.html#notifier_block" title='notifier_block' data-ref="notifier_block">notifier_block</a> *<dfn class="local col5 decl" id="115nb" title='nb' data-type='struct notifier_block *' data-ref="115nb">nb</dfn>, <em>unsigned</em> <em>long</em> <dfn class="local col6 decl" id="116val" title='val' data-type='unsigned long' data-ref="116val">val</dfn>,</td></tr>
<tr><th id="1377">1377</th><td>			      <em>void</em> *<dfn class="local col7 decl" id="117ptr" title='ptr' data-type='void *' data-ref="117ptr">ptr</dfn>)</td></tr>
<tr><th id="1378">1378</th><td>{</td></tr>
<tr><th id="1379">1379</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col8 decl" id="118dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="118dev_priv">dev_priv</dfn> =</td></tr>
<tr><th id="1380">1380</th><td>		<a class="macro" href="../../../../include/linux/kernel.h.html#927" title="({ void *__mptr = (void *)(nb); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(nb)), typeof(((struct vmw_private *)0)-&gt;pm_nb)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(nb)), typeof(void)))); extern void __compiletime_assert_1380(void) ; if (__cond) __compiletime_assert_1380(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((struct vmw_private *)(__mptr - __builtin_offsetof(struct vmw_private, pm_nb))); })" data-ref="_M/container_of">container_of</a>(<a class="local col5 ref" href="#115nb" title='nb' data-ref="115nb">nb</a>, <b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a>, <a class="ref field" href="vmwgfx_drv.h.html#vmw_private::pm_nb" title='vmw_private::pm_nb' data-ref="vmw_private::pm_nb">pm_nb</a>);</td></tr>
<tr><th id="1381">1381</th><td></td></tr>
<tr><th id="1382">1382</th><td>	<b>switch</b> (<a class="local col6 ref" href="#116val" title='val' data-ref="116val">val</a>) {</td></tr>
<tr><th id="1383">1383</th><td>	<b>case</b> <a class="macro" href="../../../../include/linux/suspend.h.html#410" title="0x0001" data-ref="_M/PM_HIBERNATION_PREPARE">PM_HIBERNATION_PREPARE</a>:</td></tr>
<tr><th id="1384">1384</th><td>		<b>if</b> (<a class="local col8 ref" href="#118dev_priv" title='dev_priv' data-ref="118dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::enable_fb" title='vmw_private::enable_fb' data-ref="vmw_private::enable_fb">enable_fb</a>)</td></tr>
<tr><th id="1385">1385</th><td>			<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fb_off" title='vmw_fb_off' data-ref="vmw_fb_off">vmw_fb_off</a>(<a class="local col8 ref" href="#118dev_priv" title='dev_priv' data-ref="118dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1386">1386</th><td>		<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_suspend_lock" title='ttm_suspend_lock' data-ref="ttm_suspend_lock">ttm_suspend_lock</a>(&amp;<a class="local col8 ref" href="#118dev_priv" title='dev_priv' data-ref="118dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::reservation_sem" title='vmw_private::reservation_sem' data-ref="vmw_private::reservation_sem">reservation_sem</a>);</td></tr>
<tr><th id="1387">1387</th><td></td></tr>
<tr><th id="1388">1388</th><td>		<i>/*</i></td></tr>
<tr><th id="1389">1389</th><td><i>		 * This empties VRAM and unbinds all GMR bindings.</i></td></tr>
<tr><th id="1390">1390</th><td><i>		 * Buffer contents is moved to swappable memory.</i></td></tr>
<tr><th id="1391">1391</th><td><i>		 */</i></td></tr>
<tr><th id="1392">1392</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_execbuf_release_pinned_bo" title='vmw_execbuf_release_pinned_bo' data-ref="vmw_execbuf_release_pinned_bo">vmw_execbuf_release_pinned_bo</a>(<a class="local col8 ref" href="#118dev_priv" title='dev_priv' data-ref="118dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1393">1393</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_resource_evict_all" title='vmw_resource_evict_all' data-ref="vmw_resource_evict_all">vmw_resource_evict_all</a>(<a class="local col8 ref" href="#118dev_priv" title='dev_priv' data-ref="118dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1394">1394</th><td>		<a class="tu ref fn" href="#vmw_release_device_early" title='vmw_release_device_early' data-use='c' data-ref="vmw_release_device_early">vmw_release_device_early</a>(<a class="local col8 ref" href="#118dev_priv" title='dev_priv' data-ref="118dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1395">1395</th><td>		<a class="ref fn" href="../../../../include/drm/ttm/ttm_bo_api.h.html#ttm_bo_swapout_all" title='ttm_bo_swapout_all' data-ref="ttm_bo_swapout_all">ttm_bo_swapout_all</a>(&amp;<a class="local col8 ref" href="#118dev_priv" title='dev_priv' data-ref="118dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::bdev" title='vmw_private::bdev' data-ref="vmw_private::bdev">bdev</a>);</td></tr>
<tr><th id="1396">1396</th><td>		<a class="ref fn" href="vmwgfx_fence.h.html#vmw_fence_fifo_down" title='vmw_fence_fifo_down' data-ref="vmw_fence_fifo_down">vmw_fence_fifo_down</a>(<a class="local col8 ref" href="#118dev_priv" title='dev_priv' data-ref="118dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fman" title='vmw_private::fman' data-ref="vmw_private::fman">fman</a>);</td></tr>
<tr><th id="1397">1397</th><td>		<b>break</b>;</td></tr>
<tr><th id="1398">1398</th><td>	<b>case</b> <a class="macro" href="../../../../include/linux/suspend.h.html#411" title="0x0002" data-ref="_M/PM_POST_HIBERNATION">PM_POST_HIBERNATION</a>:</td></tr>
<tr><th id="1399">1399</th><td>	<b>case</b> <a class="macro" href="../../../../include/linux/suspend.h.html#415" title="0x0006" data-ref="_M/PM_POST_RESTORE">PM_POST_RESTORE</a>:</td></tr>
<tr><th id="1400">1400</th><td>		<a class="ref fn" href="vmwgfx_fence.h.html#vmw_fence_fifo_up" title='vmw_fence_fifo_up' data-ref="vmw_fence_fifo_up">vmw_fence_fifo_up</a>(<a class="local col8 ref" href="#118dev_priv" title='dev_priv' data-ref="118dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::fman" title='vmw_private::fman' data-ref="vmw_private::fman">fman</a>);</td></tr>
<tr><th id="1401">1401</th><td>		<a class="ref fn" href="../../../../include/drm/ttm/ttm_lock.h.html#ttm_suspend_unlock" title='ttm_suspend_unlock' data-ref="ttm_suspend_unlock">ttm_suspend_unlock</a>(&amp;<a class="local col8 ref" href="#118dev_priv" title='dev_priv' data-ref="118dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::reservation_sem" title='vmw_private::reservation_sem' data-ref="vmw_private::reservation_sem">reservation_sem</a>);</td></tr>
<tr><th id="1402">1402</th><td>		<b>if</b> (<a class="local col8 ref" href="#118dev_priv" title='dev_priv' data-ref="118dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::enable_fb" title='vmw_private::enable_fb' data-ref="vmw_private::enable_fb">enable_fb</a>)</td></tr>
<tr><th id="1403">1403</th><td>			<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fb_on" title='vmw_fb_on' data-ref="vmw_fb_on">vmw_fb_on</a>(<a class="local col8 ref" href="#118dev_priv" title='dev_priv' data-ref="118dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1404">1404</th><td>		<b>break</b>;</td></tr>
<tr><th id="1405">1405</th><td>	<b>case</b> <a class="macro" href="../../../../include/linux/suspend.h.html#414" title="0x0005" data-ref="_M/PM_RESTORE_PREPARE">PM_RESTORE_PREPARE</a>:</td></tr>
<tr><th id="1406">1406</th><td>		<b>break</b>;</td></tr>
<tr><th id="1407">1407</th><td>	<b>default</b>:</td></tr>
<tr><th id="1408">1408</th><td>		<b>break</b>;</td></tr>
<tr><th id="1409">1409</th><td>	}</td></tr>
<tr><th id="1410">1410</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1411">1411</th><td>}</td></tr>
<tr><th id="1412">1412</th><td></td></tr>
<tr><th id="1413">1413</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_pci_suspend" title='vmw_pci_suspend' data-type='int vmw_pci_suspend(struct pci_dev * pdev, pm_message_t state)' data-ref="vmw_pci_suspend">vmw_pci_suspend</dfn>(<b>struct</b> <a class="type" href="../../../../include/linux/pci.h.html#pci_dev" title='pci_dev' data-ref="pci_dev">pci_dev</a> *<dfn class="local col9 decl" id="119pdev" title='pdev' data-type='struct pci_dev *' data-ref="119pdev">pdev</dfn>, <a class="typedef" href="../../../../include/linux/pm.h.html#pm_message_t" title='pm_message_t' data-type='struct pm_message' data-ref="pm_message_t">pm_message_t</a> <dfn class="local col0 decl" id="120state" title='state' data-type='pm_message_t' data-ref="120state">state</dfn>)</td></tr>
<tr><th id="1414">1414</th><td>{</td></tr>
<tr><th id="1415">1415</th><td>	<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col1 decl" id="121dev" title='dev' data-type='struct drm_device *' data-ref="121dev">dev</dfn> = <a class="ref fn" href="../../../../include/linux/pci.h.html#pci_get_drvdata" title='pci_get_drvdata' data-ref="pci_get_drvdata">pci_get_drvdata</a>(<a class="local col9 ref" href="#119pdev" title='pdev' data-ref="119pdev">pdev</a>);</td></tr>
<tr><th id="1416">1416</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col2 decl" id="122dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="122dev_priv">dev_priv</dfn> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_priv" title='vmw_priv' data-ref="vmw_priv">vmw_priv</a>(<a class="local col1 ref" href="#121dev" title='dev' data-ref="121dev">dev</a>);</td></tr>
<tr><th id="1417">1417</th><td></td></tr>
<tr><th id="1418">1418</th><td>	<b>if</b> (<a class="local col2 ref" href="#122dev_priv" title='dev_priv' data-ref="122dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::refuse_hibernation" title='vmw_private::refuse_hibernation' data-ref="vmw_private::refuse_hibernation">refuse_hibernation</a>)</td></tr>
<tr><th id="1419">1419</th><td>		<b>return</b> -<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#20" title="16" data-ref="_M/EBUSY">EBUSY</a>;</td></tr>
<tr><th id="1420">1420</th><td></td></tr>
<tr><th id="1421">1421</th><td>	<a class="ref fn" href="../../../../include/linux/pci.h.html#pci_save_state" title='pci_save_state' data-ref="pci_save_state">pci_save_state</a>(<a class="local col9 ref" href="#119pdev" title='pdev' data-ref="119pdev">pdev</a>);</td></tr>
<tr><th id="1422">1422</th><td>	<a class="ref fn" href="../../../../include/linux/pci.h.html#pci_disable_device" title='pci_disable_device' data-ref="pci_disable_device">pci_disable_device</a>(<a class="local col9 ref" href="#119pdev" title='pdev' data-ref="119pdev">pdev</a>);</td></tr>
<tr><th id="1423">1423</th><td>	<a class="ref fn" href="../../../../include/linux/pci.h.html#pci_set_power_state" title='pci_set_power_state' data-ref="pci_set_power_state">pci_set_power_state</a>(<a class="local col9 ref" href="#119pdev" title='pdev' data-ref="119pdev">pdev</a>, <a class="macro" href="../../../../include/linux/pci.h.html#137" title="((pci_power_t ) 3)" data-ref="_M/PCI_D3hot">PCI_D3hot</a>);</td></tr>
<tr><th id="1424">1424</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1425">1425</th><td>}</td></tr>
<tr><th id="1426">1426</th><td></td></tr>
<tr><th id="1427">1427</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_pci_resume" title='vmw_pci_resume' data-type='int vmw_pci_resume(struct pci_dev * pdev)' data-ref="vmw_pci_resume">vmw_pci_resume</dfn>(<b>struct</b> <a class="type" href="../../../../include/linux/pci.h.html#pci_dev" title='pci_dev' data-ref="pci_dev">pci_dev</a> *<dfn class="local col3 decl" id="123pdev" title='pdev' data-type='struct pci_dev *' data-ref="123pdev">pdev</dfn>)</td></tr>
<tr><th id="1428">1428</th><td>{</td></tr>
<tr><th id="1429">1429</th><td>	<a class="ref fn" href="../../../../include/linux/pci.h.html#pci_set_power_state" title='pci_set_power_state' data-ref="pci_set_power_state">pci_set_power_state</a>(<a class="local col3 ref" href="#123pdev" title='pdev' data-ref="123pdev">pdev</a>, <a class="macro" href="../../../../include/linux/pci.h.html#134" title="((pci_power_t ) 0)" data-ref="_M/PCI_D0">PCI_D0</a>);</td></tr>
<tr><th id="1430">1430</th><td>	<a class="ref fn" href="../../../../include/linux/pci.h.html#pci_restore_state" title='pci_restore_state' data-ref="pci_restore_state">pci_restore_state</a>(<a class="local col3 ref" href="#123pdev" title='pdev' data-ref="123pdev">pdev</a>);</td></tr>
<tr><th id="1431">1431</th><td>	<b>return</b> <a class="ref fn" href="../../../../include/linux/pci.h.html#pci_enable_device" title='pci_enable_device' data-ref="pci_enable_device">pci_enable_device</a>(<a class="local col3 ref" href="#123pdev" title='pdev' data-ref="123pdev">pdev</a>);</td></tr>
<tr><th id="1432">1432</th><td>}</td></tr>
<tr><th id="1433">1433</th><td></td></tr>
<tr><th id="1434">1434</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_pm_suspend" title='vmw_pm_suspend' data-type='int vmw_pm_suspend(struct device * kdev)' data-ref="vmw_pm_suspend">vmw_pm_suspend</dfn>(<b>struct</b> <a class="type" href="../../../../include/linux/device.h.html#device" title='device' data-ref="device">device</a> *<dfn class="local col4 decl" id="124kdev" title='kdev' data-type='struct device *' data-ref="124kdev">kdev</dfn>)</td></tr>
<tr><th id="1435">1435</th><td>{</td></tr>
<tr><th id="1436">1436</th><td>	<b>struct</b> <a class="type" href="../../../../include/linux/pci.h.html#pci_dev" title='pci_dev' data-ref="pci_dev">pci_dev</a> *<dfn class="local col5 decl" id="125pdev" title='pdev' data-type='struct pci_dev *' data-ref="125pdev">pdev</dfn> = <a class="macro" href="../../../../include/linux/pci.h.html#458" title="({ void *__mptr = (void *)(kdev); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(kdev)), typeof(((struct pci_dev *)0)-&gt;dev)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(kdev)), typeof(void)))); extern void __compiletime_assert_1436(void) ; if (__cond) __compiletime_assert_1436(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((struct pci_dev *)(__mptr - __builtin_offsetof(struct pci_dev, dev))); })" data-ref="_M/to_pci_dev">to_pci_dev</a>(<a class="local col4 ref" href="#124kdev" title='kdev' data-ref="124kdev">kdev</a>);</td></tr>
<tr><th id="1437">1437</th><td>	<b>struct</b> <a class="type" href="../../../../include/linux/pm.h.html#pm_message" title='pm_message' data-ref="pm_message">pm_message</a> <dfn class="local col6 decl" id="126dummy" title='dummy' data-type='struct pm_message' data-ref="126dummy">dummy</dfn>;</td></tr>
<tr><th id="1438">1438</th><td></td></tr>
<tr><th id="1439">1439</th><td>	<a class="local col6 ref" href="#126dummy" title='dummy' data-ref="126dummy">dummy</a>.<a class="ref field" href="../../../../include/linux/pm.h.html#pm_message::event" title='pm_message::event' data-ref="pm_message::event">event</a> = <var>0</var>;</td></tr>
<tr><th id="1440">1440</th><td></td></tr>
<tr><th id="1441">1441</th><td>	<b>return</b> <a class="tu ref fn" href="#vmw_pci_suspend" title='vmw_pci_suspend' data-use='c' data-ref="vmw_pci_suspend">vmw_pci_suspend</a>(<a class="local col5 ref" href="#125pdev" title='pdev' data-ref="125pdev">pdev</a>, <a class="local col6 ref" href="#126dummy" title='dummy' data-ref="126dummy">dummy</a>);</td></tr>
<tr><th id="1442">1442</th><td>}</td></tr>
<tr><th id="1443">1443</th><td></td></tr>
<tr><th id="1444">1444</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_pm_resume" title='vmw_pm_resume' data-type='int vmw_pm_resume(struct device * kdev)' data-ref="vmw_pm_resume">vmw_pm_resume</dfn>(<b>struct</b> <a class="type" href="../../../../include/linux/device.h.html#device" title='device' data-ref="device">device</a> *<dfn class="local col7 decl" id="127kdev" title='kdev' data-type='struct device *' data-ref="127kdev">kdev</dfn>)</td></tr>
<tr><th id="1445">1445</th><td>{</td></tr>
<tr><th id="1446">1446</th><td>	<b>struct</b> <a class="type" href="../../../../include/linux/pci.h.html#pci_dev" title='pci_dev' data-ref="pci_dev">pci_dev</a> *<dfn class="local col8 decl" id="128pdev" title='pdev' data-type='struct pci_dev *' data-ref="128pdev">pdev</dfn> = <a class="macro" href="../../../../include/linux/pci.h.html#458" title="({ void *__mptr = (void *)(kdev); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(kdev)), typeof(((struct pci_dev *)0)-&gt;dev)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(kdev)), typeof(void)))); extern void __compiletime_assert_1446(void) ; if (__cond) __compiletime_assert_1446(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((struct pci_dev *)(__mptr - __builtin_offsetof(struct pci_dev, dev))); })" data-ref="_M/to_pci_dev">to_pci_dev</a>(<a class="local col7 ref" href="#127kdev" title='kdev' data-ref="127kdev">kdev</a>);</td></tr>
<tr><th id="1447">1447</th><td></td></tr>
<tr><th id="1448">1448</th><td>	<b>return</b> <a class="tu ref fn" href="#vmw_pci_resume" title='vmw_pci_resume' data-use='c' data-ref="vmw_pci_resume">vmw_pci_resume</a>(<a class="local col8 ref" href="#128pdev" title='pdev' data-ref="128pdev">pdev</a>);</td></tr>
<tr><th id="1449">1449</th><td>}</td></tr>
<tr><th id="1450">1450</th><td></td></tr>
<tr><th id="1451">1451</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_pm_freeze" title='vmw_pm_freeze' data-type='int vmw_pm_freeze(struct device * kdev)' data-ref="vmw_pm_freeze">vmw_pm_freeze</dfn>(<b>struct</b> <a class="type" href="../../../../include/linux/device.h.html#device" title='device' data-ref="device">device</a> *<dfn class="local col9 decl" id="129kdev" title='kdev' data-type='struct device *' data-ref="129kdev">kdev</dfn>)</td></tr>
<tr><th id="1452">1452</th><td>{</td></tr>
<tr><th id="1453">1453</th><td>	<b>struct</b> <a class="type" href="../../../../include/linux/pci.h.html#pci_dev" title='pci_dev' data-ref="pci_dev">pci_dev</a> *<dfn class="local col0 decl" id="130pdev" title='pdev' data-type='struct pci_dev *' data-ref="130pdev">pdev</dfn> = <a class="macro" href="../../../../include/linux/pci.h.html#458" title="({ void *__mptr = (void *)(kdev); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(kdev)), typeof(((struct pci_dev *)0)-&gt;dev)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(kdev)), typeof(void)))); extern void __compiletime_assert_1453(void) ; if (__cond) __compiletime_assert_1453(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((struct pci_dev *)(__mptr - __builtin_offsetof(struct pci_dev, dev))); })" data-ref="_M/to_pci_dev">to_pci_dev</a>(<a class="local col9 ref" href="#129kdev" title='kdev' data-ref="129kdev">kdev</a>);</td></tr>
<tr><th id="1454">1454</th><td>	<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col1 decl" id="131dev" title='dev' data-type='struct drm_device *' data-ref="131dev">dev</dfn> = <a class="ref fn" href="../../../../include/linux/pci.h.html#pci_get_drvdata" title='pci_get_drvdata' data-ref="pci_get_drvdata">pci_get_drvdata</a>(<a class="local col0 ref" href="#130pdev" title='pdev' data-ref="130pdev">pdev</a>);</td></tr>
<tr><th id="1455">1455</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col2 decl" id="132dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="132dev_priv">dev_priv</dfn> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_priv" title='vmw_priv' data-ref="vmw_priv">vmw_priv</a>(<a class="local col1 ref" href="#131dev" title='dev' data-ref="131dev">dev</a>);</td></tr>
<tr><th id="1456">1456</th><td></td></tr>
<tr><th id="1457">1457</th><td>	<a class="local col2 ref" href="#132dev_priv" title='dev_priv' data-ref="132dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::suspended" title='vmw_private::suspended' data-ref="vmw_private::suspended">suspended</a> = <a class="enum" href="../../../../include/linux/stddef.h.html#true" title='true' data-ref="true">true</a>;</td></tr>
<tr><th id="1458">1458</th><td>	<b>if</b> (<a class="local col2 ref" href="#132dev_priv" title='dev_priv' data-ref="132dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::enable_fb" title='vmw_private::enable_fb' data-ref="vmw_private::enable_fb">enable_fb</a>)</td></tr>
<tr><th id="1459">1459</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fifo_resource_dec" title='vmw_fifo_resource_dec' data-ref="vmw_fifo_resource_dec">vmw_fifo_resource_dec</a>(<a class="local col2 ref" href="#132dev_priv" title='dev_priv' data-ref="132dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1460">1460</th><td></td></tr>
<tr><th id="1461">1461</th><td>	<b>if</b> (<a class="ref fn" href="../../../../arch/x86/include/asm/atomic.h.html#atomic_read" title='atomic_read' data-ref="atomic_read">atomic_read</a>(&amp;<a class="local col2 ref" href="#132dev_priv" title='dev_priv' data-ref="132dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::num_fifo_resources" title='vmw_private::num_fifo_resources' data-ref="vmw_private::num_fifo_resources">num_fifo_resources</a>) != <var>0</var>) {</td></tr>
<tr><th id="1462">1462</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Can&apos;t hibernate while 3D resources are active.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Can't hibernate while 3D resources are active.\n"</q>);</td></tr>
<tr><th id="1463">1463</th><td>		<b>if</b> (<a class="local col2 ref" href="#132dev_priv" title='dev_priv' data-ref="132dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::enable_fb" title='vmw_private::enable_fb' data-ref="vmw_private::enable_fb">enable_fb</a>)</td></tr>
<tr><th id="1464">1464</th><td>			<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fifo_resource_inc" title='vmw_fifo_resource_inc' data-ref="vmw_fifo_resource_inc">vmw_fifo_resource_inc</a>(<a class="local col2 ref" href="#132dev_priv" title='dev_priv' data-ref="132dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1465">1465</th><td>		<a class="macro" href="../../../../include/asm-generic/bug.h.html#108" title="({ int __ret_warn_on = !!(vmw_request_device_late(dev_priv)); if (__builtin_expect(!!(__ret_warn_on), 0)) do { do { asm volatile(&quot;1:\t&quot; &quot;.byte 0x0f, 0x0b&quot; &quot;\n&quot; &quot;.pushsection __bug_table,\&quot;aw\&quot;\n&quot; &quot;2:\t&quot; &quot;.long &quot; &quot;1b&quot; &quot; - 2b&quot; &quot;\t# bug_entry::bug_addr\n&quot; &quot;\t&quot; &quot;.long &quot; &quot;%c0&quot; &quot; - 2b&quot; &quot;\t# bug_entry::file\n&quot; &quot;\t.word %c1&quot; &quot;\t# bug_entry::line\n&quot; &quot;\t.word %c2&quot; &quot;\t# bug_entry::flags\n&quot; &quot;\t.org 2b+%c3\n&quot; &quot;.popsection&quot; : : &quot;i&quot; (&quot;/home/tempdban/kernel/stable/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c&quot;), &quot;i&quot; (1465), &quot;i&quot; ((1 &lt;&lt; 0)|(((9) &lt;&lt; 8))), &quot;i&quot; (sizeof(struct bug_entry))); } while (0); ({ asm(&quot;%c0:\n\t&quot; &quot;.pushsection .discard.reachable\n\t&quot; &quot;.long %c0b - .\n\t&quot; &quot;.popsection\n\t&quot; : : &quot;i&quot; (122)); }); } while (0); __builtin_expect(!!(__ret_warn_on), 0); })" data-ref="_M/WARN_ON">WARN_ON</a>(<a class="tu ref fn" href="#vmw_request_device_late" title='vmw_request_device_late' data-use='c' data-ref="vmw_request_device_late">vmw_request_device_late</a>(<a class="local col2 ref" href="#132dev_priv" title='dev_priv' data-ref="132dev_priv">dev_priv</a>));</td></tr>
<tr><th id="1466">1466</th><td>		<a class="local col2 ref" href="#132dev_priv" title='dev_priv' data-ref="132dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::suspended" title='vmw_private::suspended' data-ref="vmw_private::suspended">suspended</a> = <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>;</td></tr>
<tr><th id="1467">1467</th><td>		<b>return</b> -<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#20" title="16" data-ref="_M/EBUSY">EBUSY</a>;</td></tr>
<tr><th id="1468">1468</th><td>	}</td></tr>
<tr><th id="1469">1469</th><td></td></tr>
<tr><th id="1470">1470</th><td>	<b>if</b> (<a class="local col2 ref" href="#132dev_priv" title='dev_priv' data-ref="132dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::enable_fb" title='vmw_private::enable_fb' data-ref="vmw_private::enable_fb">enable_fb</a>)</td></tr>
<tr><th id="1471">1471</th><td>		<a class="tu ref fn" href="#__vmw_svga_disable" title='__vmw_svga_disable' data-use='c' data-ref="__vmw_svga_disable">__vmw_svga_disable</a>(<a class="local col2 ref" href="#132dev_priv" title='dev_priv' data-ref="132dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1472">1472</th><td>	</td></tr>
<tr><th id="1473">1473</th><td>	<a class="tu ref fn" href="#vmw_release_device_late" title='vmw_release_device_late' data-use='c' data-ref="vmw_release_device_late">vmw_release_device_late</a>(<a class="local col2 ref" href="#132dev_priv" title='dev_priv' data-ref="132dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1474">1474</th><td></td></tr>
<tr><th id="1475">1475</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1476">1476</th><td>}</td></tr>
<tr><th id="1477">1477</th><td></td></tr>
<tr><th id="1478">1478</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_pm_restore" title='vmw_pm_restore' data-type='int vmw_pm_restore(struct device * kdev)' data-ref="vmw_pm_restore">vmw_pm_restore</dfn>(<b>struct</b> <a class="type" href="../../../../include/linux/device.h.html#device" title='device' data-ref="device">device</a> *<dfn class="local col3 decl" id="133kdev" title='kdev' data-type='struct device *' data-ref="133kdev">kdev</dfn>)</td></tr>
<tr><th id="1479">1479</th><td>{</td></tr>
<tr><th id="1480">1480</th><td>	<b>struct</b> <a class="type" href="../../../../include/linux/pci.h.html#pci_dev" title='pci_dev' data-ref="pci_dev">pci_dev</a> *<dfn class="local col4 decl" id="134pdev" title='pdev' data-type='struct pci_dev *' data-ref="134pdev">pdev</dfn> = <a class="macro" href="../../../../include/linux/pci.h.html#458" title="({ void *__mptr = (void *)(kdev); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(kdev)), typeof(((struct pci_dev *)0)-&gt;dev)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(kdev)), typeof(void)))); extern void __compiletime_assert_1480(void) ; if (__cond) __compiletime_assert_1480(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((struct pci_dev *)(__mptr - __builtin_offsetof(struct pci_dev, dev))); })" data-ref="_M/to_pci_dev">to_pci_dev</a>(<a class="local col3 ref" href="#133kdev" title='kdev' data-ref="133kdev">kdev</a>);</td></tr>
<tr><th id="1481">1481</th><td>	<b>struct</b> <a class="type" href="../../../../include/drm/drm_device.h.html#drm_device" title='drm_device' data-ref="drm_device">drm_device</a> *<dfn class="local col5 decl" id="135dev" title='dev' data-type='struct drm_device *' data-ref="135dev">dev</dfn> = <a class="ref fn" href="../../../../include/linux/pci.h.html#pci_get_drvdata" title='pci_get_drvdata' data-ref="pci_get_drvdata">pci_get_drvdata</a>(<a class="local col4 ref" href="#134pdev" title='pdev' data-ref="134pdev">pdev</a>);</td></tr>
<tr><th id="1482">1482</th><td>	<b>struct</b> <a class="type" href="vmwgfx_drv.h.html#vmw_private" title='vmw_private' data-ref="vmw_private">vmw_private</a> *<dfn class="local col6 decl" id="136dev_priv" title='dev_priv' data-type='struct vmw_private *' data-ref="136dev_priv">dev_priv</dfn> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_priv" title='vmw_priv' data-ref="vmw_priv">vmw_priv</a>(<a class="local col5 ref" href="#135dev" title='dev' data-ref="135dev">dev</a>);</td></tr>
<tr><th id="1483">1483</th><td>	<em>int</em> <dfn class="local col7 decl" id="137ret" title='ret' data-type='int' data-ref="137ret">ret</dfn>;</td></tr>
<tr><th id="1484">1484</th><td></td></tr>
<tr><th id="1485">1485</th><td>	<a class="ref fn" href="vmwgfx_drv.h.html#vmw_write" title='vmw_write' data-ref="vmw_write">vmw_write</a>(<a class="local col6 ref" href="#136dev_priv" title='dev_priv' data-ref="136dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_ID" title='SVGA_REG_ID' data-ref="SVGA_REG_ID">SVGA_REG_ID</a>, <a class="macro" href="device_include/svga_reg.h.html#93" title="(0x900000UL &lt;&lt; 8 | (2))" data-ref="_M/SVGA_ID_2">SVGA_ID_2</a>);</td></tr>
<tr><th id="1486">1486</th><td>	(<em>void</em>) <a class="ref fn" href="vmwgfx_drv.h.html#vmw_read" title='vmw_read' data-ref="vmw_read">vmw_read</a>(<a class="local col6 ref" href="#136dev_priv" title='dev_priv' data-ref="136dev_priv">dev_priv</a>, <a class="enum" href="device_include/svga_reg.h.html#SVGA_REG_ID" title='SVGA_REG_ID' data-ref="SVGA_REG_ID">SVGA_REG_ID</a>);</td></tr>
<tr><th id="1487">1487</th><td></td></tr>
<tr><th id="1488">1488</th><td>	<b>if</b> (<a class="local col6 ref" href="#136dev_priv" title='dev_priv' data-ref="136dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::enable_fb" title='vmw_private::enable_fb' data-ref="vmw_private::enable_fb">enable_fb</a>)</td></tr>
<tr><th id="1489">1489</th><td>		<a class="ref fn" href="vmwgfx_drv.h.html#vmw_fifo_resource_inc" title='vmw_fifo_resource_inc' data-ref="vmw_fifo_resource_inc">vmw_fifo_resource_inc</a>(<a class="local col6 ref" href="#136dev_priv" title='dev_priv' data-ref="136dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1490">1490</th><td></td></tr>
<tr><th id="1491">1491</th><td>	<a class="local col7 ref" href="#137ret" title='ret' data-ref="137ret">ret</a> = <a class="tu ref fn" href="#vmw_request_device" title='vmw_request_device' data-use='c' data-ref="vmw_request_device">vmw_request_device</a>(<a class="local col6 ref" href="#136dev_priv" title='dev_priv' data-ref="136dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1492">1492</th><td>	<b>if</b> (<a class="local col7 ref" href="#137ret" title='ret' data-ref="137ret">ret</a>)</td></tr>
<tr><th id="1493">1493</th><td>		<b>return</b> <a class="local col7 ref" href="#137ret" title='ret' data-ref="137ret">ret</a>;</td></tr>
<tr><th id="1494">1494</th><td></td></tr>
<tr><th id="1495">1495</th><td>	<b>if</b> (<a class="local col6 ref" href="#136dev_priv" title='dev_priv' data-ref="136dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::enable_fb" title='vmw_private::enable_fb' data-ref="vmw_private::enable_fb">enable_fb</a>)</td></tr>
<tr><th id="1496">1496</th><td>		<a class="tu ref fn" href="#__vmw_svga_enable" title='__vmw_svga_enable' data-use='c' data-ref="__vmw_svga_enable">__vmw_svga_enable</a>(<a class="local col6 ref" href="#136dev_priv" title='dev_priv' data-ref="136dev_priv">dev_priv</a>);</td></tr>
<tr><th id="1497">1497</th><td></td></tr>
<tr><th id="1498">1498</th><td>	<a class="local col6 ref" href="#136dev_priv" title='dev_priv' data-ref="136dev_priv">dev_priv</a>-&gt;<a class="ref field" href="vmwgfx_drv.h.html#vmw_private::suspended" title='vmw_private::suspended' data-ref="vmw_private::suspended">suspended</a> = <a class="enum" href="../../../../include/linux/stddef.h.html#false" title='false' data-ref="false">false</a>;</td></tr>
<tr><th id="1499">1499</th><td></td></tr>
<tr><th id="1500">1500</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1501">1501</th><td>}</td></tr>
<tr><th id="1502">1502</th><td></td></tr>
<tr><th id="1503">1503</th><td><em>static</em> <em>const</em> <b>struct</b> <a class="type" href="../../../../include/linux/pm.h.html#dev_pm_ops" title='dev_pm_ops' data-ref="dev_pm_ops">dev_pm_ops</a> <dfn class="tu decl def" id="vmw_pm_ops" title='vmw_pm_ops' data-type='const struct dev_pm_ops' data-ref="vmw_pm_ops">vmw_pm_ops</dfn> = {</td></tr>
<tr><th id="1504">1504</th><td>	.<a class="ref field" href="../../../../include/linux/pm.h.html#dev_pm_ops::freeze" title='dev_pm_ops::freeze' data-ref="dev_pm_ops::freeze">freeze</a> = <a class="tu ref fn" href="#vmw_pm_freeze" title='vmw_pm_freeze' data-ref="vmw_pm_freeze">vmw_pm_freeze</a>,</td></tr>
<tr><th id="1505">1505</th><td>	.<a class="ref field" href="../../../../include/linux/pm.h.html#dev_pm_ops::thaw" title='dev_pm_ops::thaw' data-ref="dev_pm_ops::thaw">thaw</a> = <a class="tu ref fn" href="#vmw_pm_restore" title='vmw_pm_restore' data-ref="vmw_pm_restore">vmw_pm_restore</a>,</td></tr>
<tr><th id="1506">1506</th><td>	.<a class="ref field" href="../../../../include/linux/pm.h.html#dev_pm_ops::restore" title='dev_pm_ops::restore' data-ref="dev_pm_ops::restore">restore</a> = <a class="tu ref fn" href="#vmw_pm_restore" title='vmw_pm_restore' data-ref="vmw_pm_restore">vmw_pm_restore</a>,</td></tr>
<tr><th id="1507">1507</th><td>	.<a class="ref field" href="../../../../include/linux/pm.h.html#dev_pm_ops::suspend" title='dev_pm_ops::suspend' data-ref="dev_pm_ops::suspend">suspend</a> = <a class="tu ref fn" href="#vmw_pm_suspend" title='vmw_pm_suspend' data-ref="vmw_pm_suspend">vmw_pm_suspend</a>,</td></tr>
<tr><th id="1508">1508</th><td>	.<a class="ref field" href="../../../../include/linux/pm.h.html#dev_pm_ops::resume" title='dev_pm_ops::resume' data-ref="dev_pm_ops::resume">resume</a> = <a class="tu ref fn" href="#vmw_pm_resume" title='vmw_pm_resume' data-ref="vmw_pm_resume">vmw_pm_resume</a>,</td></tr>
<tr><th id="1509">1509</th><td>};</td></tr>
<tr><th id="1510">1510</th><td></td></tr>
<tr><th id="1511">1511</th><td><em>static</em> <em>const</em> <b>struct</b> <a class="type" href="../../../../include/linux/fs.h.html#file_operations" title='file_operations' data-ref="file_operations">file_operations</a> <dfn class="tu decl def" id="vmwgfx_driver_fops" title='vmwgfx_driver_fops' data-type='const struct file_operations' data-ref="vmwgfx_driver_fops">vmwgfx_driver_fops</dfn> = {</td></tr>
<tr><th id="1512">1512</th><td>	.<a class="ref field" href="../../../../include/linux/fs.h.html#file_operations::owner" title='file_operations::owner' data-ref="file_operations::owner">owner</a> = <a class="macro" href="../../../../include/linux/export.h.html#37" title="((struct module *)0)" data-ref="_M/THIS_MODULE">THIS_MODULE</a>,</td></tr>
<tr><th id="1513">1513</th><td>	.<a class="ref field" href="../../../../include/linux/fs.h.html#file_operations::open" title='file_operations::open' data-ref="file_operations::open">open</a> = <a class="ref fn" href="../../../../include/drm/drm_file.h.html#drm_open" title='drm_open' data-ref="drm_open">drm_open</a>,</td></tr>
<tr><th id="1514">1514</th><td>	.<a class="ref field" href="../../../../include/linux/fs.h.html#file_operations::release" title='file_operations::release' data-ref="file_operations::release">release</a> = <a class="ref fn" href="../../../../include/drm/drm_file.h.html#drm_release" title='drm_release' data-ref="drm_release">drm_release</a>,</td></tr>
<tr><th id="1515">1515</th><td>	.<a class="ref field" href="../../../../include/linux/fs.h.html#file_operations::unlocked_ioctl" title='file_operations::unlocked_ioctl' data-ref="file_operations::unlocked_ioctl">unlocked_ioctl</a> = <a class="tu ref fn" href="#vmw_unlocked_ioctl" title='vmw_unlocked_ioctl' data-ref="vmw_unlocked_ioctl">vmw_unlocked_ioctl</a>,</td></tr>
<tr><th id="1516">1516</th><td>	.<a class="ref field" href="../../../../include/linux/fs.h.html#file_operations::mmap" title='file_operations::mmap' data-ref="file_operations::mmap">mmap</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_mmap" title='vmw_mmap' data-ref="vmw_mmap">vmw_mmap</a>,</td></tr>
<tr><th id="1517">1517</th><td>	.<a class="ref field" href="../../../../include/linux/fs.h.html#file_operations::poll" title='file_operations::poll' data-ref="file_operations::poll">poll</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_fops_poll" title='vmw_fops_poll' data-ref="vmw_fops_poll">vmw_fops_poll</a>,</td></tr>
<tr><th id="1518">1518</th><td>	.<a class="ref field" href="../../../../include/linux/fs.h.html#file_operations::read" title='file_operations::read' data-ref="file_operations::read">read</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_fops_read" title='vmw_fops_read' data-ref="vmw_fops_read">vmw_fops_read</a>,</td></tr>
<tr><th id="1519">1519</th><td><u>#<span data-ppcond="1519">if</span> defined(<a class="macro" href="../../../../include/generated/autoconf.h.html#83" data-ref="_M/CONFIG_COMPAT">CONFIG_COMPAT</a>)</u></td></tr>
<tr><th id="1520">1520</th><td>	.<a class="ref field" href="../../../../include/linux/fs.h.html#file_operations::compat_ioctl" title='file_operations::compat_ioctl' data-ref="file_operations::compat_ioctl">compat_ioctl</a> = <a class="tu ref fn" href="#vmw_compat_ioctl" title='vmw_compat_ioctl' data-ref="vmw_compat_ioctl">vmw_compat_ioctl</a>,</td></tr>
<tr><th id="1521">1521</th><td><u>#<span data-ppcond="1519">endif</span></u></td></tr>
<tr><th id="1522">1522</th><td>	.<a class="ref field" href="../../../../include/linux/fs.h.html#file_operations::llseek" title='file_operations::llseek' data-ref="file_operations::llseek">llseek</a> = <a class="ref fn" href="../../../../include/linux/fs.h.html#noop_llseek" title='noop_llseek' data-ref="noop_llseek">noop_llseek</a>,</td></tr>
<tr><th id="1523">1523</th><td>};</td></tr>
<tr><th id="1524">1524</th><td></td></tr>
<tr><th id="1525">1525</th><td><em>static</em> <b>struct</b> <a class="type" href="../../../../include/drm/drm_drv.h.html#drm_driver" title='drm_driver' data-ref="drm_driver">drm_driver</a> <dfn class="tu decl def" id="driver" title='driver' data-type='struct drm_driver' data-ref="driver">driver</dfn> = {</td></tr>
<tr><th id="1526">1526</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::driver_features" title='drm_driver::driver_features' data-ref="drm_driver::driver_features">driver_features</a> = <a class="macro" href="../../../../include/drm/drm_drv.h.html#49" title="0x40" data-ref="_M/DRIVER_HAVE_IRQ">DRIVER_HAVE_IRQ</a> | <a class="macro" href="../../../../include/drm/drm_drv.h.html#50" title="0x80" data-ref="_M/DRIVER_IRQ_SHARED">DRIVER_IRQ_SHARED</a> |</td></tr>
<tr><th id="1527">1527</th><td>	<a class="macro" href="../../../../include/drm/drm_drv.h.html#52" title="0x2000" data-ref="_M/DRIVER_MODESET">DRIVER_MODESET</a> | <a class="macro" href="../../../../include/drm/drm_drv.h.html#53" title="0x4000" data-ref="_M/DRIVER_PRIME">DRIVER_PRIME</a> | <a class="macro" href="../../../../include/drm/drm_drv.h.html#54" title="0x8000" data-ref="_M/DRIVER_RENDER">DRIVER_RENDER</a> | <a class="macro" href="../../../../include/drm/drm_drv.h.html#55" title="0x10000" data-ref="_M/DRIVER_ATOMIC">DRIVER_ATOMIC</a>,</td></tr>
<tr><th id="1528">1528</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::load" title='drm_driver::load' data-ref="drm_driver::load">load</a> = <a class="tu ref fn" href="#vmw_driver_load" title='vmw_driver_load' data-ref="vmw_driver_load">vmw_driver_load</a>,</td></tr>
<tr><th id="1529">1529</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::unload" title='drm_driver::unload' data-ref="drm_driver::unload">unload</a> = <a class="tu ref fn" href="#vmw_driver_unload" title='vmw_driver_unload' data-ref="vmw_driver_unload">vmw_driver_unload</a>,</td></tr>
<tr><th id="1530">1530</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::lastclose" title='drm_driver::lastclose' data-ref="drm_driver::lastclose">lastclose</a> = <a class="tu ref fn" href="#vmw_lastclose" title='vmw_lastclose' data-ref="vmw_lastclose">vmw_lastclose</a>,</td></tr>
<tr><th id="1531">1531</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::get_vblank_counter" title='drm_driver::get_vblank_counter' data-ref="drm_driver::get_vblank_counter">get_vblank_counter</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_get_vblank_counter" title='vmw_get_vblank_counter' data-ref="vmw_get_vblank_counter">vmw_get_vblank_counter</a>,</td></tr>
<tr><th id="1532">1532</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::enable_vblank" title='drm_driver::enable_vblank' data-ref="drm_driver::enable_vblank">enable_vblank</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_enable_vblank" title='vmw_enable_vblank' data-ref="vmw_enable_vblank">vmw_enable_vblank</a>,</td></tr>
<tr><th id="1533">1533</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::disable_vblank" title='drm_driver::disable_vblank' data-ref="drm_driver::disable_vblank">disable_vblank</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_disable_vblank" title='vmw_disable_vblank' data-ref="vmw_disable_vblank">vmw_disable_vblank</a>,</td></tr>
<tr><th id="1534">1534</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::ioctls" title='drm_driver::ioctls' data-ref="drm_driver::ioctls">ioctls</a> = <a class="tu ref" href="#vmw_ioctls" title='vmw_ioctls' data-ref="vmw_ioctls">vmw_ioctls</a>,</td></tr>
<tr><th id="1535">1535</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::num_ioctls" title='drm_driver::num_ioctls' data-ref="drm_driver::num_ioctls">num_ioctls</a> = <a class="macro" href="../../../../include/linux/kernel.h.html#71" title="(sizeof(vmw_ioctls) / sizeof((vmw_ioctls)[0]) + (sizeof(struct { int:(-!!(__builtin_types_compatible_p(typeof((vmw_ioctls)), typeof(&amp;(vmw_ioctls)[0])))); })))" data-ref="_M/ARRAY_SIZE">ARRAY_SIZE</a>(<a class="tu ref" href="#vmw_ioctls" title='vmw_ioctls' data-use='r' data-ref="vmw_ioctls"><a class="tu ref" href="#vmw_ioctls" title='vmw_ioctls' data-use='a' data-ref="vmw_ioctls">vmw_ioctls</a></a>),</td></tr>
<tr><th id="1536">1536</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::master_create" title='drm_driver::master_create' data-ref="drm_driver::master_create">master_create</a> = <a class="tu ref fn" href="#vmw_master_create" title='vmw_master_create' data-ref="vmw_master_create">vmw_master_create</a>,</td></tr>
<tr><th id="1537">1537</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::master_destroy" title='drm_driver::master_destroy' data-ref="drm_driver::master_destroy">master_destroy</a> = <a class="tu ref fn" href="#vmw_master_destroy" title='vmw_master_destroy' data-ref="vmw_master_destroy">vmw_master_destroy</a>,</td></tr>
<tr><th id="1538">1538</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::master_set" title='drm_driver::master_set' data-ref="drm_driver::master_set">master_set</a> = <a class="tu ref fn" href="#vmw_master_set" title='vmw_master_set' data-ref="vmw_master_set">vmw_master_set</a>,</td></tr>
<tr><th id="1539">1539</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::master_drop" title='drm_driver::master_drop' data-ref="drm_driver::master_drop">master_drop</a> = <a class="tu ref fn" href="#vmw_master_drop" title='vmw_master_drop' data-ref="vmw_master_drop">vmw_master_drop</a>,</td></tr>
<tr><th id="1540">1540</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::open" title='drm_driver::open' data-ref="drm_driver::open">open</a> = <a class="tu ref fn" href="#vmw_driver_open" title='vmw_driver_open' data-ref="vmw_driver_open">vmw_driver_open</a>,</td></tr>
<tr><th id="1541">1541</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::postclose" title='drm_driver::postclose' data-ref="drm_driver::postclose">postclose</a> = <a class="tu ref fn" href="#vmw_postclose" title='vmw_postclose' data-ref="vmw_postclose">vmw_postclose</a>,</td></tr>
<tr><th id="1542">1542</th><td></td></tr>
<tr><th id="1543">1543</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::dumb_create" title='drm_driver::dumb_create' data-ref="drm_driver::dumb_create">dumb_create</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_dumb_create" title='vmw_dumb_create' data-ref="vmw_dumb_create">vmw_dumb_create</a>,</td></tr>
<tr><th id="1544">1544</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::dumb_map_offset" title='drm_driver::dumb_map_offset' data-ref="drm_driver::dumb_map_offset">dumb_map_offset</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_dumb_map_offset" title='vmw_dumb_map_offset' data-ref="vmw_dumb_map_offset">vmw_dumb_map_offset</a>,</td></tr>
<tr><th id="1545">1545</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::dumb_destroy" title='drm_driver::dumb_destroy' data-ref="drm_driver::dumb_destroy">dumb_destroy</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_dumb_destroy" title='vmw_dumb_destroy' data-ref="vmw_dumb_destroy">vmw_dumb_destroy</a>,</td></tr>
<tr><th id="1546">1546</th><td></td></tr>
<tr><th id="1547">1547</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::prime_fd_to_handle" title='drm_driver::prime_fd_to_handle' data-ref="drm_driver::prime_fd_to_handle">prime_fd_to_handle</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_prime_fd_to_handle" title='vmw_prime_fd_to_handle' data-ref="vmw_prime_fd_to_handle">vmw_prime_fd_to_handle</a>,</td></tr>
<tr><th id="1548">1548</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::prime_handle_to_fd" title='drm_driver::prime_handle_to_fd' data-ref="drm_driver::prime_handle_to_fd">prime_handle_to_fd</a> = <a class="ref fn" href="vmwgfx_drv.h.html#vmw_prime_handle_to_fd" title='vmw_prime_handle_to_fd' data-ref="vmw_prime_handle_to_fd">vmw_prime_handle_to_fd</a>,</td></tr>
<tr><th id="1549">1549</th><td></td></tr>
<tr><th id="1550">1550</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::fops" title='drm_driver::fops' data-ref="drm_driver::fops">fops</a> = &amp;<a class="tu ref" href="#vmwgfx_driver_fops" title='vmwgfx_driver_fops' data-use='a' data-ref="vmwgfx_driver_fops">vmwgfx_driver_fops</a>,</td></tr>
<tr><th id="1551">1551</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::name" title='drm_driver::name' data-ref="drm_driver::name">name</a> = <a class="macro" href="vmwgfx_drv.h.html#45" title="&quot;vmwgfx&quot;" data-ref="_M/VMWGFX_DRIVER_NAME">VMWGFX_DRIVER_NAME</a>,</td></tr>
<tr><th id="1552">1552</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::desc" title='drm_driver::desc' data-ref="drm_driver::desc">desc</a> = <a class="macro" href="#39" title="&quot;Linux drm driver for VMware graphics devices&quot;" data-ref="_M/VMWGFX_DRIVER_DESC">VMWGFX_DRIVER_DESC</a>,</td></tr>
<tr><th id="1553">1553</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::date" title='drm_driver::date' data-ref="drm_driver::date">date</a> = <a class="macro" href="vmwgfx_drv.h.html#46" title="&quot;20170612&quot;" data-ref="_M/VMWGFX_DRIVER_DATE">VMWGFX_DRIVER_DATE</a>,</td></tr>
<tr><th id="1554">1554</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::major" title='drm_driver::major' data-ref="drm_driver::major">major</a> = <a class="macro" href="vmwgfx_drv.h.html#47" title="2" data-ref="_M/VMWGFX_DRIVER_MAJOR">VMWGFX_DRIVER_MAJOR</a>,</td></tr>
<tr><th id="1555">1555</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::minor" title='drm_driver::minor' data-ref="drm_driver::minor">minor</a> = <a class="macro" href="vmwgfx_drv.h.html#48" title="14" data-ref="_M/VMWGFX_DRIVER_MINOR">VMWGFX_DRIVER_MINOR</a>,</td></tr>
<tr><th id="1556">1556</th><td>	.<a class="ref field" href="../../../../include/drm/drm_drv.h.html#drm_driver::patchlevel" title='drm_driver::patchlevel' data-ref="drm_driver::patchlevel">patchlevel</a> = <a class="macro" href="vmwgfx_drv.h.html#49" title="0" data-ref="_M/VMWGFX_DRIVER_PATCHLEVEL">VMWGFX_DRIVER_PATCHLEVEL</a></td></tr>
<tr><th id="1557">1557</th><td>};</td></tr>
<tr><th id="1558">1558</th><td></td></tr>
<tr><th id="1559">1559</th><td><em>static</em> <b>struct</b> <a class="type" href="../../../../include/linux/pci.h.html#pci_driver" title='pci_driver' data-ref="pci_driver">pci_driver</a> <dfn class="tu decl def" id="vmw_pci_driver" title='vmw_pci_driver' data-type='struct pci_driver' data-ref="vmw_pci_driver">vmw_pci_driver</dfn> = {</td></tr>
<tr><th id="1560">1560</th><td>	.<a class="ref field" href="../../../../include/linux/pci.h.html#pci_driver::name" title='pci_driver::name' data-ref="pci_driver::name">name</a> = <a class="macro" href="vmwgfx_drv.h.html#45" title="&quot;vmwgfx&quot;" data-ref="_M/VMWGFX_DRIVER_NAME">VMWGFX_DRIVER_NAME</a>,</td></tr>
<tr><th id="1561">1561</th><td>	.<a class="ref field" href="../../../../include/linux/pci.h.html#pci_driver::id_table" title='pci_driver::id_table' data-ref="pci_driver::id_table">id_table</a> = <a class="tu ref" href="#vmw_pci_id_list" title='vmw_pci_id_list' data-ref="vmw_pci_id_list">vmw_pci_id_list</a>,</td></tr>
<tr><th id="1562">1562</th><td>	.<a class="ref field" href="../../../../include/linux/pci.h.html#pci_driver::probe" title='pci_driver::probe' data-ref="pci_driver::probe">probe</a> = <a class="tu ref fn" href="#vmw_probe" title='vmw_probe' data-ref="vmw_probe">vmw_probe</a>,</td></tr>
<tr><th id="1563">1563</th><td>	.<a class="ref field" href="../../../../include/linux/pci.h.html#pci_driver::remove" title='pci_driver::remove' data-ref="pci_driver::remove">remove</a> = <a class="tu ref fn" href="#vmw_remove" title='vmw_remove' data-ref="vmw_remove">vmw_remove</a>,</td></tr>
<tr><th id="1564">1564</th><td>	.<a class="ref field" href="../../../../include/linux/pci.h.html#pci_driver::driver" title='pci_driver::driver' data-ref="pci_driver::driver">driver</a> = {</td></tr>
<tr><th id="1565">1565</th><td>		.<a class="ref field" href="../../../../include/linux/device.h.html#device_driver::pm" title='device_driver::pm' data-ref="device_driver::pm">pm</a> = &amp;<a class="tu ref" href="#vmw_pm_ops" title='vmw_pm_ops' data-use='a' data-ref="vmw_pm_ops">vmw_pm_ops</a></td></tr>
<tr><th id="1566">1566</th><td>	}</td></tr>
<tr><th id="1567">1567</th><td>};</td></tr>
<tr><th id="1568">1568</th><td></td></tr>
<tr><th id="1569">1569</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="vmw_probe" title='vmw_probe' data-type='int vmw_probe(struct pci_dev * pdev, const struct pci_device_id * ent)' data-ref="vmw_probe">vmw_probe</dfn>(<b>struct</b> <a class="type" href="../../../../include/linux/pci.h.html#pci_dev" title='pci_dev' data-ref="pci_dev">pci_dev</a> *<dfn class="local col8 decl" id="138pdev" title='pdev' data-type='struct pci_dev *' data-ref="138pdev">pdev</dfn>, <em>const</em> <b>struct</b> <a class="type" href="../../../../include/linux/mod_devicetable.h.html#pci_device_id" title='pci_device_id' data-ref="pci_device_id">pci_device_id</a> *<dfn class="local col9 decl" id="139ent" title='ent' data-type='const struct pci_device_id *' data-ref="139ent">ent</dfn>)</td></tr>
<tr><th id="1570">1570</th><td>{</td></tr>
<tr><th id="1571">1571</th><td>	<b>return</b> <a class="ref fn" href="../../../../include/drm/drm_pci.h.html#drm_get_pci_dev" title='drm_get_pci_dev' data-ref="drm_get_pci_dev">drm_get_pci_dev</a>(<a class="local col8 ref" href="#138pdev" title='pdev' data-ref="138pdev">pdev</a>, <a class="local col9 ref" href="#139ent" title='ent' data-ref="139ent">ent</a>, &amp;<a class="tu ref" href="#driver" title='driver' data-use='a' data-ref="driver">driver</a>);</td></tr>
<tr><th id="1572">1572</th><td>}</td></tr>
<tr><th id="1573">1573</th><td></td></tr>
<tr><th id="1574">1574</th><td><em>static</em> <em>int</em> <a class="macro" href="../../../../include/linux/init.h.html#50" title="__attribute__ ((__section__(&quot;.init.text&quot;)))" data-ref="_M/__init">__init</a> <dfn class="tu decl def fn" id="vmwgfx_init" title='vmwgfx_init' data-type='int vmwgfx_init()' data-ref="vmwgfx_init">vmwgfx_init</dfn>(<em>void</em>)</td></tr>
<tr><th id="1575">1575</th><td>{</td></tr>
<tr><th id="1576">1576</th><td>	<em>int</em> <dfn class="local col0 decl" id="140ret" title='ret' data-type='int' data-ref="140ret">ret</dfn>;</td></tr>
<tr><th id="1577">1577</th><td></td></tr>
<tr><th id="1578">1578</th><td>	<b>if</b> (<a class="ref fn" href="../../../../include/linux/console.h.html#vgacon_text_force" title='vgacon_text_force' data-ref="vgacon_text_force">vgacon_text_force</a>())</td></tr>
<tr><th id="1579">1579</th><td>		<b>return</b> -<a class="macro" href="../../../../include/uapi/asm-generic/errno-base.h.html#26" title="22" data-ref="_M/EINVAL">EINVAL</a>;</td></tr>
<tr><th id="1580">1580</th><td></td></tr>
<tr><th id="1581">1581</th><td>	<a class="local col0 ref" href="#140ret" title='ret' data-ref="140ret">ret</a> = <a class="macro" href="../../../../include/linux/pci.h.html#1260" title="__pci_register_driver(&amp;vmw_pci_driver, ((struct module *)0), &quot;vmwgfx&quot;)" data-ref="_M/pci_register_driver">pci_register_driver</a>(&amp;<a class="tu ref" href="#vmw_pci_driver" title='vmw_pci_driver' data-use='a' data-ref="vmw_pci_driver">vmw_pci_driver</a>);</td></tr>
<tr><th id="1582">1582</th><td>	<b>if</b> (<a class="local col0 ref" href="#140ret" title='ret' data-ref="140ret">ret</a>)</td></tr>
<tr><th id="1583">1583</th><td>		<a class="macro" href="../../../../include/drm/drmP.h.html#177" title="drm_printk(&quot;\001&quot; &quot;3&quot;, 0x00, &quot;Failed initializing DRM.\n&quot;)" data-ref="_M/DRM_ERROR">DRM_ERROR</a>(<q>"Failed initializing DRM.\n"</q>);</td></tr>
<tr><th id="1584">1584</th><td>	<b>return</b> <a class="local col0 ref" href="#140ret" title='ret' data-ref="140ret">ret</a>;</td></tr>
<tr><th id="1585">1585</th><td>}</td></tr>
<tr><th id="1586">1586</th><td></td></tr>
<tr><th id="1587">1587</th><td><em>static</em> <em>void</em> <a class="macro" href="../../../../include/linux/init.h.html#85" title="__attribute__ ((__section__(&quot;.exit.text&quot;))) __attribute__((__used__)) __attribute__((no_instrument_function))" data-ref="_M/__exit">__exit</a> <dfn class="tu decl def fn" id="vmwgfx_exit" title='vmwgfx_exit' data-type='void vmwgfx_exit()' data-ref="vmwgfx_exit">vmwgfx_exit</dfn>(<em>void</em>)</td></tr>
<tr><th id="1588">1588</th><td>{</td></tr>
<tr><th id="1589">1589</th><td>	<a class="ref fn" href="../../../../include/linux/pci.h.html#pci_unregister_driver" title='pci_unregister_driver' data-ref="pci_unregister_driver">pci_unregister_driver</a>(&amp;<a class="tu ref" href="#vmw_pci_driver" title='vmw_pci_driver' data-use='a' data-ref="vmw_pci_driver">vmw_pci_driver</a>);</td></tr>
<tr><th id="1590">1590</th><td>}</td></tr>
<tr><th id="1591">1591</th><td></td></tr>
<tr><th id="1592">1592</th><td><a class="macro" href="../../../../include/linux/module.h.html#85" title="static initcall_t __initcall_vmwgfx_init6 __attribute__((__used__)) __attribute__((__section__(&quot;.initcall&quot; &quot;6&quot; &quot;.init&quot;))) = vmwgfx_init;;" data-ref="_M/module_init">module_init</a>(<a class="tu ref fn" href="#vmwgfx_init" title='vmwgfx_init' data-ref="vmwgfx_init">vmwgfx_init</a>);</td></tr>
<tr><th id="1593">1593</th><td><a class="macro" href="../../../../include/linux/module.h.html#97" title="static exitcall_t __exitcall_vmwgfx_exit __attribute__((__used__)) __attribute__ ((__section__(&quot;.exitcall.exit&quot;))) = vmwgfx_exit;" data-ref="_M/module_exit">module_exit</a>(<a class="tu ref fn" href="#vmwgfx_exit" title='vmwgfx_exit' data-ref="vmwgfx_exit">vmwgfx_exit</a>);</td></tr>
<tr><th id="1594">1594</th><td></td></tr>
<tr><th id="1595">1595</th><td><a class="macro" href="../../../../include/linux/module.h.html#204" title="struct __UNIQUE_ID_author124 {}" data-ref="_M/MODULE_AUTHOR">MODULE_AUTHOR</a>(<q>"VMware Inc. and others"</q>);</td></tr>
<tr><th id="1596">1596</th><td><a class="macro" href="../../../../include/linux/module.h.html#207" title="struct __UNIQUE_ID_description126 {}" data-ref="_M/MODULE_DESCRIPTION">MODULE_DESCRIPTION</a>(<q>"Standalone drm driver for the VMware SVGA device"</q>);</td></tr>
<tr><th id="1597">1597</th><td><a class="macro" href="../../../../include/linux/module.h.html#198" title="struct __UNIQUE_ID_license128 {}" data-ref="_M/MODULE_LICENSE">MODULE_LICENSE</a>(<q>"GPL and additional rights"</q>);</td></tr>
<tr><th id="1598">1598</th><td><a class="macro" href="../../../../include/linux/module.h.html#238" title="static struct module_version_attribute ___modver_attr = { .mattr = { .attr = { .name = &quot;version&quot;, .mode = (00400|00040|00004), }, .show = __modver_version_show, }, .module_name = &quot;vmwgfx&quot;, .version = &quot;2&quot; &quot;.&quot; &quot;14&quot; &quot;.&quot; &quot;0&quot; &quot;.&quot; &quot;0&quot;, }; static const struct module_version_attribute __attribute__((__used__)) __attribute__ ((__section__ (&quot;__modver&quot;))) * const __modver_attr = &amp;___modver_attr" data-ref="_M/MODULE_VERSION">MODULE_VERSION</a>(<a class="macro" href="../../../../include/linux/stringify.h.html#10" title="&quot;2&quot;" data-ref="_M/__stringify">__stringify</a>(<a class="macro" href="vmwgfx_drv.h.html#47" title="2" data-ref="_M/VMWGFX_DRIVER_MAJOR">VMWGFX_DRIVER_MAJOR</a>) <q>"."</q></td></tr>
<tr><th id="1599">1599</th><td>	       <a class="macro" href="../../../../include/linux/stringify.h.html#10" title="&quot;14&quot;" data-ref="_M/__stringify">__stringify</a>(<a class="macro" href="vmwgfx_drv.h.html#48" title="14" data-ref="_M/VMWGFX_DRIVER_MINOR">VMWGFX_DRIVER_MINOR</a>) <q>"."</q></td></tr>
<tr><th id="1600">1600</th><td>	       <a class="macro" href="../../../../include/linux/stringify.h.html#10" title="&quot;0&quot;" data-ref="_M/__stringify">__stringify</a>(<a class="macro" href="vmwgfx_drv.h.html#49" title="0" data-ref="_M/VMWGFX_DRIVER_PATCHLEVEL">VMWGFX_DRIVER_PATCHLEVEL</a>) <q>"."</q></td></tr>
<tr><th id="1601">1601</th><td>	       <q>"0"</q>);</td></tr>
<tr><th id="1602">1602</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2018-Aug-01</em> from project linux-4.14.y revision <em>linux-4.14.y</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
