<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>scsi_debugfs.c source code [linux-4.14.y/drivers/scsi/scsi_debugfs.c] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'linux-4.14.y/drivers/scsi/scsi_debugfs.c'; var root_path = '../../..'; var data_path = '../../../../data';</script>
<script src='../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../..'>linux-4.14.y</a>/<a href='..'>drivers</a>/<a href='./'>scsi</a>/<a href='scsi_debugfs.c.html'>scsi_debugfs.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>// SPDX-License-Identifier: GPL-2.0</i></td></tr>
<tr><th id="2">2</th><td><u>#include <a href="../../include/linux/seq_file.h.html">&lt;linux/seq_file.h&gt;</a></u></td></tr>
<tr><th id="3">3</th><td><u>#include <a href="../../include/scsi/scsi_cmnd.h.html">&lt;scsi/scsi_cmnd.h&gt;</a></u></td></tr>
<tr><th id="4">4</th><td><u>#include <a href="../../include/scsi/scsi_dbg.h.html">&lt;scsi/scsi_dbg.h&gt;</a></u></td></tr>
<tr><th id="5">5</th><td><u>#include <a href="scsi_debugfs.h.html">"scsi_debugfs.h"</a></u></td></tr>
<tr><th id="6">6</th><td></td></tr>
<tr><th id="7">7</th><td><em>void</em> <dfn class="decl def fn" id="scsi_show_rq" title='scsi_show_rq' data-ref="scsi_show_rq">scsi_show_rq</dfn>(<b>struct</b> <a class="type" href="../../include/linux/seq_file.h.html#seq_file" title='seq_file' data-ref="seq_file">seq_file</a> *<dfn class="local col3 decl" id="3m" title='m' data-type='struct seq_file *' data-ref="3m">m</dfn>, <b>struct</b> <a class="type" href="../../include/linux/blkdev.h.html#request" title='request' data-ref="request">request</a> *<dfn class="local col4 decl" id="4rq" title='rq' data-type='struct request *' data-ref="4rq">rq</dfn>)</td></tr>
<tr><th id="8">8</th><td>{</td></tr>
<tr><th id="9">9</th><td>	<b>struct</b> <a class="type" href="../../include/scsi/scsi_cmnd.h.html#scsi_cmnd" title='scsi_cmnd' data-ref="scsi_cmnd">scsi_cmnd</a> *<dfn class="local col5 decl" id="5cmd" title='cmd' data-type='struct scsi_cmnd *' data-ref="5cmd">cmd</dfn> = <a class="macro" href="../../include/linux/kernel.h.html#927" title="({ void *__mptr = (void *)(scsi_req(rq)); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*(scsi_req(rq))), typeof(((typeof(*cmd) *)0)-&gt;req)) &amp;&amp; !__builtin_types_compatible_p(typeof(*(scsi_req(rq))), typeof(void)))); extern void __compiletime_assert_9(void) ; if (__cond) __compiletime_assert_9(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((typeof(*cmd) *)(__mptr - __builtin_offsetof(typeof(*cmd), req))); })" data-ref="_M/container_of">container_of</a>(<a class="ref fn" href="../../include/scsi/scsi_request.h.html#scsi_req" title='scsi_req' data-ref="scsi_req">scsi_req</a>(<a class="local col4 ref" href="#4rq" title='rq' data-ref="4rq">rq</a>), <b>typeof</b>(*<a class="local col5 ref" href="#5cmd" title='cmd' data-ref="5cmd">cmd</a>), <a class="ref field" href="../../include/scsi/scsi_cmnd.h.html#scsi_cmnd::req" title='scsi_cmnd::req' data-ref="scsi_cmnd::req">req</a>);</td></tr>
<tr><th id="10">10</th><td>	<em>int</em> <dfn class="local col6 decl" id="6msecs" title='msecs' data-type='int' data-ref="6msecs">msecs</dfn> = <a class="ref fn" href="../../include/linux/jiffies.h.html#jiffies_to_msecs" title='jiffies_to_msecs' data-ref="jiffies_to_msecs">jiffies_to_msecs</a>(<a class="ref" href="../../include/linux/jiffies.h.html#jiffies" title='jiffies' data-ref="jiffies">jiffies</a> - <a class="local col5 ref" href="#5cmd" title='cmd' data-ref="5cmd">cmd</a>-&gt;<a class="ref field" href="../../include/scsi/scsi_cmnd.h.html#scsi_cmnd::jiffies_at_alloc" title='scsi_cmnd::jiffies_at_alloc' data-ref="scsi_cmnd::jiffies_at_alloc">jiffies_at_alloc</a>);</td></tr>
<tr><th id="11">11</th><td>	<em>const</em> <a class="typedef" href="../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='unsigned char' data-ref="u8">u8</a> *<em>const</em> <dfn class="local col7 decl" id="7cdb" title='cdb' data-type='const u8 *const' data-ref="7cdb">cdb</dfn> = <a class="macro" href="../../include/linux/compiler.h.html#254" title="({ union { typeof(cmd-&gt;cmnd) __val; char __c[1]; } __u; if (1) __read_once_size(&amp;(cmd-&gt;cmnd), __u.__c, sizeof(cmd-&gt;cmnd)); else __read_once_size_nocheck(&amp;(cmd-&gt;cmnd), __u.__c, sizeof(cmd-&gt;cmnd)); do { } while (0); __u.__val; })" data-ref="_M/READ_ONCE">READ_ONCE</a>(<a class="local col5 ref" href="#5cmd" title='cmd' data-ref="5cmd">cmd</a>-&gt;<a class="ref field" href="../../include/scsi/scsi_cmnd.h.html#scsi_cmnd::cmnd" title='scsi_cmnd::cmnd' data-ref="scsi_cmnd::cmnd">cmnd</a>);</td></tr>
<tr><th id="12">12</th><td>	<em>char</em> <dfn class="local col8 decl" id="8buf" title='buf' data-type='char [80]' data-ref="8buf">buf</dfn>[<var>80</var>] = <q>"(?)"</q>;</td></tr>
<tr><th id="13">13</th><td></td></tr>
<tr><th id="14">14</th><td>	<b>if</b> (<a class="local col7 ref" href="#7cdb" title='cdb' data-ref="7cdb">cdb</a>)</td></tr>
<tr><th id="15">15</th><td>		<a class="ref fn" href="../../include/scsi/scsi_dbg.h.html#__scsi_format_command" title='__scsi_format_command' data-ref="__scsi_format_command">__scsi_format_command</a>(<a class="local col8 ref" href="#8buf" title='buf' data-ref="8buf">buf</a>, <b>sizeof</b>(<a class="local col8 ref" href="#8buf" title='buf' data-ref="8buf">buf</a>), <a class="local col7 ref" href="#7cdb" title='cdb' data-ref="7cdb">cdb</a>, <a class="local col5 ref" href="#5cmd" title='cmd' data-ref="5cmd">cmd</a>-&gt;<a class="ref field" href="../../include/scsi/scsi_cmnd.h.html#scsi_cmnd::cmd_len" title='scsi_cmnd::cmd_len' data-ref="scsi_cmnd::cmd_len">cmd_len</a>);</td></tr>
<tr><th id="16">16</th><td>	<a class="ref fn" href="../../include/linux/seq_file.h.html#seq_printf" title='seq_printf' data-ref="seq_printf">seq_printf</a>(<a class="local col3 ref" href="#3m" title='m' data-ref="3m">m</a>, <q>", .cmd=%s, .retries=%d, allocated %d.%03d s ago"</q>, <a class="local col8 ref" href="#8buf" title='buf' data-ref="8buf">buf</a>,</td></tr>
<tr><th id="17">17</th><td>		   <a class="local col5 ref" href="#5cmd" title='cmd' data-ref="5cmd">cmd</a>-&gt;<a class="ref field" href="../../include/scsi/scsi_cmnd.h.html#scsi_cmnd::retries" title='scsi_cmnd::retries' data-ref="scsi_cmnd::retries">retries</a>, <a class="local col6 ref" href="#6msecs" title='msecs' data-ref="6msecs">msecs</a> / <var>1000</var>, <a class="local col6 ref" href="#6msecs" title='msecs' data-ref="6msecs">msecs</a> % <var>1000</var>);</td></tr>
<tr><th id="18">18</th><td>}</td></tr>
<tr><th id="19">19</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2018-Aug-01</em> from project linux-4.14.y revision <em>linux-4.14.y</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
