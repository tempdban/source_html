<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>msg.h source code [linux-4.18.y/include/uapi/linux/msg.h] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="msgbuf,msginfo,msqid_ds "/>
<link rel="stylesheet" href="../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'linux-4.18.y/include/uapi/linux/msg.h'; var root_path = '../../../..'; var data_path = '../../../../../data';</script>
<script src='../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>linux-4.18.y</a>/<a href='../..'>include</a>/<a href='..'>uapi</a>/<a href='./'>linux</a>/<a href='msg.h.html'>msg.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/* SPDX-License-Identifier: GPL-2.0 WITH Linux-syscall-note */</i></td></tr>
<tr><th id="2">2</th><td><u>#<span data-ppcond="2">ifndef</span> <span class="macro" data-ref="_M/_UAPI_LINUX_MSG_H">_UAPI_LINUX_MSG_H</span></u></td></tr>
<tr><th id="3">3</th><td><u>#define <dfn class="macro" id="_M/_UAPI_LINUX_MSG_H" data-ref="_M/_UAPI_LINUX_MSG_H">_UAPI_LINUX_MSG_H</dfn></u></td></tr>
<tr><th id="4">4</th><td></td></tr>
<tr><th id="5">5</th><td><u>#include <a href="../../linux/ipc.h.html">&lt;linux/ipc.h&gt;</a></u></td></tr>
<tr><th id="6">6</th><td></td></tr>
<tr><th id="7">7</th><td><i>/* ipcs ctl commands */</i></td></tr>
<tr><th id="8">8</th><td><u>#define <dfn class="macro" id="_M/MSG_STAT" data-ref="_M/MSG_STAT">MSG_STAT</dfn> 11</u></td></tr>
<tr><th id="9">9</th><td><u>#define <dfn class="macro" id="_M/MSG_INFO" data-ref="_M/MSG_INFO">MSG_INFO</dfn> 12</u></td></tr>
<tr><th id="10">10</th><td><u>#define <dfn class="macro" id="_M/MSG_STAT_ANY" data-ref="_M/MSG_STAT_ANY">MSG_STAT_ANY</dfn> 13</u></td></tr>
<tr><th id="11">11</th><td></td></tr>
<tr><th id="12">12</th><td><i>/* msgrcv options */</i></td></tr>
<tr><th id="13">13</th><td><u>#define <dfn class="macro" id="_M/MSG_NOERROR" data-ref="_M/MSG_NOERROR">MSG_NOERROR</dfn>     010000  /* no error if message is too big */</u></td></tr>
<tr><th id="14">14</th><td><u>#define <dfn class="macro" id="_M/MSG_EXCEPT" data-ref="_M/MSG_EXCEPT">MSG_EXCEPT</dfn>      020000  /* recv any msg except of specified type.*/</u></td></tr>
<tr><th id="15">15</th><td><u>#define <dfn class="macro" id="_M/MSG_COPY" data-ref="_M/MSG_COPY">MSG_COPY</dfn>        040000  /* copy (not remove) all queue messages */</u></td></tr>
<tr><th id="16">16</th><td></td></tr>
<tr><th id="17">17</th><td><i>/* Obsolete, used only for backwards compatibility and libc5 compiles */</i></td></tr>
<tr><th id="18">18</th><td><b>struct</b> <dfn class="type def" id="msqid_ds" title='msqid_ds' data-ref="msqid_ds">msqid_ds</dfn> {</td></tr>
<tr><th id="19">19</th><td>	<b>struct</b> <a class="type" href="ipc.h.html#ipc_perm" title='ipc_perm' data-ref="ipc_perm">ipc_perm</a> <dfn class="decl field" id="msqid_ds::msg_perm" title='msqid_ds::msg_perm' data-ref="msqid_ds::msg_perm">msg_perm</dfn>;</td></tr>
<tr><th id="20">20</th><td>	<b>struct</b> <dfn class="type" id="msg" title='msg' data-ref="msg"><a class="type" href="#msg" title='msg' data-ref="msg">msg</a></dfn> *<dfn class="decl field" id="msqid_ds::msg_first" title='msqid_ds::msg_first' data-ref="msqid_ds::msg_first">msg_first</dfn>;		<i>/* first message on queue,unused  */</i></td></tr>
<tr><th id="21">21</th><td>	<b>struct</b> <a class="type" href="#msg" title='msg' data-ref="msg">msg</a> *<dfn class="decl field" id="msqid_ds::msg_last" title='msqid_ds::msg_last' data-ref="msqid_ds::msg_last">msg_last</dfn>;		<i>/* last message in queue,unused */</i></td></tr>
<tr><th id="22">22</th><td>	<a class="typedef" href="../asm-generic/posix_types.h.html#__kernel_time_t" title='__kernel_time_t' data-type='__kernel_long_t' data-ref="__kernel_time_t">__kernel_time_t</a> <dfn class="decl field" id="msqid_ds::msg_stime" title='msqid_ds::msg_stime' data-ref="msqid_ds::msg_stime">msg_stime</dfn>;	<i>/* last msgsnd time */</i></td></tr>
<tr><th id="23">23</th><td>	<a class="typedef" href="../asm-generic/posix_types.h.html#__kernel_time_t" title='__kernel_time_t' data-type='__kernel_long_t' data-ref="__kernel_time_t">__kernel_time_t</a> <dfn class="decl field" id="msqid_ds::msg_rtime" title='msqid_ds::msg_rtime' data-ref="msqid_ds::msg_rtime">msg_rtime</dfn>;	<i>/* last msgrcv time */</i></td></tr>
<tr><th id="24">24</th><td>	<a class="typedef" href="../asm-generic/posix_types.h.html#__kernel_time_t" title='__kernel_time_t' data-type='__kernel_long_t' data-ref="__kernel_time_t">__kernel_time_t</a> <dfn class="decl field" id="msqid_ds::msg_ctime" title='msqid_ds::msg_ctime' data-ref="msqid_ds::msg_ctime">msg_ctime</dfn>;	<i>/* last change time */</i></td></tr>
<tr><th id="25">25</th><td>	<em>unsigned</em> <em>long</em>  <dfn class="decl field" id="msqid_ds::msg_lcbytes" title='msqid_ds::msg_lcbytes' data-ref="msqid_ds::msg_lcbytes">msg_lcbytes</dfn>;	<i>/* Reuse junk fields for 32 bit */</i></td></tr>
<tr><th id="26">26</th><td>	<em>unsigned</em> <em>long</em>  <dfn class="decl field" id="msqid_ds::msg_lqbytes" title='msqid_ds::msg_lqbytes' data-ref="msqid_ds::msg_lqbytes">msg_lqbytes</dfn>;	<i>/* ditto */</i></td></tr>
<tr><th id="27">27</th><td>	<em>unsigned</em> <em>short</em> <dfn class="decl field" id="msqid_ds::msg_cbytes" title='msqid_ds::msg_cbytes' data-ref="msqid_ds::msg_cbytes">msg_cbytes</dfn>;	<i>/* current number of bytes on queue */</i></td></tr>
<tr><th id="28">28</th><td>	<em>unsigned</em> <em>short</em> <dfn class="decl field" id="msqid_ds::msg_qnum" title='msqid_ds::msg_qnum' data-ref="msqid_ds::msg_qnum">msg_qnum</dfn>;	<i>/* number of messages in queue */</i></td></tr>
<tr><th id="29">29</th><td>	<em>unsigned</em> <em>short</em> <dfn class="decl field" id="msqid_ds::msg_qbytes" title='msqid_ds::msg_qbytes' data-ref="msqid_ds::msg_qbytes">msg_qbytes</dfn>;	<i>/* max number of bytes on queue */</i></td></tr>
<tr><th id="30">30</th><td>	<a class="typedef" href="../asm-generic/posix_types.h.html#__kernel_ipc_pid_t" title='__kernel_ipc_pid_t' data-type='int' data-ref="__kernel_ipc_pid_t">__kernel_ipc_pid_t</a> <dfn class="decl field" id="msqid_ds::msg_lspid" title='msqid_ds::msg_lspid' data-ref="msqid_ds::msg_lspid">msg_lspid</dfn>;	<i>/* pid of last msgsnd */</i></td></tr>
<tr><th id="31">31</th><td>	<a class="typedef" href="../asm-generic/posix_types.h.html#__kernel_ipc_pid_t" title='__kernel_ipc_pid_t' data-type='int' data-ref="__kernel_ipc_pid_t">__kernel_ipc_pid_t</a> <dfn class="decl field" id="msqid_ds::msg_lrpid" title='msqid_ds::msg_lrpid' data-ref="msqid_ds::msg_lrpid">msg_lrpid</dfn>;	<i>/* last receive pid */</i></td></tr>
<tr><th id="32">32</th><td>};</td></tr>
<tr><th id="33">33</th><td></td></tr>
<tr><th id="34">34</th><td><i>/* Include the definition of msqid64_ds */</i></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="../../../arch/x86/include/uapi/asm/msgbuf.h.html">&lt;asm/msgbuf.h&gt;</a></u></td></tr>
<tr><th id="36">36</th><td></td></tr>
<tr><th id="37">37</th><td><i>/* message buffer for msgsnd and msgrcv calls */</i></td></tr>
<tr><th id="38">38</th><td><b>struct</b> <dfn class="type def" id="msgbuf" title='msgbuf' data-ref="msgbuf">msgbuf</dfn> {</td></tr>
<tr><th id="39">39</th><td>	<a class="typedef" href="../asm-generic/posix_types.h.html#__kernel_long_t" title='__kernel_long_t' data-type='long' data-ref="__kernel_long_t">__kernel_long_t</a> <dfn class="decl field" id="msgbuf::mtype" title='msgbuf::mtype' data-ref="msgbuf::mtype">mtype</dfn>;          <i>/* type of message */</i></td></tr>
<tr><th id="40">40</th><td>	<em>char</em> <dfn class="decl field" id="msgbuf::mtext" title='msgbuf::mtext' data-ref="msgbuf::mtext">mtext</dfn>[<var>1</var>];                  <i>/* message text */</i></td></tr>
<tr><th id="41">41</th><td>};</td></tr>
<tr><th id="42">42</th><td></td></tr>
<tr><th id="43">43</th><td><i>/* buffer for msgctl calls IPC_INFO, MSG_INFO */</i></td></tr>
<tr><th id="44">44</th><td><b>struct</b> <dfn class="type def" id="msginfo" title='msginfo' data-ref="msginfo">msginfo</dfn> {</td></tr>
<tr><th id="45">45</th><td>	<em>int</em> <dfn class="decl field" id="msginfo::msgpool" title='msginfo::msgpool' data-ref="msginfo::msgpool">msgpool</dfn>;</td></tr>
<tr><th id="46">46</th><td>	<em>int</em> <dfn class="decl field" id="msginfo::msgmap" title='msginfo::msgmap' data-ref="msginfo::msgmap">msgmap</dfn>; </td></tr>
<tr><th id="47">47</th><td>	<em>int</em> <dfn class="decl field" id="msginfo::msgmax" title='msginfo::msgmax' data-ref="msginfo::msgmax">msgmax</dfn>; </td></tr>
<tr><th id="48">48</th><td>	<em>int</em> <dfn class="decl field" id="msginfo::msgmnb" title='msginfo::msgmnb' data-ref="msginfo::msgmnb">msgmnb</dfn>; </td></tr>
<tr><th id="49">49</th><td>	<em>int</em> <dfn class="decl field" id="msginfo::msgmni" title='msginfo::msgmni' data-ref="msginfo::msgmni">msgmni</dfn>; </td></tr>
<tr><th id="50">50</th><td>	<em>int</em> <dfn class="decl field" id="msginfo::msgssz" title='msginfo::msgssz' data-ref="msginfo::msgssz">msgssz</dfn>; </td></tr>
<tr><th id="51">51</th><td>	<em>int</em> <dfn class="decl field" id="msginfo::msgtql" title='msginfo::msgtql' data-ref="msginfo::msgtql">msgtql</dfn>; </td></tr>
<tr><th id="52">52</th><td>	<em>unsigned</em> <em>short</em>  <dfn class="decl field" id="msginfo::msgseg" title='msginfo::msgseg' data-ref="msginfo::msgseg">msgseg</dfn>; </td></tr>
<tr><th id="53">53</th><td>};</td></tr>
<tr><th id="54">54</th><td></td></tr>
<tr><th id="55">55</th><td><i>/*</i></td></tr>
<tr><th id="56">56</th><td><i> * MSGMNI, MSGMAX and MSGMNB are default values which can be</i></td></tr>
<tr><th id="57">57</th><td><i> * modified by sysctl.</i></td></tr>
<tr><th id="58">58</th><td><i> *</i></td></tr>
<tr><th id="59">59</th><td><i> * MSGMNI is the upper limit for the number of messages queues per</i></td></tr>
<tr><th id="60">60</th><td><i> * namespace.</i></td></tr>
<tr><th id="61">61</th><td><i> * It has been chosen to be as large possible without facilitating</i></td></tr>
<tr><th id="62">62</th><td><i> * scenarios where userspace causes overflows when adjusting the limits via</i></td></tr>
<tr><th id="63">63</th><td><i> * operations of the form retrieve current limit; add X; update limit".</i></td></tr>
<tr><th id="64">64</th><td><i> *</i></td></tr>
<tr><th id="65">65</th><td><i> * MSGMNB is the default size of a new message queue. Non-root tasks can</i></td></tr>
<tr><th id="66">66</th><td><i> * decrease the size with msgctl(IPC_SET), root tasks</i></td></tr>
<tr><th id="67">67</th><td><i> * (actually: CAP_SYS_RESOURCE) can both increase and decrease the queue</i></td></tr>
<tr><th id="68">68</th><td><i> * size. The optimal value is application dependent.</i></td></tr>
<tr><th id="69">69</th><td><i> * 16384 is used because it was always used (since 0.99.10)</i></td></tr>
<tr><th id="70">70</th><td><i> *</i></td></tr>
<tr><th id="71">71</th><td><i> * MAXMAX is the maximum size of an individual message, it's a global</i></td></tr>
<tr><th id="72">72</th><td><i> * (per-namespace) limit that applies for all message queues.</i></td></tr>
<tr><th id="73">73</th><td><i> * It's set to 1/2 of MSGMNB, to ensure that at least two messages fit into</i></td></tr>
<tr><th id="74">74</th><td><i> * the queue. This is also an arbitrary choice (since 2.6.0).</i></td></tr>
<tr><th id="75">75</th><td><i> */</i></td></tr>
<tr><th id="76">76</th><td></td></tr>
<tr><th id="77">77</th><td><u>#define <dfn class="macro" id="_M/MSGMNI" data-ref="_M/MSGMNI">MSGMNI</dfn> 32000   /* &lt;= IPCMNI */     /* max # of msg queue identifiers */</u></td></tr>
<tr><th id="78">78</th><td><u>#define <dfn class="macro" id="_M/MSGMAX" data-ref="_M/MSGMAX">MSGMAX</dfn>  8192   /* &lt;= INT_MAX */   /* max size of message (bytes) */</u></td></tr>
<tr><th id="79">79</th><td><u>#define <dfn class="macro" id="_M/MSGMNB" data-ref="_M/MSGMNB">MSGMNB</dfn> 16384   /* &lt;= INT_MAX */   /* default max size of a message queue */</u></td></tr>
<tr><th id="80">80</th><td></td></tr>
<tr><th id="81">81</th><td><i>/* unused */</i></td></tr>
<tr><th id="82">82</th><td><u>#define <dfn class="macro" id="_M/MSGPOOL" data-ref="_M/MSGPOOL">MSGPOOL</dfn> (MSGMNI * MSGMNB / 1024) /* size in kbytes of message pool */</u></td></tr>
<tr><th id="83">83</th><td><u>#define <dfn class="macro" id="_M/MSGTQL" data-ref="_M/MSGTQL">MSGTQL</dfn>  MSGMNB            /* number of system message headers */</u></td></tr>
<tr><th id="84">84</th><td><u>#define <dfn class="macro" id="_M/MSGMAP" data-ref="_M/MSGMAP">MSGMAP</dfn>  MSGMNB            /* number of entries in message map */</u></td></tr>
<tr><th id="85">85</th><td><u>#define <dfn class="macro" id="_M/MSGSSZ" data-ref="_M/MSGSSZ">MSGSSZ</dfn>  16                /* message segment size */</u></td></tr>
<tr><th id="86">86</th><td><u>#define <dfn class="macro" id="_M/__MSGSEG" data-ref="_M/__MSGSEG">__MSGSEG</dfn> ((MSGPOOL * 1024) / MSGSSZ) /* max no. of segments */</u></td></tr>
<tr><th id="87">87</th><td><u>#define <dfn class="macro" id="_M/MSGSEG" data-ref="_M/MSGSEG">MSGSEG</dfn> (__MSGSEG &lt;= 0xffff ? __MSGSEG : 0xffff)</u></td></tr>
<tr><th id="88">88</th><td></td></tr>
<tr><th id="89">89</th><td></td></tr>
<tr><th id="90">90</th><td><u>#<span data-ppcond="2">endif</span> /* _UAPI_LINUX_MSG_H */</u></td></tr>
<tr><th id="91">91</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='../../../arch/x86/kernel/sys_x86_64.c.html'>linux-4.18.y/arch/x86/kernel/sys_x86_64.c</a><br/>Generated on <em>2018-Oct-01</em> from project linux-4.18.y revision <em>linux-4.18.y</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
