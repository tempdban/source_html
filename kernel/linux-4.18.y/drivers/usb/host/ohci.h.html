<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ohci.h source code [linux-4.18.y/drivers/usb/host/ohci.h] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="ed,ohci_driver_overrides,ohci_hcca,ohci_hcd,ohci_regs,ohci_rh_state,ohci_roothub_regs,td,urb_priv "/>
<link rel="stylesheet" href="../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'linux-4.18.y/drivers/usb/host/ohci.h'; var root_path = '../../../..'; var data_path = '../../../../../data';</script>
<script src='../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>linux-4.18.y</a>/<a href='../..'>drivers</a>/<a href='..'>usb</a>/<a href='./'>host</a>/<a href='ohci.h.html'>ohci.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>// SPDX-License-Identifier: GPL-1.0+</i></td></tr>
<tr><th id="2">2</th><td><i>/*</i></td></tr>
<tr><th id="3">3</th><td><i> * OHCI HCD (Host Controller Driver) for USB.</i></td></tr>
<tr><th id="4">4</th><td><i> *</i></td></tr>
<tr><th id="5">5</th><td><i> * (C) Copyright 1999 Roman Weissgaerber &lt;weissg@vienna.at&gt;</i></td></tr>
<tr><th id="6">6</th><td><i> * (C) Copyright 2000-2002 David Brownell &lt;dbrownell@users.sourceforge.net&gt;</i></td></tr>
<tr><th id="7">7</th><td><i> *</i></td></tr>
<tr><th id="8">8</th><td><i> * This file is licenced under the GPL.</i></td></tr>
<tr><th id="9">9</th><td><i> */</i></td></tr>
<tr><th id="10">10</th><td></td></tr>
<tr><th id="11">11</th><td><i>/*</i></td></tr>
<tr><th id="12">12</th><td><i> * __hc32 and __hc16 are "Host Controller" types, they may be equivalent to</i></td></tr>
<tr><th id="13">13</th><td><i> * __leXX (normally) or __beXX (given OHCI_BIG_ENDIAN), depending on the</i></td></tr>
<tr><th id="14">14</th><td><i> * host controller implementation.</i></td></tr>
<tr><th id="15">15</th><td><i> */</i></td></tr>
<tr><th id="16">16</th><td><b>typedef</b> <a class="typedef" href="../../../include/uapi/asm-generic/int-ll64.h.html#__u32" title='__u32' data-type='unsigned int' data-ref="__u32">__u32</a> <a class="macro" href="../../../include/uapi/linux/types.h.html#27" title="" data-ref="_M/__bitwise">__bitwise</a> <dfn class="typedef" id="__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</dfn>;</td></tr>
<tr><th id="17">17</th><td><b>typedef</b> <a class="typedef" href="../../../include/uapi/asm-generic/int-ll64.h.html#__u16" title='__u16' data-type='unsigned short' data-ref="__u16">__u16</a> <a class="macro" href="../../../include/uapi/linux/types.h.html#27" title="" data-ref="_M/__bitwise">__bitwise</a> <dfn class="typedef" id="__hc16" title='__hc16' data-type='__u16' data-ref="__hc16">__hc16</dfn>;</td></tr>
<tr><th id="18">18</th><td></td></tr>
<tr><th id="19">19</th><td><i>/*</i></td></tr>
<tr><th id="20">20</th><td><i> * OHCI Endpoint Descriptor (ED) ... holds TD queue</i></td></tr>
<tr><th id="21">21</th><td><i> * See OHCI spec, section 4.2</i></td></tr>
<tr><th id="22">22</th><td><i> *</i></td></tr>
<tr><th id="23">23</th><td><i> * This is a "Queue Head" for those transfers, which is why</i></td></tr>
<tr><th id="24">24</th><td><i> * both EHCI and UHCI call similar structures a "QH".</i></td></tr>
<tr><th id="25">25</th><td><i> */</i></td></tr>
<tr><th id="26">26</th><td><b>struct</b> <dfn class="type def" id="ed" title='ed' data-ref="ed">ed</dfn> {</td></tr>
<tr><th id="27">27</th><td>	<i>/* first fields are hardware-specified */</i></td></tr>
<tr><th id="28">28</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>			<dfn class="decl field" id="ed::hwINFO" title='ed::hwINFO' data-ref="ed::hwINFO">hwINFO</dfn>;      <i>/* endpoint config bitmap */</i></td></tr>
<tr><th id="29">29</th><td>	<i>/* info bits defined by hcd */</i></td></tr>
<tr><th id="30">30</th><td><u>#define <dfn class="macro" id="_M/ED_DEQUEUE" data-ref="_M/ED_DEQUEUE">ED_DEQUEUE</dfn>	(1 &lt;&lt; 27)</u></td></tr>
<tr><th id="31">31</th><td>	<i>/* info bits defined by the hardware */</i></td></tr>
<tr><th id="32">32</th><td><u>#define <dfn class="macro" id="_M/ED_ISO" data-ref="_M/ED_ISO">ED_ISO</dfn>		(1 &lt;&lt; 15)</u></td></tr>
<tr><th id="33">33</th><td><u>#define <dfn class="macro" id="_M/ED_SKIP" data-ref="_M/ED_SKIP">ED_SKIP</dfn>		(1 &lt;&lt; 14)</u></td></tr>
<tr><th id="34">34</th><td><u>#define <dfn class="macro" id="_M/ED_LOWSPEED" data-ref="_M/ED_LOWSPEED">ED_LOWSPEED</dfn>	(1 &lt;&lt; 13)</u></td></tr>
<tr><th id="35">35</th><td><u>#define <dfn class="macro" id="_M/ED_OUT" data-ref="_M/ED_OUT">ED_OUT</dfn>		(0x01 &lt;&lt; 11)</u></td></tr>
<tr><th id="36">36</th><td><u>#define <dfn class="macro" id="_M/ED_IN" data-ref="_M/ED_IN">ED_IN</dfn>		(0x02 &lt;&lt; 11)</u></td></tr>
<tr><th id="37">37</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>			<dfn class="decl field" id="ed::hwTailP" title='ed::hwTailP' data-ref="ed::hwTailP">hwTailP</dfn>;	<i>/* tail of TD list */</i></td></tr>
<tr><th id="38">38</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>			<dfn class="decl field" id="ed::hwHeadP" title='ed::hwHeadP' data-ref="ed::hwHeadP">hwHeadP</dfn>;	<i>/* head of TD list (hc r/w) */</i></td></tr>
<tr><th id="39">39</th><td><u>#define <dfn class="macro" id="_M/ED_C" data-ref="_M/ED_C">ED_C</dfn>		(0x02)			/* toggle carry */</u></td></tr>
<tr><th id="40">40</th><td><u>#define <dfn class="macro" id="_M/ED_H" data-ref="_M/ED_H">ED_H</dfn>		(0x01)			/* halted */</u></td></tr>
<tr><th id="41">41</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>			<dfn class="decl field" id="ed::hwNextED" title='ed::hwNextED' data-ref="ed::hwNextED">hwNextED</dfn>;	<i>/* next ED in list */</i></td></tr>
<tr><th id="42">42</th><td></td></tr>
<tr><th id="43">43</th><td>	<i>/* rest are purely for the driver's use */</i></td></tr>
<tr><th id="44">44</th><td>	<a class="typedef" href="../../../include/linux/types.h.html#dma_addr_t" title='dma_addr_t' data-type='u64' data-ref="dma_addr_t">dma_addr_t</a>		<dfn class="decl field" id="ed::dma" title='ed::dma' data-ref="ed::dma">dma</dfn>;		<i>/* addr of ED */</i></td></tr>
<tr><th id="45">45</th><td>	<b>struct</b> <a class="type" href="#td" title='td' data-ref="td">td</a>		*<dfn class="decl field" id="ed::dummy" title='ed::dummy' data-ref="ed::dummy">dummy</dfn>;		<i>/* next TD to activate */</i></td></tr>
<tr><th id="46">46</th><td></td></tr>
<tr><th id="47">47</th><td>	<i>/* host's view of schedule */</i></td></tr>
<tr><th id="48">48</th><td>	<b>struct</b> <a class="type" href="#ed" title='ed' data-ref="ed">ed</a>		*<dfn class="decl field" id="ed::ed_next" title='ed::ed_next' data-ref="ed::ed_next">ed_next</dfn>;	<i>/* on schedule or rm_list */</i></td></tr>
<tr><th id="49">49</th><td>	<b>struct</b> <a class="type" href="#ed" title='ed' data-ref="ed">ed</a>		*<dfn class="decl field" id="ed::ed_prev" title='ed::ed_prev' data-ref="ed::ed_prev">ed_prev</dfn>;	<i>/* for non-interrupt EDs */</i></td></tr>
<tr><th id="50">50</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/types.h.html#list_head" title='list_head' data-ref="list_head">list_head</a>	<dfn class="decl field" id="ed::td_list" title='ed::td_list' data-ref="ed::td_list">td_list</dfn>;	<i>/* "shadow list" of our TDs */</i></td></tr>
<tr><th id="51">51</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/types.h.html#list_head" title='list_head' data-ref="list_head">list_head</a>	<dfn class="decl field" id="ed::in_use_list" title='ed::in_use_list' data-ref="ed::in_use_list">in_use_list</dfn>;</td></tr>
<tr><th id="52">52</th><td></td></tr>
<tr><th id="53">53</th><td>	<i>/* create --&gt; IDLE --&gt; OPER --&gt; ... --&gt; IDLE --&gt; destroy</i></td></tr>
<tr><th id="54">54</th><td><i>	 * usually:  OPER --&gt; UNLINK --&gt; (IDLE | OPER) --&gt; ...</i></td></tr>
<tr><th id="55">55</th><td><i>	 */</i></td></tr>
<tr><th id="56">56</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='__u8' data-ref="u8">u8</a>			<dfn class="decl field" id="ed::state" title='ed::state' data-ref="ed::state">state</dfn>;		<i>/* ED_{IDLE,UNLINK,OPER} */</i></td></tr>
<tr><th id="57">57</th><td><u>#define <dfn class="macro" id="_M/ED_IDLE" data-ref="_M/ED_IDLE">ED_IDLE</dfn>		0x00		/* NOT linked to HC */</u></td></tr>
<tr><th id="58">58</th><td><u>#define <dfn class="macro" id="_M/ED_UNLINK" data-ref="_M/ED_UNLINK">ED_UNLINK</dfn>	0x01		/* being unlinked from hc */</u></td></tr>
<tr><th id="59">59</th><td><u>#define <dfn class="macro" id="_M/ED_OPER" data-ref="_M/ED_OPER">ED_OPER</dfn>		0x02		/* IS linked to hc */</u></td></tr>
<tr><th id="60">60</th><td></td></tr>
<tr><th id="61">61</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='__u8' data-ref="u8">u8</a>			<dfn class="decl field" id="ed::type" title='ed::type' data-ref="ed::type">type</dfn>;		<i>/* PIPE_{BULK,...} */</i></td></tr>
<tr><th id="62">62</th><td></td></tr>
<tr><th id="63">63</th><td>	<i>/* periodic scheduling params (for intr and iso) */</i></td></tr>
<tr><th id="64">64</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='__u8' data-ref="u8">u8</a>			<dfn class="decl field" id="ed::branch" title='ed::branch' data-ref="ed::branch">branch</dfn>;</td></tr>
<tr><th id="65">65</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a>			<dfn class="decl field" id="ed::interval" title='ed::interval' data-ref="ed::interval">interval</dfn>;</td></tr>
<tr><th id="66">66</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a>			<dfn class="decl field" id="ed::load" title='ed::load' data-ref="ed::load">load</dfn>;</td></tr>
<tr><th id="67">67</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a>			<dfn class="decl field" id="ed::last_iso" title='ed::last_iso' data-ref="ed::last_iso">last_iso</dfn>;	<i>/* iso only */</i></td></tr>
<tr><th id="68">68</th><td></td></tr>
<tr><th id="69">69</th><td>	<i>/* HC may see EDs on rm_list until next frame (frame_no == tick) */</i></td></tr>
<tr><th id="70">70</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a>			<dfn class="decl field" id="ed::tick" title='ed::tick' data-ref="ed::tick">tick</dfn>;</td></tr>
<tr><th id="71">71</th><td></td></tr>
<tr><th id="72">72</th><td>	<i>/* Detect TDs not added to the done queue */</i></td></tr>
<tr><th id="73">73</th><td>	<em>unsigned</em>		<dfn class="decl field" id="ed::takeback_wdh_cnt" title='ed::takeback_wdh_cnt' data-ref="ed::takeback_wdh_cnt">takeback_wdh_cnt</dfn>;</td></tr>
<tr><th id="74">74</th><td>	<b>struct</b> <a class="type" href="#td" title='td' data-ref="td">td</a>		*<dfn class="decl field" id="ed::pending_td" title='ed::pending_td' data-ref="ed::pending_td">pending_td</dfn>;</td></tr>
<tr><th id="75">75</th><td><u>#define	<dfn class="macro" id="_M/OKAY_TO_TAKEBACK" data-ref="_M/OKAY_TO_TAKEBACK">OKAY_TO_TAKEBACK</dfn>(ohci, ed)			\</u></td></tr>
<tr><th id="76">76</th><td><u>		((int) (ohci-&gt;wdh_cnt - ed-&gt;takeback_wdh_cnt) &gt;= 0)</u></td></tr>
<tr><th id="77">77</th><td></td></tr>
<tr><th id="78">78</th><td>} <b>__attribute__</b> ((aligned(<var>16</var>)));</td></tr>
<tr><th id="79">79</th><td></td></tr>
<tr><th id="80">80</th><td><u>#define <dfn class="macro" id="_M/ED_MASK" data-ref="_M/ED_MASK">ED_MASK</dfn>	((u32)~0x0f)		/* strip hw status in low addr bits */</u></td></tr>
<tr><th id="81">81</th><td></td></tr>
<tr><th id="82">82</th><td></td></tr>
<tr><th id="83">83</th><td><i>/*</i></td></tr>
<tr><th id="84">84</th><td><i> * OHCI Transfer Descriptor (TD) ... one per transfer segment</i></td></tr>
<tr><th id="85">85</th><td><i> * See OHCI spec, sections 4.3.1 (general = control/bulk/interrupt)</i></td></tr>
<tr><th id="86">86</th><td><i> * and 4.3.2 (iso)</i></td></tr>
<tr><th id="87">87</th><td><i> */</i></td></tr>
<tr><th id="88">88</th><td><b>struct</b> <dfn class="type def" id="td" title='td' data-ref="td">td</dfn> {</td></tr>
<tr><th id="89">89</th><td>	<i>/* first fields are hardware-specified */</i></td></tr>
<tr><th id="90">90</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>		<dfn class="decl field" id="td::hwINFO" title='td::hwINFO' data-ref="td::hwINFO">hwINFO</dfn>;		<i>/* transfer info bitmask */</i></td></tr>
<tr><th id="91">91</th><td></td></tr>
<tr><th id="92">92</th><td>	<i>/* hwINFO bits for both general and iso tds: */</i></td></tr>
<tr><th id="93">93</th><td><u>#define <dfn class="macro" id="_M/TD_CC" data-ref="_M/TD_CC">TD_CC</dfn>       0xf0000000			/* condition code */</u></td></tr>
<tr><th id="94">94</th><td><u>#define <dfn class="macro" id="_M/TD_CC_GET" data-ref="_M/TD_CC_GET">TD_CC_GET</dfn>(td_p) ((td_p &gt;&gt;28) &amp; 0x0f)</u></td></tr>
<tr><th id="95">95</th><td><i>//#define TD_CC_SET(td_p, cc) (td_p) = ((td_p) &amp; 0x0fffffff) | (((cc) &amp; 0x0f) &lt;&lt; 28)</i></td></tr>
<tr><th id="96">96</th><td><u>#define <dfn class="macro" id="_M/TD_DI" data-ref="_M/TD_DI">TD_DI</dfn>       0x00E00000			/* frames before interrupt */</u></td></tr>
<tr><th id="97">97</th><td><u>#define <dfn class="macro" id="_M/TD_DI_SET" data-ref="_M/TD_DI_SET">TD_DI_SET</dfn>(X) (((X) &amp; 0x07)&lt;&lt; 21)</u></td></tr>
<tr><th id="98">98</th><td>	<i>/* these two bits are available for definition/use by HCDs in both</i></td></tr>
<tr><th id="99">99</th><td><i>	 * general and iso tds ... others are available for only one type</i></td></tr>
<tr><th id="100">100</th><td><i>	 */</i></td></tr>
<tr><th id="101">101</th><td><u>#define <dfn class="macro" id="_M/TD_DONE" data-ref="_M/TD_DONE">TD_DONE</dfn>     0x00020000			/* retired to donelist */</u></td></tr>
<tr><th id="102">102</th><td><u>#define <dfn class="macro" id="_M/TD_ISO" data-ref="_M/TD_ISO">TD_ISO</dfn>      0x00010000			/* copy of ED_ISO */</u></td></tr>
<tr><th id="103">103</th><td></td></tr>
<tr><th id="104">104</th><td>	<i>/* hwINFO bits for general tds: */</i></td></tr>
<tr><th id="105">105</th><td><u>#define <dfn class="macro" id="_M/TD_EC" data-ref="_M/TD_EC">TD_EC</dfn>       0x0C000000			/* error count */</u></td></tr>
<tr><th id="106">106</th><td><u>#define <dfn class="macro" id="_M/TD_T" data-ref="_M/TD_T">TD_T</dfn>        0x03000000			/* data toggle state */</u></td></tr>
<tr><th id="107">107</th><td><u>#define <dfn class="macro" id="_M/TD_T_DATA0" data-ref="_M/TD_T_DATA0">TD_T_DATA0</dfn>  0x02000000				/* DATA0 */</u></td></tr>
<tr><th id="108">108</th><td><u>#define <dfn class="macro" id="_M/TD_T_DATA1" data-ref="_M/TD_T_DATA1">TD_T_DATA1</dfn>  0x03000000				/* DATA1 */</u></td></tr>
<tr><th id="109">109</th><td><u>#define <dfn class="macro" id="_M/TD_T_TOGGLE" data-ref="_M/TD_T_TOGGLE">TD_T_TOGGLE</dfn> 0x00000000				/* uses ED_C */</u></td></tr>
<tr><th id="110">110</th><td><u>#define <dfn class="macro" id="_M/TD_DP" data-ref="_M/TD_DP">TD_DP</dfn>       0x00180000			/* direction/pid */</u></td></tr>
<tr><th id="111">111</th><td><u>#define <dfn class="macro" id="_M/TD_DP_SETUP" data-ref="_M/TD_DP_SETUP">TD_DP_SETUP</dfn> 0x00000000			/* SETUP pid */</u></td></tr>
<tr><th id="112">112</th><td><u>#define <dfn class="macro" id="_M/TD_DP_IN" data-ref="_M/TD_DP_IN">TD_DP_IN</dfn>    0x00100000				/* IN pid */</u></td></tr>
<tr><th id="113">113</th><td><u>#define <dfn class="macro" id="_M/TD_DP_OUT" data-ref="_M/TD_DP_OUT">TD_DP_OUT</dfn>   0x00080000				/* OUT pid */</u></td></tr>
<tr><th id="114">114</th><td>							<i>/* 0x00180000 rsvd */</i></td></tr>
<tr><th id="115">115</th><td><u>#define <dfn class="macro" id="_M/TD_R" data-ref="_M/TD_R">TD_R</dfn>        0x00040000			/* round: short packets OK? */</u></td></tr>
<tr><th id="116">116</th><td></td></tr>
<tr><th id="117">117</th><td>	<i>/* (no hwINFO #defines yet for iso tds) */</i></td></tr>
<tr><th id="118">118</th><td></td></tr>
<tr><th id="119">119</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>		<dfn class="decl field" id="td::hwCBP" title='td::hwCBP' data-ref="td::hwCBP">hwCBP</dfn>;		<i>/* Current Buffer Pointer (or 0) */</i></td></tr>
<tr><th id="120">120</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>		<dfn class="decl field" id="td::hwNextTD" title='td::hwNextTD' data-ref="td::hwNextTD">hwNextTD</dfn>;	<i>/* Next TD Pointer */</i></td></tr>
<tr><th id="121">121</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>		<dfn class="decl field" id="td::hwBE" title='td::hwBE' data-ref="td::hwBE">hwBE</dfn>;		<i>/* Memory Buffer End Pointer */</i></td></tr>
<tr><th id="122">122</th><td></td></tr>
<tr><th id="123">123</th><td>	<i>/* PSW is only for ISO.  Only 1 PSW entry is used, but on</i></td></tr>
<tr><th id="124">124</th><td><i>	 * big-endian PPC hardware that's the second entry.</i></td></tr>
<tr><th id="125">125</th><td><i>	 */</i></td></tr>
<tr><th id="126">126</th><td><u>#define <dfn class="macro" id="_M/MAXPSW" data-ref="_M/MAXPSW">MAXPSW</dfn>	2</u></td></tr>
<tr><th id="127">127</th><td>	<a class="typedef" href="#__hc16" title='__hc16' data-type='__u16' data-ref="__hc16">__hc16</a>		<dfn class="decl field" id="td::hwPSW" title='td::hwPSW' data-ref="td::hwPSW">hwPSW</dfn> [<a class="macro" href="#126" title="2" data-ref="_M/MAXPSW">MAXPSW</a>];</td></tr>
<tr><th id="128">128</th><td></td></tr>
<tr><th id="129">129</th><td>	<i>/* rest are purely for the driver's use */</i></td></tr>
<tr><th id="130">130</th><td>	<a class="typedef" href="../../../include/uapi/asm-generic/int-ll64.h.html#__u8" title='__u8' data-type='unsigned char' data-ref="__u8">__u8</a>		<dfn class="decl field" id="td::index" title='td::index' data-ref="td::index">index</dfn>;</td></tr>
<tr><th id="131">131</th><td>	<b>struct</b> <a class="type" href="#ed" title='ed' data-ref="ed">ed</a>	*<dfn class="decl field" id="td::ed" title='td::ed' data-ref="td::ed">ed</dfn>;</td></tr>
<tr><th id="132">132</th><td>	<b>struct</b> <a class="type" href="#td" title='td' data-ref="td">td</a>	*<dfn class="decl field" id="td::td_hash" title='td::td_hash' data-ref="td::td_hash">td_hash</dfn>;	<i>/* dma--&gt;td hashtable */</i></td></tr>
<tr><th id="133">133</th><td>	<b>struct</b> <a class="type" href="#td" title='td' data-ref="td">td</a>	*<dfn class="decl field" id="td::next_dl_td" title='td::next_dl_td' data-ref="td::next_dl_td">next_dl_td</dfn>;</td></tr>
<tr><th id="134">134</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/usb.h.html#urb" title='urb' data-ref="urb">urb</a>	*<dfn class="decl field" id="td::urb" title='td::urb' data-ref="td::urb">urb</dfn>;</td></tr>
<tr><th id="135">135</th><td></td></tr>
<tr><th id="136">136</th><td>	<a class="typedef" href="../../../include/linux/types.h.html#dma_addr_t" title='dma_addr_t' data-type='u64' data-ref="dma_addr_t">dma_addr_t</a>	<dfn class="decl field" id="td::td_dma" title='td::td_dma' data-ref="td::td_dma">td_dma</dfn>;		<i>/* addr of this TD */</i></td></tr>
<tr><th id="137">137</th><td>	<a class="typedef" href="../../../include/linux/types.h.html#dma_addr_t" title='dma_addr_t' data-type='u64' data-ref="dma_addr_t">dma_addr_t</a>	<dfn class="decl field" id="td::data_dma" title='td::data_dma' data-ref="td::data_dma">data_dma</dfn>;	<i>/* addr of data it points to */</i></td></tr>
<tr><th id="138">138</th><td></td></tr>
<tr><th id="139">139</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/types.h.html#list_head" title='list_head' data-ref="list_head">list_head</a> <dfn class="decl field" id="td::td_list" title='td::td_list' data-ref="td::td_list">td_list</dfn>;	<i>/* "shadow list", TDs on same ED */</i></td></tr>
<tr><th id="140">140</th><td>} <b>__attribute__</b> ((aligned(<var>32</var>)));	<i>/* c/b/i need 16; only iso needs 32 */</i></td></tr>
<tr><th id="141">141</th><td></td></tr>
<tr><th id="142">142</th><td><u>#define <dfn class="macro" id="_M/TD_MASK" data-ref="_M/TD_MASK">TD_MASK</dfn>	((u32)~0x1f)		/* strip hw status in low addr bits */</u></td></tr>
<tr><th id="143">143</th><td></td></tr>
<tr><th id="144">144</th><td><i>/*</i></td></tr>
<tr><th id="145">145</th><td><i> * Hardware transfer status codes -- CC from td-&gt;hwINFO or td-&gt;hwPSW</i></td></tr>
<tr><th id="146">146</th><td><i> */</i></td></tr>
<tr><th id="147">147</th><td><u>#define <dfn class="macro" id="_M/TD_CC_NOERROR" data-ref="_M/TD_CC_NOERROR">TD_CC_NOERROR</dfn>      0x00</u></td></tr>
<tr><th id="148">148</th><td><u>#define <dfn class="macro" id="_M/TD_CC_CRC" data-ref="_M/TD_CC_CRC">TD_CC_CRC</dfn>          0x01</u></td></tr>
<tr><th id="149">149</th><td><u>#define <dfn class="macro" id="_M/TD_CC_BITSTUFFING" data-ref="_M/TD_CC_BITSTUFFING">TD_CC_BITSTUFFING</dfn>  0x02</u></td></tr>
<tr><th id="150">150</th><td><u>#define <dfn class="macro" id="_M/TD_CC_DATATOGGLEM" data-ref="_M/TD_CC_DATATOGGLEM">TD_CC_DATATOGGLEM</dfn>  0x03</u></td></tr>
<tr><th id="151">151</th><td><u>#define <dfn class="macro" id="_M/TD_CC_STALL" data-ref="_M/TD_CC_STALL">TD_CC_STALL</dfn>        0x04</u></td></tr>
<tr><th id="152">152</th><td><u>#define <dfn class="macro" id="_M/TD_DEVNOTRESP" data-ref="_M/TD_DEVNOTRESP">TD_DEVNOTRESP</dfn>      0x05</u></td></tr>
<tr><th id="153">153</th><td><u>#define <dfn class="macro" id="_M/TD_PIDCHECKFAIL" data-ref="_M/TD_PIDCHECKFAIL">TD_PIDCHECKFAIL</dfn>    0x06</u></td></tr>
<tr><th id="154">154</th><td><u>#define <dfn class="macro" id="_M/TD_UNEXPECTEDPID" data-ref="_M/TD_UNEXPECTEDPID">TD_UNEXPECTEDPID</dfn>   0x07</u></td></tr>
<tr><th id="155">155</th><td><u>#define <dfn class="macro" id="_M/TD_DATAOVERRUN" data-ref="_M/TD_DATAOVERRUN">TD_DATAOVERRUN</dfn>     0x08</u></td></tr>
<tr><th id="156">156</th><td><u>#define <dfn class="macro" id="_M/TD_DATAUNDERRUN" data-ref="_M/TD_DATAUNDERRUN">TD_DATAUNDERRUN</dfn>    0x09</u></td></tr>
<tr><th id="157">157</th><td>    <i>/* 0x0A, 0x0B reserved for hardware */</i></td></tr>
<tr><th id="158">158</th><td><u>#define <dfn class="macro" id="_M/TD_BUFFEROVERRUN" data-ref="_M/TD_BUFFEROVERRUN">TD_BUFFEROVERRUN</dfn>   0x0C</u></td></tr>
<tr><th id="159">159</th><td><u>#define <dfn class="macro" id="_M/TD_BUFFERUNDERRUN" data-ref="_M/TD_BUFFERUNDERRUN">TD_BUFFERUNDERRUN</dfn>  0x0D</u></td></tr>
<tr><th id="160">160</th><td>    <i>/* 0x0E, 0x0F reserved for HCD */</i></td></tr>
<tr><th id="161">161</th><td><u>#define <dfn class="macro" id="_M/TD_NOTACCESSED" data-ref="_M/TD_NOTACCESSED">TD_NOTACCESSED</dfn>     0x0F</u></td></tr>
<tr><th id="162">162</th><td></td></tr>
<tr><th id="163">163</th><td></td></tr>
<tr><th id="164">164</th><td><i>/* map OHCI TD status codes (CC) to errno values */</i></td></tr>
<tr><th id="165">165</th><td><em>static</em> <em>const</em> <em>int</em> <dfn class="decl def" id="cc_to_error" title='cc_to_error' data-ref="cc_to_error">cc_to_error</dfn> [<var>16</var>] = {</td></tr>
<tr><th id="166">166</th><td>	<i>/* No  Error  */</i>               <var>0</var>,</td></tr>
<tr><th id="167">167</th><td>	<i>/* CRC Error  */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno.h.html#67" title="84" data-ref="_M/EILSEQ">EILSEQ</a>,</td></tr>
<tr><th id="168">168</th><td>	<i>/* Bit Stuff  */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno.h.html#54" title="71" data-ref="_M/EPROTO">EPROTO</a>,</td></tr>
<tr><th id="169">169</th><td>	<i>/* Data Togg  */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno.h.html#67" title="84" data-ref="_M/EILSEQ">EILSEQ</a>,</td></tr>
<tr><th id="170">170</th><td>	<i>/* Stall      */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno-base.h.html#36" title="32" data-ref="_M/EPIPE">EPIPE</a>,</td></tr>
<tr><th id="171">171</th><td>	<i>/* DevNotResp */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno.h.html#45" title="62" data-ref="_M/ETIME">ETIME</a>,</td></tr>
<tr><th id="172">172</th><td>	<i>/* PIDCheck   */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno.h.html#54" title="71" data-ref="_M/EPROTO">EPROTO</a>,</td></tr>
<tr><th id="173">173</th><td>	<i>/* UnExpPID   */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno.h.html#54" title="71" data-ref="_M/EPROTO">EPROTO</a>,</td></tr>
<tr><th id="174">174</th><td>	<i>/* DataOver   */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno.h.html#58" title="75" data-ref="_M/EOVERFLOW">EOVERFLOW</a>,</td></tr>
<tr><th id="175">175</th><td>	<i>/* DataUnder  */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno.h.html#104" title="121" data-ref="_M/EREMOTEIO">EREMOTEIO</a>,</td></tr>
<tr><th id="176">176</th><td>	<i>/* (for hw)   */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno-base.h.html#9" title="5" data-ref="_M/EIO">EIO</a>,</td></tr>
<tr><th id="177">177</th><td>	<i>/* (for hw)   */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno-base.h.html#9" title="5" data-ref="_M/EIO">EIO</a>,</td></tr>
<tr><th id="178">178</th><td>	<i>/* BufferOver */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno.h.html#53" title="70" data-ref="_M/ECOMM">ECOMM</a>,</td></tr>
<tr><th id="179">179</th><td>	<i>/* BuffUnder  */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno.h.html#46" title="63" data-ref="_M/ENOSR">ENOSR</a>,</td></tr>
<tr><th id="180">180</th><td>	<i>/* (for HCD)  */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno.h.html#97" title="114" data-ref="_M/EALREADY">EALREADY</a>,</td></tr>
<tr><th id="181">181</th><td>	<i>/* (for HCD)  */</i>               -<a class="macro" href="../../../include/uapi/asm-generic/errno.h.html#97" title="114" data-ref="_M/EALREADY">EALREADY</a></td></tr>
<tr><th id="182">182</th><td>};</td></tr>
<tr><th id="183">183</th><td></td></tr>
<tr><th id="184">184</th><td></td></tr>
<tr><th id="185">185</th><td><i>/*</i></td></tr>
<tr><th id="186">186</th><td><i> * The HCCA (Host Controller Communications Area) is a 256 byte</i></td></tr>
<tr><th id="187">187</th><td><i> * structure defined section 4.4.1 of the OHCI spec. The HC is</i></td></tr>
<tr><th id="188">188</th><td><i> * told the base address of it.  It must be 256-byte aligned.</i></td></tr>
<tr><th id="189">189</th><td><i> */</i></td></tr>
<tr><th id="190">190</th><td><b>struct</b> <dfn class="type def" id="ohci_hcca" title='ohci_hcca' data-ref="ohci_hcca">ohci_hcca</dfn> {</td></tr>
<tr><th id="191">191</th><td><u>#define <dfn class="macro" id="_M/NUM_INTS" data-ref="_M/NUM_INTS">NUM_INTS</dfn> 32</u></td></tr>
<tr><th id="192">192</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_hcca::int_table" title='ohci_hcca::int_table' data-ref="ohci_hcca::int_table">int_table</dfn> [<a class="macro" href="#191" title="32" data-ref="_M/NUM_INTS">NUM_INTS</a>];	<i>/* periodic schedule */</i></td></tr>
<tr><th id="193">193</th><td></td></tr>
<tr><th id="194">194</th><td>	<i>/*</i></td></tr>
<tr><th id="195">195</th><td><i>	 * OHCI defines u16 frame_no, followed by u16 zero pad.</i></td></tr>
<tr><th id="196">196</th><td><i>	 * Since some processors can't do 16 bit bus accesses,</i></td></tr>
<tr><th id="197">197</th><td><i>	 * portable access must be a 32 bits wide.</i></td></tr>
<tr><th id="198">198</th><td><i>	 */</i></td></tr>
<tr><th id="199">199</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_hcca::frame_no" title='ohci_hcca::frame_no' data-ref="ohci_hcca::frame_no">frame_no</dfn>;		<i>/* current frame number */</i></td></tr>
<tr><th id="200">200</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_hcca::done_head" title='ohci_hcca::done_head' data-ref="ohci_hcca::done_head">done_head</dfn>;		<i>/* info returned for an interrupt */</i></td></tr>
<tr><th id="201">201</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='__u8' data-ref="u8">u8</a>	<dfn class="decl field" id="ohci_hcca::reserved_for_hc" title='ohci_hcca::reserved_for_hc' data-ref="ohci_hcca::reserved_for_hc">reserved_for_hc</dfn> [<var>116</var>];</td></tr>
<tr><th id="202">202</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u8" title='u8' data-type='__u8' data-ref="u8">u8</a>	<dfn class="decl field" id="ohci_hcca::what" title='ohci_hcca::what' data-ref="ohci_hcca::what">what</dfn> [<var>4</var>];		<i>/* spec only identifies 252 bytes :) */</i></td></tr>
<tr><th id="203">203</th><td>} <b>__attribute__</b> ((aligned(<var>256</var>)));</td></tr>
<tr><th id="204">204</th><td></td></tr>
<tr><th id="205">205</th><td><i>/*</i></td></tr>
<tr><th id="206">206</th><td><i> * This is the structure of the OHCI controller's memory mapped I/O region.</i></td></tr>
<tr><th id="207">207</th><td><i> * You must use readl() and writel() (in &lt;asm/io.h&gt;) to access these fields!!</i></td></tr>
<tr><th id="208">208</th><td><i> * Layout is in section 7 (and appendix B) of the spec.</i></td></tr>
<tr><th id="209">209</th><td><i> */</i></td></tr>
<tr><th id="210">210</th><td><b>struct</b> <dfn class="type def" id="ohci_regs" title='ohci_regs' data-ref="ohci_regs">ohci_regs</dfn> {</td></tr>
<tr><th id="211">211</th><td>	<i>/* control and status registers (section 7.1) */</i></td></tr>
<tr><th id="212">212</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::revision" title='ohci_regs::revision' data-ref="ohci_regs::revision">revision</dfn>;</td></tr>
<tr><th id="213">213</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::control" title='ohci_regs::control' data-ref="ohci_regs::control">control</dfn>;</td></tr>
<tr><th id="214">214</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::cmdstatus" title='ohci_regs::cmdstatus' data-ref="ohci_regs::cmdstatus">cmdstatus</dfn>;</td></tr>
<tr><th id="215">215</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::intrstatus" title='ohci_regs::intrstatus' data-ref="ohci_regs::intrstatus">intrstatus</dfn>;</td></tr>
<tr><th id="216">216</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::intrenable" title='ohci_regs::intrenable' data-ref="ohci_regs::intrenable">intrenable</dfn>;</td></tr>
<tr><th id="217">217</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::intrdisable" title='ohci_regs::intrdisable' data-ref="ohci_regs::intrdisable">intrdisable</dfn>;</td></tr>
<tr><th id="218">218</th><td></td></tr>
<tr><th id="219">219</th><td>	<i>/* memory pointers (section 7.2) */</i></td></tr>
<tr><th id="220">220</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::hcca" title='ohci_regs::hcca' data-ref="ohci_regs::hcca">hcca</dfn>;</td></tr>
<tr><th id="221">221</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::ed_periodcurrent" title='ohci_regs::ed_periodcurrent' data-ref="ohci_regs::ed_periodcurrent">ed_periodcurrent</dfn>;</td></tr>
<tr><th id="222">222</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::ed_controlhead" title='ohci_regs::ed_controlhead' data-ref="ohci_regs::ed_controlhead">ed_controlhead</dfn>;</td></tr>
<tr><th id="223">223</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::ed_controlcurrent" title='ohci_regs::ed_controlcurrent' data-ref="ohci_regs::ed_controlcurrent">ed_controlcurrent</dfn>;</td></tr>
<tr><th id="224">224</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::ed_bulkhead" title='ohci_regs::ed_bulkhead' data-ref="ohci_regs::ed_bulkhead">ed_bulkhead</dfn>;</td></tr>
<tr><th id="225">225</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::ed_bulkcurrent" title='ohci_regs::ed_bulkcurrent' data-ref="ohci_regs::ed_bulkcurrent">ed_bulkcurrent</dfn>;</td></tr>
<tr><th id="226">226</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::donehead" title='ohci_regs::donehead' data-ref="ohci_regs::donehead">donehead</dfn>;</td></tr>
<tr><th id="227">227</th><td></td></tr>
<tr><th id="228">228</th><td>	<i>/* frame counters (section 7.3) */</i></td></tr>
<tr><th id="229">229</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::fminterval" title='ohci_regs::fminterval' data-ref="ohci_regs::fminterval">fminterval</dfn>;</td></tr>
<tr><th id="230">230</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::fmremaining" title='ohci_regs::fmremaining' data-ref="ohci_regs::fmremaining">fmremaining</dfn>;</td></tr>
<tr><th id="231">231</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::fmnumber" title='ohci_regs::fmnumber' data-ref="ohci_regs::fmnumber">fmnumber</dfn>;</td></tr>
<tr><th id="232">232</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::periodicstart" title='ohci_regs::periodicstart' data-ref="ohci_regs::periodicstart">periodicstart</dfn>;</td></tr>
<tr><th id="233">233</th><td>	<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_regs::lsthresh" title='ohci_regs::lsthresh' data-ref="ohci_regs::lsthresh">lsthresh</dfn>;</td></tr>
<tr><th id="234">234</th><td></td></tr>
<tr><th id="235">235</th><td>	<i>/* Root hub ports (section 7.4) */</i></td></tr>
<tr><th id="236">236</th><td>	<b>struct</b>	<dfn class="type def" id="ohci_roothub_regs" title='ohci_roothub_regs' data-ref="ohci_roothub_regs"><a class="type" href="#ohci_roothub_regs" title='ohci_roothub_regs' data-ref="ohci_roothub_regs">ohci_roothub_regs</a></dfn> {</td></tr>
<tr><th id="237">237</th><td>		<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_roothub_regs::a" title='ohci_roothub_regs::a' data-ref="ohci_roothub_regs::a">a</dfn>;</td></tr>
<tr><th id="238">238</th><td>		<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_roothub_regs::b" title='ohci_roothub_regs::b' data-ref="ohci_roothub_regs::b">b</dfn>;</td></tr>
<tr><th id="239">239</th><td>		<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_roothub_regs::status" title='ohci_roothub_regs::status' data-ref="ohci_roothub_regs::status">status</dfn>;</td></tr>
<tr><th id="240">240</th><td><u>#define <dfn class="macro" id="_M/MAX_ROOT_PORTS" data-ref="_M/MAX_ROOT_PORTS">MAX_ROOT_PORTS</dfn>	15	/* maximum OHCI root hub ports (RH_A_NDP) */</u></td></tr>
<tr><th id="241">241</th><td>		<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>	<dfn class="decl field" id="ohci_roothub_regs::portstatus" title='ohci_roothub_regs::portstatus' data-ref="ohci_roothub_regs::portstatus">portstatus</dfn> [<a class="macro" href="#240" title="15" data-ref="_M/MAX_ROOT_PORTS">MAX_ROOT_PORTS</a>];</td></tr>
<tr><th id="242">242</th><td>	} <dfn class="decl field" id="ohci_regs::roothub" title='ohci_regs::roothub' data-ref="ohci_regs::roothub">roothub</dfn>;</td></tr>
<tr><th id="243">243</th><td></td></tr>
<tr><th id="244">244</th><td>	<i>/* and optional "legacy support" registers (appendix B) at 0x0100 */</i></td></tr>
<tr><th id="245">245</th><td></td></tr>
<tr><th id="246">246</th><td>} <b>__attribute__</b> ((aligned(<var>32</var>)));</td></tr>
<tr><th id="247">247</th><td></td></tr>
<tr><th id="248">248</th><td></td></tr>
<tr><th id="249">249</th><td><i>/* OHCI CONTROL AND STATUS REGISTER MASKS */</i></td></tr>
<tr><th id="250">250</th><td></td></tr>
<tr><th id="251">251</th><td><i>/*</i></td></tr>
<tr><th id="252">252</th><td><i> * HcControl (control) register masks</i></td></tr>
<tr><th id="253">253</th><td><i> */</i></td></tr>
<tr><th id="254">254</th><td><u>#define <dfn class="macro" id="_M/OHCI_CTRL_CBSR" data-ref="_M/OHCI_CTRL_CBSR">OHCI_CTRL_CBSR</dfn>	(3 &lt;&lt; 0)	/* control/bulk service ratio */</u></td></tr>
<tr><th id="255">255</th><td><u>#define <dfn class="macro" id="_M/OHCI_CTRL_PLE" data-ref="_M/OHCI_CTRL_PLE">OHCI_CTRL_PLE</dfn>	(1 &lt;&lt; 2)	/* periodic list enable */</u></td></tr>
<tr><th id="256">256</th><td><u>#define <dfn class="macro" id="_M/OHCI_CTRL_IE" data-ref="_M/OHCI_CTRL_IE">OHCI_CTRL_IE</dfn>	(1 &lt;&lt; 3)	/* isochronous enable */</u></td></tr>
<tr><th id="257">257</th><td><u>#define <dfn class="macro" id="_M/OHCI_CTRL_CLE" data-ref="_M/OHCI_CTRL_CLE">OHCI_CTRL_CLE</dfn>	(1 &lt;&lt; 4)	/* control list enable */</u></td></tr>
<tr><th id="258">258</th><td><u>#define <dfn class="macro" id="_M/OHCI_CTRL_BLE" data-ref="_M/OHCI_CTRL_BLE">OHCI_CTRL_BLE</dfn>	(1 &lt;&lt; 5)	/* bulk list enable */</u></td></tr>
<tr><th id="259">259</th><td><u>#define <dfn class="macro" id="_M/OHCI_CTRL_HCFS" data-ref="_M/OHCI_CTRL_HCFS">OHCI_CTRL_HCFS</dfn>	(3 &lt;&lt; 6)	/* host controller functional state */</u></td></tr>
<tr><th id="260">260</th><td><u>#define <dfn class="macro" id="_M/OHCI_CTRL_IR" data-ref="_M/OHCI_CTRL_IR">OHCI_CTRL_IR</dfn>	(1 &lt;&lt; 8)	/* interrupt routing */</u></td></tr>
<tr><th id="261">261</th><td><u>#define <dfn class="macro" id="_M/OHCI_CTRL_RWC" data-ref="_M/OHCI_CTRL_RWC">OHCI_CTRL_RWC</dfn>	(1 &lt;&lt; 9)	/* remote wakeup connected */</u></td></tr>
<tr><th id="262">262</th><td><u>#define <dfn class="macro" id="_M/OHCI_CTRL_RWE" data-ref="_M/OHCI_CTRL_RWE">OHCI_CTRL_RWE</dfn>	(1 &lt;&lt; 10)	/* remote wakeup enable */</u></td></tr>
<tr><th id="263">263</th><td></td></tr>
<tr><th id="264">264</th><td><i>/* pre-shifted values for HCFS */</i></td></tr>
<tr><th id="265">265</th><td><u>#	define <dfn class="macro" id="_M/OHCI_USB_RESET" data-ref="_M/OHCI_USB_RESET">OHCI_USB_RESET</dfn>	(0 &lt;&lt; 6)</u></td></tr>
<tr><th id="266">266</th><td><u>#	define <dfn class="macro" id="_M/OHCI_USB_RESUME" data-ref="_M/OHCI_USB_RESUME">OHCI_USB_RESUME</dfn>	(1 &lt;&lt; 6)</u></td></tr>
<tr><th id="267">267</th><td><u>#	define <dfn class="macro" id="_M/OHCI_USB_OPER" data-ref="_M/OHCI_USB_OPER">OHCI_USB_OPER</dfn>	(2 &lt;&lt; 6)</u></td></tr>
<tr><th id="268">268</th><td><u>#	define <dfn class="macro" id="_M/OHCI_USB_SUSPEND" data-ref="_M/OHCI_USB_SUSPEND">OHCI_USB_SUSPEND</dfn>	(3 &lt;&lt; 6)</u></td></tr>
<tr><th id="269">269</th><td></td></tr>
<tr><th id="270">270</th><td><i>/*</i></td></tr>
<tr><th id="271">271</th><td><i> * HcCommandStatus (cmdstatus) register masks</i></td></tr>
<tr><th id="272">272</th><td><i> */</i></td></tr>
<tr><th id="273">273</th><td><u>#define <dfn class="macro" id="_M/OHCI_HCR" data-ref="_M/OHCI_HCR">OHCI_HCR</dfn>	(1 &lt;&lt; 0)	/* host controller reset */</u></td></tr>
<tr><th id="274">274</th><td><u>#define <dfn class="macro" id="_M/OHCI_CLF" data-ref="_M/OHCI_CLF">OHCI_CLF</dfn>	(1 &lt;&lt; 1)	/* control list filled */</u></td></tr>
<tr><th id="275">275</th><td><u>#define <dfn class="macro" id="_M/OHCI_BLF" data-ref="_M/OHCI_BLF">OHCI_BLF</dfn>	(1 &lt;&lt; 2)	/* bulk list filled */</u></td></tr>
<tr><th id="276">276</th><td><u>#define <dfn class="macro" id="_M/OHCI_OCR" data-ref="_M/OHCI_OCR">OHCI_OCR</dfn>	(1 &lt;&lt; 3)	/* ownership change request */</u></td></tr>
<tr><th id="277">277</th><td><u>#define <dfn class="macro" id="_M/OHCI_SOC" data-ref="_M/OHCI_SOC">OHCI_SOC</dfn>	(3 &lt;&lt; 16)	/* scheduling overrun count */</u></td></tr>
<tr><th id="278">278</th><td></td></tr>
<tr><th id="279">279</th><td><i>/*</i></td></tr>
<tr><th id="280">280</th><td><i> * masks used with interrupt registers:</i></td></tr>
<tr><th id="281">281</th><td><i> * HcInterruptStatus (intrstatus)</i></td></tr>
<tr><th id="282">282</th><td><i> * HcInterruptEnable (intrenable)</i></td></tr>
<tr><th id="283">283</th><td><i> * HcInterruptDisable (intrdisable)</i></td></tr>
<tr><th id="284">284</th><td><i> */</i></td></tr>
<tr><th id="285">285</th><td><u>#define <dfn class="macro" id="_M/OHCI_INTR_SO" data-ref="_M/OHCI_INTR_SO">OHCI_INTR_SO</dfn>	(1 &lt;&lt; 0)	/* scheduling overrun */</u></td></tr>
<tr><th id="286">286</th><td><u>#define <dfn class="macro" id="_M/OHCI_INTR_WDH" data-ref="_M/OHCI_INTR_WDH">OHCI_INTR_WDH</dfn>	(1 &lt;&lt; 1)	/* writeback of done_head */</u></td></tr>
<tr><th id="287">287</th><td><u>#define <dfn class="macro" id="_M/OHCI_INTR_SF" data-ref="_M/OHCI_INTR_SF">OHCI_INTR_SF</dfn>	(1 &lt;&lt; 2)	/* start frame */</u></td></tr>
<tr><th id="288">288</th><td><u>#define <dfn class="macro" id="_M/OHCI_INTR_RD" data-ref="_M/OHCI_INTR_RD">OHCI_INTR_RD</dfn>	(1 &lt;&lt; 3)	/* resume detect */</u></td></tr>
<tr><th id="289">289</th><td><u>#define <dfn class="macro" id="_M/OHCI_INTR_UE" data-ref="_M/OHCI_INTR_UE">OHCI_INTR_UE</dfn>	(1 &lt;&lt; 4)	/* unrecoverable error */</u></td></tr>
<tr><th id="290">290</th><td><u>#define <dfn class="macro" id="_M/OHCI_INTR_FNO" data-ref="_M/OHCI_INTR_FNO">OHCI_INTR_FNO</dfn>	(1 &lt;&lt; 5)	/* frame number overflow */</u></td></tr>
<tr><th id="291">291</th><td><u>#define <dfn class="macro" id="_M/OHCI_INTR_RHSC" data-ref="_M/OHCI_INTR_RHSC">OHCI_INTR_RHSC</dfn>	(1 &lt;&lt; 6)	/* root hub status change */</u></td></tr>
<tr><th id="292">292</th><td><u>#define <dfn class="macro" id="_M/OHCI_INTR_OC" data-ref="_M/OHCI_INTR_OC">OHCI_INTR_OC</dfn>	(1 &lt;&lt; 30)	/* ownership change */</u></td></tr>
<tr><th id="293">293</th><td><u>#define <dfn class="macro" id="_M/OHCI_INTR_MIE" data-ref="_M/OHCI_INTR_MIE">OHCI_INTR_MIE</dfn>	(1 &lt;&lt; 31)	/* master interrupt enable */</u></td></tr>
<tr><th id="294">294</th><td></td></tr>
<tr><th id="295">295</th><td></td></tr>
<tr><th id="296">296</th><td><i>/* OHCI ROOT HUB REGISTER MASKS */</i></td></tr>
<tr><th id="297">297</th><td></td></tr>
<tr><th id="298">298</th><td><i>/* roothub.portstatus [i] bits */</i></td></tr>
<tr><th id="299">299</th><td><u>#define <dfn class="macro" id="_M/RH_PS_CCS" data-ref="_M/RH_PS_CCS">RH_PS_CCS</dfn>            0x00000001		/* current connect status */</u></td></tr>
<tr><th id="300">300</th><td><u>#define <dfn class="macro" id="_M/RH_PS_PES" data-ref="_M/RH_PS_PES">RH_PS_PES</dfn>            0x00000002		/* port enable status*/</u></td></tr>
<tr><th id="301">301</th><td><u>#define <dfn class="macro" id="_M/RH_PS_PSS" data-ref="_M/RH_PS_PSS">RH_PS_PSS</dfn>            0x00000004		/* port suspend status */</u></td></tr>
<tr><th id="302">302</th><td><u>#define <dfn class="macro" id="_M/RH_PS_POCI" data-ref="_M/RH_PS_POCI">RH_PS_POCI</dfn>           0x00000008		/* port over current indicator */</u></td></tr>
<tr><th id="303">303</th><td><u>#define <dfn class="macro" id="_M/RH_PS_PRS" data-ref="_M/RH_PS_PRS">RH_PS_PRS</dfn>            0x00000010		/* port reset status */</u></td></tr>
<tr><th id="304">304</th><td><u>#define <dfn class="macro" id="_M/RH_PS_PPS" data-ref="_M/RH_PS_PPS">RH_PS_PPS</dfn>            0x00000100		/* port power status */</u></td></tr>
<tr><th id="305">305</th><td><u>#define <dfn class="macro" id="_M/RH_PS_LSDA" data-ref="_M/RH_PS_LSDA">RH_PS_LSDA</dfn>           0x00000200		/* low speed device attached */</u></td></tr>
<tr><th id="306">306</th><td><u>#define <dfn class="macro" id="_M/RH_PS_CSC" data-ref="_M/RH_PS_CSC">RH_PS_CSC</dfn>            0x00010000		/* connect status change */</u></td></tr>
<tr><th id="307">307</th><td><u>#define <dfn class="macro" id="_M/RH_PS_PESC" data-ref="_M/RH_PS_PESC">RH_PS_PESC</dfn>           0x00020000		/* port enable status change */</u></td></tr>
<tr><th id="308">308</th><td><u>#define <dfn class="macro" id="_M/RH_PS_PSSC" data-ref="_M/RH_PS_PSSC">RH_PS_PSSC</dfn>           0x00040000		/* port suspend status change */</u></td></tr>
<tr><th id="309">309</th><td><u>#define <dfn class="macro" id="_M/RH_PS_OCIC" data-ref="_M/RH_PS_OCIC">RH_PS_OCIC</dfn>           0x00080000		/* over current indicator change */</u></td></tr>
<tr><th id="310">310</th><td><u>#define <dfn class="macro" id="_M/RH_PS_PRSC" data-ref="_M/RH_PS_PRSC">RH_PS_PRSC</dfn>           0x00100000		/* port reset status change */</u></td></tr>
<tr><th id="311">311</th><td></td></tr>
<tr><th id="312">312</th><td><i>/* roothub.status bits */</i></td></tr>
<tr><th id="313">313</th><td><u>#define <dfn class="macro" id="_M/RH_HS_LPS" data-ref="_M/RH_HS_LPS">RH_HS_LPS</dfn>	     0x00000001		/* local power status */</u></td></tr>
<tr><th id="314">314</th><td><u>#define <dfn class="macro" id="_M/RH_HS_OCI" data-ref="_M/RH_HS_OCI">RH_HS_OCI</dfn>	     0x00000002		/* over current indicator */</u></td></tr>
<tr><th id="315">315</th><td><u>#define <dfn class="macro" id="_M/RH_HS_DRWE" data-ref="_M/RH_HS_DRWE">RH_HS_DRWE</dfn>	     0x00008000		/* device remote wakeup enable */</u></td></tr>
<tr><th id="316">316</th><td><u>#define <dfn class="macro" id="_M/RH_HS_LPSC" data-ref="_M/RH_HS_LPSC">RH_HS_LPSC</dfn>	     0x00010000		/* local power status change */</u></td></tr>
<tr><th id="317">317</th><td><u>#define <dfn class="macro" id="_M/RH_HS_OCIC" data-ref="_M/RH_HS_OCIC">RH_HS_OCIC</dfn>	     0x00020000		/* over current indicator change */</u></td></tr>
<tr><th id="318">318</th><td><u>#define <dfn class="macro" id="_M/RH_HS_CRWE" data-ref="_M/RH_HS_CRWE">RH_HS_CRWE</dfn>	     0x80000000		/* clear remote wakeup enable */</u></td></tr>
<tr><th id="319">319</th><td></td></tr>
<tr><th id="320">320</th><td><i>/* roothub.b masks */</i></td></tr>
<tr><th id="321">321</th><td><u>#define <dfn class="macro" id="_M/RH_B_DR" data-ref="_M/RH_B_DR">RH_B_DR</dfn>		0x0000ffff		/* device removable flags */</u></td></tr>
<tr><th id="322">322</th><td><u>#define <dfn class="macro" id="_M/RH_B_PPCM" data-ref="_M/RH_B_PPCM">RH_B_PPCM</dfn>	0xffff0000		/* port power control mask */</u></td></tr>
<tr><th id="323">323</th><td></td></tr>
<tr><th id="324">324</th><td><i>/* roothub.a masks */</i></td></tr>
<tr><th id="325">325</th><td><u>#define	<dfn class="macro" id="_M/RH_A_NDP" data-ref="_M/RH_A_NDP">RH_A_NDP</dfn>	(0xff &lt;&lt; 0)		/* number of downstream ports */</u></td></tr>
<tr><th id="326">326</th><td><u>#define	<dfn class="macro" id="_M/RH_A_PSM" data-ref="_M/RH_A_PSM">RH_A_PSM</dfn>	(1 &lt;&lt; 8)		/* power switching mode */</u></td></tr>
<tr><th id="327">327</th><td><u>#define	<dfn class="macro" id="_M/RH_A_NPS" data-ref="_M/RH_A_NPS">RH_A_NPS</dfn>	(1 &lt;&lt; 9)		/* no power switching */</u></td></tr>
<tr><th id="328">328</th><td><u>#define	<dfn class="macro" id="_M/RH_A_DT" data-ref="_M/RH_A_DT">RH_A_DT</dfn>		(1 &lt;&lt; 10)		/* device type (mbz) */</u></td></tr>
<tr><th id="329">329</th><td><u>#define	<dfn class="macro" id="_M/RH_A_OCPM" data-ref="_M/RH_A_OCPM">RH_A_OCPM</dfn>	(1 &lt;&lt; 11)		/* over current protection mode */</u></td></tr>
<tr><th id="330">330</th><td><u>#define	<dfn class="macro" id="_M/RH_A_NOCP" data-ref="_M/RH_A_NOCP">RH_A_NOCP</dfn>	(1 &lt;&lt; 12)		/* no over current protection */</u></td></tr>
<tr><th id="331">331</th><td><u>#define	<dfn class="macro" id="_M/RH_A_POTPGT" data-ref="_M/RH_A_POTPGT">RH_A_POTPGT</dfn>	(0xff &lt;&lt; 24)		/* power on to power good time */</u></td></tr>
<tr><th id="332">332</th><td></td></tr>
<tr><th id="333">333</th><td></td></tr>
<tr><th id="334">334</th><td><i>/* hcd-private per-urb state */</i></td></tr>
<tr><th id="335">335</th><td><b>typedef</b> <b>struct</b> <dfn class="type def" id="urb_priv" title='urb_priv' data-ref="urb_priv"><a class="type" href="#urb_priv" title='urb_priv' data-ref="urb_priv">urb_priv</a></dfn> {</td></tr>
<tr><th id="336">336</th><td>	<b>struct</b> <a class="type" href="#ed" title='ed' data-ref="ed">ed</a>		*<dfn class="decl field" id="urb_priv::ed" title='urb_priv::ed' data-ref="urb_priv::ed">ed</dfn>;</td></tr>
<tr><th id="337">337</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a>			<dfn class="decl field" id="urb_priv::length" title='urb_priv::length' data-ref="urb_priv::length">length</dfn>;		<i>// # tds in this request</i></td></tr>
<tr><th id="338">338</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a>			<dfn class="decl field" id="urb_priv::td_cnt" title='urb_priv::td_cnt' data-ref="urb_priv::td_cnt">td_cnt</dfn>;		<i>// tds already serviced</i></td></tr>
<tr><th id="339">339</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/types.h.html#list_head" title='list_head' data-ref="list_head">list_head</a>	<dfn class="decl field" id="urb_priv::pending" title='urb_priv::pending' data-ref="urb_priv::pending">pending</dfn>;</td></tr>
<tr><th id="340">340</th><td>	<b>struct</b> <a class="type" href="#td" title='td' data-ref="td">td</a>		*<dfn class="decl field" id="urb_priv::td" title='urb_priv::td' data-ref="urb_priv::td">td</dfn> [<var>0</var>];	<i>// all TDs in this request</i></td></tr>
<tr><th id="341">341</th><td></td></tr>
<tr><th id="342">342</th><td>} <dfn class="typedef" id="urb_priv_t" title='urb_priv_t' data-type='struct urb_priv' data-ref="urb_priv_t">urb_priv_t</dfn>;</td></tr>
<tr><th id="343">343</th><td></td></tr>
<tr><th id="344">344</th><td><u>#define <dfn class="macro" id="_M/TD_HASH_SIZE" data-ref="_M/TD_HASH_SIZE">TD_HASH_SIZE</dfn>    64    /* power'o'two */</u></td></tr>
<tr><th id="345">345</th><td><i>// sizeof (struct td) ~= 64 == 2^6 ...</i></td></tr>
<tr><th id="346">346</th><td><u>#define <dfn class="macro" id="_M/TD_HASH_FUNC" data-ref="_M/TD_HASH_FUNC">TD_HASH_FUNC</dfn>(td_dma) ((td_dma ^ (td_dma &gt;&gt; 6)) % TD_HASH_SIZE)</u></td></tr>
<tr><th id="347">347</th><td></td></tr>
<tr><th id="348">348</th><td></td></tr>
<tr><th id="349">349</th><td><i>/*</i></td></tr>
<tr><th id="350">350</th><td><i> * This is the full ohci controller description</i></td></tr>
<tr><th id="351">351</th><td><i> *</i></td></tr>
<tr><th id="352">352</th><td><i> * Note how the "proper" USB information is just</i></td></tr>
<tr><th id="353">353</th><td><i> * a subset of what the full implementation needs. (Linus)</i></td></tr>
<tr><th id="354">354</th><td><i> */</i></td></tr>
<tr><th id="355">355</th><td></td></tr>
<tr><th id="356">356</th><td><b>enum</b> <dfn class="type def" id="ohci_rh_state" title='ohci_rh_state' data-ref="ohci_rh_state">ohci_rh_state</dfn> {</td></tr>
<tr><th id="357">357</th><td>	<dfn class="enum" id="OHCI_RH_HALTED" title='OHCI_RH_HALTED' data-ref="OHCI_RH_HALTED">OHCI_RH_HALTED</dfn>,</td></tr>
<tr><th id="358">358</th><td>	<dfn class="enum" id="OHCI_RH_SUSPENDED" title='OHCI_RH_SUSPENDED' data-ref="OHCI_RH_SUSPENDED">OHCI_RH_SUSPENDED</dfn>,</td></tr>
<tr><th id="359">359</th><td>	<dfn class="enum" id="OHCI_RH_RUNNING" title='OHCI_RH_RUNNING' data-ref="OHCI_RH_RUNNING">OHCI_RH_RUNNING</dfn></td></tr>
<tr><th id="360">360</th><td>};</td></tr>
<tr><th id="361">361</th><td></td></tr>
<tr><th id="362">362</th><td><b>struct</b> <dfn class="type def" id="ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</dfn> {</td></tr>
<tr><th id="363">363</th><td>	<a class="typedef" href="../../../include/linux/spinlock_types.h.html#spinlock_t" title='spinlock_t' data-type='struct spinlock' data-ref="spinlock_t">spinlock_t</a>		<dfn class="decl field" id="ohci_hcd::lock" title='ohci_hcd::lock' data-ref="ohci_hcd::lock">lock</dfn>;</td></tr>
<tr><th id="364">364</th><td></td></tr>
<tr><th id="365">365</th><td>	<i>/*</i></td></tr>
<tr><th id="366">366</th><td><i>	 * I/O memory used to communicate with the HC (dma-consistent)</i></td></tr>
<tr><th id="367">367</th><td><i>	 */</i></td></tr>
<tr><th id="368">368</th><td>	<b>struct</b> <a class="type" href="#ohci_regs" title='ohci_regs' data-ref="ohci_regs">ohci_regs</a> <a class="macro" href="../../../include/linux/compiler_types.h.html#35" title="" data-ref="_M/__iomem">__iomem</a> *<dfn class="decl field" id="ohci_hcd::regs" title='ohci_hcd::regs' data-ref="ohci_hcd::regs">regs</dfn>;</td></tr>
<tr><th id="369">369</th><td></td></tr>
<tr><th id="370">370</th><td>	<i>/*</i></td></tr>
<tr><th id="371">371</th><td><i>	 * main memory used to communicate with the HC (dma-consistent).</i></td></tr>
<tr><th id="372">372</th><td><i>	 * hcd adds to schedule for a live hc any time, but removals finish</i></td></tr>
<tr><th id="373">373</th><td><i>	 * only at the start of the next frame.</i></td></tr>
<tr><th id="374">374</th><td><i>	 */</i></td></tr>
<tr><th id="375">375</th><td>	<b>struct</b> <a class="type" href="#ohci_hcca" title='ohci_hcca' data-ref="ohci_hcca">ohci_hcca</a>	*<dfn class="decl field" id="ohci_hcd::hcca" title='ohci_hcd::hcca' data-ref="ohci_hcd::hcca">hcca</dfn>;</td></tr>
<tr><th id="376">376</th><td>	<a class="typedef" href="../../../include/linux/types.h.html#dma_addr_t" title='dma_addr_t' data-type='u64' data-ref="dma_addr_t">dma_addr_t</a>		<dfn class="decl field" id="ohci_hcd::hcca_dma" title='ohci_hcd::hcca_dma' data-ref="ohci_hcd::hcca_dma">hcca_dma</dfn>;</td></tr>
<tr><th id="377">377</th><td></td></tr>
<tr><th id="378">378</th><td>	<b>struct</b> <a class="type" href="#ed" title='ed' data-ref="ed">ed</a>		*<dfn class="decl field" id="ohci_hcd::ed_rm_list" title='ohci_hcd::ed_rm_list' data-ref="ohci_hcd::ed_rm_list">ed_rm_list</dfn>;		<i>/* to be removed */</i></td></tr>
<tr><th id="379">379</th><td></td></tr>
<tr><th id="380">380</th><td>	<b>struct</b> <a class="type" href="#ed" title='ed' data-ref="ed">ed</a>		*<dfn class="decl field" id="ohci_hcd::ed_bulktail" title='ohci_hcd::ed_bulktail' data-ref="ohci_hcd::ed_bulktail">ed_bulktail</dfn>;		<i>/* last in bulk list */</i></td></tr>
<tr><th id="381">381</th><td>	<b>struct</b> <a class="type" href="#ed" title='ed' data-ref="ed">ed</a>		*<dfn class="decl field" id="ohci_hcd::ed_controltail" title='ohci_hcd::ed_controltail' data-ref="ohci_hcd::ed_controltail">ed_controltail</dfn>;	<i>/* last in ctrl list */</i></td></tr>
<tr><th id="382">382</th><td>	<b>struct</b> <a class="type" href="#ed" title='ed' data-ref="ed">ed</a>		*<dfn class="decl field" id="ohci_hcd::periodic" title='ohci_hcd::periodic' data-ref="ohci_hcd::periodic">periodic</dfn> [<a class="macro" href="#191" title="32" data-ref="_M/NUM_INTS">NUM_INTS</a>];	<i>/* shadow int_table */</i></td></tr>
<tr><th id="383">383</th><td></td></tr>
<tr><th id="384">384</th><td>	<em>void</em> (*<dfn class="decl field" id="ohci_hcd::start_hnp" title='ohci_hcd::start_hnp' data-ref="ohci_hcd::start_hnp">start_hnp</dfn>)(<b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col1 decl" id="1ohci" title='ohci' data-type='struct ohci_hcd *' data-ref="1ohci">ohci</dfn>);</td></tr>
<tr><th id="385">385</th><td></td></tr>
<tr><th id="386">386</th><td>	<i>/*</i></td></tr>
<tr><th id="387">387</th><td><i>	 * memory management for queue data structures</i></td></tr>
<tr><th id="388">388</th><td><i>	 */</i></td></tr>
<tr><th id="389">389</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/dmapool.h.html#dma_pool" title='dma_pool' data-ref="dma_pool">dma_pool</a>		*<dfn class="decl field" id="ohci_hcd::td_cache" title='ohci_hcd::td_cache' data-ref="ohci_hcd::td_cache">td_cache</dfn>;</td></tr>
<tr><th id="390">390</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/dmapool.h.html#dma_pool" title='dma_pool' data-ref="dma_pool">dma_pool</a>		*<dfn class="decl field" id="ohci_hcd::ed_cache" title='ohci_hcd::ed_cache' data-ref="ohci_hcd::ed_cache">ed_cache</dfn>;</td></tr>
<tr><th id="391">391</th><td>	<b>struct</b> <a class="type" href="#td" title='td' data-ref="td">td</a>		*<dfn class="decl field" id="ohci_hcd::td_hash" title='ohci_hcd::td_hash' data-ref="ohci_hcd::td_hash">td_hash</dfn> [<a class="macro" href="#344" title="64" data-ref="_M/TD_HASH_SIZE">TD_HASH_SIZE</a>];</td></tr>
<tr><th id="392">392</th><td>	<b>struct</b> <a class="type" href="#td" title='td' data-ref="td">td</a>		*<dfn class="decl field" id="ohci_hcd::dl_start" title='ohci_hcd::dl_start' data-ref="ohci_hcd::dl_start">dl_start</dfn>, *<dfn class="decl field" id="ohci_hcd::dl_end" title='ohci_hcd::dl_end' data-ref="ohci_hcd::dl_end">dl_end</dfn>;	<i>/* the done list */</i></td></tr>
<tr><th id="393">393</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/types.h.html#list_head" title='list_head' data-ref="list_head">list_head</a>	<dfn class="decl field" id="ohci_hcd::pending" title='ohci_hcd::pending' data-ref="ohci_hcd::pending">pending</dfn>;</td></tr>
<tr><th id="394">394</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/types.h.html#list_head" title='list_head' data-ref="list_head">list_head</a>	<dfn class="decl field" id="ohci_hcd::eds_in_use" title='ohci_hcd::eds_in_use' data-ref="ohci_hcd::eds_in_use">eds_in_use</dfn>;	<i>/* all EDs with at least 1 TD */</i></td></tr>
<tr><th id="395">395</th><td></td></tr>
<tr><th id="396">396</th><td>	<i>/*</i></td></tr>
<tr><th id="397">397</th><td><i>	 * driver state</i></td></tr>
<tr><th id="398">398</th><td><i>	 */</i></td></tr>
<tr><th id="399">399</th><td>	<b>enum</b> <a class="type" href="#ohci_rh_state" title='ohci_rh_state' data-ref="ohci_rh_state">ohci_rh_state</a>	<dfn class="decl field" id="ohci_hcd::rh_state" title='ohci_hcd::rh_state' data-ref="ohci_hcd::rh_state">rh_state</dfn>;</td></tr>
<tr><th id="400">400</th><td>	<em>int</em>			<dfn class="decl field" id="ohci_hcd::num_ports" title='ohci_hcd::num_ports' data-ref="ohci_hcd::num_ports">num_ports</dfn>;</td></tr>
<tr><th id="401">401</th><td>	<em>int</em>			<dfn class="decl field" id="ohci_hcd::load" title='ohci_hcd::load' data-ref="ohci_hcd::load">load</dfn> [<a class="macro" href="#191" title="32" data-ref="_M/NUM_INTS">NUM_INTS</a>];</td></tr>
<tr><th id="402">402</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a>			<dfn class="decl field" id="ohci_hcd::hc_control" title='ohci_hcd::hc_control' data-ref="ohci_hcd::hc_control">hc_control</dfn>;	<i>/* copy of hc control reg */</i></td></tr>
<tr><th id="403">403</th><td>	<em>unsigned</em> <em>long</em>		<dfn class="decl field" id="ohci_hcd::next_statechange" title='ohci_hcd::next_statechange' data-ref="ohci_hcd::next_statechange">next_statechange</dfn>;	<i>/* suspend/resume */</i></td></tr>
<tr><th id="404">404</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a>			<dfn class="decl field" id="ohci_hcd::fminterval" title='ohci_hcd::fminterval' data-ref="ohci_hcd::fminterval">fminterval</dfn>;		<i>/* saved register */</i></td></tr>
<tr><th id="405">405</th><td>	<em>unsigned</em>		<dfn class="decl field" id="ohci_hcd::autostop" title='ohci_hcd::autostop' data-ref="ohci_hcd::autostop">autostop</dfn>:<var>1</var>;	<i>/* rh auto stopping/stopped */</i></td></tr>
<tr><th id="406">406</th><td>	<em>unsigned</em>		<dfn class="decl field" id="ohci_hcd::working" title='ohci_hcd::working' data-ref="ohci_hcd::working">working</dfn>:<var>1</var>;</td></tr>
<tr><th id="407">407</th><td>	<em>unsigned</em>		<dfn class="decl field" id="ohci_hcd::restart_work" title='ohci_hcd::restart_work' data-ref="ohci_hcd::restart_work">restart_work</dfn>:<var>1</var>;</td></tr>
<tr><th id="408">408</th><td></td></tr>
<tr><th id="409">409</th><td>	<em>unsigned</em> <em>long</em>		<dfn class="decl field" id="ohci_hcd::flags" title='ohci_hcd::flags' data-ref="ohci_hcd::flags">flags</dfn>;		<i>/* for HC bugs */</i></td></tr>
<tr><th id="410">410</th><td><u>#define	<dfn class="macro" id="_M/OHCI_QUIRK_AMD756" data-ref="_M/OHCI_QUIRK_AMD756">OHCI_QUIRK_AMD756</dfn>	0x01			/* erratum #4 */</u></td></tr>
<tr><th id="411">411</th><td><u>#define	<dfn class="macro" id="_M/OHCI_QUIRK_SUPERIO" data-ref="_M/OHCI_QUIRK_SUPERIO">OHCI_QUIRK_SUPERIO</dfn>	0x02			/* natsemi */</u></td></tr>
<tr><th id="412">412</th><td><u>#define	<dfn class="macro" id="_M/OHCI_QUIRK_INITRESET" data-ref="_M/OHCI_QUIRK_INITRESET">OHCI_QUIRK_INITRESET</dfn>	0x04			/* SiS, OPTi, ... */</u></td></tr>
<tr><th id="413">413</th><td><u>#define	<dfn class="macro" id="_M/OHCI_QUIRK_BE_DESC" data-ref="_M/OHCI_QUIRK_BE_DESC">OHCI_QUIRK_BE_DESC</dfn>	0x08			/* BE descriptors */</u></td></tr>
<tr><th id="414">414</th><td><u>#define	<dfn class="macro" id="_M/OHCI_QUIRK_BE_MMIO" data-ref="_M/OHCI_QUIRK_BE_MMIO">OHCI_QUIRK_BE_MMIO</dfn>	0x10			/* BE registers */</u></td></tr>
<tr><th id="415">415</th><td><u>#define	<dfn class="macro" id="_M/OHCI_QUIRK_ZFMICRO" data-ref="_M/OHCI_QUIRK_ZFMICRO">OHCI_QUIRK_ZFMICRO</dfn>	0x20			/* Compaq ZFMicro chipset*/</u></td></tr>
<tr><th id="416">416</th><td><u>#define	<dfn class="macro" id="_M/OHCI_QUIRK_NEC" data-ref="_M/OHCI_QUIRK_NEC">OHCI_QUIRK_NEC</dfn>		0x40			/* lost interrupts */</u></td></tr>
<tr><th id="417">417</th><td><u>#define	<dfn class="macro" id="_M/OHCI_QUIRK_FRAME_NO" data-ref="_M/OHCI_QUIRK_FRAME_NO">OHCI_QUIRK_FRAME_NO</dfn>	0x80			/* no big endian frame_no shift */</u></td></tr>
<tr><th id="418">418</th><td><u>#define	<dfn class="macro" id="_M/OHCI_QUIRK_HUB_POWER" data-ref="_M/OHCI_QUIRK_HUB_POWER">OHCI_QUIRK_HUB_POWER</dfn>	0x100			/* distrust firmware power/oc setup */</u></td></tr>
<tr><th id="419">419</th><td><u>#define	<dfn class="macro" id="_M/OHCI_QUIRK_AMD_PLL" data-ref="_M/OHCI_QUIRK_AMD_PLL">OHCI_QUIRK_AMD_PLL</dfn>	0x200			/* AMD PLL quirk*/</u></td></tr>
<tr><th id="420">420</th><td><u>#define	<dfn class="macro" id="_M/OHCI_QUIRK_AMD_PREFETCH" data-ref="_M/OHCI_QUIRK_AMD_PREFETCH">OHCI_QUIRK_AMD_PREFETCH</dfn>	0x400			/* pre-fetch for ISO transfer */</u></td></tr>
<tr><th id="421">421</th><td><u>#define	<dfn class="macro" id="_M/OHCI_QUIRK_GLOBAL_SUSPEND" data-ref="_M/OHCI_QUIRK_GLOBAL_SUSPEND">OHCI_QUIRK_GLOBAL_SUSPEND</dfn>	0x800		/* must suspend ports */</u></td></tr>
<tr><th id="422">422</th><td><u>#define	<dfn class="macro" id="_M/OHCI_QUIRK_QEMU" data-ref="_M/OHCI_QUIRK_QEMU">OHCI_QUIRK_QEMU</dfn>		0x1000			/* relax timing expectations */</u></td></tr>
<tr><th id="423">423</th><td></td></tr>
<tr><th id="424">424</th><td>	<i>// there are also chip quirks/bugs in init logic</i></td></tr>
<tr><th id="425">425</th><td></td></tr>
<tr><th id="426">426</th><td>	<em>unsigned</em>		<dfn class="decl field" id="ohci_hcd::prev_frame_no" title='ohci_hcd::prev_frame_no' data-ref="ohci_hcd::prev_frame_no">prev_frame_no</dfn>;</td></tr>
<tr><th id="427">427</th><td>	<em>unsigned</em>		<dfn class="decl field" id="ohci_hcd::wdh_cnt" title='ohci_hcd::wdh_cnt' data-ref="ohci_hcd::wdh_cnt">wdh_cnt</dfn>, <dfn class="decl field" id="ohci_hcd::prev_wdh_cnt" title='ohci_hcd::prev_wdh_cnt' data-ref="ohci_hcd::prev_wdh_cnt">prev_wdh_cnt</dfn>;</td></tr>
<tr><th id="428">428</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a>			<dfn class="decl field" id="ohci_hcd::prev_donehead" title='ohci_hcd::prev_donehead' data-ref="ohci_hcd::prev_donehead">prev_donehead</dfn>;</td></tr>
<tr><th id="429">429</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/timer.h.html#timer_list" title='timer_list' data-ref="timer_list">timer_list</a>	<dfn class="decl field" id="ohci_hcd::io_watchdog" title='ohci_hcd::io_watchdog' data-ref="ohci_hcd::io_watchdog">io_watchdog</dfn>;</td></tr>
<tr><th id="430">430</th><td></td></tr>
<tr><th id="431">431</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/workqueue.h.html#work_struct" title='work_struct' data-ref="work_struct">work_struct</a>	<dfn class="decl field" id="ohci_hcd::nec_work" title='ohci_hcd::nec_work' data-ref="ohci_hcd::nec_work">nec_work</dfn>;	<i>/* Worker for NEC quirk */</i></td></tr>
<tr><th id="432">432</th><td></td></tr>
<tr><th id="433">433</th><td>	<b>struct</b> <a class="type" href="../../../include/linux/dcache.h.html#dentry" title='dentry' data-ref="dentry">dentry</a>		*<dfn class="decl field" id="ohci_hcd::debug_dir" title='ohci_hcd::debug_dir' data-ref="ohci_hcd::debug_dir">debug_dir</dfn>;</td></tr>
<tr><th id="434">434</th><td></td></tr>
<tr><th id="435">435</th><td>	<i>/* platform-specific data -- must come last */</i></td></tr>
<tr><th id="436">436</th><td>	<em>unsigned</em> <em>long</em>           <dfn class="decl field" id="ohci_hcd::priv" title='ohci_hcd::priv' data-ref="ohci_hcd::priv">priv</dfn>[<var>0</var>] <a class="macro" href="../../../include/linux/compiler-gcc.h.html#142" title="__attribute__((aligned(sizeof(s64))))" data-ref="_M/__aligned">__aligned</a>(<b>sizeof</b>(<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#s64" title='s64' data-type='__s64' data-ref="s64">s64</a>));</td></tr>
<tr><th id="437">437</th><td></td></tr>
<tr><th id="438">438</th><td>};</td></tr>
<tr><th id="439">439</th><td></td></tr>
<tr><th id="440">440</th><td><u>#<span data-ppcond="440">ifdef</span> <a class="macro" href="../../../include/generated/autoconf.h.html#452" data-ref="_M/CONFIG_USB_PCI">CONFIG_USB_PCI</a></u></td></tr>
<tr><th id="441">441</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>int</em> <dfn class="decl def fn" id="quirk_nec" title='quirk_nec' data-ref="quirk_nec">quirk_nec</dfn>(<b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col2 decl" id="2ohci" title='ohci' data-type='struct ohci_hcd *' data-ref="2ohci">ohci</dfn>)</td></tr>
<tr><th id="442">442</th><td>{</td></tr>
<tr><th id="443">443</th><td>	<b>return</b> <a class="local col2 ref" href="#2ohci" title='ohci' data-ref="2ohci">ohci</a>-&gt;<a class="ref field" href="#ohci_hcd::flags" title='ohci_hcd::flags' data-ref="ohci_hcd::flags">flags</a> &amp; <a class="macro" href="#416" title="0x40" data-ref="_M/OHCI_QUIRK_NEC">OHCI_QUIRK_NEC</a>;</td></tr>
<tr><th id="444">444</th><td>}</td></tr>
<tr><th id="445">445</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>int</em> <dfn class="decl def fn" id="quirk_zfmicro" title='quirk_zfmicro' data-ref="quirk_zfmicro">quirk_zfmicro</dfn>(<b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col3 decl" id="3ohci" title='ohci' data-type='struct ohci_hcd *' data-ref="3ohci">ohci</dfn>)</td></tr>
<tr><th id="446">446</th><td>{</td></tr>
<tr><th id="447">447</th><td>	<b>return</b> <a class="local col3 ref" href="#3ohci" title='ohci' data-ref="3ohci">ohci</a>-&gt;<a class="ref field" href="#ohci_hcd::flags" title='ohci_hcd::flags' data-ref="ohci_hcd::flags">flags</a> &amp; <a class="macro" href="#415" title="0x20" data-ref="_M/OHCI_QUIRK_ZFMICRO">OHCI_QUIRK_ZFMICRO</a>;</td></tr>
<tr><th id="448">448</th><td>}</td></tr>
<tr><th id="449">449</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>int</em> <dfn class="decl def fn" id="quirk_amdiso" title='quirk_amdiso' data-ref="quirk_amdiso">quirk_amdiso</dfn>(<b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col4 decl" id="4ohci" title='ohci' data-type='struct ohci_hcd *' data-ref="4ohci">ohci</dfn>)</td></tr>
<tr><th id="450">450</th><td>{</td></tr>
<tr><th id="451">451</th><td>	<b>return</b> <a class="local col4 ref" href="#4ohci" title='ohci' data-ref="4ohci">ohci</a>-&gt;<a class="ref field" href="#ohci_hcd::flags" title='ohci_hcd::flags' data-ref="ohci_hcd::flags">flags</a> &amp; <a class="macro" href="#419" title="0x200" data-ref="_M/OHCI_QUIRK_AMD_PLL">OHCI_QUIRK_AMD_PLL</a>;</td></tr>
<tr><th id="452">452</th><td>}</td></tr>
<tr><th id="453">453</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>int</em> <dfn class="decl def fn" id="quirk_amdprefetch" title='quirk_amdprefetch' data-ref="quirk_amdprefetch">quirk_amdprefetch</dfn>(<b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col5 decl" id="5ohci" title='ohci' data-type='struct ohci_hcd *' data-ref="5ohci">ohci</dfn>)</td></tr>
<tr><th id="454">454</th><td>{</td></tr>
<tr><th id="455">455</th><td>	<b>return</b> <a class="local col5 ref" href="#5ohci" title='ohci' data-ref="5ohci">ohci</a>-&gt;<a class="ref field" href="#ohci_hcd::flags" title='ohci_hcd::flags' data-ref="ohci_hcd::flags">flags</a> &amp; <a class="macro" href="#420" title="0x400" data-ref="_M/OHCI_QUIRK_AMD_PREFETCH">OHCI_QUIRK_AMD_PREFETCH</a>;</td></tr>
<tr><th id="456">456</th><td>}</td></tr>
<tr><th id="457">457</th><td><u>#<span data-ppcond="440">else</span></u></td></tr>
<tr><th id="458">458</th><td><em>static</em> <b>inline</b> <em>int</em> quirk_nec(<b>struct</b> ohci_hcd *ohci)</td></tr>
<tr><th id="459">459</th><td>{</td></tr>
<tr><th id="460">460</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="461">461</th><td>}</td></tr>
<tr><th id="462">462</th><td><em>static</em> <b>inline</b> <em>int</em> quirk_zfmicro(<b>struct</b> ohci_hcd *ohci)</td></tr>
<tr><th id="463">463</th><td>{</td></tr>
<tr><th id="464">464</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="465">465</th><td>}</td></tr>
<tr><th id="466">466</th><td><em>static</em> <b>inline</b> <em>int</em> quirk_amdiso(<b>struct</b> ohci_hcd *ohci)</td></tr>
<tr><th id="467">467</th><td>{</td></tr>
<tr><th id="468">468</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="469">469</th><td>}</td></tr>
<tr><th id="470">470</th><td><em>static</em> <b>inline</b> <em>int</em> quirk_amdprefetch(<b>struct</b> ohci_hcd *ohci)</td></tr>
<tr><th id="471">471</th><td>{</td></tr>
<tr><th id="472">472</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="473">473</th><td>}</td></tr>
<tr><th id="474">474</th><td><u>#<span data-ppcond="440">endif</span></u></td></tr>
<tr><th id="475">475</th><td></td></tr>
<tr><th id="476">476</th><td><i>/* convert between an hcd pointer and the corresponding ohci_hcd */</i></td></tr>
<tr><th id="477">477</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="decl def fn" id="hcd_to_ohci" title='hcd_to_ohci' data-ref="hcd_to_ohci">hcd_to_ohci</dfn> (<b>struct</b> <a class="type" href="../../../include/linux/usb/hcd.h.html#usb_hcd" title='usb_hcd' data-ref="usb_hcd">usb_hcd</a> *<dfn class="local col6 decl" id="6hcd" title='hcd' data-type='struct usb_hcd *' data-ref="6hcd">hcd</dfn>)</td></tr>
<tr><th id="478">478</th><td>{</td></tr>
<tr><th id="479">479</th><td>	<b>return</b> (<b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *) (<a class="local col6 ref" href="#6hcd" title='hcd' data-ref="6hcd">hcd</a>-&gt;<a class="ref field" href="../../../include/linux/usb/hcd.h.html#usb_hcd::hcd_priv" title='usb_hcd::hcd_priv' data-ref="usb_hcd::hcd_priv">hcd_priv</a>);</td></tr>
<tr><th id="480">480</th><td>}</td></tr>
<tr><th id="481">481</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <b>struct</b> <a class="type" href="../../../include/linux/usb/hcd.h.html#usb_hcd" title='usb_hcd' data-ref="usb_hcd">usb_hcd</a> *<dfn class="decl def fn" id="ohci_to_hcd" title='ohci_to_hcd' data-ref="ohci_to_hcd">ohci_to_hcd</dfn> (<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col7 decl" id="7ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="7ohci">ohci</dfn>)</td></tr>
<tr><th id="482">482</th><td>{</td></tr>
<tr><th id="483">483</th><td>	<b>return</b> <a class="macro" href="../../../include/linux/kernel.h.html#962" title="({ void *__mptr = (void *)((void *) ohci); do { bool __cond = !(!(!__builtin_types_compatible_p(typeof(*((void *) ohci)), typeof(((struct usb_hcd *)0)-&gt;hcd_priv)) &amp;&amp; !__builtin_types_compatible_p(typeof(*((void *) ohci)), typeof(void)))); extern void __compiletime_assert_483(void) ; if (__cond) __compiletime_assert_483(); do { ((void)sizeof(char[1 - 2 * __cond])); } while (0); } while (0); ((struct usb_hcd *)(__mptr - __builtin_offsetof(struct usb_hcd, hcd_priv))); })" data-ref="_M/container_of">container_of</a> ((<em>void</em> *) <a class="local col7 ref" href="#7ohci" title='ohci' data-ref="7ohci">ohci</a>, <b>struct</b> <a class="type" href="../../../include/linux/usb/hcd.h.html#usb_hcd" title='usb_hcd' data-ref="usb_hcd">usb_hcd</a>, <a class="ref field" href="../../../include/linux/usb/hcd.h.html#usb_hcd::hcd_priv" title='usb_hcd::hcd_priv' data-ref="usb_hcd::hcd_priv">hcd_priv</a>);</td></tr>
<tr><th id="484">484</th><td>}</td></tr>
<tr><th id="485">485</th><td></td></tr>
<tr><th id="486">486</th><td><i>/*-------------------------------------------------------------------------*/</i></td></tr>
<tr><th id="487">487</th><td></td></tr>
<tr><th id="488">488</th><td><u>#define <dfn class="macro" id="_M/ohci_dbg" data-ref="_M/ohci_dbg">ohci_dbg</dfn>(ohci, fmt, args...) \</u></td></tr>
<tr><th id="489">489</th><td><u>	dev_dbg (ohci_to_hcd(ohci)-&gt;self.controller , fmt , ## args )</u></td></tr>
<tr><th id="490">490</th><td><u>#define <dfn class="macro" id="_M/ohci_err" data-ref="_M/ohci_err">ohci_err</dfn>(ohci, fmt, args...) \</u></td></tr>
<tr><th id="491">491</th><td><u>	dev_err (ohci_to_hcd(ohci)-&gt;self.controller , fmt , ## args )</u></td></tr>
<tr><th id="492">492</th><td><u>#define <dfn class="macro" id="_M/ohci_info" data-ref="_M/ohci_info">ohci_info</dfn>(ohci, fmt, args...) \</u></td></tr>
<tr><th id="493">493</th><td><u>	dev_info (ohci_to_hcd(ohci)-&gt;self.controller , fmt , ## args )</u></td></tr>
<tr><th id="494">494</th><td><u>#define <dfn class="macro" id="_M/ohci_warn" data-ref="_M/ohci_warn">ohci_warn</dfn>(ohci, fmt, args...) \</u></td></tr>
<tr><th id="495">495</th><td><u>	dev_warn (ohci_to_hcd(ohci)-&gt;self.controller , fmt , ## args )</u></td></tr>
<tr><th id="496">496</th><td></td></tr>
<tr><th id="497">497</th><td><i>/*-------------------------------------------------------------------------*/</i></td></tr>
<tr><th id="498">498</th><td></td></tr>
<tr><th id="499">499</th><td><i>/*</i></td></tr>
<tr><th id="500">500</th><td><i> * While most USB host controllers implement their registers and</i></td></tr>
<tr><th id="501">501</th><td><i> * in-memory communication descriptors in little-endian format,</i></td></tr>
<tr><th id="502">502</th><td><i> * a minority (notably the IBM STB04XXX and the Motorola MPC5200</i></td></tr>
<tr><th id="503">503</th><td><i> * processors) implement them in big endian format.</i></td></tr>
<tr><th id="504">504</th><td><i> *</i></td></tr>
<tr><th id="505">505</th><td><i> * In addition some more exotic implementations like the Toshiba</i></td></tr>
<tr><th id="506">506</th><td><i> * Spider (aka SCC) cell southbridge are "mixed" endian, that is,</i></td></tr>
<tr><th id="507">507</th><td><i> * they have a different endianness for registers vs. in-memory</i></td></tr>
<tr><th id="508">508</th><td><i> * descriptors.</i></td></tr>
<tr><th id="509">509</th><td><i> *</i></td></tr>
<tr><th id="510">510</th><td><i> * This attempts to support either format at compile time without a</i></td></tr>
<tr><th id="511">511</th><td><i> * runtime penalty, or both formats with the additional overhead</i></td></tr>
<tr><th id="512">512</th><td><i> * of checking a flag bit.</i></td></tr>
<tr><th id="513">513</th><td><i> *</i></td></tr>
<tr><th id="514">514</th><td><i> * That leads to some tricky Kconfig rules howevber. There are</i></td></tr>
<tr><th id="515">515</th><td><i> * different defaults based on some arch/ppc platforms, though</i></td></tr>
<tr><th id="516">516</th><td><i> * the basic rules are:</i></td></tr>
<tr><th id="517">517</th><td><i> *</i></td></tr>
<tr><th id="518">518</th><td><i> * Controller type              Kconfig options needed</i></td></tr>
<tr><th id="519">519</th><td><i> * ---------------              ----------------------</i></td></tr>
<tr><th id="520">520</th><td><i> * little endian                CONFIG_USB_OHCI_LITTLE_ENDIAN</i></td></tr>
<tr><th id="521">521</th><td><i> *</i></td></tr>
<tr><th id="522">522</th><td><i> * fully big endian             CONFIG_USB_OHCI_BIG_ENDIAN_DESC _and_</i></td></tr>
<tr><th id="523">523</th><td><i> *                              CONFIG_USB_OHCI_BIG_ENDIAN_MMIO</i></td></tr>
<tr><th id="524">524</th><td><i> *</i></td></tr>
<tr><th id="525">525</th><td><i> * mixed endian                 CONFIG_USB_OHCI_LITTLE_ENDIAN _and_</i></td></tr>
<tr><th id="526">526</th><td><i> *                              CONFIG_USB_OHCI_BIG_ENDIAN_{MMIO,DESC}</i></td></tr>
<tr><th id="527">527</th><td><i> *</i></td></tr>
<tr><th id="528">528</th><td><i> * (If you have a mixed endian controller, you -must- also define</i></td></tr>
<tr><th id="529">529</th><td><i> * CONFIG_USB_OHCI_LITTLE_ENDIAN or things will not work when building</i></td></tr>
<tr><th id="530">530</th><td><i> * both your mixed endian and a fully big endian controller support in</i></td></tr>
<tr><th id="531">531</th><td><i> * the same kernel image).</i></td></tr>
<tr><th id="532">532</th><td><i> */</i></td></tr>
<tr><th id="533">533</th><td></td></tr>
<tr><th id="534">534</th><td><u>#<span data-ppcond="534">ifdef</span> <span class="macro" data-ref="_M/CONFIG_USB_OHCI_BIG_ENDIAN_DESC">CONFIG_USB_OHCI_BIG_ENDIAN_DESC</span></u></td></tr>
<tr><th id="535">535</th><td><u>#ifdef CONFIG_USB_OHCI_LITTLE_ENDIAN</u></td></tr>
<tr><th id="536">536</th><td><u>#define big_endian_desc(ohci)	(ohci-&gt;flags &amp; OHCI_QUIRK_BE_DESC)</u></td></tr>
<tr><th id="537">537</th><td><u>#else</u></td></tr>
<tr><th id="538">538</th><td><u>#define big_endian_desc(ohci)	1		/* only big endian */</u></td></tr>
<tr><th id="539">539</th><td><u>#endif</u></td></tr>
<tr><th id="540">540</th><td><u>#<span data-ppcond="534">else</span></u></td></tr>
<tr><th id="541">541</th><td><u>#define <dfn class="macro" id="_M/big_endian_desc" data-ref="_M/big_endian_desc">big_endian_desc</dfn>(ohci)	0		/* only little endian */</u></td></tr>
<tr><th id="542">542</th><td><u>#<span data-ppcond="534">endif</span></u></td></tr>
<tr><th id="543">543</th><td></td></tr>
<tr><th id="544">544</th><td><u>#<span data-ppcond="544">ifdef</span> <span class="macro" data-ref="_M/CONFIG_USB_OHCI_BIG_ENDIAN_MMIO">CONFIG_USB_OHCI_BIG_ENDIAN_MMIO</span></u></td></tr>
<tr><th id="545">545</th><td><u>#ifdef CONFIG_USB_OHCI_LITTLE_ENDIAN</u></td></tr>
<tr><th id="546">546</th><td><u>#define big_endian_mmio(ohci)	(ohci-&gt;flags &amp; OHCI_QUIRK_BE_MMIO)</u></td></tr>
<tr><th id="547">547</th><td><u>#else</u></td></tr>
<tr><th id="548">548</th><td><u>#define big_endian_mmio(ohci)	1		/* only big endian */</u></td></tr>
<tr><th id="549">549</th><td><u>#endif</u></td></tr>
<tr><th id="550">550</th><td><u>#<span data-ppcond="544">else</span></u></td></tr>
<tr><th id="551">551</th><td><u>#define <dfn class="macro" id="_M/big_endian_mmio" data-ref="_M/big_endian_mmio">big_endian_mmio</dfn>(ohci)	0		/* only little endian */</u></td></tr>
<tr><th id="552">552</th><td><u>#<span data-ppcond="544">endif</span></u></td></tr>
<tr><th id="553">553</th><td></td></tr>
<tr><th id="554">554</th><td><i>/*</i></td></tr>
<tr><th id="555">555</th><td><i> * Big-endian read/write functions are arch-specific.</i></td></tr>
<tr><th id="556">556</th><td><i> * Other arches can be added if/when they're needed.</i></td></tr>
<tr><th id="557">557</th><td><i> *</i></td></tr>
<tr><th id="558">558</th><td><i> */</i></td></tr>
<tr><th id="559">559</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>unsigned</em> <em>int</em> <dfn class="decl def fn" id="_ohci_readl" title='_ohci_readl' data-ref="_ohci_readl">_ohci_readl</dfn> (<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col8 decl" id="8ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="8ohci">ohci</dfn>,</td></tr>
<tr><th id="560">560</th><td>					<a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a> <a class="macro" href="../../../include/linux/compiler_types.h.html#35" title="" data-ref="_M/__iomem">__iomem</a> * <dfn class="local col9 decl" id="9regs" title='regs' data-type='__hc32 *' data-ref="9regs">regs</dfn>)</td></tr>
<tr><th id="561">561</th><td>{</td></tr>
<tr><th id="562">562</th><td><u>#<span data-ppcond="562">ifdef</span> <span class="macro" data-ref="_M/CONFIG_USB_OHCI_BIG_ENDIAN_MMIO">CONFIG_USB_OHCI_BIG_ENDIAN_MMIO</span></u></td></tr>
<tr><th id="563">563</th><td>	<b>return</b> big_endian_mmio(ohci) ?</td></tr>
<tr><th id="564">564</th><td>		readl_be (regs) :</td></tr>
<tr><th id="565">565</th><td>		readl (regs);</td></tr>
<tr><th id="566">566</th><td><u>#<span data-ppcond="562">else</span></u></td></tr>
<tr><th id="567">567</th><td>	<b>return</b> <a class="macro" href="../../../arch/x86/include/asm/io.h.html#75" title="readl" data-ref="_M/readl">readl</a> (<a class="local col9 ref" href="#9regs" title='regs' data-ref="9regs">regs</a>);</td></tr>
<tr><th id="568">568</th><td><u>#<span data-ppcond="562">endif</span></u></td></tr>
<tr><th id="569">569</th><td>}</td></tr>
<tr><th id="570">570</th><td></td></tr>
<tr><th id="571">571</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em> <dfn class="decl def fn" id="_ohci_writel" title='_ohci_writel' data-ref="_ohci_writel">_ohci_writel</dfn> (<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col0 decl" id="10ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="10ohci">ohci</dfn>,</td></tr>
<tr><th id="572">572</th><td>				 <em>const</em> <em>unsigned</em> <em>int</em> <dfn class="local col1 decl" id="11val" title='val' data-type='const unsigned int' data-ref="11val">val</dfn>, <a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a> <a class="macro" href="../../../include/linux/compiler_types.h.html#35" title="" data-ref="_M/__iomem">__iomem</a> *<dfn class="local col2 decl" id="12regs" title='regs' data-type='__hc32 *' data-ref="12regs">regs</dfn>)</td></tr>
<tr><th id="573">573</th><td>{</td></tr>
<tr><th id="574">574</th><td><u>#<span data-ppcond="574">ifdef</span> <span class="macro" data-ref="_M/CONFIG_USB_OHCI_BIG_ENDIAN_MMIO">CONFIG_USB_OHCI_BIG_ENDIAN_MMIO</span></u></td></tr>
<tr><th id="575">575</th><td>	big_endian_mmio(ohci) ?</td></tr>
<tr><th id="576">576</th><td>		writel_be (val, regs) :</td></tr>
<tr><th id="577">577</th><td>		writel (val, regs);</td></tr>
<tr><th id="578">578</th><td><u>#<span data-ppcond="574">else</span></u></td></tr>
<tr><th id="579">579</th><td>		<a class="macro" href="../../../arch/x86/include/asm/io.h.html#85" title="writel" data-ref="_M/writel">writel</a> (<a class="local col1 ref" href="#11val" title='val' data-ref="11val">val</a>, <a class="local col2 ref" href="#12regs" title='regs' data-ref="12regs">regs</a>);</td></tr>
<tr><th id="580">580</th><td><u>#<span data-ppcond="574">endif</span></u></td></tr>
<tr><th id="581">581</th><td>}</td></tr>
<tr><th id="582">582</th><td></td></tr>
<tr><th id="583">583</th><td><u>#define <dfn class="macro" id="_M/ohci_readl" data-ref="_M/ohci_readl">ohci_readl</dfn>(o,r)		<a class="ref fn" href="#_ohci_readl" title='_ohci_readl' data-ref="_ohci_readl">_ohci_readl</a>(o,r)</u></td></tr>
<tr><th id="584">584</th><td><u>#define <dfn class="macro" id="_M/ohci_writel" data-ref="_M/ohci_writel">ohci_writel</dfn>(o,v,r)	<a class="ref fn" href="#_ohci_writel" title='_ohci_writel' data-ref="_ohci_writel">_ohci_writel</a>(o,v,r)</u></td></tr>
<tr><th id="585">585</th><td></td></tr>
<tr><th id="586">586</th><td></td></tr>
<tr><th id="587">587</th><td><i>/*-------------------------------------------------------------------------*/</i></td></tr>
<tr><th id="588">588</th><td></td></tr>
<tr><th id="589">589</th><td><i>/* cpu to ohci */</i></td></tr>
<tr><th id="590">590</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="#__hc16" title='__hc16' data-type='__u16' data-ref="__hc16">__hc16</a> <dfn class="decl def fn" id="cpu_to_hc16" title='cpu_to_hc16' data-ref="cpu_to_hc16">cpu_to_hc16</dfn> (<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col3 decl" id="13ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="13ohci">ohci</dfn>, <em>const</em> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a> <dfn class="local col4 decl" id="14x" title='x' data-type='const u16' data-ref="14x">x</dfn>)</td></tr>
<tr><th id="591">591</th><td>{</td></tr>
<tr><th id="592">592</th><td>	<b>return</b> <a class="macro" href="#541" title="0" data-ref="_M/big_endian_desc">big_endian_desc</a>(ohci) ?</td></tr>
<tr><th id="593">593</th><td>		(<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="#__hc16" title='__hc16' data-type='__u16' data-ref="__hc16">__hc16</a>)<a class="macro" href="../../../include/linux/byteorder/generic.h.html#96" title="__cpu_to_be16" data-ref="_M/cpu_to_be16">cpu_to_be16</a>(<a class="local col4 ref" href="#14x" title='x' data-ref="14x">x</a>) :</td></tr>
<tr><th id="594">594</th><td>		(<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="#__hc16" title='__hc16' data-type='__u16' data-ref="__hc16">__hc16</a>)<a class="macro" href="../../../include/linux/byteorder/generic.h.html#90" title="__cpu_to_le16" data-ref="_M/cpu_to_le16">cpu_to_le16</a>(<a class="local col4 ref" href="#14x" title='x' data-ref="14x">x</a>);</td></tr>
<tr><th id="595">595</th><td>}</td></tr>
<tr><th id="596">596</th><td></td></tr>
<tr><th id="597">597</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="#__hc16" title='__hc16' data-type='__u16' data-ref="__hc16">__hc16</a> <dfn class="decl def fn" id="cpu_to_hc16p" title='cpu_to_hc16p' data-ref="cpu_to_hc16p">cpu_to_hc16p</dfn> (<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col5 decl" id="15ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="15ohci">ohci</dfn>, <em>const</em> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a> *<dfn class="local col6 decl" id="16x" title='x' data-type='const u16 *' data-ref="16x">x</dfn>)</td></tr>
<tr><th id="598">598</th><td>{</td></tr>
<tr><th id="599">599</th><td>	<b>return</b> <a class="macro" href="#541" title="0" data-ref="_M/big_endian_desc">big_endian_desc</a>(ohci) ?</td></tr>
<tr><th id="600">600</th><td>		<a class="macro" href="../../../include/linux/byteorder/generic.h.html#108" title="__cpu_to_be16p" data-ref="_M/cpu_to_be16p">cpu_to_be16p</a>(<a class="local col6 ref" href="#16x" title='x' data-ref="16x">x</a>) :</td></tr>
<tr><th id="601">601</th><td>		<a class="macro" href="../../../include/linux/byteorder/generic.h.html#102" title="__cpu_to_le16p" data-ref="_M/cpu_to_le16p">cpu_to_le16p</a>(<a class="local col6 ref" href="#16x" title='x' data-ref="16x">x</a>);</td></tr>
<tr><th id="602">602</th><td>}</td></tr>
<tr><th id="603">603</th><td></td></tr>
<tr><th id="604">604</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a> <dfn class="decl def fn" id="cpu_to_hc32" title='cpu_to_hc32' data-ref="cpu_to_hc32">cpu_to_hc32</dfn> (<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col7 decl" id="17ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="17ohci">ohci</dfn>, <em>const</em> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a> <dfn class="local col8 decl" id="18x" title='x' data-type='const u32' data-ref="18x">x</dfn>)</td></tr>
<tr><th id="605">605</th><td>{</td></tr>
<tr><th id="606">606</th><td>	<b>return</b> <a class="macro" href="#541" title="0" data-ref="_M/big_endian_desc">big_endian_desc</a>(ohci) ?</td></tr>
<tr><th id="607">607</th><td>		(<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>)<a class="macro" href="../../../include/linux/byteorder/generic.h.html#94" title="__cpu_to_be32" data-ref="_M/cpu_to_be32">cpu_to_be32</a>(<a class="local col8 ref" href="#18x" title='x' data-ref="18x">x</a>) :</td></tr>
<tr><th id="608">608</th><td>		(<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a>)<a class="macro" href="../../../include/linux/byteorder/generic.h.html#88" title="__cpu_to_le32" data-ref="_M/cpu_to_le32">cpu_to_le32</a>(<a class="local col8 ref" href="#18x" title='x' data-ref="18x">x</a>);</td></tr>
<tr><th id="609">609</th><td>}</td></tr>
<tr><th id="610">610</th><td></td></tr>
<tr><th id="611">611</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a> <dfn class="decl def fn" id="cpu_to_hc32p" title='cpu_to_hc32p' data-ref="cpu_to_hc32p">cpu_to_hc32p</dfn> (<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col9 decl" id="19ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="19ohci">ohci</dfn>, <em>const</em> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a> *<dfn class="local col0 decl" id="20x" title='x' data-type='const u32 *' data-ref="20x">x</dfn>)</td></tr>
<tr><th id="612">612</th><td>{</td></tr>
<tr><th id="613">613</th><td>	<b>return</b> <a class="macro" href="#541" title="0" data-ref="_M/big_endian_desc">big_endian_desc</a>(ohci) ?</td></tr>
<tr><th id="614">614</th><td>		<a class="macro" href="../../../include/linux/byteorder/generic.h.html#106" title="__cpu_to_be32p" data-ref="_M/cpu_to_be32p">cpu_to_be32p</a>(<a class="local col0 ref" href="#20x" title='x' data-ref="20x">x</a>) :</td></tr>
<tr><th id="615">615</th><td>		<a class="macro" href="../../../include/linux/byteorder/generic.h.html#100" title="__cpu_to_le32p" data-ref="_M/cpu_to_le32p">cpu_to_le32p</a>(<a class="local col0 ref" href="#20x" title='x' data-ref="20x">x</a>);</td></tr>
<tr><th id="616">616</th><td>}</td></tr>
<tr><th id="617">617</th><td></td></tr>
<tr><th id="618">618</th><td><i>/* ohci to cpu */</i></td></tr>
<tr><th id="619">619</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a> <dfn class="decl def fn" id="hc16_to_cpu" title='hc16_to_cpu' data-ref="hc16_to_cpu">hc16_to_cpu</dfn> (<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col1 decl" id="21ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="21ohci">ohci</dfn>, <em>const</em> <a class="typedef" href="#__hc16" title='__hc16' data-type='__u16' data-ref="__hc16">__hc16</a> <dfn class="local col2 decl" id="22x" title='x' data-type='const __hc16' data-ref="22x">x</dfn>)</td></tr>
<tr><th id="620">620</th><td>{</td></tr>
<tr><th id="621">621</th><td>	<b>return</b> <a class="macro" href="#541" title="0" data-ref="_M/big_endian_desc">big_endian_desc</a>(ohci) ?</td></tr>
<tr><th id="622">622</th><td>		<a class="macro" href="../../../include/linux/byteorder/generic.h.html#97" title="__be16_to_cpu" data-ref="_M/be16_to_cpu">be16_to_cpu</a>((<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="../../../include/uapi/linux/types.h.html#__be16" title='__be16' data-type='__u16' data-ref="__be16">__be16</a>)<a class="local col2 ref" href="#22x" title='x' data-ref="22x">x</a>) :</td></tr>
<tr><th id="623">623</th><td>		<a class="macro" href="../../../include/linux/byteorder/generic.h.html#91" title="__le16_to_cpu" data-ref="_M/le16_to_cpu">le16_to_cpu</a>((<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="../../../include/uapi/linux/types.h.html#__le16" title='__le16' data-type='__u16' data-ref="__le16">__le16</a>)<a class="local col2 ref" href="#22x" title='x' data-ref="22x">x</a>);</td></tr>
<tr><th id="624">624</th><td>}</td></tr>
<tr><th id="625">625</th><td></td></tr>
<tr><th id="626">626</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a> <dfn class="decl def fn" id="hc16_to_cpup" title='hc16_to_cpup' data-ref="hc16_to_cpup">hc16_to_cpup</dfn> (<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col3 decl" id="23ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="23ohci">ohci</dfn>, <em>const</em> <a class="typedef" href="#__hc16" title='__hc16' data-type='__u16' data-ref="__hc16">__hc16</a> *<dfn class="local col4 decl" id="24x" title='x' data-type='const __hc16 *' data-ref="24x">x</dfn>)</td></tr>
<tr><th id="627">627</th><td>{</td></tr>
<tr><th id="628">628</th><td>	<b>return</b> <a class="macro" href="#541" title="0" data-ref="_M/big_endian_desc">big_endian_desc</a>(ohci) ?</td></tr>
<tr><th id="629">629</th><td>		<a class="macro" href="../../../include/linux/byteorder/generic.h.html#109" title="__be16_to_cpup" data-ref="_M/be16_to_cpup">be16_to_cpup</a>((<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="../../../include/uapi/linux/types.h.html#__be16" title='__be16' data-type='__u16' data-ref="__be16">__be16</a> *)<a class="local col4 ref" href="#24x" title='x' data-ref="24x">x</a>) :</td></tr>
<tr><th id="630">630</th><td>		<a class="macro" href="../../../include/linux/byteorder/generic.h.html#103" title="__le16_to_cpup" data-ref="_M/le16_to_cpup">le16_to_cpup</a>((<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="../../../include/uapi/linux/types.h.html#__le16" title='__le16' data-type='__u16' data-ref="__le16">__le16</a> *)<a class="local col4 ref" href="#24x" title='x' data-ref="24x">x</a>);</td></tr>
<tr><th id="631">631</th><td>}</td></tr>
<tr><th id="632">632</th><td></td></tr>
<tr><th id="633">633</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a> <dfn class="decl def fn" id="hc32_to_cpu" title='hc32_to_cpu' data-ref="hc32_to_cpu">hc32_to_cpu</dfn> (<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col5 decl" id="25ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="25ohci">ohci</dfn>, <em>const</em> <a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a> <dfn class="local col6 decl" id="26x" title='x' data-type='const __hc32' data-ref="26x">x</dfn>)</td></tr>
<tr><th id="634">634</th><td>{</td></tr>
<tr><th id="635">635</th><td>	<b>return</b> <a class="macro" href="#541" title="0" data-ref="_M/big_endian_desc">big_endian_desc</a>(ohci) ?</td></tr>
<tr><th id="636">636</th><td>		<a class="macro" href="../../../include/linux/byteorder/generic.h.html#95" title="__be32_to_cpu" data-ref="_M/be32_to_cpu">be32_to_cpu</a>((<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="../../../include/uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32">__be32</a>)<a class="local col6 ref" href="#26x" title='x' data-ref="26x">x</a>) :</td></tr>
<tr><th id="637">637</th><td>		<a class="macro" href="../../../include/linux/byteorder/generic.h.html#89" title="__le32_to_cpu" data-ref="_M/le32_to_cpu">le32_to_cpu</a>((<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="../../../include/uapi/linux/types.h.html#__le32" title='__le32' data-type='__u32' data-ref="__le32">__le32</a>)<a class="local col6 ref" href="#26x" title='x' data-ref="26x">x</a>);</td></tr>
<tr><th id="638">638</th><td>}</td></tr>
<tr><th id="639">639</th><td></td></tr>
<tr><th id="640">640</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a> <dfn class="decl def fn" id="hc32_to_cpup" title='hc32_to_cpup' data-ref="hc32_to_cpup">hc32_to_cpup</dfn> (<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col7 decl" id="27ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="27ohci">ohci</dfn>, <em>const</em> <a class="typedef" href="#__hc32" title='__hc32' data-type='__u32' data-ref="__hc32">__hc32</a> *<dfn class="local col8 decl" id="28x" title='x' data-type='const __hc32 *' data-ref="28x">x</dfn>)</td></tr>
<tr><th id="641">641</th><td>{</td></tr>
<tr><th id="642">642</th><td>	<b>return</b> <a class="macro" href="#541" title="0" data-ref="_M/big_endian_desc">big_endian_desc</a>(ohci) ?</td></tr>
<tr><th id="643">643</th><td>		<a class="macro" href="../../../include/linux/byteorder/generic.h.html#107" title="__be32_to_cpup" data-ref="_M/be32_to_cpup">be32_to_cpup</a>((<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="../../../include/uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32">__be32</a> *)<a class="local col8 ref" href="#28x" title='x' data-ref="28x">x</a>) :</td></tr>
<tr><th id="644">644</th><td>		<a class="macro" href="../../../include/linux/byteorder/generic.h.html#101" title="__le32_to_cpup" data-ref="_M/le32_to_cpup">le32_to_cpup</a>((<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="../../../include/uapi/linux/types.h.html#__le32" title='__le32' data-type='__u32' data-ref="__le32">__le32</a> *)<a class="local col8 ref" href="#28x" title='x' data-ref="28x">x</a>);</td></tr>
<tr><th id="645">645</th><td>}</td></tr>
<tr><th id="646">646</th><td></td></tr>
<tr><th id="647">647</th><td><i>/*-------------------------------------------------------------------------*/</i></td></tr>
<tr><th id="648">648</th><td></td></tr>
<tr><th id="649">649</th><td><i>/*</i></td></tr>
<tr><th id="650">650</th><td><i> * The HCCA frame number is 16 bits, but is accessed as 32 bits since not all</i></td></tr>
<tr><th id="651">651</th><td><i> * hardware handles 16 bit reads.  Depending on the SoC implementation, the</i></td></tr>
<tr><th id="652">652</th><td><i> * frame number can wind up in either bits [31:16] (default) or</i></td></tr>
<tr><th id="653">653</th><td><i> * [15:0] (OHCI_QUIRK_FRAME_NO) on big endian hosts.</i></td></tr>
<tr><th id="654">654</th><td><i> *</i></td></tr>
<tr><th id="655">655</th><td><i> * Somewhat similarly, the 16-bit PSW fields in a transfer descriptor are</i></td></tr>
<tr><th id="656">656</th><td><i> * reordered on BE.</i></td></tr>
<tr><th id="657">657</th><td><i> */</i></td></tr>
<tr><th id="658">658</th><td></td></tr>
<tr><th id="659">659</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a> <dfn class="decl def fn" id="ohci_frame_no" title='ohci_frame_no' data-ref="ohci_frame_no">ohci_frame_no</dfn>(<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col9 decl" id="29ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="29ohci">ohci</dfn>)</td></tr>
<tr><th id="660">660</th><td>{</td></tr>
<tr><th id="661">661</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a> <dfn class="local col0 decl" id="30tmp" title='tmp' data-type='u32' data-ref="30tmp">tmp</dfn>;</td></tr>
<tr><th id="662">662</th><td>	<b>if</b> (<a class="macro" href="#541" title="0" data-ref="_M/big_endian_desc">big_endian_desc</a>(ohci)) {</td></tr>
<tr><th id="663">663</th><td>		<a class="local col0 ref" href="#30tmp" title='tmp' data-ref="30tmp">tmp</a> = <a class="macro" href="../../../include/linux/byteorder/generic.h.html#107" title="__be32_to_cpup" data-ref="_M/be32_to_cpup">be32_to_cpup</a>((<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="../../../include/uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32">__be32</a> *)&amp;<a class="local col9 ref" href="#29ohci" title='ohci' data-ref="29ohci">ohci</a>-&gt;<a class="ref field" href="#ohci_hcd::hcca" title='ohci_hcd::hcca' data-ref="ohci_hcd::hcca">hcca</a>-&gt;<a class="ref field" href="#ohci_hcca::frame_no" title='ohci_hcca::frame_no' data-ref="ohci_hcca::frame_no">frame_no</a>);</td></tr>
<tr><th id="664">664</th><td>		<b>if</b> (!(<a class="local col9 ref" href="#29ohci" title='ohci' data-ref="29ohci">ohci</a>-&gt;<a class="ref field" href="#ohci_hcd::flags" title='ohci_hcd::flags' data-ref="ohci_hcd::flags">flags</a> &amp; <a class="macro" href="#417" title="0x80" data-ref="_M/OHCI_QUIRK_FRAME_NO">OHCI_QUIRK_FRAME_NO</a>))</td></tr>
<tr><th id="665">665</th><td>			<a class="local col0 ref" href="#30tmp" title='tmp' data-ref="30tmp">tmp</a> &gt;&gt;= <var>16</var>;</td></tr>
<tr><th id="666">666</th><td>	} <b>else</b></td></tr>
<tr><th id="667">667</th><td>		<a class="local col0 ref" href="#30tmp" title='tmp' data-ref="30tmp">tmp</a> = <a class="macro" href="../../../include/linux/byteorder/generic.h.html#101" title="__le32_to_cpup" data-ref="_M/le32_to_cpup">le32_to_cpup</a>((<a class="macro" href="../../../include/linux/compiler_types.h.html#33" title="" data-ref="_M/__force">__force</a> <a class="typedef" href="../../../include/uapi/linux/types.h.html#__le32" title='__le32' data-type='__u32' data-ref="__le32">__le32</a> *)&amp;<a class="local col9 ref" href="#29ohci" title='ohci' data-ref="29ohci">ohci</a>-&gt;<a class="ref field" href="#ohci_hcd::hcca" title='ohci_hcd::hcca' data-ref="ohci_hcd::hcca">hcca</a>-&gt;<a class="ref field" href="#ohci_hcca::frame_no" title='ohci_hcca::frame_no' data-ref="ohci_hcca::frame_no">frame_no</a>);</td></tr>
<tr><th id="668">668</th><td></td></tr>
<tr><th id="669">669</th><td>	<b>return</b> (<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a>)<a class="local col0 ref" href="#30tmp" title='tmp' data-ref="30tmp">tmp</a>;</td></tr>
<tr><th id="670">670</th><td>}</td></tr>
<tr><th id="671">671</th><td></td></tr>
<tr><th id="672">672</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="#__hc16" title='__hc16' data-type='__u16' data-ref="__hc16">__hc16</a> *<dfn class="decl def fn" id="ohci_hwPSWp" title='ohci_hwPSWp' data-ref="ohci_hwPSWp">ohci_hwPSWp</dfn>(<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col1 decl" id="31ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="31ohci">ohci</dfn>,</td></tr>
<tr><th id="673">673</th><td>                                 <em>const</em> <b>struct</b> <a class="type" href="#td" title='td' data-ref="td">td</a> *<dfn class="local col2 decl" id="32td" title='td' data-type='const struct td *' data-ref="32td">td</dfn>, <em>int</em> <dfn class="local col3 decl" id="33index" title='index' data-type='int' data-ref="33index">index</dfn>)</td></tr>
<tr><th id="674">674</th><td>{</td></tr>
<tr><th id="675">675</th><td>	<b>return</b> (<a class="typedef" href="#__hc16" title='__hc16' data-type='__u16' data-ref="__hc16">__hc16</a> *)(<a class="macro" href="#541" title="0" data-ref="_M/big_endian_desc">big_endian_desc</a>(ohci) ?</td></tr>
<tr><th id="676">676</th><td>			&amp;<a class="local col2 ref" href="#32td" title='td' data-ref="32td">td</a>-&gt;<a class="ref field" href="#td::hwPSW" title='td::hwPSW' data-ref="td::hwPSW">hwPSW</a>[<a class="local col3 ref" href="#33index" title='index' data-ref="33index">index</a> ^ <var>1</var>] : &amp;<a class="local col2 ref" href="#32td" title='td' data-ref="32td">td</a>-&gt;<a class="ref field" href="#td::hwPSW" title='td::hwPSW' data-ref="td::hwPSW">hwPSW</a>[<a class="local col3 ref" href="#33index" title='index' data-ref="33index">index</a>]);</td></tr>
<tr><th id="677">677</th><td>}</td></tr>
<tr><th id="678">678</th><td></td></tr>
<tr><th id="679">679</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a> <dfn class="decl def fn" id="ohci_hwPSW" title='ohci_hwPSW' data-ref="ohci_hwPSW">ohci_hwPSW</dfn>(<em>const</em> <b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col4 decl" id="34ohci" title='ohci' data-type='const struct ohci_hcd *' data-ref="34ohci">ohci</dfn>,</td></tr>
<tr><th id="680">680</th><td>                               <em>const</em> <b>struct</b> <a class="type" href="#td" title='td' data-ref="td">td</a> *<dfn class="local col5 decl" id="35td" title='td' data-type='const struct td *' data-ref="35td">td</dfn>, <em>int</em> <dfn class="local col6 decl" id="36index" title='index' data-type='int' data-ref="36index">index</dfn>)</td></tr>
<tr><th id="681">681</th><td>{</td></tr>
<tr><th id="682">682</th><td>	<b>return</b> <a class="ref fn" href="#hc16_to_cpup" title='hc16_to_cpup' data-ref="hc16_to_cpup">hc16_to_cpup</a>(<a class="local col4 ref" href="#34ohci" title='ohci' data-ref="34ohci">ohci</a>, <a class="ref fn" href="#ohci_hwPSWp" title='ohci_hwPSWp' data-ref="ohci_hwPSWp">ohci_hwPSWp</a>(<a class="local col4 ref" href="#34ohci" title='ohci' data-ref="34ohci">ohci</a>, <a class="local col5 ref" href="#35td" title='td' data-ref="35td">td</a>, <a class="local col6 ref" href="#36index" title='index' data-ref="36index">index</a>));</td></tr>
<tr><th id="683">683</th><td>}</td></tr>
<tr><th id="684">684</th><td></td></tr>
<tr><th id="685">685</th><td><i>/*-------------------------------------------------------------------------*/</i></td></tr>
<tr><th id="686">686</th><td></td></tr>
<tr><th id="687">687</th><td><u>#define	<dfn class="macro" id="_M/FI" data-ref="_M/FI">FI</dfn>			0x2edf		/* 12000 bits per frame (-1) */</u></td></tr>
<tr><th id="688">688</th><td><u>#define	<dfn class="macro" id="_M/FSMP" data-ref="_M/FSMP">FSMP</dfn>(fi)		(0x7fff &amp; ((6 * ((fi) - 210)) / 7))</u></td></tr>
<tr><th id="689">689</th><td><u>#define	<dfn class="macro" id="_M/FIT" data-ref="_M/FIT">FIT</dfn>			(1 &lt;&lt; 31)</u></td></tr>
<tr><th id="690">690</th><td><u>#define <dfn class="macro" id="_M/LSTHRESH" data-ref="_M/LSTHRESH">LSTHRESH</dfn>		0x628		/* lowspeed bit threshold */</u></td></tr>
<tr><th id="691">691</th><td></td></tr>
<tr><th id="692">692</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em> <dfn class="decl def fn" id="periodic_reinit" title='periodic_reinit' data-ref="periodic_reinit">periodic_reinit</dfn> (<b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col7 decl" id="37ohci" title='ohci' data-type='struct ohci_hcd *' data-ref="37ohci">ohci</dfn>)</td></tr>
<tr><th id="693">693</th><td>{</td></tr>
<tr><th id="694">694</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a>	<dfn class="local col8 decl" id="38fi" title='fi' data-type='u32' data-ref="38fi">fi</dfn> = <a class="local col7 ref" href="#37ohci" title='ohci' data-ref="37ohci">ohci</a>-&gt;<a class="ref field" href="#ohci_hcd::fminterval" title='ohci_hcd::fminterval' data-ref="ohci_hcd::fminterval">fminterval</a> &amp; <var>0x03fff</var>;</td></tr>
<tr><th id="695">695</th><td>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a>	<dfn class="local col9 decl" id="39fit" title='fit' data-type='u32' data-ref="39fit">fit</dfn> = <a class="macro" href="#583" title="_ohci_readl(ohci,&amp;ohci-&gt;regs-&gt;fminterval)" data-ref="_M/ohci_readl">ohci_readl</a>(<a class="local col7 ref" href="#37ohci" title='ohci' data-ref="37ohci">ohci</a>, &amp;<a class="local col7 ref" href="#37ohci" title='ohci' data-ref="37ohci">ohci</a>-&gt;<a class="ref field" href="#ohci_hcd::regs" title='ohci_hcd::regs' data-ref="ohci_hcd::regs">regs</a>-&gt;<a class="ref field" href="#ohci_regs::fminterval" title='ohci_regs::fminterval' data-ref="ohci_regs::fminterval">fminterval</a>) &amp; <a class="macro" href="#689" title="(1 &lt;&lt; 31)" data-ref="_M/FIT">FIT</a>;</td></tr>
<tr><th id="696">696</th><td></td></tr>
<tr><th id="697">697</th><td>	<a class="macro" href="#584" title="_ohci_writel(ohci,(fit ^ (1 &lt;&lt; 31)) | ohci-&gt;fminterval,&amp;ohci-&gt;regs-&gt;fminterval)" data-ref="_M/ohci_writel">ohci_writel</a> (<a class="local col7 ref" href="#37ohci" title='ohci' data-ref="37ohci">ohci</a>, (<a class="local col9 ref" href="#39fit" title='fit' data-ref="39fit">fit</a> ^ <a class="macro" href="#689" title="(1 &lt;&lt; 31)" data-ref="_M/FIT">FIT</a>) | <a class="local col7 ref" href="#37ohci" title='ohci' data-ref="37ohci">ohci</a>-&gt;<a class="ref field" href="#ohci_hcd::fminterval" title='ohci_hcd::fminterval' data-ref="ohci_hcd::fminterval">fminterval</a>,</td></tr>
<tr><th id="698">698</th><td>						&amp;<a class="local col7 ref" href="#37ohci" title='ohci' data-ref="37ohci">ohci</a>-&gt;<a class="ref field" href="#ohci_hcd::regs" title='ohci_hcd::regs' data-ref="ohci_hcd::regs">regs</a>-&gt;<a class="ref field" href="#ohci_regs::fminterval" title='ohci_regs::fminterval' data-ref="ohci_regs::fminterval">fminterval</a>);</td></tr>
<tr><th id="699">699</th><td>	<a class="macro" href="#584" title="_ohci_writel(ohci,((9 * fi) / 10) &amp; 0x3fff,&amp;ohci-&gt;regs-&gt;periodicstart)" data-ref="_M/ohci_writel">ohci_writel</a> (<a class="local col7 ref" href="#37ohci" title='ohci' data-ref="37ohci">ohci</a>, ((<var>9</var> * <a class="local col8 ref" href="#38fi" title='fi' data-ref="38fi">fi</a>) / <var>10</var>) &amp; <var>0x3fff</var>,</td></tr>
<tr><th id="700">700</th><td>						&amp;<a class="local col7 ref" href="#37ohci" title='ohci' data-ref="37ohci">ohci</a>-&gt;<a class="ref field" href="#ohci_hcd::regs" title='ohci_hcd::regs' data-ref="ohci_hcd::regs">regs</a>-&gt;<a class="ref field" href="#ohci_regs::periodicstart" title='ohci_regs::periodicstart' data-ref="ohci_regs::periodicstart">periodicstart</a>);</td></tr>
<tr><th id="701">701</th><td>}</td></tr>
<tr><th id="702">702</th><td></td></tr>
<tr><th id="703">703</th><td><i>/* AMD-756 (D2 rev) reports corrupt register contents in some cases.</i></td></tr>
<tr><th id="704">704</th><td><i> * The erratum (#4) description is incorrect.  AMD's workaround waits</i></td></tr>
<tr><th id="705">705</th><td><i> * till some bits (mostly reserved) are clear; ok for all revs.</i></td></tr>
<tr><th id="706">706</th><td><i> */</i></td></tr>
<tr><th id="707">707</th><td><u>#define <dfn class="macro" id="_M/read_roothub" data-ref="_M/read_roothub">read_roothub</dfn>(hc, register, mask) ({ \</u></td></tr>
<tr><th id="708">708</th><td><u>	<a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a> <dfn class="local col1 decl" id="41temp" title='temp' data-type='u32' data-ref="41temp"><dfn class="local col6 decl" id="46temp" title='temp' data-type='u32' data-ref="46temp">temp</dfn></dfn> = ohci_readl (hc, &amp;hc-&gt;<a class="ref field" href="#ohci_hcd::regs" title='ohci_hcd::regs' data-ref="ohci_hcd::regs">regs</a>-&gt;<a class="ref field" href="#ohci_regs::roothub" title='ohci_regs::roothub' data-ref="ohci_regs::roothub">roothub</a>.register); \</u></td></tr>
<tr><th id="709">709</th><td><u>	if (<a class="local col1 ref" href="#717" title='temp' data-ref="41temp"><a class="local col6 ref" href="#723" title='temp' data-ref="46temp">temp</a></a> == -1) \</u></td></tr>
<tr><th id="710">710</th><td><u>		hc-&gt;<a class="ref field" href="#ohci_hcd::rh_state" title='ohci_hcd::rh_state' data-ref="ohci_hcd::rh_state">rh_state</a> = <a class="enum" href="#OHCI_RH_HALTED" title='OHCI_RH_HALTED' data-ref="OHCI_RH_HALTED">OHCI_RH_HALTED</a>; \</u></td></tr>
<tr><th id="711">711</th><td><u>	else if (hc-&gt;<a class="ref field" href="#ohci_hcd::flags" title='ohci_hcd::flags' data-ref="ohci_hcd::flags">flags</a> &amp; OHCI_QUIRK_AMD756) \</u></td></tr>
<tr><th id="712">712</th><td><u>		while (<a class="local col1 ref" href="#717" title='temp' data-ref="41temp"><a class="local col6 ref" href="#723" title='temp' data-ref="46temp">temp</a></a> &amp; mask) \</u></td></tr>
<tr><th id="713">713</th><td><u>			<a class="local col1 ref" href="#717" title='temp' data-ref="41temp"><a class="local col6 ref" href="#723" title='temp' data-ref="46temp">temp</a></a> = ohci_readl (hc, &amp;hc-&gt;<a class="ref field" href="#ohci_hcd::regs" title='ohci_hcd::regs' data-ref="ohci_hcd::regs">regs</a>-&gt;<a class="ref field" href="#ohci_regs::roothub" title='ohci_regs::roothub' data-ref="ohci_regs::roothub">roothub</a>.register); \</u></td></tr>
<tr><th id="714">714</th><td><u>	<a class="local col1 ref" href="#717" title='temp' data-ref="41temp"><a class="local col6 ref" href="#723" title='temp' data-ref="46temp">temp</a></a>; })</u></td></tr>
<tr><th id="715">715</th><td></td></tr>
<tr><th id="716">716</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a> <dfn class="decl def fn" id="roothub_a" title='roothub_a' data-ref="roothub_a">roothub_a</dfn> (<b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col0 decl" id="40hc" title='hc' data-type='struct ohci_hcd *' data-ref="40hc">hc</dfn>)</td></tr>
<tr><th id="717">717</th><td>	{ <b>return</b> <a class="macro" href="#707" title="({ u32 temp = _ohci_readl(hc,&amp;hc-&gt;regs-&gt;roothub.a); if (temp == -1) hc-&gt;rh_state = OHCI_RH_HALTED; else if (hc-&gt;flags &amp; 0x01) while (temp &amp; 0xfc0fe000) temp = _ohci_readl(hc,&amp;hc-&gt;regs-&gt;roothub.a); temp; })" data-ref="_M/read_roothub">read_roothub</a> (<a class="local col0 ref" href="#40hc" title='hc' data-ref="40hc">hc</a>, <a class="ref field" href="#ohci_roothub_regs::a" title='ohci_roothub_regs::a' data-ref="ohci_roothub_regs::a">a</a>, <var>0xfc0fe000</var>); }</td></tr>
<tr><th id="718">718</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a> <dfn class="decl def fn" id="roothub_b" title='roothub_b' data-ref="roothub_b">roothub_b</dfn> (<b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col2 decl" id="42hc" title='hc' data-type='struct ohci_hcd *' data-ref="42hc">hc</dfn>)</td></tr>
<tr><th id="719">719</th><td>	{ <b>return</b> <a class="macro" href="#583" title="_ohci_readl(hc,&amp;hc-&gt;regs-&gt;roothub.b)" data-ref="_M/ohci_readl">ohci_readl</a> (<a class="local col2 ref" href="#42hc" title='hc' data-ref="42hc">hc</a>, &amp;<a class="local col2 ref" href="#42hc" title='hc' data-ref="42hc">hc</a>-&gt;<a class="ref field" href="#ohci_hcd::regs" title='ohci_hcd::regs' data-ref="ohci_hcd::regs">regs</a>-&gt;<a class="ref field" href="#ohci_regs::roothub" title='ohci_regs::roothub' data-ref="ohci_regs::roothub">roothub</a>.<a class="ref field" href="#ohci_roothub_regs::b" title='ohci_roothub_regs::b' data-ref="ohci_roothub_regs::b">b</a>); }</td></tr>
<tr><th id="720">720</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a> <dfn class="decl def fn" id="roothub_status" title='roothub_status' data-ref="roothub_status">roothub_status</dfn> (<b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col3 decl" id="43hc" title='hc' data-type='struct ohci_hcd *' data-ref="43hc">hc</dfn>)</td></tr>
<tr><th id="721">721</th><td>	{ <b>return</b> <a class="macro" href="#583" title="_ohci_readl(hc,&amp;hc-&gt;regs-&gt;roothub.status)" data-ref="_M/ohci_readl">ohci_readl</a> (<a class="local col3 ref" href="#43hc" title='hc' data-ref="43hc">hc</a>, &amp;<a class="local col3 ref" href="#43hc" title='hc' data-ref="43hc">hc</a>-&gt;<a class="ref field" href="#ohci_hcd::regs" title='ohci_hcd::regs' data-ref="ohci_hcd::regs">regs</a>-&gt;<a class="ref field" href="#ohci_regs::roothub" title='ohci_regs::roothub' data-ref="ohci_regs::roothub">roothub</a>.<a class="ref field" href="#ohci_roothub_regs::status" title='ohci_roothub_regs::status' data-ref="ohci_roothub_regs::status">status</a>); }</td></tr>
<tr><th id="722">722</th><td><em>static</em> <a class="macro" href="../../../include/linux/compiler-gcc.h.html#95" title="inline __attribute__((always_inline, unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u32" title='u32' data-type='__u32' data-ref="u32">u32</a> <dfn class="decl def fn" id="roothub_portstatus" title='roothub_portstatus' data-ref="roothub_portstatus">roothub_portstatus</dfn> (<b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col4 decl" id="44hc" title='hc' data-type='struct ohci_hcd *' data-ref="44hc">hc</dfn>, <em>int</em> <dfn class="local col5 decl" id="45i" title='i' data-type='int' data-ref="45i">i</dfn>)</td></tr>
<tr><th id="723">723</th><td>	{ <b>return</b> <a class="macro" href="#707" title="({ u32 temp = _ohci_readl(hc,&amp;hc-&gt;regs-&gt;roothub.portstatus [i]); if (temp == -1) hc-&gt;rh_state = OHCI_RH_HALTED; else if (hc-&gt;flags &amp; 0x01) while (temp &amp; 0xffe0fce0) temp = _ohci_readl(hc,&amp;hc-&gt;regs-&gt;roothub.portstatus [i]); temp; })" data-ref="_M/read_roothub">read_roothub</a> (<a class="local col4 ref" href="#44hc" title='hc' data-ref="44hc">hc</a>, <a class="ref field" href="#ohci_roothub_regs::portstatus" title='ohci_roothub_regs::portstatus' data-ref="ohci_roothub_regs::portstatus">portstatus</a> [<a class="local col5 ref" href="#45i" title='i' data-ref="45i">i</a>], <var>0xffe0fce0</var>); }</td></tr>
<tr><th id="724">724</th><td></td></tr>
<tr><th id="725">725</th><td><i>/* Declarations of things exported for use by ohci platform drivers */</i></td></tr>
<tr><th id="726">726</th><td></td></tr>
<tr><th id="727">727</th><td><b>struct</b> <dfn class="type def" id="ohci_driver_overrides" title='ohci_driver_overrides' data-ref="ohci_driver_overrides">ohci_driver_overrides</dfn> {</td></tr>
<tr><th id="728">728</th><td>	<em>const</em> <em>char</em>	*<dfn class="decl field" id="ohci_driver_overrides::product_desc" title='ohci_driver_overrides::product_desc' data-ref="ohci_driver_overrides::product_desc">product_desc</dfn>;</td></tr>
<tr><th id="729">729</th><td>	<a class="typedef" href="../../../include/linux/types.h.html#size_t" title='size_t' data-type='__kernel_size_t' data-ref="size_t">size_t</a>		<dfn class="decl field" id="ohci_driver_overrides::extra_priv_size" title='ohci_driver_overrides::extra_priv_size' data-ref="ohci_driver_overrides::extra_priv_size">extra_priv_size</dfn>;</td></tr>
<tr><th id="730">730</th><td>	<em>int</em>		(*<dfn class="decl field" id="ohci_driver_overrides::reset" title='ohci_driver_overrides::reset' data-ref="ohci_driver_overrides::reset">reset</dfn>)(<b>struct</b> <a class="type" href="../../../include/linux/usb/hcd.h.html#usb_hcd" title='usb_hcd' data-ref="usb_hcd">usb_hcd</a> *<dfn class="local col7 decl" id="47hcd" title='hcd' data-type='struct usb_hcd *' data-ref="47hcd">hcd</dfn>);</td></tr>
<tr><th id="731">731</th><td>};</td></tr>
<tr><th id="732">732</th><td></td></tr>
<tr><th id="733">733</th><td><b>extern</b> <em>void</em>	<a class="decl fn" href="ohci-hcd.c.html#ohci_init_driver" title='ohci_init_driver' data-ref="ohci_init_driver" id="ohci_init_driver">ohci_init_driver</a>(<b>struct</b> <a class="type" href="../../../include/linux/usb/hcd.h.html#hc_driver" title='hc_driver' data-ref="hc_driver">hc_driver</a> *<dfn class="local col8 decl" id="48drv" title='drv' data-type='struct hc_driver *' data-ref="48drv">drv</dfn>,</td></tr>
<tr><th id="734">734</th><td>				<em>const</em> <b>struct</b> <a class="type" href="#ohci_driver_overrides" title='ohci_driver_overrides' data-ref="ohci_driver_overrides">ohci_driver_overrides</a> *<dfn class="local col9 decl" id="49over" title='over' data-type='const struct ohci_driver_overrides *' data-ref="49over">over</dfn>);</td></tr>
<tr><th id="735">735</th><td><b>extern</b> <em>int</em>	<a class="decl fn" href="ohci-hcd.c.html#ohci_restart" title='ohci_restart' data-ref="ohci_restart" id="ohci_restart">ohci_restart</a>(<b>struct</b> <a class="type" href="#ohci_hcd" title='ohci_hcd' data-ref="ohci_hcd">ohci_hcd</a> *<dfn class="local col0 decl" id="50ohci" title='ohci' data-type='struct ohci_hcd *' data-ref="50ohci">ohci</dfn>);</td></tr>
<tr><th id="736">736</th><td><b>extern</b> <em>int</em>	<a class="decl fn" href="ohci-hcd.c.html#ohci_setup" title='ohci_setup' data-ref="ohci_setup" id="ohci_setup">ohci_setup</a>(<b>struct</b> <a class="type" href="../../../include/linux/usb/hcd.h.html#usb_hcd" title='usb_hcd' data-ref="usb_hcd">usb_hcd</a> *<dfn class="local col1 decl" id="51hcd" title='hcd' data-type='struct usb_hcd *' data-ref="51hcd">hcd</dfn>);</td></tr>
<tr><th id="737">737</th><td><b>extern</b> <em>int</em>	<dfn class="decl fn" id="ohci_suspend" title='ohci_suspend' data-ref="ohci_suspend">ohci_suspend</dfn>(<b>struct</b> <a class="type" href="../../../include/linux/usb/hcd.h.html#usb_hcd" title='usb_hcd' data-ref="usb_hcd">usb_hcd</a> *<dfn class="local col2 decl" id="52hcd" title='hcd' data-type='struct usb_hcd *' data-ref="52hcd">hcd</dfn>, <a class="typedef" href="../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="local col3 decl" id="53do_wakeup" title='do_wakeup' data-type='bool' data-ref="53do_wakeup">do_wakeup</dfn>);</td></tr>
<tr><th id="738">738</th><td><b>extern</b> <em>int</em>	<dfn class="decl fn" id="ohci_resume" title='ohci_resume' data-ref="ohci_resume">ohci_resume</dfn>(<b>struct</b> <a class="type" href="../../../include/linux/usb/hcd.h.html#usb_hcd" title='usb_hcd' data-ref="usb_hcd">usb_hcd</a> *<dfn class="local col4 decl" id="54hcd" title='hcd' data-type='struct usb_hcd *' data-ref="54hcd">hcd</dfn>, <a class="typedef" href="../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="local col5 decl" id="55hibernated" title='hibernated' data-type='bool' data-ref="55hibernated">hibernated</dfn>);</td></tr>
<tr><th id="739">739</th><td><b>extern</b> <em>int</em>	<a class="decl fn" href="ohci-hub.c.html#ohci_hub_control" title='ohci_hub_control' data-ref="ohci_hub_control" id="ohci_hub_control">ohci_hub_control</a>(<b>struct</b> <a class="type" href="../../../include/linux/usb/hcd.h.html#usb_hcd" title='usb_hcd' data-ref="usb_hcd">usb_hcd</a>	*<dfn class="local col6 decl" id="56hcd" title='hcd' data-type='struct usb_hcd *' data-ref="56hcd">hcd</dfn>, <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a> <dfn class="local col7 decl" id="57typeReq" title='typeReq' data-type='u16' data-ref="57typeReq">typeReq</dfn>, <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a> <dfn class="local col8 decl" id="58wValue" title='wValue' data-type='u16' data-ref="58wValue">wValue</dfn>,</td></tr>
<tr><th id="740">740</th><td>				 <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a> <dfn class="local col9 decl" id="59wIndex" title='wIndex' data-type='u16' data-ref="59wIndex">wIndex</dfn>, <em>char</em> *<dfn class="local col0 decl" id="60buf" title='buf' data-type='char *' data-ref="60buf">buf</dfn>, <a class="typedef" href="../../../include/asm-generic/int-ll64.h.html#u16" title='u16' data-type='__u16' data-ref="u16">u16</a> <dfn class="local col1 decl" id="61wLength" title='wLength' data-type='u16' data-ref="61wLength">wLength</dfn>);</td></tr>
<tr><th id="741">741</th><td><b>extern</b> <em>int</em>	<a class="decl fn" href="ohci-hub.c.html#ohci_hub_status_data" title='ohci_hub_status_data' data-ref="ohci_hub_status_data" id="ohci_hub_status_data">ohci_hub_status_data</a>(<b>struct</b> <a class="type" href="../../../include/linux/usb/hcd.h.html#usb_hcd" title='usb_hcd' data-ref="usb_hcd">usb_hcd</a> *<dfn class="local col2 decl" id="62hcd" title='hcd' data-type='struct usb_hcd *' data-ref="62hcd">hcd</dfn>, <em>char</em> *<dfn class="local col3 decl" id="63buf" title='buf' data-type='char *' data-ref="63buf">buf</dfn>);</td></tr>
<tr><th id="742">742</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='ohci-hcd.c.html'>linux-4.18.y/drivers/usb/host/ohci-hcd.c</a><br/>Generated on <em>2018-Oct-01</em> from project linux-4.18.y revision <em>linux-4.18.y</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
