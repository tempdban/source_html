<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>vnic_intr.c source code [linux-4.18.y/drivers/net/enic/base/vnic_intr.c] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'linux-4.18.y/drivers/net/enic/base/vnic_intr.c'; var root_path = '../../../../..'; var data_path = '../../../../../../data';</script>
<script src='../../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../..'>linux-4.18.y</a>/<a href='../../..'>drivers</a>/<a href='../..'>net</a>/<a href='..'>enic</a>/<a href='./'>base</a>/<a href='vnic_intr.c.html'>vnic_intr.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/* SPDX-License-Identifier: BSD-3-Clause</i></td></tr>
<tr><th id="2">2</th><td><i> * Copyright 2008-2017 Cisco Systems, Inc.  All rights reserved.</i></td></tr>
<tr><th id="3">3</th><td><i> * Copyright 2007 Nuova Systems, Inc.  All rights reserved.</i></td></tr>
<tr><th id="4">4</th><td><i> */</i></td></tr>
<tr><th id="5">5</th><td></td></tr>
<tr><th id="6">6</th><td><u>#include <a href="vnic_dev.h.html">"vnic_dev.h"</a></u></td></tr>
<tr><th id="7">7</th><td><u>#include <a href="vnic_intr.h.html">"vnic_intr.h"</a></u></td></tr>
<tr><th id="8">8</th><td></td></tr>
<tr><th id="9">9</th><td><em>void</em> <dfn class="decl def fn" id="vnic_intr_free" title='vnic_intr_free' data-ref="vnic_intr_free">vnic_intr_free</dfn>(<b>struct</b> <a class="type" href="vnic_intr.h.html#vnic_intr" title='vnic_intr' data-ref="vnic_intr">vnic_intr</a> *<dfn class="local col6 decl" id="26intr" title='intr' data-type='struct vnic_intr *' data-ref="26intr">intr</dfn>)</td></tr>
<tr><th id="10">10</th><td>{</td></tr>
<tr><th id="11">11</th><td>	<a class="local col6 ref" href="#26intr" title='intr' data-ref="26intr">intr</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr::ctrl" title='vnic_intr::ctrl' data-ref="vnic_intr::ctrl">ctrl</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="12">12</th><td>}</td></tr>
<tr><th id="13">13</th><td></td></tr>
<tr><th id="14">14</th><td><em>int</em> <dfn class="decl def fn" id="vnic_intr_alloc" title='vnic_intr_alloc' data-ref="vnic_intr_alloc">vnic_intr_alloc</dfn>(<b>struct</b> <a class="type" href="vnic_dev.h.html#vnic_dev" title='vnic_dev' data-ref="vnic_dev">vnic_dev</a> *<dfn class="local col7 decl" id="27vdev" title='vdev' data-type='struct vnic_dev *' data-ref="27vdev">vdev</dfn>, <b>struct</b> <a class="type" href="vnic_intr.h.html#vnic_intr" title='vnic_intr' data-ref="vnic_intr">vnic_intr</a> *<dfn class="local col8 decl" id="28intr" title='intr' data-type='struct vnic_intr *' data-ref="28intr">intr</dfn>,</td></tr>
<tr><th id="15">15</th><td>	<em>unsigned</em> <em>int</em> <dfn class="local col9 decl" id="29index" title='index' data-type='unsigned int' data-ref="29index">index</dfn>)</td></tr>
<tr><th id="16">16</th><td>{</td></tr>
<tr><th id="17">17</th><td>	<a class="local col8 ref" href="#28intr" title='intr' data-ref="28intr">intr</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr::index" title='vnic_intr::index' data-ref="vnic_intr::index">index</a> = <a class="local col9 ref" href="#29index" title='index' data-ref="29index">index</a>;</td></tr>
<tr><th id="18">18</th><td>	<a class="local col8 ref" href="#28intr" title='intr' data-ref="28intr">intr</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr::vdev" title='vnic_intr::vdev' data-ref="vnic_intr::vdev">vdev</a> = <a class="local col7 ref" href="#27vdev" title='vdev' data-ref="27vdev">vdev</a>;</td></tr>
<tr><th id="19">19</th><td></td></tr>
<tr><th id="20">20</th><td>	<a class="local col8 ref" href="#28intr" title='intr' data-ref="28intr">intr</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr::ctrl" title='vnic_intr::ctrl' data-ref="vnic_intr::ctrl">ctrl</a> = <a class="ref fn" href="vnic_dev.h.html#vnic_dev_get_res" title='vnic_dev_get_res' data-ref="vnic_dev_get_res">vnic_dev_get_res</a>(<a class="local col7 ref" href="#27vdev" title='vdev' data-ref="27vdev">vdev</a>, <a class="enum" href="vnic_resource.h.html#RES_TYPE_INTR_CTRL" title='RES_TYPE_INTR_CTRL' data-ref="RES_TYPE_INTR_CTRL">RES_TYPE_INTR_CTRL</a>, <a class="local col9 ref" href="#29index" title='index' data-ref="29index">index</a>);</td></tr>
<tr><th id="21">21</th><td>	<b>if</b> (!<a class="local col8 ref" href="#28intr" title='intr' data-ref="28intr">intr</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr::ctrl" title='vnic_intr::ctrl' data-ref="vnic_intr::ctrl">ctrl</a>) {</td></tr>
<tr><th id="22">22</th><td>		<a class="macro" href="../enic_compat.h.html#38" title="rte_log(4U, 5, &quot;PMD&quot; &quot;: &quot; &quot;rte_enic_pmd: &quot; &quot;Failed to hook INTR[%d].ctrl resource\n&quot;, index)" data-ref="_M/pr_err">pr_err</a>(<q>"Failed to hook INTR[%d].ctrl resource\n"</q>, <a class="local col9 ref" href="#29index" title='index' data-ref="29index">index</a>);</td></tr>
<tr><th id="23">23</th><td>		<b>return</b> -<a class="macro" href="../../../../../include/asm-generic/errno-base.h.html#25" title="22" data-ref="_M/EINVAL">EINVAL</a>;</td></tr>
<tr><th id="24">24</th><td>	}</td></tr>
<tr><th id="25">25</th><td></td></tr>
<tr><th id="26">26</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="27">27</th><td>}</td></tr>
<tr><th id="28">28</th><td></td></tr>
<tr><th id="29">29</th><td><em>void</em> <dfn class="decl def fn" id="vnic_intr_init" title='vnic_intr_init' data-ref="vnic_intr_init">vnic_intr_init</dfn>(<b>struct</b> <a class="type" href="vnic_intr.h.html#vnic_intr" title='vnic_intr' data-ref="vnic_intr">vnic_intr</a> *<dfn class="local col0 decl" id="30intr" title='intr' data-type='struct vnic_intr *' data-ref="30intr">intr</dfn>, <a class="typedef" href="../enic_compat.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col1 decl" id="31coalescing_timer" title='coalescing_timer' data-type='u32' data-ref="31coalescing_timer">coalescing_timer</dfn>,</td></tr>
<tr><th id="30">30</th><td>	<em>unsigned</em> <em>int</em> <dfn class="local col2 decl" id="32coalescing_type" title='coalescing_type' data-type='unsigned int' data-ref="32coalescing_type">coalescing_type</dfn>, <em>unsigned</em> <em>int</em> <dfn class="local col3 decl" id="33mask_on_assertion" title='mask_on_assertion' data-type='unsigned int' data-ref="33mask_on_assertion">mask_on_assertion</dfn>)</td></tr>
<tr><th id="31">31</th><td>{</td></tr>
<tr><th id="32">32</th><td>	<a class="ref fn" href="#vnic_intr_coalescing_timer_set" title='vnic_intr_coalescing_timer_set' data-ref="vnic_intr_coalescing_timer_set">vnic_intr_coalescing_timer_set</a>(<a class="local col0 ref" href="#30intr" title='intr' data-ref="30intr">intr</a>, <a class="local col1 ref" href="#31coalescing_timer" title='coalescing_timer' data-ref="31coalescing_timer">coalescing_timer</a>);</td></tr>
<tr><th id="33">33</th><td>	<a class="ref fn" href="../enic_compat.h.html#iowrite32" title='iowrite32' data-ref="iowrite32">iowrite32</a>(<a class="local col2 ref" href="#32coalescing_type" title='coalescing_type' data-ref="32coalescing_type">coalescing_type</a>, &amp;<a class="local col0 ref" href="#30intr" title='intr' data-ref="30intr">intr</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr::ctrl" title='vnic_intr::ctrl' data-ref="vnic_intr::ctrl">ctrl</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr_ctrl::coalescing_type" title='vnic_intr_ctrl::coalescing_type' data-ref="vnic_intr_ctrl::coalescing_type">coalescing_type</a>);</td></tr>
<tr><th id="34">34</th><td>	<a class="ref fn" href="../enic_compat.h.html#iowrite32" title='iowrite32' data-ref="iowrite32">iowrite32</a>(<a class="local col3 ref" href="#33mask_on_assertion" title='mask_on_assertion' data-ref="33mask_on_assertion">mask_on_assertion</a>, &amp;<a class="local col0 ref" href="#30intr" title='intr' data-ref="30intr">intr</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr::ctrl" title='vnic_intr::ctrl' data-ref="vnic_intr::ctrl">ctrl</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr_ctrl::mask_on_assertion" title='vnic_intr_ctrl::mask_on_assertion' data-ref="vnic_intr_ctrl::mask_on_assertion">mask_on_assertion</a>);</td></tr>
<tr><th id="35">35</th><td>	<a class="ref fn" href="../enic_compat.h.html#iowrite32" title='iowrite32' data-ref="iowrite32">iowrite32</a>(<var>0</var>, &amp;<a class="local col0 ref" href="#30intr" title='intr' data-ref="30intr">intr</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr::ctrl" title='vnic_intr::ctrl' data-ref="vnic_intr::ctrl">ctrl</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr_ctrl::int_credits" title='vnic_intr_ctrl::int_credits' data-ref="vnic_intr_ctrl::int_credits">int_credits</a>);</td></tr>
<tr><th id="36">36</th><td>}</td></tr>
<tr><th id="37">37</th><td></td></tr>
<tr><th id="38">38</th><td><em>void</em> <dfn class="decl def fn" id="vnic_intr_coalescing_timer_set" title='vnic_intr_coalescing_timer_set' data-ref="vnic_intr_coalescing_timer_set">vnic_intr_coalescing_timer_set</dfn>(<b>struct</b> <a class="type" href="vnic_intr.h.html#vnic_intr" title='vnic_intr' data-ref="vnic_intr">vnic_intr</a> *<dfn class="local col4 decl" id="34intr" title='intr' data-type='struct vnic_intr *' data-ref="34intr">intr</dfn>,</td></tr>
<tr><th id="39">39</th><td>	<a class="typedef" href="../enic_compat.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32">u32</a> <dfn class="local col5 decl" id="35coalescing_timer" title='coalescing_timer' data-type='u32' data-ref="35coalescing_timer">coalescing_timer</dfn>)</td></tr>
<tr><th id="40">40</th><td>{</td></tr>
<tr><th id="41">41</th><td>	<a class="ref fn" href="../enic_compat.h.html#iowrite32" title='iowrite32' data-ref="iowrite32">iowrite32</a>(<a class="ref fn" href="vnic_dev.h.html#vnic_dev_intr_coal_timer_usec_to_hw" title='vnic_dev_intr_coal_timer_usec_to_hw' data-ref="vnic_dev_intr_coal_timer_usec_to_hw">vnic_dev_intr_coal_timer_usec_to_hw</a>(<a class="local col4 ref" href="#34intr" title='intr' data-ref="34intr">intr</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr::vdev" title='vnic_intr::vdev' data-ref="vnic_intr::vdev">vdev</a>,</td></tr>
<tr><th id="42">42</th><td>		<a class="local col5 ref" href="#35coalescing_timer" title='coalescing_timer' data-ref="35coalescing_timer">coalescing_timer</a>), &amp;<a class="local col4 ref" href="#34intr" title='intr' data-ref="34intr">intr</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr::ctrl" title='vnic_intr::ctrl' data-ref="vnic_intr::ctrl">ctrl</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr_ctrl::coalescing_timer" title='vnic_intr_ctrl::coalescing_timer' data-ref="vnic_intr_ctrl::coalescing_timer">coalescing_timer</a>);</td></tr>
<tr><th id="43">43</th><td>}</td></tr>
<tr><th id="44">44</th><td></td></tr>
<tr><th id="45">45</th><td><em>void</em> <dfn class="decl def fn" id="vnic_intr_clean" title='vnic_intr_clean' data-ref="vnic_intr_clean">vnic_intr_clean</dfn>(<b>struct</b> <a class="type" href="vnic_intr.h.html#vnic_intr" title='vnic_intr' data-ref="vnic_intr">vnic_intr</a> *<dfn class="local col6 decl" id="36intr" title='intr' data-type='struct vnic_intr *' data-ref="36intr">intr</dfn>)</td></tr>
<tr><th id="46">46</th><td>{</td></tr>
<tr><th id="47">47</th><td>	<a class="ref fn" href="../enic_compat.h.html#iowrite32" title='iowrite32' data-ref="iowrite32">iowrite32</a>(<var>0</var>, &amp;<a class="local col6 ref" href="#36intr" title='intr' data-ref="36intr">intr</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr::ctrl" title='vnic_intr::ctrl' data-ref="vnic_intr::ctrl">ctrl</a>-&gt;<a class="ref field" href="vnic_intr.h.html#vnic_intr_ctrl::int_credits" title='vnic_intr_ctrl::int_credits' data-ref="vnic_intr_ctrl::int_credits">int_credits</a>);</td></tr>
<tr><th id="48">48</th><td>}</td></tr>
<tr><th id="49">49</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2018-Oct-01</em> from project linux-4.18.y revision <em>linux-4.18.y</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
