<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>md-bitmap.h source code [linux-4.18.y/drivers/md/md-bitmap.h] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="bitmap,bitmap_counts,bitmap_page,bitmap_state,bitmap_storage,bitmap_super_s "/>
<link rel="stylesheet" href="../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'linux-4.18.y/drivers/md/md-bitmap.h'; var root_path = '../../..'; var data_path = '../../../../data';</script>
<script src='../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../..'>linux-4.18.y</a>/<a href='..'>drivers</a>/<a href='./'>md</a>/<a href='md-bitmap.h.html'>md-bitmap.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/* SPDX-License-Identifier: GPL-2.0 */</i></td></tr>
<tr><th id="2">2</th><td><i>/*</i></td></tr>
<tr><th id="3">3</th><td><i> * bitmap.h: Copyright (C) Peter T. Breuer (ptb@ot.uc3m.es) 2003</i></td></tr>
<tr><th id="4">4</th><td><i> *</i></td></tr>
<tr><th id="5">5</th><td><i> * additions: Copyright (C) 2003-2004, Paul Clements, SteelEye Technology, Inc.</i></td></tr>
<tr><th id="6">6</th><td><i> */</i></td></tr>
<tr><th id="7">7</th><td><u>#<span data-ppcond="7">ifndef</span> <span class="macro" data-ref="_M/BITMAP_H">BITMAP_H</span></u></td></tr>
<tr><th id="8">8</th><td><u>#define <dfn class="macro" id="_M/BITMAP_H" data-ref="_M/BITMAP_H">BITMAP_H</dfn> 1</u></td></tr>
<tr><th id="9">9</th><td></td></tr>
<tr><th id="10">10</th><td><u>#define <dfn class="macro" id="_M/BITMAP_MAJOR_LO" data-ref="_M/BITMAP_MAJOR_LO">BITMAP_MAJOR_LO</dfn> 3</u></td></tr>
<tr><th id="11">11</th><td><i>/* version 4 insists the bitmap is in little-endian order</i></td></tr>
<tr><th id="12">12</th><td><i> * with version 3, it is host-endian which is non-portable</i></td></tr>
<tr><th id="13">13</th><td><i> * Version 5 is currently set only for clustered devices</i></td></tr>
<tr><th id="14">14</th><td><i> */</i></td></tr>
<tr><th id="15">15</th><td><u>#define <dfn class="macro" id="_M/BITMAP_MAJOR_HI" data-ref="_M/BITMAP_MAJOR_HI">BITMAP_MAJOR_HI</dfn> 4</u></td></tr>
<tr><th id="16">16</th><td><u>#define <dfn class="macro" id="_M/BITMAP_MAJOR_CLUSTERED" data-ref="_M/BITMAP_MAJOR_CLUSTERED">BITMAP_MAJOR_CLUSTERED</dfn> 5</u></td></tr>
<tr><th id="17">17</th><td><u>#define	<dfn class="macro" id="_M/BITMAP_MAJOR_HOSTENDIAN" data-ref="_M/BITMAP_MAJOR_HOSTENDIAN">BITMAP_MAJOR_HOSTENDIAN</dfn> 3</u></td></tr>
<tr><th id="18">18</th><td></td></tr>
<tr><th id="19">19</th><td><i>/*</i></td></tr>
<tr><th id="20">20</th><td><i> * in-memory bitmap:</i></td></tr>
<tr><th id="21">21</th><td><i> *</i></td></tr>
<tr><th id="22">22</th><td><i> * Use 16 bit block counters to track pending writes to each "chunk".</i></td></tr>
<tr><th id="23">23</th><td><i> * The 2 high order bits are special-purpose, the first is a flag indicating</i></td></tr>
<tr><th id="24">24</th><td><i> * whether a resync is needed.  The second is a flag indicating whether a</i></td></tr>
<tr><th id="25">25</th><td><i> * resync is active.</i></td></tr>
<tr><th id="26">26</th><td><i> * This means that the counter is actually 14 bits:</i></td></tr>
<tr><th id="27">27</th><td><i> *</i></td></tr>
<tr><th id="28">28</th><td><i> * +--------+--------+------------------------------------------------+</i></td></tr>
<tr><th id="29">29</th><td><i> * | resync | resync |               counter                          |</i></td></tr>
<tr><th id="30">30</th><td><i> * | needed | active |                                                |</i></td></tr>
<tr><th id="31">31</th><td><i> * |  (0-1) |  (0-1) |              (0-16383)                         |</i></td></tr>
<tr><th id="32">32</th><td><i> * +--------+--------+------------------------------------------------+</i></td></tr>
<tr><th id="33">33</th><td><i> *</i></td></tr>
<tr><th id="34">34</th><td><i> * The "resync needed" bit is set when:</i></td></tr>
<tr><th id="35">35</th><td><i> *    a '1' bit is read from storage at startup.</i></td></tr>
<tr><th id="36">36</th><td><i> *    a write request fails on some drives</i></td></tr>
<tr><th id="37">37</th><td><i> *    a resync is aborted on a chunk with 'resync active' set</i></td></tr>
<tr><th id="38">38</th><td><i> * It is cleared (and resync-active set) when a resync starts across all drives</i></td></tr>
<tr><th id="39">39</th><td><i> * of the chunk.</i></td></tr>
<tr><th id="40">40</th><td><i> *</i></td></tr>
<tr><th id="41">41</th><td><i> *</i></td></tr>
<tr><th id="42">42</th><td><i> * The "resync active" bit is set when:</i></td></tr>
<tr><th id="43">43</th><td><i> *    a resync is started on all drives, and resync_needed is set.</i></td></tr>
<tr><th id="44">44</th><td><i> *       resync_needed will be cleared (as long as resync_active wasn't already set).</i></td></tr>
<tr><th id="45">45</th><td><i> * It is cleared when a resync completes.</i></td></tr>
<tr><th id="46">46</th><td><i> *</i></td></tr>
<tr><th id="47">47</th><td><i> * The counter counts pending write requests, plus the on-disk bit.</i></td></tr>
<tr><th id="48">48</th><td><i> * When the counter is '1' and the resync bits are clear, the on-disk</i></td></tr>
<tr><th id="49">49</th><td><i> * bit can be cleared as well, thus setting the counter to 0.</i></td></tr>
<tr><th id="50">50</th><td><i> * When we set a bit, or in the counter (to start a write), if the fields is</i></td></tr>
<tr><th id="51">51</th><td><i> * 0, we first set the disk bit and set the counter to 1.</i></td></tr>
<tr><th id="52">52</th><td><i> *</i></td></tr>
<tr><th id="53">53</th><td><i> * If the counter is 0, the on-disk bit is clear and the stripe is clean</i></td></tr>
<tr><th id="54">54</th><td><i> * Anything that dirties the stripe pushes the counter to 2 (at least)</i></td></tr>
<tr><th id="55">55</th><td><i> * and sets the on-disk bit (lazily).</i></td></tr>
<tr><th id="56">56</th><td><i> * If a periodic sweep find the counter at 2, it is decremented to 1.</i></td></tr>
<tr><th id="57">57</th><td><i> * If the sweep find the counter at 1, the on-disk bit is cleared and the</i></td></tr>
<tr><th id="58">58</th><td><i> * counter goes to zero.</i></td></tr>
<tr><th id="59">59</th><td><i> *</i></td></tr>
<tr><th id="60">60</th><td><i> * Also, we'll hijack the "map" pointer itself and use it as two 16 bit block</i></td></tr>
<tr><th id="61">61</th><td><i> * counters as a fallback when "page" memory cannot be allocated:</i></td></tr>
<tr><th id="62">62</th><td><i> *</i></td></tr>
<tr><th id="63">63</th><td><i> * Normal case (page memory allocated):</i></td></tr>
<tr><th id="64">64</th><td><i> *</i></td></tr>
<tr><th id="65">65</th><td><i> *     page pointer (32-bit)</i></td></tr>
<tr><th id="66">66</th><td><i> *</i></td></tr>
<tr><th id="67">67</th><td><i> *     [ ] ------+</i></td></tr>
<tr><th id="68">68</th><td><i> *               |</i></td></tr>
<tr><th id="69">69</th><td><i> *               +-------&gt; [   ][   ]..[   ] (4096 byte page == 2048 counters)</i></td></tr>
<tr><th id="70">70</th><td><i> *                          c1   c2    c2048</i></td></tr>
<tr><th id="71">71</th><td><i> *</i></td></tr>
<tr><th id="72">72</th><td><i> * Hijacked case (page memory allocation failed):</i></td></tr>
<tr><th id="73">73</th><td><i> *</i></td></tr>
<tr><th id="74">74</th><td><i> *     hijacked page pointer (32-bit)</i></td></tr>
<tr><th id="75">75</th><td><i> *</i></td></tr>
<tr><th id="76">76</th><td><i> *     [		  ][		  ] (no page memory allocated)</i></td></tr>
<tr><th id="77">77</th><td><i> *      counter #1 (16-bit) counter #2 (16-bit)</i></td></tr>
<tr><th id="78">78</th><td><i> *</i></td></tr>
<tr><th id="79">79</th><td><i> */</i></td></tr>
<tr><th id="80">80</th><td></td></tr>
<tr><th id="81">81</th><td><u>#<span data-ppcond="81">ifdef</span> <span class="macro" data-ref="_M/__KERNEL__">__KERNEL__</span></u></td></tr>
<tr><th id="82">82</th><td></td></tr>
<tr><th id="83">83</th><td><u>#define <dfn class="macro" id="_M/PAGE_BITS" data-ref="_M/PAGE_BITS">PAGE_BITS</dfn> (PAGE_SIZE &lt;&lt; 3)</u></td></tr>
<tr><th id="84">84</th><td><u>#define <dfn class="macro" id="_M/PAGE_BIT_SHIFT" data-ref="_M/PAGE_BIT_SHIFT">PAGE_BIT_SHIFT</dfn> (PAGE_SHIFT + 3)</u></td></tr>
<tr><th id="85">85</th><td></td></tr>
<tr><th id="86">86</th><td><b>typedef</b> <a class="typedef" href="../../include/uapi/asm-generic/int-ll64.h.html#__u16" title='__u16' data-type='unsigned short' data-ref="__u16">__u16</a> <dfn class="typedef" id="bitmap_counter_t" title='bitmap_counter_t' data-type='__u16' data-ref="bitmap_counter_t">bitmap_counter_t</dfn>;</td></tr>
<tr><th id="87">87</th><td><u>#define <dfn class="macro" id="_M/COUNTER_BITS" data-ref="_M/COUNTER_BITS">COUNTER_BITS</dfn> 16</u></td></tr>
<tr><th id="88">88</th><td><u>#define <dfn class="macro" id="_M/COUNTER_BIT_SHIFT" data-ref="_M/COUNTER_BIT_SHIFT">COUNTER_BIT_SHIFT</dfn> 4</u></td></tr>
<tr><th id="89">89</th><td><u>#define <dfn class="macro" id="_M/COUNTER_BYTE_SHIFT" data-ref="_M/COUNTER_BYTE_SHIFT">COUNTER_BYTE_SHIFT</dfn> (COUNTER_BIT_SHIFT - 3)</u></td></tr>
<tr><th id="90">90</th><td></td></tr>
<tr><th id="91">91</th><td><u>#define <dfn class="macro" id="_M/NEEDED_MASK" data-ref="_M/NEEDED_MASK">NEEDED_MASK</dfn> ((bitmap_counter_t) (1 &lt;&lt; (COUNTER_BITS - 1)))</u></td></tr>
<tr><th id="92">92</th><td><u>#define <dfn class="macro" id="_M/RESYNC_MASK" data-ref="_M/RESYNC_MASK">RESYNC_MASK</dfn> ((bitmap_counter_t) (1 &lt;&lt; (COUNTER_BITS - 2)))</u></td></tr>
<tr><th id="93">93</th><td><u>#define <dfn class="macro" id="_M/COUNTER_MAX" data-ref="_M/COUNTER_MAX">COUNTER_MAX</dfn> ((bitmap_counter_t) RESYNC_MASK - 1)</u></td></tr>
<tr><th id="94">94</th><td><u>#define <dfn class="macro" id="_M/NEEDED" data-ref="_M/NEEDED">NEEDED</dfn>(x) (((bitmap_counter_t) x) &amp; NEEDED_MASK)</u></td></tr>
<tr><th id="95">95</th><td><u>#define <dfn class="macro" id="_M/RESYNC" data-ref="_M/RESYNC">RESYNC</dfn>(x) (((bitmap_counter_t) x) &amp; RESYNC_MASK)</u></td></tr>
<tr><th id="96">96</th><td><u>#define <dfn class="macro" id="_M/COUNTER" data-ref="_M/COUNTER">COUNTER</dfn>(x) (((bitmap_counter_t) x) &amp; COUNTER_MAX)</u></td></tr>
<tr><th id="97">97</th><td></td></tr>
<tr><th id="98">98</th><td><i>/* how many counters per page? */</i></td></tr>
<tr><th id="99">99</th><td><u>#define <dfn class="macro" id="_M/PAGE_COUNTER_RATIO" data-ref="_M/PAGE_COUNTER_RATIO">PAGE_COUNTER_RATIO</dfn> (PAGE_BITS / COUNTER_BITS)</u></td></tr>
<tr><th id="100">100</th><td><i>/* same, except a shift value for more efficient bitops */</i></td></tr>
<tr><th id="101">101</th><td><u>#define <dfn class="macro" id="_M/PAGE_COUNTER_SHIFT" data-ref="_M/PAGE_COUNTER_SHIFT">PAGE_COUNTER_SHIFT</dfn> (PAGE_BIT_SHIFT - COUNTER_BIT_SHIFT)</u></td></tr>
<tr><th id="102">102</th><td><i>/* same, except a mask value for more efficient bitops */</i></td></tr>
<tr><th id="103">103</th><td><u>#define <dfn class="macro" id="_M/PAGE_COUNTER_MASK" data-ref="_M/PAGE_COUNTER_MASK">PAGE_COUNTER_MASK</dfn>  (PAGE_COUNTER_RATIO - 1)</u></td></tr>
<tr><th id="104">104</th><td></td></tr>
<tr><th id="105">105</th><td><u>#define <dfn class="macro" id="_M/BITMAP_BLOCK_SHIFT" data-ref="_M/BITMAP_BLOCK_SHIFT">BITMAP_BLOCK_SHIFT</dfn> 9</u></td></tr>
<tr><th id="106">106</th><td></td></tr>
<tr><th id="107">107</th><td><u>#<span data-ppcond="81">endif</span></u></td></tr>
<tr><th id="108">108</th><td></td></tr>
<tr><th id="109">109</th><td><i>/*</i></td></tr>
<tr><th id="110">110</th><td><i> * bitmap structures:</i></td></tr>
<tr><th id="111">111</th><td><i> */</i></td></tr>
<tr><th id="112">112</th><td></td></tr>
<tr><th id="113">113</th><td><u>#define <dfn class="macro" id="_M/BITMAP_MAGIC" data-ref="_M/BITMAP_MAGIC">BITMAP_MAGIC</dfn> 0x6d746962</u></td></tr>
<tr><th id="114">114</th><td></td></tr>
<tr><th id="115">115</th><td><i>/* use these for bitmap-&gt;flags and bitmap-&gt;sb-&gt;state bit-fields */</i></td></tr>
<tr><th id="116">116</th><td><b>enum</b> <dfn class="type def" id="bitmap_state" title='bitmap_state' data-ref="bitmap_state">bitmap_state</dfn> {</td></tr>
<tr><th id="117">117</th><td>	<dfn class="enum" id="BITMAP_STALE" title='BITMAP_STALE' data-ref="BITMAP_STALE">BITMAP_STALE</dfn>	   = <var>1</var>,  <i>/* the bitmap file is out of date or had -EIO */</i></td></tr>
<tr><th id="118">118</th><td>	<dfn class="enum" id="BITMAP_WRITE_ERROR" title='BITMAP_WRITE_ERROR' data-ref="BITMAP_WRITE_ERROR">BITMAP_WRITE_ERROR</dfn> = <var>2</var>, <i>/* A write error has occurred */</i></td></tr>
<tr><th id="119">119</th><td>	<dfn class="enum" id="BITMAP_HOSTENDIAN" title='BITMAP_HOSTENDIAN' data-ref="BITMAP_HOSTENDIAN">BITMAP_HOSTENDIAN</dfn>  =<var>15</var>,</td></tr>
<tr><th id="120">120</th><td>};</td></tr>
<tr><th id="121">121</th><td></td></tr>
<tr><th id="122">122</th><td><i>/* the superblock at the front of the bitmap file -- little endian */</i></td></tr>
<tr><th id="123">123</th><td><b>typedef</b> <b>struct</b> <dfn class="type def" id="bitmap_super_s" title='bitmap_super_s' data-ref="bitmap_super_s"><a class="type" href="#bitmap_super_s" title='bitmap_super_s' data-ref="bitmap_super_s">bitmap_super_s</a></dfn> {</td></tr>
<tr><th id="124">124</th><td>	<a class="typedef" href="../../include/uapi/linux/types.h.html#__le32" title='__le32' data-type='__u32' data-ref="__le32">__le32</a> <dfn class="decl field" id="bitmap_super_s::magic" title='bitmap_super_s::magic' data-ref="bitmap_super_s::magic">magic</dfn>;        <i>/*  0  BITMAP_MAGIC */</i></td></tr>
<tr><th id="125">125</th><td>	<a class="typedef" href="../../include/uapi/linux/types.h.html#__le32" title='__le32' data-type='__u32' data-ref="__le32">__le32</a> <dfn class="decl field" id="bitmap_super_s::version" title='bitmap_super_s::version' data-ref="bitmap_super_s::version">version</dfn>;      <i>/*  4  the bitmap major for now, could change... */</i></td></tr>
<tr><th id="126">126</th><td>	<a class="typedef" href="../../include/uapi/asm-generic/int-ll64.h.html#__u8" title='__u8' data-type='unsigned char' data-ref="__u8">__u8</a>  <dfn class="decl field" id="bitmap_super_s::uuid" title='bitmap_super_s::uuid' data-ref="bitmap_super_s::uuid">uuid</dfn>[<var>16</var>];      <i>/*  8  128 bit uuid - must match md device uuid */</i></td></tr>
<tr><th id="127">127</th><td>	<a class="typedef" href="../../include/uapi/linux/types.h.html#__le64" title='__le64' data-type='__u64' data-ref="__le64">__le64</a> <dfn class="decl field" id="bitmap_super_s::events" title='bitmap_super_s::events' data-ref="bitmap_super_s::events">events</dfn>;       <i>/* 24  event counter for the bitmap (1)*/</i></td></tr>
<tr><th id="128">128</th><td>	<a class="typedef" href="../../include/uapi/linux/types.h.html#__le64" title='__le64' data-type='__u64' data-ref="__le64">__le64</a> <dfn class="decl field" id="bitmap_super_s::events_cleared" title='bitmap_super_s::events_cleared' data-ref="bitmap_super_s::events_cleared">events_cleared</dfn>;<i>/*32  event counter when last bit cleared (2) */</i></td></tr>
<tr><th id="129">129</th><td>	<a class="typedef" href="../../include/uapi/linux/types.h.html#__le64" title='__le64' data-type='__u64' data-ref="__le64">__le64</a> <dfn class="decl field" id="bitmap_super_s::sync_size" title='bitmap_super_s::sync_size' data-ref="bitmap_super_s::sync_size">sync_size</dfn>;    <i>/* 40  the size of the md device's sync range(3) */</i></td></tr>
<tr><th id="130">130</th><td>	<a class="typedef" href="../../include/uapi/linux/types.h.html#__le32" title='__le32' data-type='__u32' data-ref="__le32">__le32</a> <dfn class="decl field" id="bitmap_super_s::state" title='bitmap_super_s::state' data-ref="bitmap_super_s::state">state</dfn>;        <i>/* 48  bitmap state information */</i></td></tr>
<tr><th id="131">131</th><td>	<a class="typedef" href="../../include/uapi/linux/types.h.html#__le32" title='__le32' data-type='__u32' data-ref="__le32">__le32</a> <dfn class="decl field" id="bitmap_super_s::chunksize" title='bitmap_super_s::chunksize' data-ref="bitmap_super_s::chunksize">chunksize</dfn>;    <i>/* 52  the bitmap chunk size in bytes */</i></td></tr>
<tr><th id="132">132</th><td>	<a class="typedef" href="../../include/uapi/linux/types.h.html#__le32" title='__le32' data-type='__u32' data-ref="__le32">__le32</a> <dfn class="decl field" id="bitmap_super_s::daemon_sleep" title='bitmap_super_s::daemon_sleep' data-ref="bitmap_super_s::daemon_sleep">daemon_sleep</dfn>; <i>/* 56  seconds between disk flushes */</i></td></tr>
<tr><th id="133">133</th><td>	<a class="typedef" href="../../include/uapi/linux/types.h.html#__le32" title='__le32' data-type='__u32' data-ref="__le32">__le32</a> <dfn class="decl field" id="bitmap_super_s::write_behind" title='bitmap_super_s::write_behind' data-ref="bitmap_super_s::write_behind">write_behind</dfn>; <i>/* 60  number of outstanding write-behind writes */</i></td></tr>
<tr><th id="134">134</th><td>	<a class="typedef" href="../../include/uapi/linux/types.h.html#__le32" title='__le32' data-type='__u32' data-ref="__le32">__le32</a> <dfn class="decl field" id="bitmap_super_s::sectors_reserved" title='bitmap_super_s::sectors_reserved' data-ref="bitmap_super_s::sectors_reserved">sectors_reserved</dfn>; <i>/* 64 number of 512-byte sectors that are</i></td></tr>
<tr><th id="135">135</th><td><i>				  * reserved for the bitmap. */</i></td></tr>
<tr><th id="136">136</th><td>	<a class="typedef" href="../../include/uapi/linux/types.h.html#__le32" title='__le32' data-type='__u32' data-ref="__le32">__le32</a> <dfn class="decl field" id="bitmap_super_s::nodes" title='bitmap_super_s::nodes' data-ref="bitmap_super_s::nodes">nodes</dfn>;        <i>/* 68 the maximum number of nodes in cluster. */</i></td></tr>
<tr><th id="137">137</th><td>	<a class="typedef" href="../../include/uapi/asm-generic/int-ll64.h.html#__u8" title='__u8' data-type='unsigned char' data-ref="__u8">__u8</a> <dfn class="decl field" id="bitmap_super_s::cluster_name" title='bitmap_super_s::cluster_name' data-ref="bitmap_super_s::cluster_name">cluster_name</dfn>[<var>64</var>]; <i>/* 72 cluster name to which this md belongs */</i></td></tr>
<tr><th id="138">138</th><td>	<a class="typedef" href="../../include/uapi/asm-generic/int-ll64.h.html#__u8" title='__u8' data-type='unsigned char' data-ref="__u8">__u8</a>  <dfn class="decl field" id="bitmap_super_s::pad" title='bitmap_super_s::pad' data-ref="bitmap_super_s::pad">pad</dfn>[<var>256</var> - <var>136</var>]; <i>/* set to zero */</i></td></tr>
<tr><th id="139">139</th><td>} <dfn class="typedef" id="bitmap_super_t" title='bitmap_super_t' data-type='struct bitmap_super_s' data-ref="bitmap_super_t">bitmap_super_t</dfn>;</td></tr>
<tr><th id="140">140</th><td></td></tr>
<tr><th id="141">141</th><td><i>/* notes:</i></td></tr>
<tr><th id="142">142</th><td><i> * (1) This event counter is updated before the eventcounter in the md superblock</i></td></tr>
<tr><th id="143">143</th><td><i> *    When a bitmap is loaded, it is only accepted if this event counter is equal</i></td></tr>
<tr><th id="144">144</th><td><i> *    to, or one greater than, the event counter in the superblock.</i></td></tr>
<tr><th id="145">145</th><td><i> * (2) This event counter is updated when the other one is *if*and*only*if* the</i></td></tr>
<tr><th id="146">146</th><td><i> *    array is not degraded.  As bits are not cleared when the array is degraded,</i></td></tr>
<tr><th id="147">147</th><td><i> *    this represents the last time that any bits were cleared.</i></td></tr>
<tr><th id="148">148</th><td><i> *    If a device is being added that has an event count with this value or</i></td></tr>
<tr><th id="149">149</th><td><i> *    higher, it is accepted as conforming to the bitmap.</i></td></tr>
<tr><th id="150">150</th><td><i> * (3)This is the number of sectors represented by the bitmap, and is the range that</i></td></tr>
<tr><th id="151">151</th><td><i> *    resync happens across.  For raid1 and raid5/6 it is the size of individual</i></td></tr>
<tr><th id="152">152</th><td><i> *    devices.  For raid10 it is the size of the array.</i></td></tr>
<tr><th id="153">153</th><td><i> */</i></td></tr>
<tr><th id="154">154</th><td></td></tr>
<tr><th id="155">155</th><td><u>#<span data-ppcond="155">ifdef</span> <span class="macro" data-ref="_M/__KERNEL__">__KERNEL__</span></u></td></tr>
<tr><th id="156">156</th><td></td></tr>
<tr><th id="157">157</th><td><i>/* the in-memory bitmap is represented by bitmap_pages */</i></td></tr>
<tr><th id="158">158</th><td><b>struct</b> <dfn class="type def" id="bitmap_page" title='bitmap_page' data-ref="bitmap_page">bitmap_page</dfn> {</td></tr>
<tr><th id="159">159</th><td>	<i>/*</i></td></tr>
<tr><th id="160">160</th><td><i>	 * map points to the actual memory page</i></td></tr>
<tr><th id="161">161</th><td><i>	 */</i></td></tr>
<tr><th id="162">162</th><td>	<em>char</em> *<dfn class="decl field" id="bitmap_page::map" title='bitmap_page::map' data-ref="bitmap_page::map">map</dfn>;</td></tr>
<tr><th id="163">163</th><td>	<i>/*</i></td></tr>
<tr><th id="164">164</th><td><i>	 * in emergencies (when map cannot be alloced), hijack the map</i></td></tr>
<tr><th id="165">165</th><td><i>	 * pointer and use it as two counters itself</i></td></tr>
<tr><th id="166">166</th><td><i>	 */</i></td></tr>
<tr><th id="167">167</th><td>	<em>unsigned</em> <em>int</em> <dfn class="decl field" id="bitmap_page::hijacked" title='bitmap_page::hijacked' data-ref="bitmap_page::hijacked">hijacked</dfn>:<var>1</var>;</td></tr>
<tr><th id="168">168</th><td>	<i>/*</i></td></tr>
<tr><th id="169">169</th><td><i>	 * If any counter in this page is '1' or '2' - and so could be</i></td></tr>
<tr><th id="170">170</th><td><i>	 * cleared then that page is marked as 'pending'</i></td></tr>
<tr><th id="171">171</th><td><i>	 */</i></td></tr>
<tr><th id="172">172</th><td>	<em>unsigned</em> <em>int</em> <dfn class="decl field" id="bitmap_page::pending" title='bitmap_page::pending' data-ref="bitmap_page::pending">pending</dfn>:<var>1</var>;</td></tr>
<tr><th id="173">173</th><td>	<i>/*</i></td></tr>
<tr><th id="174">174</th><td><i>	 * count of dirty bits on the page</i></td></tr>
<tr><th id="175">175</th><td><i>	 */</i></td></tr>
<tr><th id="176">176</th><td>	<em>unsigned</em> <em>int</em>  <dfn class="decl field" id="bitmap_page::count" title='bitmap_page::count' data-ref="bitmap_page::count">count</dfn>:<var>30</var>;</td></tr>
<tr><th id="177">177</th><td>};</td></tr>
<tr><th id="178">178</th><td></td></tr>
<tr><th id="179">179</th><td><i>/* the main bitmap structure - one per mddev */</i></td></tr>
<tr><th id="180">180</th><td><b>struct</b> <dfn class="type def" id="bitmap" title='bitmap' data-ref="bitmap">bitmap</dfn> {</td></tr>
<tr><th id="181">181</th><td></td></tr>
<tr><th id="182">182</th><td>	<b>struct</b> <dfn class="type def" id="bitmap_counts" title='bitmap_counts' data-ref="bitmap_counts"><a class="type" href="#bitmap_counts" title='bitmap_counts' data-ref="bitmap_counts">bitmap_counts</a></dfn> {</td></tr>
<tr><th id="183">183</th><td>		<a class="typedef" href="../../include/linux/spinlock_types.h.html#spinlock_t" title='spinlock_t' data-type='struct spinlock' data-ref="spinlock_t">spinlock_t</a> <dfn class="decl field" id="bitmap_counts::lock" title='bitmap_counts::lock' data-ref="bitmap_counts::lock">lock</dfn>;</td></tr>
<tr><th id="184">184</th><td>		<b>struct</b> <a class="type" href="#bitmap_page" title='bitmap_page' data-ref="bitmap_page">bitmap_page</a> *<dfn class="decl field" id="bitmap_counts::bp" title='bitmap_counts::bp' data-ref="bitmap_counts::bp">bp</dfn>;</td></tr>
<tr><th id="185">185</th><td>		<em>unsigned</em> <em>long</em> <dfn class="decl field" id="bitmap_counts::pages" title='bitmap_counts::pages' data-ref="bitmap_counts::pages">pages</dfn>;		<i>/* total number of pages</i></td></tr>
<tr><th id="186">186</th><td><i>						 * in the bitmap */</i></td></tr>
<tr><th id="187">187</th><td>		<em>unsigned</em> <em>long</em> <dfn class="decl field" id="bitmap_counts::missing_pages" title='bitmap_counts::missing_pages' data-ref="bitmap_counts::missing_pages">missing_pages</dfn>;	<i>/* number of pages</i></td></tr>
<tr><th id="188">188</th><td><i>						 * not yet allocated */</i></td></tr>
<tr><th id="189">189</th><td>		<em>unsigned</em> <em>long</em> <dfn class="decl field" id="bitmap_counts::chunkshift" title='bitmap_counts::chunkshift' data-ref="bitmap_counts::chunkshift">chunkshift</dfn>;	<i>/* chunksize = 2^chunkshift</i></td></tr>
<tr><th id="190">190</th><td><i>						 * (for bitops) */</i></td></tr>
<tr><th id="191">191</th><td>		<em>unsigned</em> <em>long</em> <dfn class="decl field" id="bitmap_counts::chunks" title='bitmap_counts::chunks' data-ref="bitmap_counts::chunks">chunks</dfn>;		<i>/* Total number of data</i></td></tr>
<tr><th id="192">192</th><td><i>						 * chunks for the array */</i></td></tr>
<tr><th id="193">193</th><td>	} <dfn class="decl field" id="bitmap::counts" title='bitmap::counts' data-ref="bitmap::counts">counts</dfn>;</td></tr>
<tr><th id="194">194</th><td></td></tr>
<tr><th id="195">195</th><td>	<b>struct</b> <a class="type" href="md.h.html#mddev" title='mddev' data-ref="mddev">mddev</a> *<dfn class="decl field" id="bitmap::mddev" title='bitmap::mddev' data-ref="bitmap::mddev">mddev</dfn>; <i>/* the md device that the bitmap is for */</i></td></tr>
<tr><th id="196">196</th><td></td></tr>
<tr><th id="197">197</th><td>	<a class="typedef" href="../../include/uapi/asm-generic/int-ll64.h.html#__u64" title='__u64' data-type='unsigned long long' data-ref="__u64">__u64</a>	<dfn class="decl field" id="bitmap::events_cleared" title='bitmap::events_cleared' data-ref="bitmap::events_cleared">events_cleared</dfn>;</td></tr>
<tr><th id="198">198</th><td>	<em>int</em> <dfn class="decl field" id="bitmap::need_sync" title='bitmap::need_sync' data-ref="bitmap::need_sync">need_sync</dfn>;</td></tr>
<tr><th id="199">199</th><td></td></tr>
<tr><th id="200">200</th><td>	<b>struct</b> <dfn class="type def" id="bitmap_storage" title='bitmap_storage' data-ref="bitmap_storage"><a class="type" href="#bitmap_storage" title='bitmap_storage' data-ref="bitmap_storage">bitmap_storage</a></dfn> {</td></tr>
<tr><th id="201">201</th><td>		<b>struct</b> <a class="type" href="../../include/linux/fs.h.html#file" title='file' data-ref="file">file</a> *<dfn class="decl field" id="bitmap_storage::file" title='bitmap_storage::file' data-ref="bitmap_storage::file">file</dfn>;		<i>/* backing disk file */</i></td></tr>
<tr><th id="202">202</th><td>		<b>struct</b> <a class="type" href="../../include/linux/mm_types.h.html#page" title='page' data-ref="page">page</a> *<dfn class="decl field" id="bitmap_storage::sb_page" title='bitmap_storage::sb_page' data-ref="bitmap_storage::sb_page">sb_page</dfn>;		<i>/* cached copy of the bitmap</i></td></tr>
<tr><th id="203">203</th><td><i>						 * file superblock */</i></td></tr>
<tr><th id="204">204</th><td>		<b>struct</b> <a class="type" href="../../include/linux/mm_types.h.html#page" title='page' data-ref="page">page</a> **<dfn class="decl field" id="bitmap_storage::filemap" title='bitmap_storage::filemap' data-ref="bitmap_storage::filemap">filemap</dfn>;		<i>/* list of cache pages for</i></td></tr>
<tr><th id="205">205</th><td><i>						 * the file */</i></td></tr>
<tr><th id="206">206</th><td>		<em>unsigned</em> <em>long</em> *<dfn class="decl field" id="bitmap_storage::filemap_attr" title='bitmap_storage::filemap_attr' data-ref="bitmap_storage::filemap_attr">filemap_attr</dfn>;	<i>/* attributes associated</i></td></tr>
<tr><th id="207">207</th><td><i>						 * w/ filemap pages */</i></td></tr>
<tr><th id="208">208</th><td>		<em>unsigned</em> <em>long</em> <dfn class="decl field" id="bitmap_storage::file_pages" title='bitmap_storage::file_pages' data-ref="bitmap_storage::file_pages">file_pages</dfn>;	<i>/* number of pages in the file*/</i></td></tr>
<tr><th id="209">209</th><td>		<em>unsigned</em> <em>long</em> <dfn class="decl field" id="bitmap_storage::bytes" title='bitmap_storage::bytes' data-ref="bitmap_storage::bytes">bytes</dfn>;		<i>/* total bytes in the bitmap */</i></td></tr>
<tr><th id="210">210</th><td>	} <dfn class="decl field" id="bitmap::storage" title='bitmap::storage' data-ref="bitmap::storage">storage</dfn>;</td></tr>
<tr><th id="211">211</th><td></td></tr>
<tr><th id="212">212</th><td>	<em>unsigned</em> <em>long</em> <dfn class="decl field" id="bitmap::flags" title='bitmap::flags' data-ref="bitmap::flags">flags</dfn>;</td></tr>
<tr><th id="213">213</th><td></td></tr>
<tr><th id="214">214</th><td>	<em>int</em> <dfn class="decl field" id="bitmap::allclean" title='bitmap::allclean' data-ref="bitmap::allclean">allclean</dfn>;</td></tr>
<tr><th id="215">215</th><td></td></tr>
<tr><th id="216">216</th><td>	<a class="typedef" href="../../include/linux/types.h.html#atomic_t" title='atomic_t' data-type='struct atomic_t' data-ref="atomic_t">atomic_t</a> <dfn class="decl field" id="bitmap::behind_writes" title='bitmap::behind_writes' data-ref="bitmap::behind_writes">behind_writes</dfn>;</td></tr>
<tr><th id="217">217</th><td>	<em>unsigned</em> <em>long</em> <dfn class="decl field" id="bitmap::behind_writes_used" title='bitmap::behind_writes_used' data-ref="bitmap::behind_writes_used">behind_writes_used</dfn>; <i>/* highest actual value at runtime */</i></td></tr>
<tr><th id="218">218</th><td></td></tr>
<tr><th id="219">219</th><td>	<i>/*</i></td></tr>
<tr><th id="220">220</th><td><i>	 * the bitmap daemon - periodically wakes up and sweeps the bitmap</i></td></tr>
<tr><th id="221">221</th><td><i>	 * file, cleaning up bits and flushing out pages to disk as necessary</i></td></tr>
<tr><th id="222">222</th><td><i>	 */</i></td></tr>
<tr><th id="223">223</th><td>	<em>unsigned</em> <em>long</em> <dfn class="decl field" id="bitmap::daemon_lastrun" title='bitmap::daemon_lastrun' data-ref="bitmap::daemon_lastrun">daemon_lastrun</dfn>; <i>/* jiffies of last run */</i></td></tr>
<tr><th id="224">224</th><td>	<em>unsigned</em> <em>long</em> <dfn class="decl field" id="bitmap::last_end_sync" title='bitmap::last_end_sync' data-ref="bitmap::last_end_sync">last_end_sync</dfn>; <i>/* when we lasted called end_sync to</i></td></tr>
<tr><th id="225">225</th><td><i>				      * update bitmap with resync progress */</i></td></tr>
<tr><th id="226">226</th><td></td></tr>
<tr><th id="227">227</th><td>	<a class="typedef" href="../../include/linux/types.h.html#atomic_t" title='atomic_t' data-type='struct atomic_t' data-ref="atomic_t">atomic_t</a> <dfn class="decl field" id="bitmap::pending_writes" title='bitmap::pending_writes' data-ref="bitmap::pending_writes">pending_writes</dfn>; <i>/* pending writes to the bitmap file */</i></td></tr>
<tr><th id="228">228</th><td>	<a class="typedef" href="../../include/linux/wait.h.html#wait_queue_head_t" title='wait_queue_head_t' data-type='struct wait_queue_head' data-ref="wait_queue_head_t">wait_queue_head_t</a> <dfn class="decl field" id="bitmap::write_wait" title='bitmap::write_wait' data-ref="bitmap::write_wait">write_wait</dfn>;</td></tr>
<tr><th id="229">229</th><td>	<a class="typedef" href="../../include/linux/wait.h.html#wait_queue_head_t" title='wait_queue_head_t' data-type='struct wait_queue_head' data-ref="wait_queue_head_t">wait_queue_head_t</a> <dfn class="decl field" id="bitmap::overflow_wait" title='bitmap::overflow_wait' data-ref="bitmap::overflow_wait">overflow_wait</dfn>;</td></tr>
<tr><th id="230">230</th><td>	<a class="typedef" href="../../include/linux/wait.h.html#wait_queue_head_t" title='wait_queue_head_t' data-type='struct wait_queue_head' data-ref="wait_queue_head_t">wait_queue_head_t</a> <dfn class="decl field" id="bitmap::behind_wait" title='bitmap::behind_wait' data-ref="bitmap::behind_wait">behind_wait</dfn>;</td></tr>
<tr><th id="231">231</th><td></td></tr>
<tr><th id="232">232</th><td>	<b>struct</b> <a class="type" href="../../include/linux/kernfs.h.html#kernfs_node" title='kernfs_node' data-ref="kernfs_node">kernfs_node</a> *<dfn class="decl field" id="bitmap::sysfs_can_clear" title='bitmap::sysfs_can_clear' data-ref="bitmap::sysfs_can_clear">sysfs_can_clear</dfn>;</td></tr>
<tr><th id="233">233</th><td>	<em>int</em> <dfn class="decl field" id="bitmap::cluster_slot" title='bitmap::cluster_slot' data-ref="bitmap::cluster_slot">cluster_slot</dfn>;		<i>/* Slot offset for clustered env */</i></td></tr>
<tr><th id="234">234</th><td>};</td></tr>
<tr><th id="235">235</th><td></td></tr>
<tr><th id="236">236</th><td><i>/* the bitmap API */</i></td></tr>
<tr><th id="237">237</th><td></td></tr>
<tr><th id="238">238</th><td><i>/* these are used only by md/bitmap */</i></td></tr>
<tr><th id="239">239</th><td><b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="decl fn" id="bitmap_create" title='bitmap_create' data-ref="bitmap_create">bitmap_create</dfn>(<b>struct</b> <a class="type" href="md.h.html#mddev" title='mddev' data-ref="mddev">mddev</a> *<dfn class="local col8 decl" id="218mddev" title='mddev' data-type='struct mddev *' data-ref="218mddev">mddev</dfn>, <em>int</em> <dfn class="local col9 decl" id="219slot" title='slot' data-type='int' data-ref="219slot">slot</dfn>);</td></tr>
<tr><th id="240">240</th><td><em>int</em> <dfn class="decl fn" id="bitmap_load" title='bitmap_load' data-ref="bitmap_load">bitmap_load</dfn>(<b>struct</b> <a class="type" href="md.h.html#mddev" title='mddev' data-ref="mddev">mddev</a> *<dfn class="local col0 decl" id="220mddev" title='mddev' data-type='struct mddev *' data-ref="220mddev">mddev</dfn>);</td></tr>
<tr><th id="241">241</th><td><em>void</em> <dfn class="decl fn" id="bitmap_flush" title='bitmap_flush' data-ref="bitmap_flush">bitmap_flush</dfn>(<b>struct</b> <a class="type" href="md.h.html#mddev" title='mddev' data-ref="mddev">mddev</a> *<dfn class="local col1 decl" id="221mddev" title='mddev' data-type='struct mddev *' data-ref="221mddev">mddev</dfn>);</td></tr>
<tr><th id="242">242</th><td><em>void</em> <dfn class="decl fn" id="bitmap_destroy" title='bitmap_destroy' data-ref="bitmap_destroy">bitmap_destroy</dfn>(<b>struct</b> <a class="type" href="md.h.html#mddev" title='mddev' data-ref="mddev">mddev</a> *<dfn class="local col2 decl" id="222mddev" title='mddev' data-type='struct mddev *' data-ref="222mddev">mddev</dfn>);</td></tr>
<tr><th id="243">243</th><td></td></tr>
<tr><th id="244">244</th><td><em>void</em> <dfn class="decl fn" id="bitmap_print_sb" title='bitmap_print_sb' data-ref="bitmap_print_sb">bitmap_print_sb</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col3 decl" id="223bitmap" title='bitmap' data-type='struct bitmap *' data-ref="223bitmap">bitmap</dfn>);</td></tr>
<tr><th id="245">245</th><td><em>void</em> <dfn class="decl fn" id="bitmap_update_sb" title='bitmap_update_sb' data-ref="bitmap_update_sb">bitmap_update_sb</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col4 decl" id="224bitmap" title='bitmap' data-type='struct bitmap *' data-ref="224bitmap">bitmap</dfn>);</td></tr>
<tr><th id="246">246</th><td><em>void</em> <dfn class="decl fn" id="bitmap_status" title='bitmap_status' data-ref="bitmap_status">bitmap_status</dfn>(<b>struct</b> <a class="type" href="../../include/linux/seq_file.h.html#seq_file" title='seq_file' data-ref="seq_file">seq_file</a> *<dfn class="local col5 decl" id="225seq" title='seq' data-type='struct seq_file *' data-ref="225seq">seq</dfn>, <b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col6 decl" id="226bitmap" title='bitmap' data-type='struct bitmap *' data-ref="226bitmap">bitmap</dfn>);</td></tr>
<tr><th id="247">247</th><td></td></tr>
<tr><th id="248">248</th><td><em>int</em>  <dfn class="decl fn" id="bitmap_setallbits" title='bitmap_setallbits' data-ref="bitmap_setallbits">bitmap_setallbits</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col7 decl" id="227bitmap" title='bitmap' data-type='struct bitmap *' data-ref="227bitmap">bitmap</dfn>);</td></tr>
<tr><th id="249">249</th><td><em>void</em> <dfn class="decl fn" id="bitmap_write_all" title='bitmap_write_all' data-ref="bitmap_write_all">bitmap_write_all</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col8 decl" id="228bitmap" title='bitmap' data-type='struct bitmap *' data-ref="228bitmap">bitmap</dfn>);</td></tr>
<tr><th id="250">250</th><td></td></tr>
<tr><th id="251">251</th><td><em>void</em> <dfn class="decl fn" id="bitmap_dirty_bits" title='bitmap_dirty_bits' data-ref="bitmap_dirty_bits">bitmap_dirty_bits</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col9 decl" id="229bitmap" title='bitmap' data-type='struct bitmap *' data-ref="229bitmap">bitmap</dfn>, <em>unsigned</em> <em>long</em> <dfn class="local col0 decl" id="230s" title='s' data-type='unsigned long' data-ref="230s">s</dfn>, <em>unsigned</em> <em>long</em> <dfn class="local col1 decl" id="231e" title='e' data-type='unsigned long' data-ref="231e">e</dfn>);</td></tr>
<tr><th id="252">252</th><td></td></tr>
<tr><th id="253">253</th><td><i>/* these are exported */</i></td></tr>
<tr><th id="254">254</th><td><em>int</em> <dfn class="decl fn" id="bitmap_startwrite" title='bitmap_startwrite' data-ref="bitmap_startwrite">bitmap_startwrite</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col2 decl" id="232bitmap" title='bitmap' data-type='struct bitmap *' data-ref="232bitmap">bitmap</dfn>, <a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> <dfn class="local col3 decl" id="233offset" title='offset' data-type='sector_t' data-ref="233offset">offset</dfn>,</td></tr>
<tr><th id="255">255</th><td>			<em>unsigned</em> <em>long</em> <dfn class="local col4 decl" id="234sectors" title='sectors' data-type='unsigned long' data-ref="234sectors">sectors</dfn>, <em>int</em> <dfn class="local col5 decl" id="235behind" title='behind' data-type='int' data-ref="235behind">behind</dfn>);</td></tr>
<tr><th id="256">256</th><td><em>void</em> <dfn class="decl fn" id="bitmap_endwrite" title='bitmap_endwrite' data-ref="bitmap_endwrite">bitmap_endwrite</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col6 decl" id="236bitmap" title='bitmap' data-type='struct bitmap *' data-ref="236bitmap">bitmap</dfn>, <a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> <dfn class="local col7 decl" id="237offset" title='offset' data-type='sector_t' data-ref="237offset">offset</dfn>,</td></tr>
<tr><th id="257">257</th><td>			<em>unsigned</em> <em>long</em> <dfn class="local col8 decl" id="238sectors" title='sectors' data-type='unsigned long' data-ref="238sectors">sectors</dfn>, <em>int</em> <dfn class="local col9 decl" id="239success" title='success' data-type='int' data-ref="239success">success</dfn>, <em>int</em> <dfn class="local col0 decl" id="240behind" title='behind' data-type='int' data-ref="240behind">behind</dfn>);</td></tr>
<tr><th id="258">258</th><td><em>int</em> <dfn class="decl fn" id="bitmap_start_sync" title='bitmap_start_sync' data-ref="bitmap_start_sync">bitmap_start_sync</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col1 decl" id="241bitmap" title='bitmap' data-type='struct bitmap *' data-ref="241bitmap">bitmap</dfn>, <a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> <dfn class="local col2 decl" id="242offset" title='offset' data-type='sector_t' data-ref="242offset">offset</dfn>, <a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> *<dfn class="local col3 decl" id="243blocks" title='blocks' data-type='sector_t *' data-ref="243blocks">blocks</dfn>, <em>int</em> <dfn class="local col4 decl" id="244degraded" title='degraded' data-type='int' data-ref="244degraded">degraded</dfn>);</td></tr>
<tr><th id="259">259</th><td><em>void</em> <dfn class="decl fn" id="bitmap_end_sync" title='bitmap_end_sync' data-ref="bitmap_end_sync">bitmap_end_sync</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col5 decl" id="245bitmap" title='bitmap' data-type='struct bitmap *' data-ref="245bitmap">bitmap</dfn>, <a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> <dfn class="local col6 decl" id="246offset" title='offset' data-type='sector_t' data-ref="246offset">offset</dfn>, <a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> *<dfn class="local col7 decl" id="247blocks" title='blocks' data-type='sector_t *' data-ref="247blocks">blocks</dfn>, <em>int</em> <dfn class="local col8 decl" id="248aborted" title='aborted' data-type='int' data-ref="248aborted">aborted</dfn>);</td></tr>
<tr><th id="260">260</th><td><em>void</em> <dfn class="decl fn" id="bitmap_close_sync" title='bitmap_close_sync' data-ref="bitmap_close_sync">bitmap_close_sync</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col9 decl" id="249bitmap" title='bitmap' data-type='struct bitmap *' data-ref="249bitmap">bitmap</dfn>);</td></tr>
<tr><th id="261">261</th><td><em>void</em> <dfn class="decl fn" id="bitmap_cond_end_sync" title='bitmap_cond_end_sync' data-ref="bitmap_cond_end_sync">bitmap_cond_end_sync</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col0 decl" id="250bitmap" title='bitmap' data-type='struct bitmap *' data-ref="250bitmap">bitmap</dfn>, <a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> <dfn class="local col1 decl" id="251sector" title='sector' data-type='sector_t' data-ref="251sector">sector</dfn>, <a class="typedef" href="../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="local col2 decl" id="252force" title='force' data-type='bool' data-ref="252force">force</dfn>);</td></tr>
<tr><th id="262">262</th><td><em>void</em> <dfn class="decl fn" id="bitmap_sync_with_cluster" title='bitmap_sync_with_cluster' data-ref="bitmap_sync_with_cluster">bitmap_sync_with_cluster</dfn>(<b>struct</b> <a class="type" href="md.h.html#mddev" title='mddev' data-ref="mddev">mddev</a> *<dfn class="local col3 decl" id="253mddev" title='mddev' data-type='struct mddev *' data-ref="253mddev">mddev</dfn>,</td></tr>
<tr><th id="263">263</th><td>			      <a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> <dfn class="local col4 decl" id="254old_lo" title='old_lo' data-type='sector_t' data-ref="254old_lo">old_lo</dfn>, <a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> <dfn class="local col5 decl" id="255old_hi" title='old_hi' data-type='sector_t' data-ref="255old_hi">old_hi</dfn>,</td></tr>
<tr><th id="264">264</th><td>			      <a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> <dfn class="local col6 decl" id="256new_lo" title='new_lo' data-type='sector_t' data-ref="256new_lo">new_lo</dfn>, <a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> <dfn class="local col7 decl" id="257new_hi" title='new_hi' data-type='sector_t' data-ref="257new_hi">new_hi</dfn>);</td></tr>
<tr><th id="265">265</th><td></td></tr>
<tr><th id="266">266</th><td><em>void</em> <dfn class="decl fn" id="bitmap_unplug" title='bitmap_unplug' data-ref="bitmap_unplug">bitmap_unplug</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col8 decl" id="258bitmap" title='bitmap' data-type='struct bitmap *' data-ref="258bitmap">bitmap</dfn>);</td></tr>
<tr><th id="267">267</th><td><em>void</em> <dfn class="decl fn" id="bitmap_daemon_work" title='bitmap_daemon_work' data-ref="bitmap_daemon_work">bitmap_daemon_work</dfn>(<b>struct</b> <a class="type" href="md.h.html#mddev" title='mddev' data-ref="mddev">mddev</a> *<dfn class="local col9 decl" id="259mddev" title='mddev' data-type='struct mddev *' data-ref="259mddev">mddev</dfn>);</td></tr>
<tr><th id="268">268</th><td></td></tr>
<tr><th id="269">269</th><td><em>int</em> <dfn class="decl fn" id="bitmap_resize" title='bitmap_resize' data-ref="bitmap_resize">bitmap_resize</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col0 decl" id="260bitmap" title='bitmap' data-type='struct bitmap *' data-ref="260bitmap">bitmap</dfn>, <a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> <dfn class="local col1 decl" id="261blocks" title='blocks' data-type='sector_t' data-ref="261blocks">blocks</dfn>,</td></tr>
<tr><th id="270">270</th><td>		  <em>int</em> <dfn class="local col2 decl" id="262chunksize" title='chunksize' data-type='int' data-ref="262chunksize">chunksize</dfn>, <em>int</em> <dfn class="local col3 decl" id="263init" title='init' data-type='int' data-ref="263init">init</dfn>);</td></tr>
<tr><th id="271">271</th><td><b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="decl fn" id="get_bitmap_from_slot" title='get_bitmap_from_slot' data-ref="get_bitmap_from_slot">get_bitmap_from_slot</dfn>(<b>struct</b> <a class="type" href="md.h.html#mddev" title='mddev' data-ref="mddev">mddev</a> *<dfn class="local col4 decl" id="264mddev" title='mddev' data-type='struct mddev *' data-ref="264mddev">mddev</dfn>, <em>int</em> <dfn class="local col5 decl" id="265slot" title='slot' data-type='int' data-ref="265slot">slot</dfn>);</td></tr>
<tr><th id="272">272</th><td><em>int</em> <dfn class="decl fn" id="bitmap_copy_from_slot" title='bitmap_copy_from_slot' data-ref="bitmap_copy_from_slot">bitmap_copy_from_slot</dfn>(<b>struct</b> <a class="type" href="md.h.html#mddev" title='mddev' data-ref="mddev">mddev</a> *<dfn class="local col6 decl" id="266mddev" title='mddev' data-type='struct mddev *' data-ref="266mddev">mddev</dfn>, <em>int</em> <dfn class="local col7 decl" id="267slot" title='slot' data-type='int' data-ref="267slot">slot</dfn>,</td></tr>
<tr><th id="273">273</th><td>				<a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> *<dfn class="local col8 decl" id="268lo" title='lo' data-type='sector_t *' data-ref="268lo">lo</dfn>, <a class="typedef" href="../../include/linux/types.h.html#sector_t" title='sector_t' data-type='unsigned long' data-ref="sector_t">sector_t</a> *<dfn class="local col9 decl" id="269hi" title='hi' data-type='sector_t *' data-ref="269hi">hi</dfn>, <a class="typedef" href="../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool">bool</a> <dfn class="local col0 decl" id="270clear_bits" title='clear_bits' data-type='bool' data-ref="270clear_bits">clear_bits</dfn>);</td></tr>
<tr><th id="274">274</th><td><em>void</em> <dfn class="decl fn" id="bitmap_free" title='bitmap_free' data-ref="bitmap_free">bitmap_free</dfn>(<b>struct</b> <a class="type" href="#bitmap" title='bitmap' data-ref="bitmap">bitmap</a> *<dfn class="local col1 decl" id="271bitmap" title='bitmap' data-type='struct bitmap *' data-ref="271bitmap">bitmap</dfn>);</td></tr>
<tr><th id="275">275</th><td><em>void</em> <dfn class="decl fn" id="bitmap_wait_behind_writes" title='bitmap_wait_behind_writes' data-ref="bitmap_wait_behind_writes">bitmap_wait_behind_writes</dfn>(<b>struct</b> <a class="type" href="md.h.html#mddev" title='mddev' data-ref="mddev">mddev</a> *<dfn class="local col2 decl" id="272mddev" title='mddev' data-type='struct mddev *' data-ref="272mddev">mddev</dfn>);</td></tr>
<tr><th id="276">276</th><td><u>#<span data-ppcond="155">endif</span></u></td></tr>
<tr><th id="277">277</th><td></td></tr>
<tr><th id="278">278</th><td><u>#<span data-ppcond="7">endif</span></u></td></tr>
<tr><th id="279">279</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='dm-raid.c.html'>linux-4.18.y/drivers/md/dm-raid.c</a><br/>Generated on <em>2018-Oct-01</em> from project linux-4.18.y revision <em>linux-4.18.y</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
